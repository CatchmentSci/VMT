<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of VMT</title>
  <meta name="keywords" content="VMT">
  <meta name="description" content="--- THE VELOCITY MAPPING TOOLBOX ---">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- menu.html VMT -->
<h1>VMT
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>--- THE VELOCITY MAPPING TOOLBOX ---</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function varargout = VMT(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> --- THE VELOCITY MAPPING TOOLBOX ---
 
 VMT is a Matlab-based software for processing and visualizing ADCP data
 collected along transects in rivers or other bodies of water. VMT allows
 rapid processing, visualization, and analysis of a range of ADCP datasets
 and includes utilities to export ADCP data to files compatible with
 ArcGIS, Tecplot, and Google Earth. The software can be used to explore
 patterns of three-dimensional fluid motion through several methods for
 calculation of secondary flows (e.g. Rhoads and Kenworthy, 1998; Lane et
 al., 2000). The software also includes capabilities for analyzing the
 acoustic backscatter and bathymetric data from the ADCP. A user-friendly
 graphical user interface (GUI) enhances program functionality and
 provides ready access to two- and three- dimensional plotting functions,
 allowing rapid display and interrogation of velocity, backscatter, and
 bathymetry data.
 
 CITATION: 
 Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L., Rhoads, B.
 L., Oberg, K. A., Best, J. L., Mueller, D. S., Johnson, K. K. and Riley,
 J. D. (2013), Velocity Mapping Toolbox (VMT): a processing and
 visualization suite for moving-vessel ADCP measurements. Earth Surf.
 Process. Landforms. doi: 10.1002/esp.3367

__________________________________________________________________________
 P.R. Jackson, U.S. Geological Survey, Illinois Water Science Center
 (pjackson@usgs.gov)

 Code contributed by D. Parsons, D. Mueller, J. Czuba, and F. Engel.
__________________________________________________________________________</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="VMT_BuildTecplotFile.html" class="code" title="function VMT_BuildTecplotFile(V,savefile)">VMT_BuildTecplotFile</a>	Takes the processed data structure and writes a TecPlot ASCII data file.</li><li><a href="VMT_BuildTecplotFile_XSBathy.html" class="code" title="function VMT_BuildTecplot_XSBathy(V,savefile)">VMT_BuildTecplotFile_XSBathy</a>	Takes the processed data structure and writes a TecPlot ASCII data file</li><li><a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>	Computes the layer averaged mean of y over the depth range.</li><li><a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wsedata,saveaux)">VMT_MBBathy</a>	Computes the multibeam bathymetry from the four beams of the ADCP</li><li><a href="VMT_MeanXS2GE_3D.html" class="code" title="function VMT_MeanXS2GE_3D(A,V,pathstr,filestr,vscale,voffset)">VMT_MeanXS2GE_3D</a>	Outputs the mean cross section (3-D) from VMT to Google Earth (saved as a</li><li><a href="VMT_OverlayDOQQ.html" class="code" title="function [guiprefs,log_text] = VMT_OverlayDOQQ(guiprefs,varargin)">VMT_OverlayDOQQ</a>	Prompts the user for a geotiff DOQQ (USGS) and overlays the aerial image</li><li><a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>	This function plots a plan view of the measurement region with a vector</li><li><a href="VMT_PlotShiptracks.html" class="code" title="function hf = VMT_PlotShiptracks(A,V,z,setends,hf)">VMT_PlotShiptracks</a>	Plots the shiptracks, and interpolated grid in the VMT GUI axes. Also</li><li><a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>	Plots a shoreline map given the shoreline data structure 'Map' (see</li><li><a href="VMT_PlotXSCont.html" class="code" title="function [z,A,V,zmin,zmax,log_text,fig_contour_handle] = VMT_PlotXSCont(z,A,V,var,exag,plot_english)">VMT_PlotXSCont</a>	Plots contours for the variable 'var' within the mean cross section given</li><li><a href="VMT_PlotXSContQuiver.html" class="code" title="function [z,A,V,log_text] = VMT_PlotXSContQuiver(z,A,V,var,sf,exag,qspchorz,qspcvert,secvecvar,vvelcomp,plot_english,varargin)">VMT_PlotXSContQuiver</a>	This function plots the the contour plot (mean XS) for the variable 'var'</li><li><a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>	This function is a driver to preprocess the transects data.  Several</li><li><a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>	Driver program to process multiple transects at a single cross-section</li><li><a href="VMT_ReadFiles.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles(zPathName,zFileName)">VMT_ReadFiles</a>	Read in multiple ASCII output files from WinRiver or WinRiverII.</li><li><a href="VMT_ReadFiles_SonTek.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles_SonTek(zPathName,zFileName)">VMT_ReadFiles_SonTek</a>	Read in multiple MAT output files from SonTek RSL v1.5-3.60.</li><li><a href="VMT_SaveFigs.html" class="code" title="function VMT_SaveFigs(pathname,to_export,figure_style)">VMT_SaveFigs</a>	Saves the figures (specified by fignums) from VMT as .PNG or EPS files</li><li><a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>	This routine smooths all processed variables in V struct. By default is</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="#_sub1" class="code">function VMT_OpeningFcn(hObject, eventdata, handles, varargin)</a></li><li><a href="#_sub2" class="code">function varargout = VMT_OutputFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub3" class="code">function figure1_ResizeFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub4" class="code">function figure1_CloseRequestFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub5" class="code">function menuFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub6" class="code">function menuOpen_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub7" class="code">function menuOpenASCII_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub8" class="code">function menuOpenMAT_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub9" class="code">function menuSave_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub10" class="code">function menuSaveMAT_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub11" class="code">function menuSaveTecplot_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub12" class="code">function menuSaveKMZFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub13" class="code">function menuExport_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub14" class="code">function menuFigureExportsettings_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub15" class="code">function menuPrintFormat_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub16" class="code">function menuPresentationFormat_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub17" class="code">function menuGraphicsRenderer_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub18" class="code">function menuOpenGL_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub19" class="code">function menuPainters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub20" class="code">function menuZbuffer_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub21" class="code">function menuExportFigures_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub22" class="code">function menuBathymetryExportSettings_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub23" class="code">function menuExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub24" class="code">function menuSaveANVFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub25" class="code">function menuSaveExcel_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub26" class="code">function menuParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub27" class="code">function menuProcessingParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub28" class="code">function menuUnitDischargeCorrection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub29" class="code">function menuPlottingParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub30" class="code">function menuUnits_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub31" class="code">function menuMetric_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub32" class="code">function menuEnglish_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub33" class="code">function menuSetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub34" class="code">function menuCrossSectionEndpointAutomatic_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub35" class="code">function menuCrossSectionEndpointManual_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub36" class="code">function menuPlotStyle_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub37" class="code">function menuStylePrint_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub38" class="code">function menuStylePresentation_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub39" class="code">function menuKMZVerticalOffset_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub40" class="code">function menuBathymetryParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub41" class="code">function menuTools_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub42" class="code">function menuASCII2GIS_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub43" class="code">function menuASCII2KML_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub44" class="code">function menuOpenBatchMode_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub45" class="code">function menuHelp_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub46" class="code">function menuUsersGuide_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub47" class="code">function menuFunctionLibrary_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub48" class="code">function menuCheckForUpdates_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub49" class="code">function menuAbout_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub50" class="code">function loadDataCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub51" class="code">function saveDataCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub52" class="code">function saveBathymetryCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub53" class="code">function plottingParametersCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub54" class="code">function processingParametersCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub55" class="code">function shiptracksPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub56" class="code">function planviewPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub57" class="code">function crosssectionPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub58" class="code">function SaveMATFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub59" class="code">function SaveTecplotFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub60" class="code">function SaveGoogleEarthFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub61" class="code">function ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub62" class="code">function BeamAngle_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub63" class="code">function MagneticVariation_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub64" class="code">function WSE_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub65" class="code">function OutputAuxiliaryData_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub66" class="code">function DepthRangeMin_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub67" class="code">function DepthRangeMax_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub68" class="code">function VectorScalePlanView_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub69" class="code">function VectorSpacingPlanview_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub70" class="code">function SmoothingWindowSize_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub71" class="code">function DisplayShoreline_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub72" class="code">function AddBackground_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub73" class="code">function PlotPlanView_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub74" class="code">function HorizontalGridNodeSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub75" class="code">function VerticalGridNodeSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub76" class="code">function SetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub77" class="code">function PlotShiptracks_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub78" class="code">function Contour_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub79" class="code">function VerticalExaggeration_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub80" class="code">function VectorScaleCrossSection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub81" class="code">function HorizontalVectorSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub82" class="code">function VerticalVectorSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub83" class="code">function HorizontalSmoothingWindow_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub84" class="code">function VerticalSmoothingWindow_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub85" class="code">function PlotSecondaryFlowVectors_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub86" class="code">function SecondaryFlowVectorVariable_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub87" class="code">function IncludeVerticalVelocity_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub88" class="code">function PlotCrossSection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub89" class="code">function ClearLog_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub90" class="code">function SaveLog_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub91" class="code">function handles = buildToolbar(handles)</a></li><li><a href="#_sub92" class="code">function load_prefs(hfigure)</a></li><li><a href="#_sub93" class="code">function store_prefs(hfigure,pref)</a></li><li><a href="#_sub94" class="code">function initGUI(handles)</a></li><li><a href="#_sub95" class="code">function set_enable(handles,enable_state)</a></li><li><a href="#_sub96" class="code">function [english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style] =</a></li><li><a href="#_sub97" class="code">function dialogUnits(hObject,eventdata,handles,the_units)</a></li><li><a href="#_sub98" class="code">function dialogEnpoints(hObject,eventdata,handles,the_endpoints)</a></li><li><a href="#_sub99" class="code">function dialogPlotStyle(hObject,eventdata,handles,the_style)</a></li><li><a href="#_sub100" class="code">function dialogOK(hObject,eventdata,h_OK)</a></li><li><a href="#_sub101" class="code">function dialogCancel(hObject,eventdata,handles)</a></li><li><a href="#_sub102" class="code">function dialogCloseReq(hObject,eventdata,h_OK)</a></li><li><a href="#_sub103" class="code">function [beam_angle,magnetic_variation,wse,output_auxiliary_data] = exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,hf)</a></li><li><a href="#_sub104" class="code">function dialogExportSettings(hObject,eventdata,handles)</a></li><li><a href="#_sub105" class="code">function [selected_figures] = openFiguresDialog(figure_names,hf)</a></li><li><a href="#_sub106" class="code">function dialogSelectFigures(hObject,eventdata,handles)</a></li><li><a href="#_sub107" class="code">function icons = getIcons</a></li><li><a href="#_sub108" class="code">function guiparams = createGUIparams</a></li><li><a href="#_sub109" class="code">function ShiptracksZoom_Callback(obj,evd,handles)</a></li><li><a href="#_sub110" class="code">function ShiptracksPan_Callback(obj,evd,handles)</a></li><li><a href="#_sub111" class="code">function figure1_WindowKeyPressFcn(hObject, eventdata, handles)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = VMT(varargin)</a>
0002 <span class="comment">% --- THE VELOCITY MAPPING TOOLBOX ---</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% VMT is a Matlab-based software for processing and visualizing ADCP data</span>
0005 <span class="comment">% collected along transects in rivers or other bodies of water. VMT allows</span>
0006 <span class="comment">% rapid processing, visualization, and analysis of a range of ADCP datasets</span>
0007 <span class="comment">% and includes utilities to export ADCP data to files compatible with</span>
0008 <span class="comment">% ArcGIS, Tecplot, and Google Earth. The software can be used to explore</span>
0009 <span class="comment">% patterns of three-dimensional fluid motion through several methods for</span>
0010 <span class="comment">% calculation of secondary flows (e.g. Rhoads and Kenworthy, 1998; Lane et</span>
0011 <span class="comment">% al., 2000). The software also includes capabilities for analyzing the</span>
0012 <span class="comment">% acoustic backscatter and bathymetric data from the ADCP. A user-friendly</span>
0013 <span class="comment">% graphical user interface (GUI) enhances program functionality and</span>
0014 <span class="comment">% provides ready access to two- and three- dimensional plotting functions,</span>
0015 <span class="comment">% allowing rapid display and interrogation of velocity, backscatter, and</span>
0016 <span class="comment">% bathymetry data.</span>
0017 <span class="comment">%</span>
0018 <span class="comment">% CITATION:</span>
0019 <span class="comment">% Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L., Rhoads, B.</span>
0020 <span class="comment">% L., Oberg, K. A., Best, J. L., Mueller, D. S., Johnson, K. K. and Riley,</span>
0021 <span class="comment">% J. D. (2013), Velocity Mapping Toolbox (VMT): a processing and</span>
0022 <span class="comment">% visualization suite for moving-vessel ADCP measurements. Earth Surf.</span>
0023 <span class="comment">% Process. Landforms. doi: 10.1002/esp.3367</span>
0024 <span class="comment">%</span>
0025 <span class="comment">%__________________________________________________________________________</span>
0026 <span class="comment">% P.R. Jackson, U.S. Geological Survey, Illinois Water Science Center</span>
0027 <span class="comment">% (pjackson@usgs.gov)</span>
0028 <span class="comment">%</span>
0029 <span class="comment">% Code contributed by D. Parsons, D. Mueller, J. Czuba, and F. Engel.</span>
0030 <span class="comment">%__________________________________________________________________________</span>
0031 
0032 <span class="comment">% Begin initialization code - DO NOT EDIT</span>
0033 gui_Singleton = 1;
0034 gui_State = struct(<span class="string">'gui_Name'</span>,       mfilename, <span class="keyword">...</span>
0035     <span class="string">'gui_Singleton'</span>,  gui_Singleton, <span class="keyword">...</span>
0036     <span class="string">'gui_OpeningFcn'</span>, @<a href="#_sub1" class="code" title="subfunction VMT_OpeningFcn(hObject, eventdata, handles, varargin)">VMT_OpeningFcn</a>, <span class="keyword">...</span>
0037     <span class="string">'gui_OutputFcn'</span>,  @<a href="#_sub2" class="code" title="subfunction varargout = VMT_OutputFcn(hObject, eventdata, handles)">VMT_OutputFcn</a>, <span class="keyword">...</span>
0038     <span class="string">'gui_LayoutFcn'</span>,  [] , <span class="keyword">...</span>
0039     <span class="string">'gui_Callback'</span>,   []);
0040 <span class="keyword">if</span> nargin &amp;&amp; ischar(varargin{1})
0041     gui_State.gui_Callback = str2func(varargin{1});
0042 <span class="keyword">end</span>
0043 
0044 <span class="comment">% If ERROR, write a txt file with the error dump info</span>
0045 <span class="keyword">try</span>
0046 <span class="keyword">if</span> nargout
0047     [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
0048 <span class="keyword">else</span>
0049     gui_mainfcn(gui_State, varargin{:});
0050 <span class="keyword">end</span>
0051 
0052 <span class="keyword">catch</span> err
0053     <span class="keyword">if</span> isdeployed
0054         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
0055             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
0056         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
0057             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
0058             errLogFileName},<span class="keyword">...</span>
0059             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
0060             <span class="string">'error'</span>);
0061         fid = fopen(errLogFileName,<span class="string">'W'</span>);
0062         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
0063         fclose(fid);
0064         rethrow(err)
0065     <span class="keyword">else</span>
0066         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
0067             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
0068             <span class="string">'error'</span>);
0069         rethrow(err);
0070     <span class="keyword">end</span>
0071 <span class="keyword">end</span>
0072 <span class="comment">% End initialization code - DO NOT EDIT</span>
0073 
0074 <span class="comment">%#ok&lt;*DEFNU,*INUSL,*INUSD&gt;</span>
0075 
0076 <span class="comment">% --- Executes just before VMT is made visible.</span>
0077 <a name="_sub1" href="#_subfunctions" class="code">function VMT_OpeningFcn(hObject, eventdata, handles, varargin)</a>
0078 <span class="comment">% This function has no output args, see OutputFcn.</span>
0079 <span class="comment">% hObject    handle to figure</span>
0080 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0081 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0082 <span class="comment">% varargin   command line arguments to VMT (see VARARGIN)</span>
0083 
0084 <span class="comment">% Choose default command line output for VMT</span>
0085 handles.output = hObject;
0086 
0087 <span class="comment">% Build the GUI toolbar:</span>
0088 <span class="comment">% ----------------------</span>
0089 handles = <a href="#_sub91" class="code" title="subfunction handles = buildToolbar(handles)">buildToolbar</a>(handles);
0090 
0091 <span class="comment">% Ensure path to utils &amp; docs is available</span>
0092 <span class="comment">% ----------------------------------------</span>
0093 <span class="keyword">if</span> ~isdeployed
0094     filesep = <span class="string">'\'</span>; <span class="comment">% windows</span>
0095     utilspath = [pwd filesep <span class="string">'utils'</span>];
0096     docspath  = [pwd filesep <span class="string">'doc'</span>];
0097     toolspath = [pwd filesep <span class="string">'tools'</span>];
0098     addpath(utilspath,docspath,toolspath)
0099 <span class="keyword">end</span>
0100 
0101 <span class="comment">% Update handles structure</span>
0102 <span class="comment">% ------------------------</span>
0103 guidata(hObject, handles);
0104 
0105 <span class="comment">% Load the GUI preferences:</span>
0106 <span class="comment">% -------------------------</span>
0107 <a href="#_sub92" class="code" title="subfunction load_prefs(hfigure)">load_prefs</a>(handles.figure1)
0108 
0109 <span class="comment">% Initialize the GUI parameters:</span>
0110 <span class="comment">% ------------------------------</span>
0111 guiparams = <a href="#_sub108" class="code" title="subfunction guiparams = createGUIparams">createGUIparams</a>;
0112 guiparams.vmt_version = <span class="string">'v4.06'</span>;
0113 
0114 <span class="comment">% Draw the VMT Background</span>
0115 <span class="comment">% -----------------</span>
0116 pos = get(handles.figure1,<span class="string">'position'</span>);
0117 axes(handles.VMTBackground);
0118 <span class="comment">% if ~isdeployed %isempty(dir(fullfile(matlabroot,'toolbox','images')))</span>
0119     X = imread(<span class="string">'VMT_Background.png'</span>);
0120     imdisp(X,<span class="string">'size'</span>,[pos(4) pos(3)]) <span class="comment">% Avoids problems with users not having Image Processing TB</span>
0121 <span class="comment">% else</span>
0122 <span class="comment">%     X = imread('VMT_Background.png');</span>
0123 <span class="comment">%     X = imresize(X, [pos(4) pos(3)]);</span>
0124 <span class="comment">%     X = uint8(X);</span>
0125 <span class="comment">%     imshow(X,'Border','tight')</span>
0126 <span class="comment">% end</span>
0127 uistack(handles.VMTBackground,<span class="string">'bottom'</span>)
0128 
0129 <span class="comment">% Store the application data:</span>
0130 <span class="comment">% ---------------------------</span>
0131 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0132 <span class="comment">% guiprefs = getappdata(handles.figure1,'guiprefs');</span>
0133 <span class="comment">% setappdata(handles.figure1,'guiprefs',guiprefs)</span>
0134 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'runcounter'</span>)
0135 
0136 <span class="comment">% Auto-check for updates</span>
0137 <span class="comment">% ----------------------</span>
0138 thres = 20; 
0139 runcounter = getpref(<span class="string">'VMT'</span>,<span class="string">'runcounter'</span>);
0140 time_to_check = (mod(runcounter,thres)==0);
0141 <span class="keyword">if</span> time_to_check
0142     <a href="#_sub48" class="code" title="subfunction menuCheckForUpdates_Callback(hObject, eventdata, handles)">menuCheckForUpdates_Callback</a>(hObject, eventdata, handles)
0143 <span class="keyword">end</span>
0144 
0145 <span class="comment">% Initialize the GUI:</span>
0146 <span class="comment">% -------------------</span>
0147 <a href="#_sub94" class="code" title="subfunction initGUI(handles)">initGUI</a>(handles)
0148 <a href="#_sub95" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'init'</span>)
0149 <span class="comment">% set(handles.GraphicsExportPanel,'Visible','off')</span>
0150 <span class="comment">% set(handles.ProcessingPanel,'Visible','off')</span>
0151 pos = get(handles.figure1,<span class="string">'Position'</span>);
0152 <span class="comment">% pos(3) = 545;</span>
0153 <span class="comment">% set(handles.figure1,'Position',pos)</span>
0154 movegui(handles.figure1,<span class="string">'center'</span>)
0155 set(handles.figure1,<span class="string">'Resize'</span>,<span class="string">'on'</span>)
0156 
0157 <span class="comment">% Allow access to the VMT Main GUI info by other sub-GUIs by pushing it to</span>
0158 <span class="comment">% the root</span>
0159 setappdata(0  , <span class="string">'hVMTgui'</span>    , gcf);
0160 
0161 <span class="comment">% UIWAIT makes VMT wait for user response (see UIRESUME)</span>
0162 <span class="comment">% uiwait(handles.figure1);</span>
0163 <span class="comment">% [EOF] VMT_OpeningFcn</span>
0164 
0165 
0166 <span class="comment">% --- Outputs from this function are returned to the command line.</span>
0167 <a name="_sub2" href="#_subfunctions" class="code">function varargout = VMT_OutputFcn(hObject, eventdata, handles)</a>
0168 <span class="comment">% varargout  cell array for returning output args (see VARARGOUT);</span>
0169 <span class="comment">% hObject    handle to figure</span>
0170 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0171 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0172 
0173 <span class="comment">% Get default command line output from handles structure</span>
0174 varargout{1} = handles.output;
0175 <span class="comment">% [EOF] VMT_OutputFcn</span>
0176 
0177 <span class="comment">% --- Executes when figure1 is resized.</span>
0178 <a name="_sub3" href="#_subfunctions" class="code">function figure1_ResizeFcn(hObject, eventdata, handles)</a>
0179 
0180 <span class="comment">% Draw the VMT Background</span>
0181 <span class="comment">% -----------------</span>
0182 pos = get(handles.figure1,<span class="string">'position'</span>);
0183 axes(handles.VMTBackground);
0184 <span class="comment">% if ~isdeployed %isempty(dir(fullfile(matlabroot,'toolbox','images')))</span>
0185     X = imread(<span class="string">'VMT_Background.png'</span>);
0186     imdisp(X,<span class="string">'size'</span>,[pos(4) pos(3)]) <span class="comment">% Avoids problems with users not having Image Processing TB</span>
0187 <span class="comment">% else</span>
0188 <span class="comment">%     X = imread('VMT_Background.png');</span>
0189 <span class="comment">%     X = imresize(X, [pos(4) pos(3)]);</span>
0190 <span class="comment">%     X = uint8(X);</span>
0191 <span class="comment">%     imshow(X,'Border','tight')</span>
0192 <span class="comment">% end</span>
0193 uistack(handles.VMTBackground,<span class="string">'bottom'</span>)
0194 
0195 <span class="comment">% --- Executes when user attempts to close figure1.</span>
0196 <a name="_sub4" href="#_subfunctions" class="code">function figure1_CloseRequestFcn(hObject, eventdata, handles)</a>
0197 <span class="comment">% hObject    handle to figure1 (see GCBO)</span>
0198 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0199 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0200 
0201 <span class="comment">% Hint: delete(hObject) closes the figure</span>
0202 who_called = get(hObject,<span class="string">'tag'</span>);
0203 close_button = questdlg(<span class="keyword">...</span>
0204     <span class="string">'You are about to exit VMT. Any unsaved work will be lost. Are you sure?'</span>,<span class="keyword">...</span>
0205     <span class="string">'Exit VMT?'</span>,<span class="string">'No'</span>);
0206 <span class="keyword">switch</span> close_button
0207     <span class="keyword">case</span> <span class="string">'Yes'</span>
0208         closereq
0209         close all hidden
0210     <span class="keyword">otherwise</span>
0211         <span class="keyword">return</span>
0212 <span class="keyword">end</span>
0213 <span class="comment">% [EOF] figure1_CloseRequestFcn</span>
0214 
0215 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
0216 <span class="comment">% MENU BAR CALLBACKS %</span>
0217 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
0218 
0219 <span class="comment">% --------------------------------------------------------------------</span>
0220 <a name="_sub5" href="#_subfunctions" class="code">function menuFile_Callback(hObject, eventdata, handles)</a>
0221 <span class="comment">% Empty</span>
0222 
0223 <span class="comment">% --------------------------------------------------------------------</span>
0224 <a name="_sub6" href="#_subfunctions" class="code">function menuOpen_Callback(hObject, eventdata, handles)</a>
0225 <span class="comment">% Empty</span>
0226 
0227 <span class="comment">% --------------------------------------------------------------------</span>
0228 <a name="_sub7" href="#_subfunctions" class="code">function menuOpenASCII_Callback(hObject, eventdata, handles)</a>
0229 <a href="#_sub50" class="code" title="subfunction loadDataCallback(hObject, eventdata, handles)">loadDataCallback</a>(hObject, eventdata, handles)
0230 <span class="comment">% [EOF] menuOpenASCII_Callback</span>
0231 
0232 <span class="comment">% --------------------------------------------------------------------</span>
0233 <a name="_sub8" href="#_subfunctions" class="code">function menuOpenMAT_Callback(hObject, eventdata, handles)</a>
0234 
0235 <span class="comment">% Get the Application data:</span>
0236 <span class="comment">% -------------------------</span>
0237 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0238 guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0239 
0240 <span class="comment">% Ask the user to select files:</span>
0241 <span class="comment">% -----------------------------</span>
0242 <span class="comment">% current_file = fullfile(guiparams.data_folder,guiparams.data_files{1});</span>
0243 <span class="comment">% current_file = fullfile(guiprefs.mat_path,guiprefs.mat_file);</span>
0244 <span class="keyword">if</span> iscell(guiprefs.mat_file)
0245     uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file{1});
0246 <span class="keyword">else</span>
0247     uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file);
0248 <span class="keyword">end</span>
0249 [filename,pathname] = <span class="keyword">...</span>
0250     uigetfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-files (*.mat)'</span>}, <span class="keyword">...</span>
0251     <span class="string">'Select MAT File'</span>, <span class="keyword">...</span>
0252     uifile, <span class="string">'MultiSelect'</span>,<span class="string">'on'</span>);
0253 
0254 <span class="keyword">if</span> ischar(filename) <span class="comment">% Single MAT file loaded</span>
0255     <span class="comment">% Load the data:</span>
0256     <span class="comment">% --------------</span>
0257     vars = load(fullfile(pathname,filename));
0258     
0259     <span class="comment">% Make sure the selected file is a valid file:</span>
0260     <span class="comment">% --------------------------------------------</span>
0261     varnames = fieldnames(vars);
0262     <span class="keyword">if</span> isequal(sort(varnames),{<span class="string">'A'</span> <span class="string">'Map'</span> <span class="string">'V'</span> <span class="string">'z'</span>}')
0263         guiparams.mat_path = pathname;
0264         guiparams.mat_file = filename;
0265         guiparams.z = vars.z;
0266         guiparams.A = vars.A;
0267         guiparams.V = vars.V;
0268         
0269         <span class="comment">% Update the preferences:</span>
0270         <span class="comment">% -----------------------</span>
0271         guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0272         guiprefs.mat_path = pathname;
0273         guiprefs.mat_file = filename;
0274         setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0275         <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
0276                      
0277         <span class="comment">% Re-store the Application Data:</span>
0278         <span class="comment">% ------------------------------</span>
0279         setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0280         
0281         <span class="comment">% Update the GUI:</span>
0282         <span class="comment">% ---------------</span>
0283         set(handles.HorizontalGridNodeSpacing,<span class="string">'String'</span>,vars.A(1).hgns)
0284         <a href="#_sub95" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
0285     <span class="keyword">else</span> <span class="comment">% Not a valid file</span>
0286         errordlg(<span class="string">'The selected file is not a valid ADCP data MAT file.'</span>, <span class="keyword">...</span>
0287             <span class="string">'Invalid File...'</span>)
0288     <span class="keyword">end</span>
0289     
0290     <span class="comment">% Set the vertical grid node spacing</span>
0291     <span class="comment">% ----------------------------------</span>
0292     <span class="comment">% For RioGrande probes, use the bin size, else just use the default</span>
0293     <span class="comment">% Backwards compatible</span>
0294     <span class="keyword">if</span> vars.A(1).Sup.wm ~= 3 <span class="comment">% RG</span>
0295         set(handles.VerticalGridNodeSpacing,<span class="string">'String'</span>,double(vars.A(1).Sup.binSize_cm(1))/100)
0296     <span class="keyword">else</span> <span class="comment">% Older file, must be RG</span>
0297         set(handles.VerticalGridNodeSpacing,<span class="string">'String'</span>,0.4)
0298     <span class="keyword">end</span>
0299     
0300 <span class="keyword">elseif</span> iscell(filename) <span class="comment">% Multiple MAT files loaded</span>
0301     <span class="comment">% Set the filenames</span>
0302     <span class="comment">% -----------------</span>
0303     guiparams.mat_path = pathname;
0304     guiparams.mat_file = filename;
0305     
0306     <span class="comment">% Push status to log window</span>
0307     <span class="comment">% -------------------------</span>
0308     log_text = {<span class="keyword">...</span>
0309         <span class="string">'Loading previously processed MAT files.'</span>;<span class="keyword">...</span>
0310         <span class="string">'Directory:'</span>};
0311     log_text = vertcat(log_text, pathname, {<span class="string">'Files:'</span>}, filename');
0312     statusLogging(handles.LogWindow,log_text)
0313     
0314     <span class="comment">% Update the Application Data:</span>
0315     <span class="comment">% ------------------------------</span>
0316     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0317     
0318     <span class="comment">% Update the persistent preferences:</span>
0319     <span class="comment">% ----------------------------------</span>
0320     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0321     guiprefs.mat_path = pathname;
0322     guiprefs.mat_file = filename;
0323     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0324     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
0325         
0326     <span class="comment">% Update the GUI:</span>
0327     <span class="comment">% ---------------</span>
0328     <a href="#_sub95" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'multiplematfiles'</span>)
0329 <span class="keyword">end</span>
0330 
0331 <span class="comment">% [EOF] menuOpenMAT_Callback</span>
0332 
0333 <span class="comment">% --------------------------------------------------------------------</span>
0334 <a name="_sub9" href="#_subfunctions" class="code">function menuSave_Callback(hObject, eventdata, handles)</a>
0335 <span class="comment">% Empty</span>
0336 
0337 <span class="comment">% --------------------------------------------------------------------</span>
0338 <a name="_sub10" href="#_subfunctions" class="code">function menuSaveMAT_Callback(hObject, eventdata, handles)</a>
0339 <a href="#_sub51" class="code" title="subfunction saveDataCallback(hObject, eventdata, handles)">saveDataCallback</a>(hObject, eventdata, handles)
0340 <span class="comment">% [EOF] menuSaveMAT_Callback</span>
0341 
0342 <span class="comment">% --------------------------------------------------------------------</span>
0343 <a name="_sub11" href="#_subfunctions" class="code">function menuSaveTecplot_Callback(hObject, eventdata, handles)</a>
0344 <a href="#_sub59" class="code" title="subfunction SaveTecplotFile_Callback(hObject, eventdata, handles)">SaveTecplotFile_Callback</a>(handles,eventdata,handles)
0345 <span class="comment">% [EOF] menuSaveTecplot_Callback</span>
0346 
0347 <span class="comment">% --------------------------------------------------------------------</span>
0348 <a name="_sub12" href="#_subfunctions" class="code">function menuSaveKMZFile_Callback(hObject, eventdata, handles)</a>
0349 <a href="#_sub60" class="code" title="subfunction SaveGoogleEarthFile_Callback(hObject, eventdata, handles)">SaveGoogleEarthFile_Callback</a>(handles,eventdata,handles)
0350 <span class="comment">% [EOF] menuSaveKMZFile_Callback</span>
0351 
0352 <span class="comment">% --------------------------------------------------------------------</span>
0353 <a name="_sub13" href="#_subfunctions" class="code">function menuExport_Callback(hObject, eventdata, handles)</a>
0354 <span class="comment">% Empty</span>
0355 
0356 <span class="comment">% --------------------------------------------------------------------</span>
0357 <a name="_sub14" href="#_subfunctions" class="code">function menuFigureExportsettings_Callback(hObject, eventdata, handles)</a>
0358 <span class="comment">% Empty</span>
0359 
0360 <span class="comment">% --------------------------------------------------------------------</span>
0361 <a name="_sub15" href="#_subfunctions" class="code">function menuPrintFormat_Callback(hObject, eventdata, handles)</a>
0362 
0363 <span class="comment">% Get the Application Data:</span>
0364 <span class="comment">% -------------------------</span>
0365 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0366 
0367 <span class="comment">% Update the Application Data:</span>
0368 <span class="comment">% ----------------------------</span>
0369 guiparams.print        = true;
0370 guiparams.presentation = false;
0371 
0372 <span class="comment">% Re-store the Application data:</span>
0373 <span class="comment">% ------------------------------</span>
0374 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0375 
0376 <span class="comment">% Update the GUI:</span>
0377 <span class="comment">% ---------------</span>
0378 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0379 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
0380 
0381 <span class="comment">% [EOF] menuPrintFormat_Callback</span>
0382 
0383 
0384 <span class="comment">% --------------------------------------------------------------------</span>
0385 <a name="_sub16" href="#_subfunctions" class="code">function menuPresentationFormat_Callback(hObject, eventdata, handles)</a>
0386 
0387 <span class="comment">% Get the Application Data:</span>
0388 <span class="comment">% -------------------------</span>
0389 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0390 
0391 <span class="comment">% Update the Application Data:</span>
0392 <span class="comment">% ----------------------------</span>
0393 guiparams.print        = false;
0394 guiparams.presentation = true;
0395 
0396 <span class="comment">% Re-store the Application data:</span>
0397 <span class="comment">% ------------------------------</span>
0398 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0399 
0400 <span class="comment">% Update the GUI:</span>
0401 <span class="comment">% ---------------</span>
0402 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0403 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
0404 
0405 <span class="comment">% [EOF] menuPresentationFormat_Callback</span>
0406 
0407 <span class="comment">% --------------------------------------------------------------------</span>
0408 <a name="_sub17" href="#_subfunctions" class="code">function menuGraphicsRenderer_Callback(hObject, eventdata, handles)</a>
0409 <span class="comment">%  --- Empty ---</span>
0410 
0411 <span class="comment">% --------------------------------------------------------------------</span>
0412 <a name="_sub18" href="#_subfunctions" class="code">function menuOpenGL_Callback(hObject, eventdata, handles)</a>
0413 <span class="comment">% Get the Application Data:</span>
0414 <span class="comment">% -------------------------</span>
0415 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0416 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0417 
0418 <span class="comment">% Update the Application Data:</span>
0419 <span class="comment">% ----------------------------</span>
0420 guiparams.renderer  = <span class="string">'OpenGL'</span>;
0421 guiprefs.renderer   = <span class="string">'OpenGL'</span>;
0422 
0423 <span class="comment">% Re-store the Application data:</span>
0424 <span class="comment">% ------------------------------</span>
0425 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0426 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0427 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'renderer'</span>)
0428 
0429 <span class="comment">% Update the GUI:</span>
0430 <span class="comment">% ---------------</span>
0431 set(handles.menuOpenGL,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0432 set(handles.menuPainters, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0433 set(handles.menuZbuffer,  <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0434 
0435 <span class="comment">% Modify the existing figures</span>
0436 <span class="comment">% ---------------------------</span>
0437 <span class="comment">% Find what plots exist already</span>
0438 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0439 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
0440 
0441 <span class="comment">% Loop through valid figures and adjust</span>
0442 <span class="comment">% -------------------------------------</span>
0443 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
0444     <span class="keyword">for</span> i = 1:length(valid_names)
0445         <span class="comment">% Focus the figure</span>
0446         hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
0447         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0448             figure(hff)
0449             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0450         <span class="keyword">end</span>
0451         hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
0452         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0453             figure(hff)
0454             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0455         <span class="keyword">end</span>
0456     <span class="keyword">end</span>
0457 <span class="keyword">end</span>
0458 <span class="comment">% [EOF] menuOpenGL_Callback</span>
0459 
0460 
0461 <span class="comment">% --------------------------------------------------------------------</span>
0462 <a name="_sub19" href="#_subfunctions" class="code">function menuPainters_Callback(hObject, eventdata, handles)</a>
0463 <span class="comment">% Get the Application Data:</span>
0464 <span class="comment">% -------------------------</span>
0465 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0466 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0467 
0468 <span class="comment">% Update the Application Data:</span>
0469 <span class="comment">% ----------------------------</span>
0470 guiparams.renderer  = <span class="string">'painters'</span>;
0471 guiprefs.renderer   = <span class="string">'painters'</span>;
0472 
0473 <span class="comment">% Re-store the Application data:</span>
0474 <span class="comment">% ------------------------------</span>
0475 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0476 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0477 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'renderer'</span>)
0478 
0479 <span class="comment">% Update the GUI:</span>
0480 <span class="comment">% ---------------</span>
0481 set(handles.menuOpenGL,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0482 set(handles.menuPainters, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0483 set(handles.menuZbuffer,  <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0484 
0485 <span class="comment">% Modify the existing figures</span>
0486 <span class="comment">% ---------------------------</span>
0487 <span class="comment">% Find what plots exist already</span>
0488 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0489 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
0490 
0491 <span class="comment">% Loop through valid figures and adjust</span>
0492 <span class="comment">% -------------------------------------</span>
0493 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
0494     <span class="keyword">for</span> i = 1:length(valid_names)
0495         <span class="comment">% Focus the figure</span>
0496         hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
0497         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0498             figure(hff)
0499             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0500         <span class="keyword">end</span>
0501         hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
0502         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0503             figure(hff)
0504             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0505         <span class="keyword">end</span>
0506     <span class="keyword">end</span>
0507 <span class="keyword">end</span>
0508 <span class="comment">% [EOF] menuPainters_Callback</span>
0509 
0510 <span class="comment">% --------------------------------------------------------------------</span>
0511 <a name="_sub20" href="#_subfunctions" class="code">function menuZbuffer_Callback(hObject, eventdata, handles)</a>
0512 <span class="comment">% Get the Application Data:</span>
0513 <span class="comment">% -------------------------</span>
0514 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0515 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0516 
0517 <span class="comment">% Update the Application Data:</span>
0518 <span class="comment">% ----------------------------</span>
0519 guiparams.renderer  = <span class="string">'zbuffer'</span>;
0520 guiprefs.renderer   = <span class="string">'zbuffer'</span>;
0521 
0522 <span class="comment">% Re-store the Application data:</span>
0523 <span class="comment">% ------------------------------</span>
0524 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0525 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0526 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'renderer'</span>)
0527 
0528 <span class="comment">% Update the GUI:</span>
0529 <span class="comment">% ---------------</span>
0530 set(handles.menuOpenGL,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0531 set(handles.menuPainters, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0532 set(handles.menuZbuffer,  <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0533 
0534 <span class="comment">% Modify the existing figures</span>
0535 <span class="comment">% ---------------------------</span>
0536 <span class="comment">% Find what plots exist already</span>
0537 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0538 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
0539 
0540 <span class="comment">% Loop through valid figures and adjust</span>
0541 <span class="comment">% -------------------------------------</span>
0542 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
0543     <span class="keyword">for</span> i = 1:length(valid_names)
0544         <span class="comment">% Focus the figure</span>
0545         hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
0546         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0547             figure(hff)
0548             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0549         <span class="keyword">end</span>
0550         hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
0551         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0552             figure(hff)
0553             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0554         <span class="keyword">end</span>
0555     <span class="keyword">end</span>
0556 <span class="keyword">end</span>
0557 <span class="comment">% [EOF] menuZbuffer_Callback</span>
0558 
0559 <span class="comment">% --------------------------------------------------------------------</span>
0560 <a name="_sub21" href="#_subfunctions" class="code">function menuExportFigures_Callback(hObject, eventdata, handles)</a>
0561 <span class="comment">% Get the Application data:</span>
0562 <span class="comment">% -------------------------</span>
0563 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0564 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0565 
0566 <span class="comment">% Find what plots exist already</span>
0567 fig_handles = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0568 fig_names   = get(fig_handles,<span class="string">'name'</span>);
0569 
0570 <span class="comment">% Remove the VMT GUI as a valid figure in the list</span>
0571 [~, idx] = ismember({get(handles.figure1,<span class="string">'Name'</span>),<span class="string">'VMT_GraphicsControl'</span>}, fig_names);
0572 <span class="keyword">if</span> ~isempty(idx)
0573     fig_names(idx) = [];
0574 <span class="keyword">end</span>
0575 
0576 <span class="keyword">if</span> guiparams.presentation
0577     figure_style = <span class="string">'presentation'</span>;
0578 <span class="keyword">else</span>
0579     figure_style = <span class="string">'print'</span>;
0580 <span class="keyword">end</span>
0581 
0582 [selected_figures] = <a href="#_sub105" class="code" title="subfunction [selected_figures] = openFiguresDialog(figure_names,hf)">openFiguresDialog</a>(fig_names,handles.figure1);
0583 
0584 <span class="keyword">if</span> isempty(selected_figures) <span class="comment">% User pressed cancel</span>
0585     <span class="keyword">return</span>
0586 <span class="keyword">else</span>
0587     <span class="keyword">for</span> i = 1:length(selected_figures)
0588         <a href="VMT_SaveFigs.html" class="code" title="function VMT_SaveFigs(pathname,to_export,figure_style)">VMT_SaveFigs</a>(guiprefs.mat_path,selected_figures(i),figure_style)
0589     <span class="keyword">end</span>
0590 <span class="keyword">end</span>
0591 
0592 
0593 <span class="comment">% [EOF] menuExportFigures_Callback</span>
0594 
0595 <span class="comment">% --------------------------------------------------------------------</span>
0596 <a name="_sub22" href="#_subfunctions" class="code">function menuBathymetryExportSettings_Callback(hObject, eventdata, handles)</a>
0597 <span class="comment">% Get the Application data:</span>
0598 <span class="comment">% -------------------------</span>
0599 guiparams              = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0600 beam_angle             = guiparams.beam_angle; 
0601 magnetic_variation     = guiparams.magnetic_variation; 
0602 wse                    = guiparams.wse;
0603 output_auxiliary_data  = guiparams.output_auxiliary_data; 
0604 
0605 <span class="comment">% Open dialog and allow user to select settings</span>
0606 <span class="comment">% ---------------------------------------------</span>
0607 [beam_angle,<span class="keyword">...</span>
0608     magnetic_variation,<span class="keyword">...</span>
0609     wse,<span class="keyword">...</span>
0610     output_auxiliary_data] = <span class="keyword">...</span>
0611     <a href="#_sub103" class="code" title="subfunction [beam_angle,magnetic_variation,wse,output_auxiliary_data] = exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,hf)">exportSettingsDialog</a>(beam_angle,magnetic_variation,wse,output_auxiliary_data,handles.figure1);
0612 
0613 <span class="comment">% Re-store the Application data:</span>
0614 <span class="comment">% ------------------------------</span>
0615 guiparams.beam_angle            = beam_angle;
0616 guiparams.magnetic_variation    = magnetic_variation; 
0617 guiparams.wse                   = wse;
0618 guiparams.output_auxiliary_data = output_auxiliary_data;
0619 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0620 
0621 <span class="comment">% [EOF] menuExportSettings_Callback</span>
0622 
0623 <span class="comment">% --------------------------------------------------------------------</span>
0624 <a name="_sub23" href="#_subfunctions" class="code">function menuExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a>
0625 <a href="#_sub61" class="code" title="subfunction ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)">ExportMultibeamBathymetry_Callback</a>(hObject, eventdata, handles);
0626 <span class="comment">% [EOF] menuExportMultibeamBathymetry_Callback</span>
0627 
0628 
0629 <span class="comment">% --------------------------------------------------------------------</span>
0630 <a name="_sub24" href="#_subfunctions" class="code">function menuSaveANVFile_Callback(hObject, eventdata, handles)</a>
0631 
0632 <span class="comment">% Get the Application Data:</span>
0633 <span class="comment">% -------------------------</span>
0634 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0635 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0636 PVdata    = guiparams.iric_anv_planview_data;
0637 iric_path = guiprefs.iric_path;
0638 iric_file = guiprefs.iric_file;
0639 
0640 <span class="comment">% Is there any planview data?</span>
0641 <span class="keyword">if</span> isempty(PVdata)
0642     <span class="comment">% Nothing to do, warn user</span>
0643     log_text = {<span class="string">'No planview plot data to export. User must Plot Plan View first.'</span>};
0644     warndlg(log_text{:},<span class="string">'Nothing to export'</span>)
0645 <span class="keyword">else</span>
0646     <span class="comment">% Save the planview data as output and to an *.anv file with spacing</span>
0647     <span class="comment">% and smoothing (for iRiC)</span>
0648     log_text = {<span class="string">'Exporting iRic formated ANV vector file...'</span>};
0649     [iric_file,iric_path] = uiputfile(<span class="string">'*.anv'</span>,<span class="string">'Save *.anv file'</span>,<span class="keyword">...</span>
0650         fullfile(iric_path,iric_file));
0651     
0652     <span class="keyword">if</span> ischar(iric_path) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0653         outfile = fullfile(iric_path,iric_file);
0654         log_text = vertcat(log_text,{outfile});
0655         ofid   = fopen(outfile, <span class="string">'wt'</span>);
0656         outcount = fprintf(ofid,<span class="keyword">...</span>
0657             <span class="string">'%8.2f  %8.2f  %5.2f  %3.3f  %3.3f\n'</span>,PVdata.outmat);
0658         fclose(ofid);
0659     <span class="keyword">else</span>
0660         <span class="comment">% Return default iric_path and iric_file</span>
0661         iric_path = guiprefs.iric_path;
0662         iric_file = guiprefs.iric_file;
0663     <span class="keyword">end</span>
0664 <span class="keyword">end</span>
0665 
0666 <span class="comment">% Push messages to Log Window:</span>
0667 <span class="comment">% ----------------------------</span>
0668 statusLogging(handles.LogWindow, log_text)
0669 
0670 <span class="comment">% Store the persistent preferences:</span>
0671 <span class="comment">% ---------------------------------</span>
0672 guiprefs.iric_file = iric_file;
0673 guiprefs.iric_path = iric_path;
0674 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0675 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'iric'</span>)
0676 
0677 <span class="comment">% [EOF] menuSaveANVFile_Callback</span>
0678 
0679 <span class="comment">% --------------------------------------------------------------------</span>
0680 <a name="_sub25" href="#_subfunctions" class="code">function menuSaveExcel_Callback(hObject, eventdata, handles)</a>
0681 <span class="comment">% Get the Application Data:</span>
0682 <span class="comment">% -------------------------</span>
0683 guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0684 guiprefs    = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0685 excel_path  = guiprefs.excel_path;
0686 excel_file  = guiprefs.excel_file;
0687 
0688 <span class="comment">% Push messages to Log Window:</span>
0689 <span class="comment">% ----------------------------</span>
0690 log_text = {<span class="string">'Exporting Excel File (reprocessing dataset; this will create new plots)'</span>};
0691 statusLogging(handles.LogWindow, log_text)
0692 
0693 <span class="comment">% If there are multiple MAT files loaded, go ahead and export just the DAV</span>
0694 <span class="comment">% data.</span>
0695 <span class="keyword">if</span> iscell(guiparams.mat_file)
0696     <span class="comment">% Force VMT to reprocess before outputing Excel</span>
0697     <a href="#_sub56" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
0698     <span class="comment">% Refresh the Application Data:</span>
0699     guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0700     z           = guiparams.z;
0701     A           = guiparams.A;
0702     V           = guiparams.V;
0703     Map         = guiparams.Map;
0704     wse         = guiparams.wse;
0705     PVdata      = guiparams.iric_anv_planview_data;
0706     log_text = {<span class="string">'Writing data to Excel file...'</span>;<span class="keyword">...</span>
0707         <span class="string">'Multiple transected loaded. Will export Planview Data Only!'</span>};
0708     [excel_file,excel_path] = uiputfile(<span class="string">'*.xlsx'</span>,<span class="string">'Save *.xlsx file'</span>,<span class="keyword">...</span>
0709         fullfile(excel_path,excel_file));
0710     
0711     <span class="keyword">if</span> ischar(excel_path) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0712         outfile = fullfile(excel_path,excel_file);
0713         <span class="comment">%log_text = vertcat(log_text,{outfile});</span>
0714         
0715     <span class="keyword">else</span>
0716         <span class="comment">% Return default excel_path and excel_file</span>
0717         excel_path = guiprefs.excel_path;
0718         excel_file = guiprefs.excel_file;
0719         outfile = fullfile(excel_path,excel_file);
0720         <span class="comment">%log_text = vertcat(log_text,{outfile});</span>
0721     <span class="keyword">end</span>
0722     
0723     <span class="comment">% Delete the old file if it exists</span>
0724     <span class="keyword">if</span> exist(outfile, <span class="string">'file'</span>) == 2
0725         log_text = vertcat(log_text,{<span class="string">'Warning: The file'</span>;<span class="keyword">...</span>
0726             [<span class="string">'   '</span> outfile];<span class="keyword">...</span>
0727             <span class="string">'already exists. Overwriting file...'</span>});
0728         delete(outfile)
0729     <span class="keyword">end</span>
0730     
0731     <span class="comment">% Save DAV data to an Excel File</span>
0732     hwait = waitbar(0,<span class="string">'Exporting Excel File...'</span>);
0733     vmin = num2str(guiparams.depth_range_min);
0734     vmax = num2str(guiparams.depth_range_max);
0735     pvheaders = {<span class="keyword">...</span>
0736         <span class="string">'UTM_East'</span> <span class="string">'UTM_North'</span> <span class="string">'Dist_m'</span> <span class="string">'Bed_Elev_m'</span><span class="keyword">...</span>
0737         [<span class="string">'EastDAV_cm/s, dpth rng '</span> vmin <span class="string">' to '</span> vmax <span class="string">' m'</span>]<span class="keyword">...</span>
0738         [<span class="string">'NorthDAV_cm/s, dpth rng '</span> vmin <span class="string">' to '</span> vmax <span class="string">' m'</span>]<span class="keyword">...</span>
0739         <span class="string">'Vel_mag_cm/s'</span> <span class="string">'Vel_dir_deg'</span>};
0740     
0741 
0742     <span class="comment">% Initialize Variables</span>
0743     pvdata = []; Dist = [];
0744     X = []; Y = []; E = [];
0745     Ve = []; Vn =[]; Vm = []; Vd = [];
0746     
0747     <span class="comment">% Concatenate data from all MAT files into arrays</span>
0748     <span class="keyword">for</span> i = 1:length(guiparams.mat_file)
0749         <span class="comment">% Load current MAT-file</span>
0750         load(fullfile(guiparams.mat_path, guiparams.mat_file{i}))
0751         
0752         <span class="comment">% Location and Bathy</span>
0753         X = [X V.mcsX(1,:)];
0754         Y = [Y V.mcsY(1,:)];
0755         Dist = [Dist sort(V.mcsDist(1,:),<span class="string">'descend'</span>)];
0756         E = [E V.mcsBedElev];
0757         
0758         <span class="comment">% Build layer-averaged velocities</span>
0759         indx = find(V.mcsDepth(:,1) &lt; str2num(vmin) | V.mcsDepth(:,1) &gt; str2num(vmax));
0760         V.mcsX(indx,:) = nan;
0761         V.mcsY(indx,:) = nan;
0762         V.mcsEast(indx,:) = nan;
0763         V.mcsNorth(indx,:) = nan;
0764         Ve = [Ve <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast)];
0765         Vn = [Vn <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth)];
0766         Vm = [Vm sqrt(<a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast).^2 + <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth).^2)];
0767         Vd = [Vd ari2geodeg(atan2(<a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth),<a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast))*180/pi)];
0768         
0769         waitbar(i/(length(guiparams.mat_file)+1),hwait)
0770     <span class="keyword">end</span>
0771     
0772     <span class="comment">% Put output into 1 matrix</span>
0773     pvdata = [<span class="keyword">...</span>
0774         X; Y; Dist; E;<span class="keyword">...</span><span class="comment"> % Bathy and locations</span>
0775         Ve; Vn; Vm; Vd<span class="keyword">...</span><span class="comment"> % Velocity</span>
0776         ];
0777     pvdata(isnan(pvdata)) = -9999;
0778     
0779     <span class="comment">% Create table and write to Excel</span>
0780     pvout = num2cell(pvdata');
0781     pvout = vertcat(pvheaders,pvout);
0782     xlswrite(outfile,pvout,<span class="string">'Planview'</span>);
0783     
0784     <span class="comment">% Close out waitbar</span>
0785     waitbar(1,hwait)
0786     delete(hwait)
0787     
0788     <span class="comment">% Push messages to Log Window:</span>
0789     <span class="comment">% ----------------------------</span>
0790     statusLogging(handles.LogWindow, log_text)
0791 <span class="keyword">else</span>
0792     
0793     <span class="comment">% Force VMT to reprocess before outputing Excel</span>
0794     <a href="#_sub56" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
0795     <a href="#_sub57" class="code" title="subfunction crosssectionPlotCallback(hObject, eventdata, handles)">crosssectionPlotCallback</a>(hObject, eventdata, handles)
0796     <span class="comment">% Refresh the Application Data:</span>
0797     guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0798     z           = guiparams.z;
0799     A           = guiparams.A;
0800     V           = guiparams.V;
0801     Map         = guiparams.Map;
0802     wse         = guiparams.wse;
0803     PVdata      = guiparams.iric_anv_planview_data;
0804     
0805     
0806     log_text = {<span class="string">'Writing data to Excel file...'</span>};
0807     [excel_file,excel_path] = uiputfile(<span class="string">'*.xlsx'</span>,<span class="string">'Save *.xlsx file'</span>,<span class="keyword">...</span>
0808         fullfile(excel_path,excel_file));
0809     
0810     <span class="keyword">if</span> ischar(excel_path) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0811         outfile = fullfile(excel_path,excel_file);
0812         <span class="comment">%log_text = vertcat(log_text,{outfile});</span>
0813         
0814         <span class="comment">% Delete the old file if it exists</span>
0815         <span class="keyword">if</span> exist(outfile, <span class="string">'file'</span>) == 2
0816             log_text = vertcat(log_text,{<span class="string">'Warning: The file'</span>;<span class="keyword">...</span>
0817                 [<span class="string">'   '</span> outfile];<span class="keyword">...</span>
0818                 <span class="string">'already exists. Overwriting file...'</span>});
0819             delete(outfile)
0820         <span class="keyword">end</span>
0821         
0822         <span class="comment">% Push messages to Log Window:</span>
0823         <span class="comment">% ----------------------------</span>
0824         statusLogging(handles.LogWindow, log_text)
0825         
0826         <span class="comment">% Save MCS Summary to an Excel File</span>
0827         hwait = waitbar(0,<span class="string">'Exporting Excel File...'</span>);
0828         xlswrite(outfile,{<span class="string">'Files:'</span>},<span class="string">'VMTSummary'</span>,<span class="string">'H4'</span>); waitbar(1/5,hwait)
0829         sout = guiparams.data_files';
0830         xlswrite(outfile,sout,<span class="string">'VMTSummary'</span>,<span class="string">'I4'</span>); waitbar(2/5,hwait)
0831         sout = {<span class="keyword">...</span>
0832             <span class="string">'VMT: Summary of Mean Cross Section'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0833             <span class="string">'VMT '</span> guiparams.vmt_version <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0834             <span class="string">'Date Processed: '</span> datestr(now) <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0835             <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0836             <span class="string">'Mean Cross Section (MCS) Properties'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0837             <span class="string">'Horz. Grid Node Spacing (m):'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> guiparams.horizontal_grid_node_spacing;<span class="keyword">...</span>
0838             <span class="string">'Vert. Grid Node Spacing (m):'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> single(guiparams.A(1).Sup.binSize_cm)/100;<span class="keyword">...</span>
0839             <span class="string">'Endpoints:'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">'UTM_East'</span>    <span class="string">'UTM_North'</span>;<span class="keyword">...</span>
0840             <span class="string">'Left Bank'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>    V.xLeftBank V.yLeftBank;<span class="keyword">...</span>
0841             <span class="string">'Right Bank'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>    V.xRightBank V.yRightBank;<span class="keyword">...</span>
0842             <span class="string">'Total Length in meters'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.dl;<span class="keyword">...</span>
0843             <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0844             <span class="string">'Mean Flow Direction (deg)'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.mfd;<span class="keyword">...</span>
0845             <span class="string">'in geographic coordinates'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0846             <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0847             <span class="string">'Slope'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.m;<span class="keyword">...</span>
0848             <span class="string">'Intercept'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.b;<span class="keyword">...</span>
0849             <span class="string">'Theta (deg)'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.theta};
0850         xlswrite(outfile,sout,<span class="string">'VMTSummary'</span>,<span class="string">'A1'</span>); waitbar(3/5,hwait)
0851         
0852         <span class="comment">% Save DAV data to an Excel File</span>
0853         vmin = num2str(guiparams.depth_range_min);
0854         vmax = num2str(guiparams.depth_range_max);
0855         pvheaders = {<span class="keyword">...</span>
0856             <span class="string">'UTM_East_WGS84'</span> <span class="string">'UTM_North_WGS84'</span> <span class="string">'Dist_m'</span> <span class="string">'Bed_Elev_m'</span><span class="keyword">...</span>
0857             [<span class="string">'EastDAV_cms_dpthrng_'</span> vmin <span class="string">'_to_'</span> vmax <span class="string">'m'</span>]<span class="keyword">...</span>
0858             [<span class="string">'NorthDAV_cms_dpthrng_'</span> vmin <span class="string">'_to_'</span> vmax <span class="string">'m'</span>]<span class="keyword">...</span>
0859             <span class="string">'Vel_mag_cms'</span> <span class="string">'Vel_dir_deg'</span>};
0860         
0861         <span class="comment">% Create block style matrix of all processed data</span>
0862         pvdata = [];
0863         
0864         <span class="comment">% Sort the Distances such that when plotting in 2D (Dist. vs. Depth),</span>
0865         <span class="comment">% you are looking upstream into the transect</span>
0866         Dist = sort(V.mcsDist,2,<span class="string">'descend'</span>);
0867         
0868         <span class="comment">% Build bathy data matrix</span>
0869         pvdata = [V.mcsX(1,:); V.mcsY(1,:); Dist(1,:); V.mcsBedElev];
0870         
0871         <span class="comment">% Build layer-averaged velocities</span>
0872         indx = find(V.mcsDepth(:,1) &lt; str2num(vmin) | V.mcsDepth(:,1) &gt; str2num(vmax));
0873         V.mcsX(indx,:) = nan;
0874         V.mcsY(indx,:) = nan;
0875         V.mcsEast(indx,:) = nan;
0876         V.mcsNorth(indx,:) = nan;
0877         pvdata = [<span class="keyword">...</span>
0878             pvdata;<span class="keyword">...</span>
0879             <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast);<span class="keyword">...</span>
0880             <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth);<span class="keyword">...</span>
0881             sqrt(<a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast).^2 + <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth).^2);<span class="keyword">...</span>
0882             ari2geodeg(atan2(<a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth), <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast))*180/pi)];
0883         pvdata(isnan(pvdata)) = -9999;
0884         pvout = num2cell(pvdata');
0885         pvout = vertcat(pvheaders,pvout);
0886         xlswrite(outfile,pvout,<span class="string">'Planview'</span>);
0887         waitbar(4/5,hwait)
0888         
0889         <span class="comment">% Save MCS data to an Excel File</span>
0890         mcsheaders = {<span class="keyword">...</span>
0891             <span class="string">'UTM_East'</span> <span class="keyword">...</span>
0892             <span class="string">'UTM_North'</span><span class="keyword">...</span>
0893             <span class="string">'Distance from Left Bank, in meters'</span><span class="keyword">...</span>
0894             <span class="string">'Elevation, in meters'</span><span class="keyword">...</span>
0895             <span class="keyword">...</span><span class="comment">'Bed Elevation, in meters'...</span>
0896             <span class="string">'East Velocity, in cm/s'</span><span class="keyword">...</span>
0897             <span class="string">'North Velocity, in cm/s'</span><span class="keyword">...</span>
0898             <span class="string">'Vertical Velocity, in cm/s'</span><span class="keyword">...</span>
0899             <span class="string">'Velocity Magnitude, in cm/s'</span><span class="keyword">...</span>
0900             <span class="string">'Velocity Direction, in degrees (geographic coordinates)'</span><span class="keyword">...</span>
0901             <span class="string">'Streamwise Velocity, in cm/s'</span><span class="keyword">...</span>
0902             <span class="string">'Transverse Velocity, in cm/s'</span><span class="keyword">...</span>
0903             <span class="string">'Primary Velocity (zsd), in cm/s'</span><span class="keyword">...</span>
0904             <span class="string">'Secondary Velocity (zsd), in cm/s'</span><span class="keyword">...</span>
0905             <span class="string">'Primary Velocity (roz), in cm/s'</span><span class="keyword">...</span>
0906             <span class="string">'Secondary Velocity (roz), in cm/s'</span>};
0907         
0908         mcsdata = [<span class="keyword">...</span>
0909             V.mcsX(:)<span class="keyword">...</span>
0910             V.mcsY(:)<span class="keyword">...</span>
0911             V.mcsDist(:)<span class="keyword">...</span>
0912             (wse - V.mcsDepth(:))<span class="keyword">...</span>
0913             <span class="keyword">...</span><span class="comment">repmat((wse - V.mcsBed(:)),size(V.mcsX,1),1)...</span>
0914             V.mcsEast(:)<span class="keyword">...</span>
0915             V.mcsNorth(:)<span class="keyword">...</span>
0916             V.mcsVert(:)<span class="keyword">...</span>
0917             V.mcsMag(:)<span class="keyword">...</span>
0918             V.mcsDir(:)<span class="keyword">...</span>
0919             V.u(:)<span class="keyword">...</span>
0920             V.v(:)<span class="keyword">...</span>
0921             V.vp(:)<span class="keyword">...</span>
0922             V.vs(:)<span class="keyword">...</span>
0923             V.Roz.up(:)<span class="keyword">...</span>
0924             V.Roz.us(:)];
0925         mcsdata(isnan(mcsdata)) = -9999;
0926         
0927         mcsout = vertcat(mcsheaders,num2cell(mcsdata));
0928         xlswrite(outfile,mcsout,<span class="string">'MeanCrossSection'</span>);
0929         waitbar(1,hwait)
0930         delete(hwait)
0931         
0932     <span class="keyword">else</span>
0933         <span class="comment">% Return default excel_path and excel_file</span>
0934         excel_path = guiprefs.excel_path;
0935         excel_file = guiprefs.excel_file;
0936         outfile = fullfile(excel_path,excel_file);
0937         log_text = {<span class="string">'User aborted Excel export...'</span>};
0938     <span class="keyword">end</span>
0939     
0940     
0941     
0942 <span class="keyword">end</span>
0943 
0944 <span class="comment">% Push messages to Log Window:</span>
0945 <span class="comment">% ----------------------------</span>
0946 statusLogging(handles.LogWindow, log_text)
0947 
0948 <span class="comment">% Store the persistent preferences:</span>
0949 <span class="comment">% ---------------------------------</span>
0950 guiprefs.excel_file = excel_file;
0951 guiprefs.excel_path = excel_path;
0952 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0953 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'excel'</span>)
0954 
0955 <span class="comment">% [EOF] menuSaveExcel_Callback</span>
0956 
0957 <span class="comment">% --------------------------------------------------------------------</span>
0958 <a name="_sub26" href="#_subfunctions" class="code">function menuParameters_Callback(hObject, eventdata, handles)</a>
0959 <span class="comment">% Empty</span>
0960 
0961 <span class="comment">% --------------------------------------------------------------------</span>
0962 <a name="_sub27" href="#_subfunctions" class="code">function menuProcessingParameters_Callback(hObject, eventdata, handles)</a>
0963 <span class="comment">% Empty</span>
0964 
0965 <span class="comment">% --------------------------------------------------------------------</span>
0966 <a name="_sub28" href="#_subfunctions" class="code">function menuUnitDischargeCorrection_Callback(hObject, eventdata, handles)</a>
0967 <span class="comment">% Turn ON or OFF Unit Discharge Correction</span>
0968 
0969 <span class="comment">% Get the Application Data:</span>
0970 <span class="comment">% -------------------------</span>
0971 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0972 
0973 <span class="comment">% Update the GUI &amp; Application Data:</span>
0974 <span class="comment">% ----------------------------------</span>
0975 status = get(handles.menuUnitDischargeCorrection,<span class="string">'Checked'</span>);
0976 <span class="keyword">switch</span> status
0977     <span class="keyword">case</span> <span class="string">'on'</span> <span class="comment">% Turn it off</span>
0978         set(handles.menuUnitDischargeCorrection, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0979         guiparams.unit_discharge_correction = false;
0980     <span class="keyword">case</span> <span class="string">'off'</span> <span class="comment">% Turn it on</span>
0981         set(handles.menuUnitDischargeCorrection, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0982         guiparams.unit_discharge_correction = true;
0983 <span class="keyword">end</span>
0984 
0985 <span class="comment">% Re-store the Application data:</span>
0986 <span class="comment">% ------------------------------</span>
0987 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0988 
0989 
0990 <span class="comment">%  [EOF] menuUnitDischargeCorrection_Callback</span>
0991 
0992 <span class="comment">% --------------------------------------------------------------------</span>
0993 <a name="_sub29" href="#_subfunctions" class="code">function menuPlottingParameters_Callback(hObject, eventdata, handles)</a>
0994 <span class="comment">% Empty</span>
0995 
0996 <span class="comment">% --------------------------------------------------------------------</span>
0997 <a name="_sub30" href="#_subfunctions" class="code">function menuUnits_Callback(hObject, eventdata, handles)</a>
0998 <span class="comment">% Empty</span>
0999 
1000 <span class="comment">% --------------------------------------------------------------------</span>
1001 <a name="_sub31" href="#_subfunctions" class="code">function menuMetric_Callback(hObject, eventdata, handles)</a>
1002 <span class="comment">% Set the Plotting Parameter Units to &quot;metric&quot;</span>
1003 
1004 <span class="comment">% Get the Application Data:</span>
1005 <span class="comment">% -------------------------</span>
1006 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1007 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1008 
1009 <span class="comment">% Update the Application Data:</span>
1010 <span class="comment">% ----------------------------</span>
1011 guiparams.english_units = false;
1012 guiprefs.units = <span class="string">'metric'</span>;
1013 
1014 <span class="comment">% Re-store the Application data:</span>
1015 <span class="comment">% ------------------------------</span>
1016 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1017 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1018 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'units'</span>)
1019 
1020 <span class="comment">% Update the GUI:</span>
1021 <span class="comment">% ---------------</span>
1022 set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1023 set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1024 
1025 <span class="comment">% [EOF] menuMetric_Callback</span>
1026 
1027 
1028 <span class="comment">% --------------------------------------------------------------------</span>
1029 <a name="_sub32" href="#_subfunctions" class="code">function menuEnglish_Callback(hObject, eventdata, handles)</a>
1030 <span class="comment">% Set the Plotting Parameter Units to &quot;english&quot;</span>
1031 
1032 <span class="comment">% Get the Application Data:</span>
1033 <span class="comment">% -------------------------</span>
1034 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1035 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1036 
1037 <span class="comment">% Update the Application Data:</span>
1038 <span class="comment">% ----------------------------</span>
1039 guiparams.english_units = true;
1040 guiprefs.units = <span class="string">'english'</span>;
1041 
1042 <span class="comment">% Re-store the Application data:</span>
1043 <span class="comment">% ------------------------------</span>
1044 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1045 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1046 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'units'</span>)
1047 
1048 <span class="comment">% Update the GUI:</span>
1049 <span class="comment">% ---------------</span>
1050 set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1051 set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1052 
1053 <span class="comment">% [EOF] menuEnglish_Callback</span>
1054 
1055 
1056 <span class="comment">% --------------------------------------------------------------------</span>
1057 <a name="_sub33" href="#_subfunctions" class="code">function menuSetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a>
1058 <span class="comment">% Empty</span>
1059 
1060 <span class="comment">% --------------------------------------------------------------------</span>
1061 <a name="_sub34" href="#_subfunctions" class="code">function menuCrossSectionEndpointAutomatic_Callback(hObject, eventdata, handles)</a>
1062 <span class="comment">% Set cross-section endpoints automatically</span>
1063 
1064 <span class="comment">% Get the Application Data:</span>
1065 <span class="comment">% -------------------------</span>
1066 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1067 
1068 <span class="comment">% Update the Application Data:</span>
1069 <span class="comment">% ----------------------------</span>
1070 guiparams.set_cross_section_endpoints = false;
1071 
1072 <span class="comment">% Re-store the Application data:</span>
1073 <span class="comment">% ------------------------------</span>
1074 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1075 
1076 <span class="comment">% Update the GUI:</span>
1077 <span class="comment">% ---------------</span>
1078 set(handles.menuCrossSectionEndpointAutomatic, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1079 set(handles.menuCrossSectionEndpointManual,    <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1080 
1081 <span class="comment">% [EOF] menuCrossSectionEndpointAutomatic_Callback</span>
1082 
1083 
1084 <span class="comment">% --------------------------------------------------------------------</span>
1085 <a name="_sub35" href="#_subfunctions" class="code">function menuCrossSectionEndpointManual_Callback(hObject, eventdata, handles)</a>
1086 <span class="comment">% Set cross-section endpoints manually</span>
1087 
1088 <span class="comment">% Get the Application Data:</span>
1089 <span class="comment">% -------------------------</span>
1090 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1091 
1092 <span class="comment">% Update the Application Data:</span>
1093 <span class="comment">% ----------------------------</span>
1094 guiparams.set_cross_section_endpoints = true;
1095 
1096 <span class="comment">% Re-store the Application data:</span>
1097 <span class="comment">% ------------------------------</span>
1098 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1099 
1100 <span class="comment">% Update the GUI:</span>
1101 <span class="comment">% ---------------</span>
1102 set(handles.menuCrossSectionEndpointAutomatic, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1103 set(handles.menuCrossSectionEndpointManual,    <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1104 
1105 <span class="comment">% [EOF] menuCrossSectionEndpointManual_Callback</span>
1106 
1107 
1108 
1109 
1110 <span class="comment">% --------------------------------------------------------------------</span>
1111 <a name="_sub36" href="#_subfunctions" class="code">function menuPlotStyle_Callback(hObject, eventdata, handles)</a>
1112 <span class="comment">% Empty</span>
1113 
1114 <span class="comment">% --------------------------------------------------------------------</span>
1115 <a name="_sub37" href="#_subfunctions" class="code">function menuStylePrint_Callback(hObject, eventdata, handles)</a>
1116 
1117 <span class="comment">% Get the Application Data:</span>
1118 <span class="comment">% -------------------------</span>
1119 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1120 
1121 <span class="comment">% Update the Application Data:</span>
1122 <span class="comment">% ----------------------------</span>
1123 guiparams.print        = true;
1124 guiparams.presentation = false;
1125 
1126 <span class="comment">% Re-store the Application data:</span>
1127 <span class="comment">% ------------------------------</span>
1128 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1129 
1130 <span class="comment">% Update the GUI:</span>
1131 <span class="comment">% ---------------</span>
1132 set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1133 set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1134 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1135 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1136 
1137 <span class="comment">% Modify the existing figures</span>
1138 <span class="comment">% ---------------------------</span>
1139 <span class="comment">% Find what plots exist already</span>
1140 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
1141 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
1142 
1143 <span class="comment">% Defaults for Print Stlye Figure</span>
1144 BkgdColor   = <span class="string">'white'</span>;
1145 AxColor     = <span class="string">'black'</span>;
1146 FigColor    = <span class="string">'white'</span>; <span class="comment">% [0.3 0.3 0.3]</span>
1147 FntSize     = 14;
1148 
1149 <span class="comment">% Loop through valid figures and adjust</span>
1150 <span class="comment">% -------------------------------------</span>
1151 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
1152     
1153     <span class="keyword">for</span> i = 1:length(valid_names)
1154         <span class="keyword">switch</span> valid_names{i}
1155             <span class="keyword">case</span> <span class="string">'Plan View Map'</span>
1156                 <span class="comment">% Focus the figure</span>
1157                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
1158                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1159                     figure(hff)
1160                     
1161                     <span class="comment">% Make the changes to figure</span>
1162                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1163                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1164                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1165                     set(gca,<span class="string">'Color'</span>,FigColor)
1166                     set(gca,<span class="string">'XColor'</span>,AxColor)
1167                     set(gca,<span class="string">'YColor'</span>,AxColor)
1168                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1169                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1170                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1171                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1172                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1173                     
1174                     <span class="comment">% Add a text object at the bottom of the figure with</span>
1175                     <span class="comment">% the file(s) and path for the data</span>
1176                     ismultiplot = numel(guiparams.mat_file)&gt;1;
1177                     <span class="keyword">if</span> ~ismultiplot
1178                         filestr = guiparams.savefile;
1179                         wd = length(filestr);
1180                         hd = 1;
1181                     <span class="keyword">else</span>
1182                         <span class="comment">% Construct a filename</span>
1183                         filestr   = [{guiparams.mat_path};guiparams.mat_file'];
1184                         wd        = max(cellfun(@length,filestr));
1185                         hd        = numel(filestr);
1186                             
1187                     <span class="keyword">end</span>
1188                     
1189                     fileinfotxt = uicontrol(<span class="string">'style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>,<span class="string">'characters'</span>);
1190                     disableMenuBar(hff)
1191                     set(fileinfotxt,<span class="keyword">...</span>
1192                         <span class="string">'string'</span>,filestr)
1193                     set(fileinfotxt,<span class="keyword">...</span>
1194                         <span class="string">'position'</span>,[0,0,wd,hd],<span class="keyword">...</span>
1195                         <span class="string">'Fontsize'</span>,FntSize/2,<span class="keyword">...</span>
1196                         <span class="string">'ForegroundColor'</span>,AxColor,<span class="keyword">...</span>
1197                         <span class="string">'BackgroundColor'</span>,BkgdColor,<span class="keyword">...</span>
1198                         <span class="string">'HorizontalAlignment'</span>,<span class="string">'Left'</span>,<span class="keyword">...</span>
1199                         <span class="string">'Tag'</span>,<span class="string">'fileinfotxt'</span>,<span class="keyword">...</span>
1200                         <span class="string">'Visible'</span>,<span class="string">'off'</span>)  <span class="comment">% hide this by default, editFigureDialog handles it now)</span>
1201                     
1202                 <span class="keyword">end</span>
1203             <span class="keyword">case</span> <span class="string">'Mean Cross Section Contour'</span>
1204                 <span class="comment">% Focus the figure</span>
1205                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
1206                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1207                     figure(hff)
1208                     
1209                     <span class="comment">% Make the changes to figure</span>
1210                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1211                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1212                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1213                     set(gca,<span class="string">'Color'</span>,FigColor)
1214                     set(gca,<span class="string">'XColor'</span>,AxColor)
1215                     set(gca,<span class="string">'YColor'</span>,AxColor)
1216                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1217                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1218                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1219                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1220                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1221                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'PlotBedElevation'</span>)   ,<span class="string">'color'</span>    ,AxColor)
1222                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'ReferenceVectorText'</span>),<span class="string">'color'</span>    ,AxColor)
1223                     
1224                     <span class="comment">% Add a text object at the bottom of the figure with</span>
1225                     <span class="comment">% the file(s) and path for the data</span>
1226                     ismultiplot = numel(guiparams.mat_file)&gt;1;
1227                     <span class="keyword">if</span> ~ismultiplot
1228                         filestr = guiparams.savefile;
1229                         wd = length(filestr);
1230                         hd = 1;
1231                     <span class="keyword">else</span>
1232                         <span class="comment">% Construct a filename</span>
1233                         filestr   = [{guiparams.mat_path};guiparams.mat_file'];
1234                         wd        = max(cellfun(@length,filestr));
1235                         hd        = numel(filestr);
1236                             
1237                     <span class="keyword">end</span>
1238                     
1239                     fileinfotxt = uicontrol(<span class="string">'style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>,<span class="string">'characters'</span>);
1240                     disableMenuBar(hff)
1241                     set(fileinfotxt,<span class="keyword">...</span>
1242                         <span class="string">'string'</span>,filestr)
1243                     set(fileinfotxt,<span class="keyword">...</span>
1244                         <span class="string">'position'</span>,[0,0,wd,hd],<span class="keyword">...</span>
1245                         <span class="string">'Fontsize'</span>,FntSize/2,<span class="keyword">...</span>
1246                         <span class="string">'ForegroundColor'</span>,AxColor,<span class="keyword">...</span>
1247                         <span class="string">'BackgroundColor'</span>,BkgdColor,<span class="keyword">...</span>
1248                         <span class="string">'HorizontalAlignment'</span>,<span class="string">'Left'</span>,<span class="keyword">...</span>
1249                         <span class="string">'Tag'</span>,<span class="string">'fileinfotxt'</span>,<span class="keyword">...</span>
1250                         <span class="string">'Visible'</span>,<span class="string">'off'</span>)  <span class="comment">% hide this by default, editFigureDialog handles it now</span>
1251                 <span class="keyword">end</span>
1252             <span class="keyword">otherwise</span>
1253         <span class="keyword">end</span>
1254     <span class="keyword">end</span>
1255     
1256     
1257 <span class="keyword">end</span>
1258 
1259 
1260 <span class="comment">%[EOF] menuStylePrint_Callback</span>
1261 
1262 
1263 <span class="comment">% --------------------------------------------------------------------</span>
1264 <a name="_sub38" href="#_subfunctions" class="code">function menuStylePresentation_Callback(hObject, eventdata, handles)</a>
1265 <span class="comment">% Get the Application Data:</span>
1266 <span class="comment">% -------------------------</span>
1267 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1268 
1269 <span class="comment">% Update the Application Data:</span>
1270 <span class="comment">% ----------------------------</span>
1271 guiparams.print        = false;
1272 guiparams.presentation = true;
1273 
1274 <span class="comment">% Re-store the Application data:</span>
1275 <span class="comment">% ------------------------------</span>
1276 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1277 
1278 <span class="comment">% Update the GUI:</span>
1279 <span class="comment">% ---------------</span>
1280 set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1281 set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1282 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1283 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1284 
1285 <span class="comment">% Modify the existing figures</span>
1286 <span class="comment">% ---------------------------</span>
1287 <span class="comment">% Find what plots exist already</span>
1288 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
1289 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
1290 
1291 <span class="comment">% Defaults for Presentation Stlye Figure</span>
1292 <span class="comment">% --------------------------------------</span>
1293 BkgdColor   = <span class="string">'black'</span>;
1294 AxColor     = <span class="string">'white'</span>;
1295 FigColor    = <span class="string">'black'</span>; <span class="comment">% [0.3 0.3 0.3]</span>
1296 FntSize     = 14;
1297 
1298 <span class="comment">% Loop through valid figures and adjust</span>
1299 <span class="comment">% -------------------------------------</span>
1300 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
1301     
1302     <span class="keyword">for</span> i = 1:length(valid_names)
1303         <span class="keyword">switch</span> valid_names{i}
1304             <span class="keyword">case</span> <span class="string">'Plan View Map'</span>
1305                 <span class="comment">% Focus the figure</span>
1306                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
1307                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1308                     figure(hff)
1309                     
1310                     <span class="comment">% Make the changes to figure</span>
1311                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1312                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1313                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1314                     set(gca,<span class="string">'Color'</span>,FigColor)
1315                     set(gca,<span class="string">'XColor'</span>,AxColor)
1316                     set(gca,<span class="string">'YColor'</span>,AxColor)
1317                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1318                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1319                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1320                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1321                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1322                     
1323                     <span class="comment">% Add a text object at the bottom of the figure with</span>
1324                     <span class="comment">% the file(s) and path for the data</span>
1325                     ismultiplot = numel(guiparams.mat_file)&gt;1;
1326                     <span class="keyword">if</span> ~ismultiplot
1327                         filestr = guiparams.savefile;
1328                         wd = length(filestr);
1329                         hd = 1;
1330                     <span class="keyword">else</span>
1331                         <span class="comment">% Construct a filename</span>
1332                         filestr   = [{guiparams.mat_path};guiparams.mat_file'];
1333                         wd        = max(cellfun(@length,filestr));
1334                         hd        = numel(filestr);
1335                             
1336                     <span class="keyword">end</span>
1337                     
1338                     fileinfotxt = uicontrol(<span class="string">'style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>,<span class="string">'characters'</span>);
1339                     disableMenuBar(hff)
1340                     set(fileinfotxt,<span class="keyword">...</span>
1341                         <span class="string">'string'</span>,filestr)
1342                     set(fileinfotxt,<span class="keyword">...</span>
1343                         <span class="string">'position'</span>,[0,0,wd,hd],<span class="keyword">...</span>
1344                         <span class="string">'Fontsize'</span>,FntSize/2,<span class="keyword">...</span>
1345                         <span class="string">'ForegroundColor'</span>,AxColor,<span class="keyword">...</span>
1346                         <span class="string">'BackgroundColor'</span>,BkgdColor,<span class="keyword">...</span>
1347                         <span class="string">'HorizontalAlignment'</span>,<span class="string">'Left'</span>,<span class="keyword">...</span>
1348                         <span class="string">'Tag'</span>,<span class="string">'fileinfotxt'</span>,<span class="keyword">...</span>
1349                         <span class="string">'Visible'</span>,<span class="string">'off'</span>)  <span class="comment">% hide this by default, editFigureDialog handles it now)</span>
1350                     
1351                 <span class="keyword">end</span>
1352             <span class="keyword">case</span> <span class="string">'Mean Cross Section Contour'</span>
1353                 <span class="comment">% Focus the figure</span>
1354                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
1355                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1356                     figure(hff)
1357                     
1358                     <span class="comment">% Make the changes to figure</span>
1359                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1360                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1361                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1362                     set(gca,<span class="string">'Color'</span>,[0.3 0.3 0.3]) <span class="comment">%FigColor)</span>
1363                     set(gca,<span class="string">'XColor'</span>,AxColor)
1364                     set(gca,<span class="string">'YColor'</span>,AxColor)
1365                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1366                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1367                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1368                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1369                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1370                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'PlotBedElevation'</span>)   ,<span class="string">'color'</span>    ,AxColor)
1371                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'ReferenceVectorText'</span>),<span class="string">'color'</span>    ,AxColor)
1372                     
1373                     <span class="comment">% Add a text object at the bottom of the figure with</span>
1374                     <span class="comment">% the file(s) and path for the data</span>
1375                     ismultiplot = numel(guiparams.mat_file)&gt;1;
1376                     <span class="keyword">if</span> ~ismultiplot
1377                         filestr = guiparams.savefile;
1378                         wd = length(filestr);
1379                         hd = 1;
1380                     <span class="keyword">else</span>
1381                         <span class="comment">% Construct a filename</span>
1382                         filestr   = [{guiparams.mat_path};guiparams.mat_file'];
1383                         wd        = max(cellfun(@length,filestr));
1384                         hd        = numel(filestr);
1385                             
1386                     <span class="keyword">end</span>
1387                     
1388                     fileinfotxt = uicontrol(<span class="string">'style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>,<span class="string">'characters'</span>);
1389                     disableMenuBar(hff)
1390                     set(fileinfotxt,<span class="keyword">...</span>
1391                         <span class="string">'string'</span>,filestr)
1392                     set(fileinfotxt,<span class="keyword">...</span>
1393                         <span class="string">'position'</span>,[0,0,wd,hd],<span class="keyword">...</span>
1394                         <span class="string">'Fontsize'</span>,FntSize/2,<span class="keyword">...</span>
1395                         <span class="string">'ForegroundColor'</span>,AxColor,<span class="keyword">...</span>
1396                         <span class="string">'BackgroundColor'</span>,BkgdColor,<span class="keyword">...</span>
1397                         <span class="string">'HorizontalAlignment'</span>,<span class="string">'Left'</span>,<span class="keyword">...</span>
1398                         <span class="string">'Tag'</span>,<span class="string">'fileinfotxt'</span>,<span class="keyword">...</span>
1399                         <span class="string">'Visible'</span>,<span class="string">'off'</span>)  <span class="comment">% hide this by default, editFigureDialog handles it now</span>
1400                 <span class="keyword">end</span>
1401             <span class="keyword">otherwise</span>
1402         <span class="keyword">end</span>
1403     <span class="keyword">end</span>
1404     
1405     
1406 <span class="keyword">end</span>
1407 
1408 <span class="comment">% [EOF] menuStylePresentation_Callback</span>
1409 
1410 <span class="comment">% --------------------------------------------------------------------</span>
1411 <a name="_sub39" href="#_subfunctions" class="code">function menuKMZVerticalOffset_Callback(hObject, eventdata, handles)</a>
1412 
1413 <span class="comment">% Get the Application data:</span>
1414 <span class="comment">% -------------------------</span>
1415 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1416 
1417 <span class="comment">% Initialize the answer:</span>
1418 <span class="comment">% ----------------------</span>
1419 numstr = {num2str(guiparams.vertical_offset)};
1420 answer = NaN;
1421 <span class="keyword">while</span> isnan(answer)
1422     answer = inputdlg(<span class="string">'Vertical Offset (m)'</span>,<span class="string">'KMZ Export'</span>,1,numstr);
1423     
1424     <span class="keyword">if</span> isempty(answer) <span class="comment">% User hits &quot;Cancel&quot;</span>
1425         <span class="keyword">return</span>
1426     <span class="keyword">end</span>
1427     
1428     answer = str2double(answer); <span class="comment">% A non-numeric char will be NaN</span>
1429     <span class="comment">% A numeric char will be a double</span>
1430 <span class="keyword">end</span>
1431 
1432 <span class="comment">% Re-store the Application data:</span>
1433 <span class="comment">% ------------------------------</span>
1434 guiparams.vertical_offset = answer;
1435 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1436 
1437 <span class="comment">% [EOF] menuKMZExport_Callback</span>
1438 
1439 <span class="comment">% --------------------------------------------------------------------</span>
1440 <a name="_sub40" href="#_subfunctions" class="code">function menuBathymetryParameters_Callback(hObject, eventdata, handles)</a>
1441 <span class="comment">% Not implemented</span>
1442 
1443 <span class="comment">% --------------------------------------------------------------------</span>
1444 <a name="_sub41" href="#_subfunctions" class="code">function menuTools_Callback(hObject, eventdata, handles)</a>
1445 <span class="comment">% Empty</span>
1446 
1447 <span class="comment">% --------------------------------------------------------------------</span>
1448 <a name="_sub42" href="#_subfunctions" class="code">function menuASCII2GIS_Callback(hObject, eventdata, handles)</a>
1449 ASCII2GIS_GUI
1450 <span class="comment">% [EOF] menuASCII2GIS_Callback</span>
1451 
1452 <span class="comment">% --------------------------------------------------------------------</span>
1453 <a name="_sub43" href="#_subfunctions" class="code">function menuASCII2KML_Callback(hObject, eventdata, handles)</a>
1454 
1455 <span class="comment">% Get the Application preferences:</span>
1456 <span class="comment">% --------------------------------</span>
1457 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1458 
1459 inpath = guiprefs.kmz_path;
1460 <span class="keyword">if</span> iscell(guiprefs.kmz_file)
1461     infile = guiprefs.kmz_file{1};
1462 <span class="keyword">else</span>
1463     infile = guiprefs.kmz_file;
1464 <span class="keyword">end</span>
1465 [log_text,outpath,outfile] = ASCII2KML(inpath,infile);
1466 
1467 guiprefs.kmz_path = outpath;
1468 guiprefs.kmz_file = outfile;
1469 
1470 <span class="comment">% Update persistent preferences</span>
1471 <span class="comment">% -----------------------------</span>
1472 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1473 
1474 <span class="comment">% [EOF] menuASCII2KML_Callback</span>
1475 
1476 <span class="comment">% --------------------------------------------------------------------</span>
1477 <a name="_sub44" href="#_subfunctions" class="code">function menuOpenBatchMode_Callback(hObject, eventdata, handles)</a>
1478 <span class="comment">% Get the Application preferences:</span>
1479 <span class="comment">% --------------------------------</span>
1480 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1481 
1482 VMT_BatchMode;
1483 <span class="comment">% [EOF] menuOpenBatchMode_Callback</span>
1484 
1485 <span class="comment">% --------------------------------------------------------------------</span>
1486 <a name="_sub45" href="#_subfunctions" class="code">function menuHelp_Callback(hObject, eventdata, handles)</a>
1487 <span class="comment">% Empty</span>
1488 
1489 <span class="comment">% --------------------------------------------------------------------</span>
1490 <a name="_sub46" href="#_subfunctions" class="code">function menuUsersGuide_Callback(hObject, eventdata, handles)</a>
1491 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1492 <span class="keyword">try</span> <span class="comment">% to open the User Guide PDF</span>
1493     open([pwd filesep <span class="string">'doc'</span> filesep <span class="string">'VMT User Guide '</span> guiparams.vmt_version <span class="string">'.pdf'</span>]);
1494     
1495 <span class="keyword">catch</span> err <span class="comment">%#ok&lt;NASGU&gt;</span>
1496     
1497     <span class="keyword">if</span> isdeployed
1498         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1499             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1500         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1501             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1502             errLogFileName},<span class="keyword">...</span>
1503             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1504             <span class="string">'error'</span>);
1505         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1506         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1507         fclose(fid);
1508         rethrow(err)
1509     <span class="keyword">else</span>
1510         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1511             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1512             <span class="string">'error'</span>);
1513         rethrow(err);
1514     <span class="keyword">end</span>
1515 <span class="keyword">end</span>
1516 <span class="comment">% [EOF] menuASCII2KML_Callback</span>
1517 
1518 <span class="comment">% --------------------------------------------------------------------</span>
1519 <a name="_sub47" href="#_subfunctions" class="code">function menuFunctionLibrary_Callback(hObject, eventdata, handles)</a>
1520 <span class="comment">% Get the Application data:</span>
1521 <span class="comment">% -------------------------</span>
1522 <span class="comment">% guiparams = getappdata(handles.figure1,'guiparams'); %#ok&lt;NASGU&gt;</span>
1523 
1524 <span class="keyword">try</span>
1525     <span class="comment">% Construct a URL to a local file which can be interpreted by any</span>
1526     <span class="comment">% web-browser</span>
1527     rootpath = strrep(pwd,filesep,<span class="string">'/'</span>);
1528     webaddress = [<span class="string">'file:///'</span> rootpath <span class="string">'/doc/index.html'</span>];
1529     system([<span class="string">'start '</span> webaddress]);
1530 <span class="comment">%     [stat,h,url] = web(webaddress) % Produced with m2html (FEX)</span>
1531 <span class="keyword">catch</span> err 
1532     <span class="keyword">if</span> isdeployed
1533         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1534             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1535         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1536             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1537             errLogFileName},<span class="keyword">...</span>
1538             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1539             <span class="string">'error'</span>);
1540         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1541         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1542         fclose(fid);
1543         rethrow(err)
1544     <span class="keyword">else</span>
1545         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1546             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1547             <span class="string">'error'</span>);
1548         rethrow(err);
1549     <span class="keyword">end</span>
1550 <span class="keyword">end</span>
1551 
1552 <span class="comment">% [EOF] menuFunctionLibrary_Callback</span>
1553 
1554 <span class="comment">% --------------------------------------------------------------------</span>
1555 <a name="_sub48" href="#_subfunctions" class="code">function menuCheckForUpdates_Callback(hObject, eventdata, handles)</a>
1556 
1557 <span class="comment">% Get the Application data:</span>
1558 <span class="comment">% -------------------------</span>
1559 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1560 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1561 
1562 <span class="comment">% Check version tag against the web, and display a message</span>
1563 <span class="keyword">try</span>
1564     current_vmt_version = urlread(<span class="string">'http://hydroacoustics.usgs.gov/movingboat/VMT/VMT_version.txt'</span>);
1565     <span class="comment">%     current_vmt_version = urlread('http://hydroacoustics.usgs.gov/movingboat/VMT/VMT_version.txt');</span>
1566 <span class="keyword">catch</span> err <span class="comment">%#ok&lt;NASGU&gt;</span>
1567     <span class="keyword">if</span> isdeployed
1568         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1569             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1570         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1571             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1572             errLogFileName},<span class="keyword">...</span>
1573             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1574             <span class="string">'error'</span>);
1575         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1576         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1577         fclose(fid);
1578         rethrow(err)
1579     <span class="keyword">else</span>
1580         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1581             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1582             <span class="string">'error'</span>);
1583         rethrow(err);
1584     <span class="keyword">end</span>
1585 <span class="keyword">end</span>
1586 
1587 <span class="keyword">if</span> strcmpi(guiparams.vmt_version,current_vmt_version)
1588     h = msgbox(<span class="keyword">...</span>
1589         {<span class="string">'VMT is currently up to date, no updates available.'</span>;<span class="keyword">...</span>
1590         <span class="string">''</span>;<span class="keyword">...</span>
1591         [<span class="string">'Latest available version: '</span> current_vmt_version];<span class="keyword">...</span>
1592         [<span class="string">'Installed version: '</span> guiparams.vmt_version]},<span class="string">'Check for updates'</span>,<span class="string">'modal'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1593 <span class="keyword">else</span>
1594     h = msgbox(<span class="keyword">...</span>
1595         {<span class="string">'VMT is out of date. Please visit the VMT homepage.'</span>;<span class="keyword">...</span>
1596         <span class="string">''</span>;<span class="keyword">...</span>
1597         [<span class="string">'Latest available version: '</span> current_vmt_version];<span class="keyword">...</span>
1598         [<span class="string">'Installed version: '</span> guiparams.vmt_version]},<span class="string">'Check for updates'</span>,<span class="string">'modal'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1599 <span class="keyword">end</span>
1600 <span class="comment">% [EOF] menuCheckForUpdates_Callback</span>
1601 
1602 <span class="comment">% --------------------------------------------------------------------</span>
1603 <a name="_sub49" href="#_subfunctions" class="code">function menuAbout_Callback(hObject, eventdata, handles)</a>
1604 
1605 <span class="comment">% Get the Application data:</span>
1606 <span class="comment">% -------------------------</span>
1607 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1608 messagestr = <span class="keyword">...</span>
1609     {<span class="string">'The Velocity Mapping Toolbox'</span>;<span class="keyword">...</span>
1610     [<span class="string">'   Version: '</span> guiparams.vmt_version];<span class="keyword">...</span>
1611     <span class="string">''</span>;<span class="keyword">...</span>
1612     <span class="string">''</span>;<span class="keyword">...</span>
1613     <span class="string">'With collaborations from:'</span>;<span class="keyword">...</span>
1614     <span class="string">'   U.S. Geological Survey'</span>;<span class="keyword">...</span>
1615     <span class="string">'   University of Illinois'</span>;<span class="keyword">...</span>
1616     <span class="string">'   University of Hull'</span>;<span class="keyword">...</span>
1617     <span class="string">''</span>;<span class="keyword">...</span>
1618     <span class="string">''</span>;<span class="keyword">...</span>
1619     <span class="string">'Citation: '</span>;<span class="keyword">...</span>
1620     <span class="string">'   Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L.,'</span>;<span class="keyword">...</span>
1621     <span class="string">'   Rhoads, B. L., Oberg, K. A., Best, J. L., Mueller, D. S.,'</span>;<span class="keyword">...</span>
1622     <span class="string">'   Johnson, K. K. and Riley, J. D. (2013), Velocity Mapping'</span>;<span class="keyword">...</span>
1623     <span class="string">'   Toolbox (VMT): a processing and visualization suite for'</span>;<span class="keyword">...</span>
1624     <span class="string">'   moving-vessel ADCP measurements. Earth Surf. Process.'</span>;<span class="keyword">...</span>
1625     <span class="string">'   Landforms.doi: 10.1002/esp.3367'</span>};
1626 h = msgbox(messagestr,<span class="string">'About VMT'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1627 <span class="comment">% [EOF] menuAbout_Callback</span>
1628 
1629 
1630 
1631 
1632 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
1633 <span class="comment">% TOOLBAR CALLBACKS %</span>
1634 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
1635 
1636 <span class="comment">% --------------------------------------------------------------------</span>
1637 <a name="_sub50" href="#_subfunctions" class="code">function loadDataCallback(hObject, eventdata, handles)</a>
1638 <span class="comment">% Read Files into Data Structure using tfile.</span>
1639 
1640 <span class="comment">% Get the Application data:</span>
1641 <span class="comment">% -------------------------</span>
1642 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1643 guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1644 
1645 <span class="comment">% Ask the user to select files:</span>
1646 <span class="comment">% -----------------------------</span>
1647 current_file = fullfile(guiprefs.ascii_path,guiprefs.ascii_file{1});
1648 [filename,pathname] = uigetfile({<span class="string">'*_ASC.TXT'</span>,<span class="string">'ASCII (*_ASC.TXT)'</span>}, <span class="keyword">...</span>
1649     <span class="string">'Select the ASCII Output Files'</span>, <span class="keyword">...</span>
1650     current_file, <span class="keyword">...</span>
1651     <span class="string">'MultiSelect'</span>,<span class="string">'on'</span>);
1652 
1653 <span class="keyword">if</span> ischar(pathname) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
1654     guiparams.data_folder = pathname;
1655     <span class="keyword">if</span> ischar(filename)
1656         filename = {filename};
1657     <span class="keyword">end</span>
1658     guiparams.data_files = filename;
1659     guiparams.mat_file = <span class="string">''</span>;
1660     
1661     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1662     
1663    
1664     
1665     <span class="comment">% Update the preferences:</span>
1666     <span class="comment">% -----------------------</span>
1667     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1668     guiprefs.ascii_path = pathname;
1669     guiprefs.ascii_file = filename;
1670     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1671     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'ascii'</span>)
1672     
1673     <span class="comment">% Push messages to Log Window:</span>
1674     <span class="comment">% ----------------------------</span>
1675     log_text = {<span class="keyword">...</span>
1676         <span class="string">''</span>;<span class="keyword">...</span>
1677         [<span class="string">'%--- '</span> datestr(now) <span class="string">' ---%'</span>];<span class="keyword">...</span>
1678         <span class="string">'Current Project Directory:'</span>;<span class="keyword">...</span>
1679         guiparams.data_folder;
1680         <span class="string">'Loading the following files into memory:'</span>;<span class="keyword">...</span>
1681         char(filename)};
1682     statusLogging(handles.LogWindow, log_text)
1683     
1684     <span class="comment">% Read the file(s)</span>
1685     <span class="comment">% ----------------</span>
1686     [~,~,savefile,A,z] = <span class="keyword">...</span>
1687         <a href="VMT_ReadFiles.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles(zPathName,zFileName)">VMT_ReadFiles</a>(guiparams.data_folder,guiparams.data_files);
1688     guiparams.savefile = savefile;
1689     guiparams.A        = A;
1690     guiparams.z        = z;
1691     
1692     
1693     <span class="comment">% Set the vertical grid node spacing</span>
1694     <span class="comment">% ----------------------------------</span>
1695     <span class="comment">% For RioGrande probes, use the bin size, else just use the default</span>
1696     <span class="comment">% Backwards compatible</span>
1697     <span class="keyword">if</span> A(1).Sup.wm ~= 3 <span class="comment">% RG</span>
1698         set(handles.VerticalGridNodeSpacing,<span class="string">'String'</span>,double(A(1).Sup.binSize_cm(1))/100)
1699         guiparams.vertical_grid_node_spacing = double(A(1).Sup.binSize_cm(1))/100;
1700     <span class="keyword">else</span> <span class="comment">% Older file, must be RR or M9</span>
1701         set(handles.VerticalGridNodeSpacing,<span class="string">'String'</span>,0.4)
1702         guiparams.vertical_grid_node_spacing = 0.4;
1703     <span class="keyword">end</span>
1704     
1705     
1706     <span class="comment">% Save application data</span>
1707     <span class="comment">% ---------------------</span>
1708     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1709        
1710 <span class="comment">%</span>
1711 <span class="comment">%     % Preprocess the data:</span>
1712 <span class="comment">%     % --------------------</span>
1713 <span class="comment">%     A = VMT_PreProcess(z,A);</span>
1714 <span class="comment">%</span>
1715 <span class="comment">%     % Push messages to Log Window:</span>
1716 <span class="comment">%     % ----------------------------</span>
1717 <span class="comment">%     log_text = {...</span>
1718 <span class="comment">%         '   Preprocessing complete.';...</span>
1719 <span class="comment">%         '   Begin Data Processing...'};</span>
1720 <span class="comment">%     statusLogging(handles.LogWindow, log_text)</span>
1721 <span class="comment">%</span>
1722 <span class="comment">%     A(1).hgns = guiparams.horizontal_grid_node_spacing;</span>
1723 <span class="comment">%     A(1).wse  = guiparams.wse;  %Set the WSE to entered value</span>
1724 <span class="comment">%     [A,V,processing_log_text] = VMT_ProcessTransects(z,A,...</span>
1725 <span class="comment">%         guiparams.set_cross_section_endpoints,...</span>
1726 <span class="comment">%         guiparams.unit_discharge_correction);</span>
1727 <span class="comment">%</span>
1728 <span class="comment">%     % Push messages to Log Window:</span>
1729 <span class="comment">%     % ----------------------------</span>
1730 <span class="comment">%     statusLogging(handles.LogWindow, processing_log_text)</span>
1731 <span class="comment">%</span>
1732 <span class="comment">%     % Store the data:</span>
1733 <span class="comment">%     % ---------------</span>
1734 <span class="comment">%     guiparams.z = z;</span>
1735 <span class="comment">%     guiparams.A = A;</span>
1736 <span class="comment">%     guiparams.V = V;</span>
1737 <span class="comment">%     setappdata(handles.figure1,'guiparams',guiparams)</span>
1738     
1739           
1740     <span class="comment">% Update the GUI:</span>
1741     <span class="comment">% ---------------</span>
1742     <a href="#_sub95" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
1743     
1744     <span class="comment">% If data are RG or SP, set vertical grid node spacing to bin size</span>
1745     
1746 <span class="keyword">end</span>
1747 <span class="comment">% [EOF] loadDataCallback</span>
1748 
1749 
1750 
1751 <span class="comment">% --------------------------------------------------------------------</span>
1752 <a name="_sub51" href="#_subfunctions" class="code">function saveDataCallback(hObject, eventdata, handles)</a>
1753 <span class="comment">% SaveMATFile_Callback(handles.SaveMATFile,eventdata,handles)</span>
1754 
1755 <span class="comment">% Get the Application data:</span>
1756 <span class="comment">% -------------------------</span>
1757 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1758 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1759 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1760 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1761 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
1762 
1763 [the_file,the_path] = <span class="keyword">...</span>
1764     uiputfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-Files (*.mat)'</span>}, <span class="keyword">...</span>
1765     <span class="string">'Save MAT-File'</span>, <span class="keyword">...</span>
1766     fullfile(guiparams.mat_path,guiparams.savefile));
1767 
1768 <span class="comment">% Save the processed data to a MAT file:</span>
1769 <span class="comment">% --------------------------------------</span>
1770 <span class="keyword">if</span> ischar(the_file)
1771     guiparams.mat_path = the_path;
1772     guiparams.mat_file = the_file;
1773     guiparams.savefile = the_file;
1774     
1775     <span class="comment">% Re-store the Application data:</span>
1776     <span class="comment">% ------------------------------</span>
1777     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1778     
1779     <span class="comment">% Update the preferences:</span>
1780     <span class="comment">% -----------------------</span>
1781     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1782     guiprefs.mat_path = the_path;
1783     guiprefs.mat_file = the_file;
1784     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1785     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
1786     
1787     [pathstr,filename,extension] = fileparts([guiparams.mat_path guiparams.savefile]);
1788     savefile = fullfile(pathstr,[filename extension]);
1789     <span class="comment">%h = msgbox(['Saving processed data in MAT File ''' filename extension ''''], ...</span>
1790     <span class="comment">%    'Saving Processed Data File...'); %#ok&lt;NASGU&gt;</span>
1791     log_text = {<span class="keyword">...</span>
1792         <span class="string">'Saving Processed Data File...'</span>;<span class="keyword">...</span>
1793         savefile};
1794     statusLogging(handles.LogWindow,log_text)
1795     save(savefile,<span class="string">'A'</span>,<span class="string">'V'</span>,<span class="string">'z'</span>,<span class="string">'Map'</span>)
1796 <span class="keyword">end</span>
1797 
1798 <span class="comment">% [EOF] saveDataCallback</span>
1799 
1800 
1801 <span class="comment">% --------------------------------------------------------------------</span>
1802 <a name="_sub52" href="#_subfunctions" class="code">function saveBathymetryCallback(hObject, eventdata, handles)</a>
1803 
1804 <span class="comment">% Get the Application data:</span>
1805 <span class="comment">% -------------------------</span>
1806 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1807 z   = guiparams.z;
1808 A   = guiparams.A;
1809 <span class="comment">% V   = guiparams.V;   %#ok&lt;NASGU&gt;</span>
1810 <span class="comment">% Map = guiparams.Map; %#ok&lt;NASGU&gt;</span>
1811 
1812 <span class="comment">% Compute multibeam bathymetry:</span>
1813 <span class="comment">% -----------------------------</span>
1814 msgbox(<span class="string">'Processing Bathymetry...Please Be Patient'</span>,<span class="string">'VMT Status'</span>,<span class="string">'help'</span>,<span class="string">'replace'</span>)
1815 <span class="comment">%A = VMT_MBBathy(z,A,savefile,handles.beam_angle,handles.MagneticVariation,handles.WSE);</span>
1816 <a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wsedata,saveaux)">VMT_MBBathy</a>(z,A,savefile, <span class="keyword">...</span>
1817     guiparams.beam_angle, <span class="keyword">...</span>
1818     guiparams.magnetic_variation, <span class="keyword">...</span>
1819     guiparams.wse, <span class="keyword">...</span>
1820     guiparams.output_auxiliary_data);
1821 
1822 msgbox(<span class="string">'Bathymetry Output Complete'</span>,<span class="string">'VMT Status'</span>,<span class="string">'help'</span>,<span class="string">'replace'</span>)
1823 
1824 <span class="comment">% [EOF] saveBathymetryCallback</span>
1825 
1826 <span class="comment">% --------------------------------------------------------------------</span>
1827 <a name="_sub53" href="#_subfunctions" class="code">function plottingParametersCallback(hObject, eventdata, handles)</a>
1828 
1829 <span class="comment">% Get the Application data:</span>
1830 <span class="comment">% -------------------------</span>
1831 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1832 
1833 [guiparams.english_units,guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
1834     guiparams.presentation,guiparams.print] = <span class="keyword">...</span>
1835     plotParametersDialog(guiparams.english_units, <span class="keyword">...</span>
1836     guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
1837     guiparams.presentation,guiparams.print,<span class="keyword">...</span>
1838     handles.figure1);
1839 
1840 <span class="comment">% Update the GUI:</span>
1841 <span class="comment">% ---------------</span>
1842 <span class="keyword">if</span> guiparams.english_units
1843     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1844     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1845 <span class="keyword">else</span>
1846     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1847     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1848 <span class="keyword">end</span>
1849 
1850 <span class="keyword">if</span> guiparams.set_cross_section_endpoints
1851     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1852     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1853 <span class="keyword">else</span>
1854     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1855     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1856 <span class="keyword">end</span>
1857 
1858 <span class="keyword">if</span> guiparams.presentation
1859     <a href="#_sub38" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
1860 <span class="comment">%     set(handles.menuStylePrint,           'Checked','off')</span>
1861 <span class="comment">%     set(handles.menuStylePresentation,    'Checked','on')</span>
1862 <span class="comment">%     set(handles.menuPrintFormat,          'Checked','off')</span>
1863 <span class="comment">%     set(handles.menuPresentationFormat,   'Checked','on')</span>
1864 <span class="keyword">else</span>
1865     <a href="#_sub37" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
1866 <span class="comment">%     set(handles.menuStylePrint,           'Checked','on')</span>
1867 <span class="comment">%     set(handles.menuStylePresentation,    'Checked','off')</span>
1868 <span class="comment">%     set(handles.menuPrintFormat,          'Checked','on')</span>
1869 <span class="comment">%     set(handles.menuPresentationFormat,   'Checked','off')</span>
1870 <span class="keyword">end</span>
1871 
1872 <span class="comment">% Re-store the Application data:</span>
1873 <span class="comment">% ------------------------------</span>
1874 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1875 
1876 <span class="comment">% [EOF] plottingParametersCallback</span>
1877 
1878 
1879 <span class="comment">% --------------------------------------------------------------------</span>
1880 <a name="_sub54" href="#_subfunctions" class="code">function processingParametersCallback(hObject, eventdata, handles)</a>
1881 
1882 <span class="comment">% Get the Application data:</span>
1883 <span class="comment">% -------------------------</span>
1884 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1885 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1886 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1887 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1888 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
1889 
1890 <span class="comment">% [EOF] processingParametersCallback</span>
1891 
1892 
1893 <span class="comment">% --------------------------------------------------------------------</span>
1894 <a name="_sub55" href="#_subfunctions" class="code">function shiptracksPlotCallback(hObject, eventdata, handles)</a>
1895 <span class="comment">% Plot 1</span>
1896 
1897 <span class="comment">% Get the Application data:</span>
1898 <span class="comment">% -------------------------</span>
1899 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1900 z = guiparams.z;
1901 A = guiparams.A;
1902 V = guiparams.V; <span class="comment">%#ok&lt;NASGU&gt;</span>
1903 <span class="comment">% Map = guiparams.Map;</span>
1904 setends = guiparams.set_cross_section_endpoints;
1905 
1906 <span class="comment">% Preprocess the data:</span>
1907 <span class="comment">% --------------------</span>
1908 A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
1909 
1910 <span class="comment">% Push messages to Log Window:</span>
1911 <span class="comment">% ----------------------------</span>
1912 log_text = {<span class="keyword">...</span>
1913     <span class="string">'   Preprocessing complete.'</span>;<span class="keyword">...</span>
1914     <span class="string">'   Begin Data Processing...'</span>};
1915 statusLogging(handles.LogWindow, log_text)
1916 
1917 <span class="comment">% Process the transects:</span>
1918 <span class="comment">% ----------------------</span>
1919 A(1).hgns = guiparams.horizontal_grid_node_spacing;
1920 A(1).vgns = guiparams.vertical_grid_node_spacing;
1921 A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
1922 [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
1923     guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
1924 
1925 <span class="comment">% Compute the smoothed variables</span>
1926 <span class="comment">% ------------------------------</span>
1927 <span class="comment">% This is required so that the V struc is complete at any point during</span>
1928 <span class="comment">% runtime.</span>
1929 V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
1930     <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
1931     guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
1932     guiparams.vertical_smoothing_window);
1933 
1934 <span class="comment">% Push messages to Log Window:</span>
1935 <span class="comment">% ----------------------------</span>
1936 statusLogging(handles.LogWindow, processing_log_text)
1937 
1938 <span class="comment">% Store the data:</span>
1939 <span class="comment">% ---------------</span>
1940 guiparams.z = z;
1941 guiparams.A = A;
1942 guiparams.V = V;
1943 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1944 
1945 <span class="comment">% Push messages to Log Window:</span>
1946 <span class="comment">% ----------------------------</span>
1947 log_text = {<span class="string">'Plotting Shiptracks (reprocessing)'</span>};
1948 statusLogging(handles.LogWindow, log_text)
1949 
1950 <span class="comment">% Create or replot the Shiptracks</span>
1951 <span class="comment">% -------------------------------</span>
1952 <span class="comment">% Grab the axes to the plot</span>
1953 <span class="comment">% axes(handles.Plot1Shiptracks);</span>
1954 <a href="VMT_PlotShiptracks.html" class="code" title="function hf = VMT_PlotShiptracks(A,V,z,setends,hf)">VMT_PlotShiptracks</a>(A,V,z,setends,handles.Plot1Shiptracks); <span class="comment">% PLOT 1</span>
1955 
1956 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
1957 <span class="comment">% New plot display window</span>
1958 <span class="comment">% h = VMT_CreatePlotDisplay('shiptracks');</span>
1959 <span class="comment">% h = figure(1); clf</span>
1960 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
1961 
1962 <span class="comment">% [EOF] shiptracksPlotCallback</span>
1963 
1964 
1965 <span class="comment">% --------------------------------------------------------------------</span>
1966 <a name="_sub56" href="#_subfunctions" class="code">function planviewPlotCallback(hObject, eventdata, handles)</a>
1967 <span class="comment">% Plot 2</span>
1968 
1969 <span class="comment">% Get the Application data:</span>
1970 <span class="comment">% -------------------------</span>
1971 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1972 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1973 
1974 <span class="keyword">if</span> iscell(guiparams.mat_file) <span class="comment">% Multiple MAT files loaded</span>
1975     <span class="comment">% Push messages to Log Window:</span>
1976     <span class="comment">% ----------------------------</span>
1977     log_text = {<span class="string">'Plotting Multiple Transects (Planview)'</span>};
1978     statusLogging(handles.LogWindow, log_text)
1979     
1980        
1981     <span class="comment">% Push plotting parameters to log window:</span>
1982     <span class="comment">% ---------------------------------------</span>
1983     log_text = {<span class="keyword">...</span>
1984         <span class="string">'Plan View Plotting Parameters'</span>;<span class="keyword">...</span>
1985         sprintf(<span class="string">'   Depth range %3.1f to %3.1f m'</span>,guiparams.depth_range_min, guiparams.depth_range_max);<span class="keyword">...</span>
1986         sprintf(<span class="string">'   Vector scale: %d'</span>,guiparams.vector_scale_plan_view);<span class="keyword">...</span>
1987         sprintf(<span class="string">'   Vector spacing: %d'</span>,guiparams.vector_spacing_plan_view);<span class="keyword">...</span>
1988         sprintf(<span class="string">'   Smoothing window size: %d'</span>,guiparams.smoothing_window_size);<span class="keyword">...</span>
1989         };
1990     statusLogging(handles.LogWindow, log_text)
1991     
1992     <span class="comment">% Plot the data:</span>
1993     <span class="comment">% --------------</span>
1994     z = [];
1995     A = [];
1996     V = [];
1997     Map = [];
1998     depth_range = [guiparams.depth_range_min guiparams.depth_range_max];
1999     [PVdata,~,log_text] = <a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>(z,A,V,Map, <span class="keyword">...</span>
2000         depth_range, <span class="keyword">...</span>
2001         guiparams.vector_scale_plan_view, <span class="keyword">...</span>
2002         guiparams.vector_spacing_plan_view, <span class="keyword">...</span>
2003         guiparams.smoothing_window_size, <span class="keyword">...</span>
2004         guiparams.display_shoreline, <span class="keyword">...</span>
2005         guiparams.english_units, <span class="keyword">...</span>
2006         guiparams.mat_file, <span class="keyword">...</span>
2007         guiparams.mat_path); <span class="comment">% PLOT2</span>
2008     statusLogging(handles.LogWindow, log_text)
2009     
2010     <span class="comment">% Plot a Shoreline Map:</span>
2011     <span class="comment">% ---------------------</span>
2012     <span class="keyword">if</span> guiparams.display_shoreline
2013         [guiprefs.shoreline_file,guiprefs.shoreline_path] = uigetfile(<span class="keyword">...</span>
2014             {<span class="string">'*.txt;*.csv'</span>,<span class="string">'All Text Files'</span>; <span class="string">'*.*'</span>,<span class="string">'All Files'</span>},<span class="keyword">...</span>
2015             <span class="string">'Select Map Text File'</span>,<span class="keyword">...</span>
2016             fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
2017         <span class="keyword">if</span> ischar(guiprefs.shoreline_file) <span class="comment">% User did not hit cancel</span>
2018             mapdata = dlmread(fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
2019             Map.UTMe   = mapdata(:,1);
2020             Map.UTMn   = mapdata(:,2);
2021             Map.infile = fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file);
2022             <span class="comment">%Map.UTMzone = zone;</span>
2023         <span class="keyword">else</span>
2024             Map = [];
2025         <span class="keyword">end</span>
2026         <a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>(Map)
2027         log_text = {<span class="keyword">...</span>
2028             <span class="string">'   Loading map file.'</span>;<span class="keyword">...</span>
2029             <span class="string">'   Plotting shoreline.'</span><span class="keyword">...</span>
2030             };
2031         statusLogging(handles.LogWindow, log_text)
2032     <span class="keyword">else</span>
2033         Map = [];
2034     <span class="keyword">end</span>
2035     
2036 <span class="keyword">else</span>
2037     z = guiparams.z;
2038     A = guiparams.A;
2039     <span class="comment">% V = guiparams.V;</span>
2040     Map = guiparams.Map;
2041     
2042     <span class="comment">% Push messages to Log Window:</span>
2043     <span class="comment">% ----------------------------</span>
2044     log_text = {<span class="string">'Plotting Depth Averaged Vectors (reprocessing)'</span>};
2045     statusLogging(handles.LogWindow, log_text)
2046     
2047         
2048     <span class="comment">% Preprocess the data:</span>
2049     <span class="comment">% --------------------</span>
2050     A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
2051     
2052     <span class="comment">% Process the transects:</span>
2053     <span class="comment">% ----------------------</span>
2054     A(1).hgns = guiparams.horizontal_grid_node_spacing;
2055     A(1).vgns = guiparams.vertical_grid_node_spacing;
2056     A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2057     [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2058         guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
2059     
2060     <span class="comment">% Compute the smoothed variables</span>
2061     <span class="comment">% ------------------------------</span>
2062     <span class="comment">% This is required so that the V struc is complete at any point during</span>
2063     <span class="comment">% runtime.</span>
2064     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2065         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
2066         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2067         guiparams.vertical_smoothing_window);
2068     
2069     <span class="comment">% Push messages to Log Window:</span>
2070     <span class="comment">% ----------------------------</span>
2071     statusLogging(handles.LogWindow, processing_log_text)
2072     
2073     <span class="comment">% Plot the cross section:</span>
2074     <span class="comment">% -----------------------</span>
2075     log_text = {<span class="keyword">...</span>
2076         <span class="string">'Plan View Plotting Parameters'</span>;<span class="keyword">...</span>
2077         sprintf(<span class="string">'   Depth range %3.1f to %3.1f m'</span>,guiparams.depth_range_min, guiparams.depth_range_max);<span class="keyword">...</span>
2078         sprintf(<span class="string">'   Vector scale: %d'</span>,guiparams.vector_scale_plan_view);<span class="keyword">...</span>
2079         sprintf(<span class="string">'   Vector spacing: %d'</span>,guiparams.vector_spacing_plan_view);<span class="keyword">...</span>
2080         sprintf(<span class="string">'   Smoothing window size: %d'</span>,guiparams.smoothing_window_size);<span class="keyword">...</span>
2081         };
2082     statusLogging(handles.LogWindow, log_text)
2083     
2084     <span class="comment">% Plot the data:</span>
2085     <span class="comment">% --------------</span>
2086     <span class="comment">%msgbox('Plotting Plan View','VMT Status','help','replace');</span>
2087     depth_range = [guiparams.depth_range_min guiparams.depth_range_max];
2088     
2089     
2090     [PVdata,~,log_text] = <a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>(z,A,V,Map, <span class="keyword">...</span>
2091         depth_range, <span class="keyword">...</span>
2092         guiparams.vector_scale_plan_view, <span class="keyword">...</span>
2093         guiparams.vector_spacing_plan_view, <span class="keyword">...</span>
2094         guiparams.smoothing_window_size, <span class="keyword">...</span>
2095         guiparams.display_shoreline, <span class="keyword">...</span>
2096         guiparams.english_units, <span class="keyword">...</span>
2097         guiparams.mat_file, <span class="keyword">...</span>
2098         guiparams.mat_path); <span class="comment">% PLOT2</span>
2099     statusLogging(handles.LogWindow, log_text)
2100     
2101     <span class="comment">% Plot a Shoreline Map:</span>
2102     <span class="comment">% ---------------------</span>
2103     <span class="keyword">if</span> guiparams.display_shoreline
2104         [guiprefs.shoreline_file,guiprefs.shoreline_path] = uigetfile(<span class="keyword">...</span>
2105             {<span class="string">'*.txt;*.csv'</span>,<span class="string">'All Text Files'</span>; <span class="string">'*.*'</span>,<span class="string">'All Files'</span>},<span class="keyword">...</span>
2106             <span class="string">'Select Map Text File'</span>,<span class="keyword">...</span>
2107             fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
2108         <span class="keyword">if</span> ischar(guiprefs.shoreline_file) <span class="comment">% User did not hit cancel</span>
2109             mapdata = dlmread(fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
2110             Map.UTMe   = mapdata(:,1);
2111             Map.UTMn   = mapdata(:,2);
2112             Map.infile = fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file);
2113             <span class="comment">%Map.UTMzone = zone;</span>
2114         <span class="keyword">else</span>
2115             Map = [];
2116         <span class="keyword">end</span>
2117         <a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>(Map)
2118         log_text = {<span class="keyword">...</span>
2119             <span class="string">'   Loading map file.'</span>;<span class="keyword">...</span>
2120             <span class="string">'   Plotting shoreline.'</span><span class="keyword">...</span>
2121             };
2122         statusLogging(handles.LogWindow, log_text)
2123     <span class="keyword">else</span>
2124         Map = [];
2125     <span class="keyword">end</span>
2126     
2127 <span class="keyword">end</span>
2128 
2129 <span class="keyword">if</span> guiparams.add_background
2130     [guiprefs,log_text] = <a href="VMT_OverlayDOQQ.html" class="code" title="function [guiprefs,log_text] = VMT_OverlayDOQQ(guiprefs,varargin)">VMT_OverlayDOQQ</a>(guiprefs);
2131     statusLogging(handles.LogWindow, log_text)
2132 <span class="keyword">end</span>
2133 
2134 <span class="comment">% Update guiparams</span>
2135 <span class="comment">% ----------------</span>
2136 guiparams.z   = z;
2137 guiparams.A   = A;
2138 guiparams.V   = V;
2139 guiparams.Map = Map;
2140 guiparams.iric_anv_planview_data = PVdata;
2141 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams);
2142 
2143 <span class="comment">% Update preferences</span>
2144 <span class="comment">% ------------------</span>
2145 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2146 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'shoreline'</span>)
2147 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'aerial'</span>)
2148 
2149 <span class="comment">% Force plot to be formated properly</span>
2150 <span class="comment">% ----------------------------------</span>
2151 <span class="keyword">if</span> guiparams.presentation
2152     <a href="#_sub38" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
2153 <span class="keyword">else</span>
2154     <a href="#_sub37" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
2155 <span class="keyword">end</span>
2156 <span class="keyword">switch</span> guiparams.renderer
2157     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
2158         <a href="#_sub18" class="code" title="subfunction menuOpenGL_Callback(hObject, eventdata, handles)">menuOpenGL_Callback</a>(hObject, eventdata, handles)
2159     <span class="keyword">case</span> <span class="string">'painters'</span>
2160         <a href="#_sub19" class="code" title="subfunction menuPainters_Callback(hObject, eventdata, handles)">menuPainters_Callback</a>(hObject, eventdata, handles)
2161     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
2162         <a href="#_sub20" class="code" title="subfunction menuZbuffer_Callback(hObject, eventdata, handles)">menuZbuffer_Callback</a>(hObject, eventdata, handles)
2163 <span class="keyword">end</span>
2164 
2165 <span class="comment">% Focus the figure</span>
2166 <span class="comment">% ----------------</span>
2167 hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
2168 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
2169     figure(hff)
2170 <span class="keyword">end</span>
2171 
2172 <span class="comment">% Start the Graphics Control Gui</span>
2173 <span class="comment">% ------------------------------</span>
2174 VMT_GraphicsControl
2175 
2176 <span class="comment">% [EOF] planviewPlotCallback</span>
2177 
2178 
2179 <span class="comment">% --------------------------------------------------------------------</span>
2180 <a name="_sub57" href="#_subfunctions" class="code">function crosssectionPlotCallback(hObject, eventdata, handles)</a>
2181 <span class="comment">% Plot 3</span>
2182 
2183 <span class="comment">% Get the Application data:</span>
2184 <span class="comment">% -------------------------</span>
2185 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2186 z = guiparams.z;
2187 A = guiparams.A;
2188 <span class="comment">% V = guiparams.V;</span>
2189 <span class="comment">% Map = guiparams.Map;</span>
2190 
2191 <span class="comment">% Preprocess the data:</span>
2192 <span class="comment">% --------------------</span>
2193 A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
2194 
2195 <span class="comment">% Push messages to Log Window:</span>
2196 <span class="comment">% ----------------------------</span>
2197 log_text = {<span class="string">'Plotting Cross Section (reprocessing)'</span>};
2198 statusLogging(handles.LogWindow, log_text)
2199 
2200 <span class="comment">% Process the transects:</span>
2201 <span class="comment">% ----------------------</span>
2202 A(1).hgns = guiparams.horizontal_grid_node_spacing;
2203 A(1).vgns = guiparams.vertical_grid_node_spacing;
2204 A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2205 [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2206     guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
2207 
2208 <span class="comment">% Push messages to Log Window:</span>
2209 <span class="comment">% ----------------------------</span>
2210 statusLogging(handles.LogWindow, processing_log_text)
2211 
2212 <span class="comment">% Plot the cross section:</span>
2213 <span class="comment">% -----------------------</span>
2214 log_text = {<span class="keyword">...</span>
2215     <span class="string">'Cross Section Plotting Parameters'</span>;<span class="keyword">...</span>
2216     sprintf(<span class="string">'   Contour variable: %s'</span>          ,guiparams.contours(guiparams.idx_contour).string);<span class="keyword">...</span>
2217     sprintf(<span class="string">'   Vertical exaggeration: %d'</span>     ,guiparams.vertical_exaggeration);<span class="keyword">...</span>
2218     sprintf(<span class="string">'   Vector scale: %3.1f'</span>           ,guiparams.vector_scale_cross_section);<span class="keyword">...</span>
2219     sprintf(<span class="string">'   Horizontal vector spacing: %d'</span> ,guiparams.horizontal_vector_spacing);<span class="keyword">...</span>
2220     sprintf(<span class="string">'   Vertical vector spacing: %d'</span>   ,guiparams.vertical_vector_spacing);<span class="keyword">...</span>
2221     sprintf(<span class="string">'   Horizontal smooting window: %d'</span>,guiparams.horizontal_smoothing_window);<span class="keyword">...</span>
2222     sprintf(<span class="string">'   Vertical smoothing window: %d'</span> ,guiparams.vertical_smoothing_window);<span class="keyword">...</span>
2223     };
2224 <span class="keyword">if</span> guiparams.plot_secondary_flow_vectors
2225     log_text = vertcat(log_text, {<span class="keyword">...</span>
2226         sprintf(<span class="string">'   Vector variable: %s'</span>,guiparams.secondary_flows(guiparams.idx_secondary_flow_vector_variable).string);<span class="keyword">...</span>
2227         sprintf(<span class="string">'   Inc. vertical component?: %d'</span>,guiparams.include_vertical_velocity)<span class="keyword">...</span>
2228         });
2229 <span class="keyword">end</span>
2230 <span class="comment">% Push messages to Log Window:</span>
2231 <span class="comment">% ----------------------------</span>
2232 statusLogging(handles.LogWindow, log_text)
2233 
2234 <span class="keyword">if</span> guiparams.plot_secondary_flow_vectors
2235     <span class="comment">%msgbox('Plotting Cross Section','VMT Status','help','replace')</span>
2236 <span class="comment">%     V = VMT_SmoothVar(V, ...</span>
2237 <span class="comment">%         ...guiparams.contour, ...</span>
2238 <span class="comment">%         guiparams.horizontal_smoothing_window, ...</span>
2239 <span class="comment">%         guiparams.vertical_smoothing_window);</span>
2240     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2241         <span class="keyword">...</span><span class="comment">guiparams.secondary_flow_vector_variable, ...</span>
2242         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2243         guiparams.vertical_smoothing_window);
2244     [~,A,V,plot_cont_log_text] = <a href="VMT_PlotXSContQuiver.html" class="code" title="function [z,A,V,log_text] = VMT_PlotXSContQuiver(z,A,V,var,sf,exag,qspchorz,qspcvert,secvecvar,vvelcomp,plot_english,varargin)">VMT_PlotXSContQuiver</a>(z,A,V, <span class="keyword">...</span>
2245         guiparams.contour, <span class="keyword">...</span>
2246         guiparams.vector_scale_cross_section, <span class="keyword">...</span>
2247         guiparams.vertical_exaggeration, <span class="keyword">...</span>
2248         guiparams.horizontal_vector_spacing, <span class="keyword">...</span>
2249         guiparams.vertical_vector_spacing, <span class="keyword">...</span>
2250         guiparams.secondary_flow_vector_variable, <span class="keyword">...</span>
2251         guiparams.include_vertical_velocity, <span class="keyword">...</span>
2252         guiparams.english_units); <span class="comment">%#ok&lt;ASGLU&gt; % PLOT3</span>
2253     
2254 <span class="keyword">elseif</span> ~guiparams.plot_secondary_flow_vectors
2255     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2256         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
2257         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2258         guiparams.vertical_smoothing_window);
2259     
2260     [~,A,V,zmin,zmax,plot_cont_log_text] = <a href="VMT_PlotXSCont.html" class="code" title="function [z,A,V,zmin,zmax,log_text,fig_contour_handle] = VMT_PlotXSCont(z,A,V,var,exag,plot_english)">VMT_PlotXSCont</a>(z,A,V, <span class="keyword">...</span>
2261         guiparams.contour, <span class="keyword">...</span>
2262         guiparams.vertical_exaggeration, <span class="keyword">...</span>
2263         guiparams.english_units);  <span class="comment">%#ok&lt;ASGLU&gt;</span>
2264     
2265     guiparams.zmin = zmin;
2266     guiparams.zmax = zmax;
2267     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2268 <span class="keyword">end</span>
2269 
2270 <span class="comment">% Force plot to be formated properly</span>
2271 <span class="comment">% ----------------------------------</span>
2272 <span class="keyword">if</span> guiparams.presentation
2273     <a href="#_sub38" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
2274 <span class="keyword">else</span>
2275     <a href="#_sub37" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
2276 <span class="keyword">end</span>
2277 <span class="keyword">switch</span> guiparams.renderer
2278     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
2279         <a href="#_sub18" class="code" title="subfunction menuOpenGL_Callback(hObject, eventdata, handles)">menuOpenGL_Callback</a>(hObject, eventdata, handles)
2280     <span class="keyword">case</span> <span class="string">'painters'</span>
2281         <a href="#_sub19" class="code" title="subfunction menuPainters_Callback(hObject, eventdata, handles)">menuPainters_Callback</a>(hObject, eventdata, handles)
2282     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
2283         <a href="#_sub20" class="code" title="subfunction menuZbuffer_Callback(hObject, eventdata, handles)">menuZbuffer_Callback</a>(hObject, eventdata, handles)
2284 <span class="keyword">end</span>
2285 
2286 <span class="comment">% Focus the figure</span>
2287 <span class="comment">% ----------------</span>
2288 hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
2289 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
2290     figure(hff)
2291 <span class="keyword">end</span>
2292 
2293 <span class="comment">% Re-store the Application data:</span>
2294 <span class="comment">% ------------------------------</span>
2295 guiparams.V = V;
2296 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2297 
2298 <span class="comment">% Start the Graphics Control Gui</span>
2299 <span class="comment">% ------------------------------</span>
2300 VMT_GraphicsControl
2301 
2302 <span class="comment">% Push messages to Log Window:</span>
2303 <span class="comment">% ----------------------------</span>
2304 statusLogging(handles.LogWindow, plot_cont_log_text)
2305 <span class="comment">% msgbox('Plotting Complete','VMT Status','help','replace')</span>
2306 
2307 <span class="comment">% [EOF] crosssectionPlotCallback</span>
2308 
2309 
2310 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2311 <span class="comment">% DATA EXPORT CALLBACKS %</span>
2312 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2313 
2314 <span class="comment">% --------------------------------------------------------------------</span>
2315 <a name="_sub58" href="#_subfunctions" class="code">function SaveMATFile_Callback(hObject, eventdata, handles)</a>
2316 <span class="comment">% saveDataCallback(hObject, eventdata, handles)</span>
2317 
2318 <span class="comment">% Get the Application data:</span>
2319 <span class="comment">% -------------------------</span>
2320 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2321 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2322 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2323 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2324 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
2325 
2326 [the_file,the_path] = <span class="keyword">...</span>
2327     uiputfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-Files (*.mat)'</span>}, <span class="keyword">...</span>
2328     <span class="string">'Save MAT-File'</span>, <span class="keyword">...</span>
2329     fullfile(guiparams.mat_path,guiparams.savefile));
2330 
2331 <span class="comment">% Save the processed data to a MAT file:</span>
2332 <span class="comment">% --------------------------------------</span>
2333 <span class="keyword">if</span> ischar(the_file)
2334     guiparams.mat_path = the_path;
2335     guiparams.mat_file = the_file;
2336     guiparams.savefile = the_file;
2337     
2338     <span class="comment">% Re-store the Application data:</span>
2339     <span class="comment">% ------------------------------</span>
2340     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2341     
2342     <span class="comment">% Update the preferences:</span>
2343     <span class="comment">% -----------------------</span>
2344     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2345     guiprefs.mat_path = the_path;
2346     guiprefs.mat_file = the_file;
2347     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2348     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
2349     
2350     [~,filename,extension] = fileparts(guiparams.savefile);
2351     savefile = [filename extension];
2352     h = msgbox([<span class="string">'Saving processed data in MAT File '''</span> savefile <span class="string">''''</span>], <span class="keyword">...</span>
2353         <span class="string">'Saving Processed Data File...'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
2354     disp(<span class="string">'Saving Processed Data File...'</span>)
2355     disp(savefile)
2356     save(savefile,<span class="string">'A'</span>,<span class="string">'V'</span>,<span class="string">'z'</span>,<span class="string">'Map'</span>)
2357 <span class="keyword">end</span>
2358 
2359 <span class="comment">% [EOF] SaveMATFile_Callback</span>
2360 
2361 
2362 <span class="comment">% --------------------------------------------------------------------</span>
2363 <a name="_sub59" href="#_subfunctions" class="code">function SaveTecplotFile_Callback(hObject, eventdata, handles)</a>
2364 
2365 <span class="comment">% Get the Application data:</span>
2366 <span class="comment">% -------------------------</span>
2367 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2368 <span class="comment">% z   = guiparams.z;</span>
2369 <span class="comment">% A   = guiparams.A;</span>
2370 V   = guiparams.V;
2371 <span class="comment">% Map = guiparams.Map;</span>
2372 
2373 [the_file,the_path] = <span class="keyword">...</span>
2374     uiputfile({<span class="string">'*.dat'</span>,<span class="string">'Tecplot Files (*.dat)'</span>}, <span class="keyword">...</span>
2375     <span class="string">'Save Tecplot File'</span>, <span class="keyword">...</span>
2376     fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2377 
2378 <span class="comment">% Output the data (no smoothing) to Tecplot:</span>
2379 <span class="comment">% ------------------------------------------</span>
2380 <span class="keyword">if</span> ischar(the_file)
2381     guiparams.tecplot_path = the_path;
2382     guiparams.tecplot_file = the_file;
2383     
2384     <span class="comment">% Re-store the Application data:</span>
2385     <span class="comment">% ------------------------------</span>
2386     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2387     
2388     <span class="comment">% Update the preferences:</span>
2389     <span class="comment">% -----------------------</span>
2390     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2391     guiprefs.tecplot_path = the_path;
2392     guiprefs.tecplot_file = the_file;
2393     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2394     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'tecplot'</span>)
2395     
2396     <span class="comment">% Push to log window</span>
2397     <span class="comment">% ------------------</span>
2398     log_text = {<span class="keyword">...</span>
2399         <span class="string">'Exporting Data to Tecplot (*.dat) File...'</span>;<span class="keyword">...</span>
2400         <span class="string">'Directory:'</span>;<span class="keyword">...</span>
2401         the_path;<span class="keyword">...</span>
2402         [<span class="string">'Filename: '</span> the_file]};
2403     statusLogging(handles.LogWindow,log_text)
2404         
2405     <span class="keyword">if</span> isempty(V)
2406         A = guiparams.A;
2407         A(1).hgns = guiparams.horizontal_grid_node_spacing;
2408         A(1).vgns = guiparams.vertical_grid_node_spacing;
2409         A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2410         [~,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2411             guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
2412             guiparams.unit_discharge_correction);
2413     <span class="keyword">end</span>
2414     <a href="VMT_BuildTecplotFile.html" class="code" title="function VMT_BuildTecplotFile(V,savefile)">VMT_BuildTecplotFile</a>(V,fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2415     
2416     <span class="comment">% Push to log window</span>
2417     <span class="comment">% ------------------</span>
2418     log_text = {<span class="string">'Exporting XS Bathy Data to Tecplot (*.dat) File...'</span>};
2419     statusLogging(handles.LogWindow,log_text)
2420     
2421     <a href="VMT_BuildTecplotFile_XSBathy.html" class="code" title="function VMT_BuildTecplot_XSBathy(V,savefile)">VMT_BuildTecplotFile_XSBathy</a>(V,fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2422     
2423     <span class="comment">% Push to log window</span>
2424     <span class="comment">% ------------------</span>
2425     log_text = {<span class="string">'Tecplot Export Complete'</span>};
2426     statusLogging(handles.LogWindow,log_text)
2427    
2428 <span class="keyword">end</span>
2429 
2430 <span class="comment">% [EOF] SaveTechplotFile_Callback</span>
2431 
2432 
2433 <span class="comment">% --------------------------------------------------------------------</span>
2434 <a name="_sub60" href="#_subfunctions" class="code">function SaveGoogleEarthFile_Callback(hObject, eventdata, handles)</a>
2435 
2436 <span class="comment">% Get the Application data:</span>
2437 <span class="comment">% -------------------------</span>
2438 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2439 <span class="comment">% z   = guiparams.z;</span>
2440 A   = guiparams.A;
2441 V   = guiparams.V;
2442 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
2443 
2444 [the_file,the_path] = <span class="keyword">...</span>
2445     uiputfile({<span class="string">'*.kmz'</span>,<span class="string">'Google Earth Files (*.kmz)'</span>}, <span class="keyword">...</span>
2446     <span class="string">'Save Google Earth File'</span>, <span class="keyword">...</span>
2447     fullfile(guiparams.kmz_path,guiparams.kmz_file));
2448 
2449 <span class="comment">% Save the processed data to a Google Earth (KMZ) file:</span>
2450 <span class="comment">% -----------------------------------------------------</span>
2451 <span class="keyword">if</span> ischar(the_file)
2452     guiparams.kmz_path = the_path;
2453     guiparams.kmz_file = the_file;
2454     
2455     <span class="comment">% Re-store the Application data:</span>
2456     <span class="comment">% ------------------------------</span>
2457     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2458     
2459     <span class="comment">% Update the preferences:</span>
2460     <span class="comment">% -----------------------</span>
2461     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2462     guiprefs.kmz_path = the_path;
2463     guiprefs.kmz_file = the_file;
2464     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2465     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'kmz'</span>)
2466     
2467     <span class="comment">%     if guiparams.display_shoreline</span>
2468     <span class="comment">%         VMT_Shoreline2GE_3D(A,Map, ...</span>
2469     <span class="comment">%                             guiparams.vertical_exaggeration, ...</span>
2470     <span class="comment">%                             guiparams.vertical_offset);</span>
2471     <span class="comment">%     end</span>
2472     <span class="keyword">if</span> isempty(V)
2473         A = guiparams.A;
2474         A(1).hgns = guiparams.horizontal_grid_node_spacing;
2475         A(1).vgns = guiparams.vertical_grid_node_spacing;
2476         A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2477         [~,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2478             guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
2479             guiparams.unit_discharge_correction);
2480     <span class="keyword">end</span>
2481     <a href="VMT_MeanXS2GE_3D.html" class="code" title="function VMT_MeanXS2GE_3D(A,V,pathstr,filestr,vscale,voffset)">VMT_MeanXS2GE_3D</a>(A,V,[], <span class="keyword">...</span>
2482         fullfile(guiparams.kmz_path,guiparams.kmz_file), <span class="keyword">...</span>
2483         guiparams.vertical_exaggeration, <span class="keyword">...</span>
2484         guiparams.vertical_offset);
2485 <span class="keyword">end</span>
2486 
2487 <span class="comment">% [EOF] SaveGoogleEarthFile_Callback</span>
2488 
2489 
2490 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2491 <span class="comment">% DATA EXPORT/BATHYMETRY CALLBACKS %</span>
2492 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2493 
2494 <span class="comment">% --------------------------------------------------------------------</span>
2495 <a name="_sub61" href="#_subfunctions" class="code">function ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a>
2496 
2497 <span class="comment">% Get the Application data:</span>
2498 <span class="comment">% -------------------------</span>
2499 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2500 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2501 z = guiparams.z;
2502 A = guiparams.A;
2503 V = guiparams.V; <span class="comment">%#ok&lt;NASGU&gt;</span>
2504 <span class="comment">% Map = guiparams.Map;</span>
2505 setends = guiparams.set_cross_section_endpoints;
2506 
2507 [the_file,the_path] = <span class="keyword">...</span>
2508     uiputfile({<span class="string">'*.csv'</span>,<span class="string">'Multibeam Bathymetry Files (*.csv)'</span>}, <span class="keyword">...</span>
2509     <span class="string">'Export Multibeam Bathymetry'</span>, <span class="keyword">...</span>
2510     fullfile(guiprefs.multibeambathymetry_path, <span class="keyword">...</span>
2511     guiprefs.multibeambathymetry_file));
2512 
2513 <span class="keyword">if</span> ischar(the_file)
2514     guiparams.multibeambathymetry_path = the_path;
2515     guiparams.multibeambathymetry_file = the_file;
2516     
2517     <span class="comment">% Re-store the Application data:</span>
2518     <span class="comment">% ------------------------------</span>
2519     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2520     
2521     <span class="comment">% Update the preferences:</span>
2522     <span class="comment">% -----------------------</span>
2523     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2524     guiprefs.multibeambathymetry_path = the_path;
2525     guiprefs.multibeambathymetry_file = the_file;
2526     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2527     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'multibeambathymetry'</span>)
2528     
2529     <span class="keyword">if</span> guiparams.output_auxiliary_data
2530     <span class="keyword">end</span>
2531     
2532     <span class="comment">%msgbox('Processing Bathymetry...Please Be Patient','VMT Status','help','replace')</span>
2533     
2534     savefile = fullfile(guiparams.multibeambathymetry_path, <span class="keyword">...</span>
2535         guiparams.multibeambathymetry_file);
2536     
2537     log_text = {<span class="string">'Multibeam bathymetry file saved to:'</span>;<span class="keyword">...</span>
2538         [<span class="string">'   '</span> savefile]};
2539     statusLogging(handles.LogWindow,log_text)
2540     
2541     <span class="comment">% Process the transects:</span>
2542     <span class="comment">% ----------------------</span>
2543     A(1).hgns = guiparams.horizontal_grid_node_spacing;
2544     A(1).vgns = guiparams.vertical_grid_node_spacing;
2545     A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2546     [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2547         guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
2548     
2549     <span class="comment">% Compute the smoothed variables</span>
2550     <span class="comment">% ------------------------------</span>
2551     <span class="comment">% This is required so that the V struc is complete at any point during</span>
2552     <span class="comment">% runtime.</span>
2553     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2554         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
2555         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2556         guiparams.vertical_smoothing_window);
2557     
2558     <span class="comment">% Push messages to Log Window:</span>
2559     <span class="comment">% ----------------------------</span>
2560     statusLogging(handles.LogWindow, processing_log_text)
2561 
2562     
2563     <a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wsedata,saveaux)">VMT_MBBathy</a>(guiparams.z, <span class="keyword">...</span>
2564         guiparams.A, <span class="keyword">...</span>
2565         savefile, <span class="keyword">...</span>
2566         guiparams.beam_angle, <span class="keyword">...</span>
2567         guiparams.magnetic_variation, <span class="keyword">...</span>
2568         guiparams.wse, <span class="keyword">...</span>
2569         guiparams.output_auxiliary_data);
2570     
2571     <span class="comment">%msgbox('Bathymetry Output Complete','VMT Status','help','replace')</span>
2572     
2573 <span class="keyword">end</span>
2574 
2575 <span class="comment">% [EOF] ExportMultibeamBathymetry_Callback</span>
2576 
2577 
2578 <span class="comment">% --------------------------------------------------------------------</span>
2579 <a name="_sub62" href="#_subfunctions" class="code">function BeamAngle_Callback(hObject, eventdata, handles)</a>
2580 <span class="comment">% Get the beam angle</span>
2581 
2582 <span class="comment">% Get the Application data:</span>
2583 <span class="comment">% -------------------------</span>
2584 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2585 
2586 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2587 <span class="comment">% ----------------------------------------------------------------</span>
2588 new_beam_angle = str2double(get(hObject,<span class="string">'String'</span>));
2589 is_a_number = ~isnan(new_beam_angle);
2590 is_positive = new_beam_angle&gt;=0;
2591 
2592 <span class="comment">% Modify the Application data:</span>
2593 <span class="comment">% ----------------------------</span>
2594 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2595     guiparams.beam_angle = new_beam_angle;
2596     
2597     <span class="comment">% Re-store the Application data:</span>
2598     <span class="comment">% ------------------------------</span>
2599     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2600     
2601 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2602     set(hObject,<span class="string">'String'</span>,guiparams.beam_angle)
2603 <span class="keyword">end</span>
2604 
2605 <span class="comment">% [EOF] BeamAngle_Callback</span>
2606 
2607 
2608 <span class="comment">% --------------------------------------------------------------------</span>
2609 <a name="_sub63" href="#_subfunctions" class="code">function MagneticVariation_Callback(hObject, eventdata, handles)</a>
2610 <span class="comment">% Get the Magnetic Variation</span>
2611 
2612 <span class="comment">% Get the Application data:</span>
2613 <span class="comment">% -------------------------</span>
2614 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2615 
2616 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2617 <span class="comment">% ----------------------------------------------------------------</span>
2618 new_magnetic_variation = str2double(get(hObject,<span class="string">'String'</span>));
2619 is_a_number = ~isnan(new_magnetic_variation);
2620 is_positive = new_magnetic_variation&gt;=0;
2621 
2622 <span class="comment">% Modify the Application data:</span>
2623 <span class="comment">% ----------------------------</span>
2624 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2625     guiparams.magnetic_variation = new_magnetic_variation;
2626     
2627     <span class="comment">% Re-store the Application data:</span>
2628     <span class="comment">% ------------------------------</span>
2629     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2630     
2631 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2632     set(hObject,<span class="string">'String'</span>,guiparams.magnetic_variation)
2633 <span class="keyword">end</span>
2634 
2635 <span class="comment">% [EOF] MagneticVariation_Callback</span>
2636 
2637 
2638 <span class="comment">% --------------------------------------------------------------------</span>
2639 <a name="_sub64" href="#_subfunctions" class="code">function WSE_Callback(hObject, eventdata, handles)</a>
2640 
2641 <span class="comment">% Get the Application data:</span>
2642 <span class="comment">% -------------------------</span>
2643 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2644 
2645 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2646 <span class="comment">% ----------------------------------------------------------------</span>
2647 new_wse = str2double(get(hObject,<span class="string">'String'</span>));
2648 is_a_number = ~isnan(new_wse);
2649 is_positive = new_wse&gt;=0;
2650 
2651 <span class="comment">% Modify the Application data:</span>
2652 <span class="comment">% ----------------------------</span>
2653 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2654     guiparams.wse = new_wse;
2655     
2656     <span class="comment">% Re-store the Application data:</span>
2657     <span class="comment">% ------------------------------</span>
2658     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2659     
2660 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2661     set(hObject,<span class="string">'String'</span>,guiparams.wse)
2662 <span class="keyword">end</span>
2663 
2664 <span class="comment">% [EOF] WSE_Callback</span>
2665 
2666 
2667 <span class="comment">% --------------------------------------------------------------------</span>
2668 <a name="_sub65" href="#_subfunctions" class="code">function OutputAuxiliaryData_Callback(hObject, eventdata, handles)</a>
2669 <span class="comment">% Bathymetry Auxiliary Data</span>
2670 
2671 <span class="comment">% Get the Application data:</span>
2672 <span class="comment">% -------------------------</span>
2673 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2674 
2675 <span class="comment">% Modify the Application data:</span>
2676 <span class="comment">% ----------------------------</span>
2677 guiparams.output_auxiliary_data = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2678 
2679 <span class="comment">% Re-store the Application data:</span>
2680 <span class="comment">% ------------------------------</span>
2681 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2682 
2683 <span class="comment">% [EOF] OutputAuxiliaryData_Callback</span>
2684 
2685 
2686 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2687 <span class="comment">% PLOTTING/PLAN VIEW PLOT CALLBACKS %</span>
2688 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2689 
2690 <span class="comment">% --------------------------------------------------------------------</span>
2691 <a name="_sub66" href="#_subfunctions" class="code">function DepthRangeMin_Callback(hObject, eventdata, handles)</a>
2692 
2693 <span class="comment">% Get the Application data:</span>
2694 <span class="comment">% -------------------------</span>
2695 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2696 
2697 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2698 <span class="comment">% ----------------------------------------------------------------</span>
2699 new_depth_range_min = str2double(get(hObject,<span class="string">'String'</span>));
2700 is_a_number = ~isnan(new_depth_range_min);
2701 is_positive = new_depth_range_min&gt;=0;
2702 
2703 <span class="comment">% Modify the Application data:</span>
2704 <span class="comment">% ----------------------------</span>
2705 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2706     guiparams.depth_range_min = new_depth_range_min;
2707     
2708     <span class="comment">% Re-store the Application data:</span>
2709     <span class="comment">% ------------------------------</span>
2710     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2711     
2712 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2713     set(hObject,<span class="string">'String'</span>,guiparams.depth_range_min)
2714 <span class="keyword">end</span>
2715 
2716 <span class="comment">% [EOF] DepthRangeMin_Callback</span>
2717 
2718 
2719 <span class="comment">% --------------------------------------------------------------------</span>
2720 <a name="_sub67" href="#_subfunctions" class="code">function DepthRangeMax_Callback(hObject, eventdata, handles)</a>
2721 
2722 <span class="comment">% Get the Application data:</span>
2723 <span class="comment">% -------------------------</span>
2724 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2725 
2726 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2727 <span class="comment">% ----------------------------------------------------------------</span>
2728 new_depth_range_max = str2double(get(hObject,<span class="string">'String'</span>));
2729 is_a_number = ~isnan(new_depth_range_max);
2730 is_positive = new_depth_range_max&gt;=0;
2731 
2732 <span class="comment">% Modify the Application data:</span>
2733 <span class="comment">% ----------------------------</span>
2734 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2735     guiparams.depth_range_max = new_depth_range_max;
2736     
2737     <span class="comment">% Re-store the Application data:</span>
2738     <span class="comment">% ------------------------------</span>
2739     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2740     
2741 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2742     set(hObject,<span class="string">'String'</span>,guiparams.depth_range_max)
2743 <span class="keyword">end</span>
2744 
2745 <span class="comment">% [EOF] DepthMax_Callback</span>
2746 
2747 
2748 <span class="comment">% --------------------------------------------------------------------</span>
2749 <a name="_sub68" href="#_subfunctions" class="code">function VectorScalePlanView_Callback(hObject, eventdata, handles)</a>
2750 <span class="comment">% Set quiver scale (contour)</span>
2751 
2752 <span class="comment">% Get the Application data:</span>
2753 <span class="comment">% -------------------------</span>
2754 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2755 
2756 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2757 <span class="comment">% ----------------------------------------------------------------</span>
2758 new_vector_scale_plan_view = str2double(get(hObject,<span class="string">'String'</span>));
2759 is_a_number = ~isnan(new_vector_scale_plan_view);
2760 is_positive = new_vector_scale_plan_view&gt;=0;
2761 
2762 <span class="comment">% Modify the Application data:</span>
2763 <span class="comment">% ----------------------------</span>
2764 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2765     guiparams.vector_scale_plan_view = round(new_vector_scale_plan_view);
2766     
2767     <span class="comment">% Re-store the Application data:</span>
2768     <span class="comment">% ------------------------------</span>
2769     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2770     
2771 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2772     set(hObject,<span class="string">'String'</span>,guiparams.vector_scale_plan_view)
2773 <span class="keyword">end</span>
2774 
2775 <span class="comment">% [EOF] VectorScalePlanView_Callback</span>
2776 
2777 
2778 <span class="comment">% --------------------------------------------------------------------</span>
2779 <a name="_sub69" href="#_subfunctions" class="code">function VectorSpacingPlanview_Callback(hObject, eventdata, handles)</a>
2780 <span class="comment">% Set quiver spacing (contour, horizontal)</span>
2781 
2782 <span class="comment">% Get the Application data:</span>
2783 <span class="comment">% -------------------------</span>
2784 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2785 
2786 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2787 <span class="comment">% ----------------------------------------------------------------</span>
2788 new_vector_spacing_plan_view = str2double(get(hObject,<span class="string">'String'</span>));
2789 is_a_number = ~isnan(new_vector_spacing_plan_view);
2790 is_positive = new_vector_spacing_plan_view&gt;=0;
2791 
2792 <span class="comment">% Modify the Application data:</span>
2793 <span class="comment">% ----------------------------</span>
2794 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2795     guiparams.vector_spacing_plan_view = round(new_vector_spacing_plan_view);
2796     
2797     <span class="comment">% Re-store the Application data:</span>
2798     <span class="comment">% ------------------------------</span>
2799     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2800     
2801 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2802     set(hObject,<span class="string">'String'</span>,guiparams.vector_spacing_plan_view)
2803 <span class="keyword">end</span>
2804 
2805 <span class="comment">% [EOF] VectorSpacingPlanview_Callback</span>
2806 
2807 
2808 <span class="comment">% --------------------------------------------------------------------</span>
2809 <a name="_sub70" href="#_subfunctions" class="code">function SmoothingWindowSize_Callback(hObject, eventdata, handles)</a>
2810 <span class="comment">% Plan View smoothing window size</span>
2811 
2812 <span class="comment">% Get the Application data:</span>
2813 <span class="comment">% -------------------------</span>
2814 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2815 
2816 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2817 <span class="comment">% ----------------------------------------------------------------</span>
2818 new_smoothing_window_size = str2double(get(hObject,<span class="string">'String'</span>));
2819 is_a_number = ~isnan(new_smoothing_window_size);
2820 is_positive = new_smoothing_window_size&gt;=0;
2821 
2822 <span class="comment">% Modify the Application data:</span>
2823 <span class="comment">% ----------------------------</span>
2824 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2825     guiparams.smoothing_window_size = round(new_smoothing_window_size);
2826     
2827     <span class="comment">% Re-store the Application data:</span>
2828     <span class="comment">% ------------------------------</span>
2829     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2830     
2831 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2832     set(hObject,<span class="string">'String'</span>,guiparams.smoothing_window_size)
2833 <span class="keyword">end</span>
2834 
2835 <span class="comment">% [EOF] SmoothingWindowSize_Callback</span>
2836 
2837 
2838 <span class="comment">% --------------------------------------------------------------------</span>
2839 <a name="_sub71" href="#_subfunctions" class="code">function DisplayShoreline_Callback(hObject, eventdata, handles)</a>
2840 
2841 <span class="comment">% Get the Application data:</span>
2842 <span class="comment">% -------------------------</span>
2843 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2844 
2845 <span class="comment">% Modify the Application data:</span>
2846 <span class="comment">% ----------------------------</span>
2847 guiparams.display_shoreline = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2848 
2849 <span class="comment">% Re-store the Application data:</span>
2850 <span class="comment">% ------------------------------</span>
2851 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2852 
2853 <span class="comment">% [EOF] DisplayShoreline_Callback</span>
2854 
2855 
2856 <span class="comment">% --------------------------------------------------------------------</span>
2857 <a name="_sub72" href="#_subfunctions" class="code">function AddBackground_Callback(hObject, eventdata, handles)</a>
2858 
2859 <span class="comment">% Get the Application data:</span>
2860 <span class="comment">% -------------------------</span>
2861 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2862 
2863 <span class="comment">% Modify the Application data:</span>
2864 <span class="comment">% ----------------------------</span>
2865 guiparams.add_background = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2866 
2867 <span class="comment">% Re-store the Application data:</span>
2868 <span class="comment">% ------------------------------</span>
2869 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2870 
2871 <span class="comment">% [EOF] AddBackground_Callback</span>
2872 
2873 
2874 <span class="comment">% --------------------------------------------------------------------</span>
2875 <a name="_sub73" href="#_subfunctions" class="code">function PlotPlanView_Callback(hObject, eventdata, handles)</a>
2876 <a href="#_sub56" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
2877 <span class="comment">% [EOF] PlotPlanView_Callback</span>
2878 
2879 
2880 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2881 <span class="comment">% PLOTTING/SHIP TRACKS PLOT CALLBACKS %</span>
2882 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2883 
2884 <span class="comment">% --------------------------------------------------------------------</span>
2885 <a name="_sub74" href="#_subfunctions" class="code">function HorizontalGridNodeSpacing_Callback(hObject, eventdata, handles)</a>
2886 <span class="comment">% Set the horizontal grid node spacing</span>
2887 
2888 <span class="comment">% Get the Application data:</span>
2889 <span class="comment">% -------------------------</span>
2890 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2891 
2892 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2893 <span class="comment">% ----------------------------------------------------------------</span>
2894 new_horizontal_grid_node_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2895 is_a_number = ~isnan(new_horizontal_grid_node_spacing);
2896 is_positive = new_horizontal_grid_node_spacing&gt;=0;
2897 
2898 <span class="comment">% Modify the Application data:</span>
2899 <span class="comment">% ----------------------------</span>
2900 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2901     guiparams.horizontal_grid_node_spacing = new_horizontal_grid_node_spacing;
2902     
2903     <span class="comment">% Re-store the Application data:</span>
2904     <span class="comment">% ------------------------------</span>
2905     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2906     
2907 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2908     set(hObject,<span class="string">'String'</span>,guiparams.horizontal_grid_node_spacing)
2909 <span class="keyword">end</span>
2910 
2911 <span class="comment">% [EOF] HorizontalGridNodeSpacing_Callback</span>
2912 
2913 <span class="comment">% --------------------------------------------------------------------</span>
2914 <a name="_sub75" href="#_subfunctions" class="code">function VerticalGridNodeSpacing_Callback(hObject, eventdata, handles)</a>
2915 <span class="comment">% Set the horizontal grid node spacing</span>
2916 
2917 <span class="comment">% Get the Application data:</span>
2918 <span class="comment">% -------------------------</span>
2919 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2920 
2921 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2922 <span class="comment">% ----------------------------------------------------------------</span>
2923 new_vertical_grid_node_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2924 is_a_number = ~isnan(new_vertical_grid_node_spacing);
2925 is_positive = new_vertical_grid_node_spacing&gt;=0;
2926 
2927 <span class="comment">% Modify the Application data:</span>
2928 <span class="comment">% ----------------------------</span>
2929 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2930     guiparams.vertical_grid_node_spacing = new_vertical_grid_node_spacing;
2931     
2932     <span class="comment">% Re-store the Application data:</span>
2933     <span class="comment">% ------------------------------</span>
2934     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2935     
2936 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2937     set(hObject,<span class="string">'String'</span>,guiparams.vertical_grid_node_spacing)
2938 <span class="keyword">end</span>
2939 
2940 <span class="comment">% [EOF] VerticalGridNodeSpacing_Callback</span>
2941 
2942 <span class="comment">% --------------------------------------------------------------------</span>
2943 <a name="_sub76" href="#_subfunctions" class="code">function SetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a>
2944 <span class="comment">% Set the cross section endpoints manually</span>
2945 
2946 <span class="comment">% Get the Application data:</span>
2947 <span class="comment">% -------------------------</span>
2948 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2949 
2950 <span class="comment">% Modify the Application data:</span>
2951 <span class="comment">% ----------------------------</span>
2952 guiparams.set_cross_section_endpoints = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2953 
2954 <span class="comment">% Re-store the Application data:</span>
2955 <span class="comment">% ------------------------------</span>
2956 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2957 
2958 <span class="comment">% [EOF] SetCrossSectionEndpoints_Callback</span>
2959 
2960 
2961 <span class="comment">% --------------------------------------------------------------------</span>
2962 <a name="_sub77" href="#_subfunctions" class="code">function PlotShiptracks_Callback(hObject, eventdata, handles)</a>
2963 <a href="#_sub55" class="code" title="subfunction shiptracksPlotCallback(hObject, eventdata, handles)">shiptracksPlotCallback</a>(hObject, eventdata, handles)
2964 <span class="comment">% [EOF] PlotShiptracks_Callback</span>
2965 
2966 
2967 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2968 <span class="comment">% PLOTTING/CROSS SECTION PLOT CALLBACKS %</span>
2969 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2970 
2971 <span class="comment">% --------------------------------------------------------------------</span>
2972 <a name="_sub78" href="#_subfunctions" class="code">function Contour_Callback(hObject, eventdata, handles)</a>
2973 
2974 <span class="comment">% Get the Application data:</span>
2975 <span class="comment">% -------------------------</span>
2976 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2977 
2978 <span class="comment">% Modify the Application data:</span>
2979 <span class="comment">% ----------------------------</span>
2980 idx_variable = get(hObject,<span class="string">'Value'</span>);
2981 guiparams.idx_contour = idx_variable;
2982 guiparams.contour = guiparams.contours(idx_variable).variable;
2983 
2984 <span class="comment">% Re-store the Application data:</span>
2985 <span class="comment">% ------------------------------</span>
2986 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2987 
2988 <span class="comment">% [EOF] Contour_Callback</span>
2989 
2990 
2991 <span class="comment">% --------------------------------------------------------------------</span>
2992 <a name="_sub79" href="#_subfunctions" class="code">function VerticalExaggeration_Callback(hObject, eventdata, handles)</a>
2993 <span class="comment">% Set vertical exaggeration</span>
2994 
2995 <span class="comment">% Get the Application data:</span>
2996 <span class="comment">% -------------------------</span>
2997 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2998 
2999 <span class="comment">% Modify the Application data:</span>
3000 <span class="comment">% ----------------------------</span>
3001 guiparams.vertical_exaggeration = str2double(get(hObject,<span class="string">'String'</span>));
3002 
3003 <span class="comment">% Re-store the Application data:</span>
3004 <span class="comment">% ------------------------------</span>
3005 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3006 
3007 <span class="comment">% Update the GUI:</span>
3008 <span class="comment">% ---------------</span>
3009 <span class="comment">% updateGUI(handles,guiparams)</span>
3010 
3011 <span class="comment">% [EOF] VerticalExaggeration_Callback</span>
3012 
3013 
3014 <span class="comment">% --------------------------------------------------------------------</span>
3015 <a name="_sub80" href="#_subfunctions" class="code">function VectorScaleCrossSection_Callback(hObject, eventdata, handles)</a>
3016 
3017 <span class="comment">% Get the Application data:</span>
3018 <span class="comment">% -------------------------</span>
3019 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3020 
3021 <span class="comment">% Modify the Application data:</span>
3022 <span class="comment">% ----------------------------</span>
3023 guiparams.vector_scale_cross_section = str2double(get(hObject,<span class="string">'String'</span>));
3024 
3025 <span class="comment">% Re-store the Application data:</span>
3026 <span class="comment">% ------------------------------</span>
3027 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3028 
3029 <span class="comment">% Update the GUI:</span>
3030 <span class="comment">% ---------------</span>
3031 <span class="comment">% updateGUI(handles,guiparams)</span>
3032 
3033 <span class="comment">% [EOF] VectorScaleCrossSection_Callback</span>
3034 
3035 
3036 <span class="comment">% --------------------------------------------------------------------</span>
3037 <a name="_sub81" href="#_subfunctions" class="code">function HorizontalVectorSpacing_Callback(hObject, eventdata, handles)</a>
3038 
3039 <span class="comment">% Get the Application data:</span>
3040 <span class="comment">% -------------------------</span>
3041 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3042 
3043 <span class="comment">% Modify the Application data:</span>
3044 <span class="comment">% ----------------------------</span>
3045 guiparams.horizontal_vector_spacing = str2double(get(hObject,<span class="string">'String'</span>));
3046 
3047 <span class="comment">% Re-store the Application data:</span>
3048 <span class="comment">% ------------------------------</span>
3049 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3050 
3051 <span class="comment">% Update the GUI:</span>
3052 <span class="comment">% ---------------</span>
3053 <span class="comment">% updateGUI(handles,guiparams)</span>
3054 
3055 <span class="comment">% [EOF] HorizontalVectorSpacing_Callback</span>
3056 
3057 
3058 <span class="comment">% --------------------------------------------------------------------</span>
3059 <a name="_sub82" href="#_subfunctions" class="code">function VerticalVectorSpacing_Callback(hObject, eventdata, handles)</a>
3060 <span class="comment">% Get the vertical quiver spacing for contour plots</span>
3061 
3062 <span class="comment">% Get the Application data:</span>
3063 <span class="comment">% -------------------------</span>
3064 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3065 
3066 <span class="comment">% Modify the Application data:</span>
3067 <span class="comment">% ----------------------------</span>
3068 guiparams.vertical_vector_spacing = str2double(get(hObject,<span class="string">'String'</span>));
3069 
3070 <span class="comment">% Re-store the Application data:</span>
3071 <span class="comment">% ------------------------------</span>
3072 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3073 
3074 <span class="comment">% Update the GUI:</span>
3075 <span class="comment">% ---------------</span>
3076 <span class="comment">% updateGUI(handles,guiparams)</span>
3077 
3078 <span class="comment">% [EOF] VerticalVectorSpacing_Callback</span>
3079 
3080 
3081 <span class="comment">% --------------------------------------------------------------------</span>
3082 <a name="_sub83" href="#_subfunctions" class="code">function HorizontalSmoothingWindow_Callback(hObject, eventdata, handles)</a>
3083 <span class="comment">% Horizontal Smoothing</span>
3084 
3085 <span class="comment">% Get the Application data:</span>
3086 <span class="comment">% -------------------------</span>
3087 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3088 
3089 <span class="comment">% Modify the Application data:</span>
3090 <span class="comment">% ----------------------------</span>
3091 guiparams.horizontal_smoothing_window = str2double(get(hObject,<span class="string">'String'</span>));
3092 
3093 <span class="comment">% Re-store the Application data:</span>
3094 <span class="comment">% ------------------------------</span>
3095 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3096 
3097 <span class="comment">% Update the GUI:</span>
3098 <span class="comment">% ---------------</span>
3099 <span class="comment">% updateGUI(handles,guiparams)</span>
3100 
3101 <span class="comment">% [EOF] HorizontalSmoothingWindow_Callback</span>
3102 
3103 
3104 <span class="comment">% --------------------------------------------------------------------</span>
3105 <a name="_sub84" href="#_subfunctions" class="code">function VerticalSmoothingWindow_Callback(hObject, eventdata, handles)</a>
3106 <span class="comment">% Vertical Smoothing</span>
3107 
3108 <span class="comment">% Get the Application data:</span>
3109 <span class="comment">% -------------------------</span>
3110 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3111 
3112 <span class="comment">% Modify the Application data:</span>
3113 <span class="comment">% ----------------------------</span>
3114 guiparams.vertical_smoothing_window = str2double(get(hObject,<span class="string">'String'</span>));
3115 
3116 <span class="comment">% Re-store the Application data:</span>
3117 <span class="comment">% ------------------------------</span>
3118 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3119 
3120 <span class="comment">% Update the GUI:</span>
3121 <span class="comment">% ---------------</span>
3122 <span class="comment">% updateGUI(handles,guiparams)</span>
3123 
3124 <span class="comment">% [EOF] VerticalSmoothingWindow_Callback</span>
3125 
3126 
3127 <span class="comment">% --------------------------------------------------------------------</span>
3128 <a name="_sub85" href="#_subfunctions" class="code">function PlotSecondaryFlowVectors_Callback(hObject, eventdata, handles)</a>
3129 
3130 <span class="comment">% Get the Application data:</span>
3131 <span class="comment">% -------------------------</span>
3132 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3133 
3134 <span class="comment">% Modify the Application data:</span>
3135 <span class="comment">% ----------------------------</span>
3136 guiparams.plot_secondary_flow_vectors = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
3137 
3138 <span class="comment">% Re-store the Application data:</span>
3139 <span class="comment">% ------------------------------</span>
3140 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3141 
3142 <span class="comment">% [EOF] PlotSecondaryFlowVectors_Callback</span>
3143 
3144 
3145 <span class="comment">% --------------------------------------------------------------------</span>
3146 <a name="_sub86" href="#_subfunctions" class="code">function SecondaryFlowVectorVariable_Callback(hObject, eventdata, handles)</a>
3147 
3148 <span class="comment">% Get the Application data:</span>
3149 <span class="comment">% -------------------------</span>
3150 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3151 
3152 <span class="comment">% Modify the Application data:</span>
3153 <span class="comment">% ----------------------------</span>
3154 idx_variable = get(hObject,<span class="string">'Value'</span>);
3155 guiparams.idx_secondary_flow_vector_variable = idx_variable;
3156 guiparams.secondary_flow_vector_variable = guiparams.secondary_flows(idx_variable).variable;
3157 
3158 <span class="comment">% Re-store the Application data:</span>
3159 <span class="comment">% ------------------------------</span>
3160 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3161 
3162 <span class="comment">% [EOF] SecondaryFlowVectorVariable_Callback</span>
3163 
3164 
3165 <span class="comment">% --------------------------------------------------------------------</span>
3166 <a name="_sub87" href="#_subfunctions" class="code">function IncludeVerticalVelocity_Callback(hObject, eventdata, handles)</a>
3167 
3168 <span class="comment">% Get the Application data:</span>
3169 <span class="comment">% -------------------------</span>
3170 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3171 
3172 <span class="comment">% Modify the Application data:</span>
3173 <span class="comment">% ----------------------------</span>
3174 guiparams.include_vertical_velocity = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
3175 
3176 <span class="comment">% Re-store the Application data:</span>
3177 <span class="comment">% ------------------------------</span>
3178 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3179 
3180 <span class="comment">% [EOF] IncludeVerticalVelocity_Callback</span>
3181 
3182 
3183 <span class="comment">% --------------------------------------------------------------------</span>
3184 <a name="_sub88" href="#_subfunctions" class="code">function PlotCrossSection_Callback(hObject, eventdata, handles)</a>
3185 <a href="#_sub57" class="code" title="subfunction crosssectionPlotCallback(hObject, eventdata, handles)">crosssectionPlotCallback</a>(hObject, eventdata, handles)
3186 <span class="comment">% [EOF] PlotCrossSection_Callback</span>
3187 
3188 
3189 <span class="comment">% --------------------------------------------------------------------</span>
3190 <a name="_sub89" href="#_subfunctions" class="code">function ClearLog_Callback(hObject, eventdata, handles)</a>
3191 set(handles.LogWindow,<span class="string">'string'</span>,<span class="string">''</span>)
3192 <span class="comment">% [EOF] ClearLog_Callback</span>
3193 
3194 <span class="comment">% --------------------------------------------------------------------</span>
3195 <a name="_sub90" href="#_subfunctions" class="code">function SaveLog_Callback(hObject, eventdata, handles)</a>
3196 
3197 <span class="comment">% Get the Application data:</span>
3198 <span class="comment">% -------------------------</span>
3199 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3200 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
3201 <span class="comment">% z   = guiparams.z;   %#ok&lt;NASGU&gt;</span>
3202 <span class="comment">% A   = guiparams.A;   %#ok&lt;NASGU&gt;</span>
3203 <span class="comment">% V   = guiparams.V;   %#ok&lt;NASGU&gt;</span>
3204 <span class="comment">% Map = guiparams.Map; %#ok&lt;NASGU&gt;</span>
3205 
3206 [the_file,the_path] = <span class="keyword">...</span>
3207     uiputfile({<span class="string">'*.txt'</span>,<span class="string">'TXT-Files (*.txt)'</span>}, <span class="keyword">...</span>
3208     <span class="string">'Choose where to save the log file'</span>, <span class="keyword">...</span>
3209     fullfile(guiprefs.log_path,guiprefs.log_file));
3210 
3211 <span class="comment">% Save the log to a TXT file:</span>
3212 <span class="comment">% ---------------------------</span>
3213 <span class="keyword">if</span> ischar(the_file)
3214     guiparams.log_path = the_path;
3215     guiparams.log_file = the_file;
3216     <span class="comment">%guiparams.savefile = the_file;</span>
3217     
3218     <span class="comment">% Re-store the Application data:</span>
3219     <span class="comment">% ------------------------------</span>
3220     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3221     
3222     <span class="comment">% Update the preferences:</span>
3223     <span class="comment">% -----------------------</span>
3224     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
3225     guiprefs.log_path = the_path;
3226     guiprefs.log_file = the_file;
3227     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
3228     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'log'</span>)
3229     
3230     [~,filename,extension] = fileparts(the_file);
3231     savefile = [the_path filename extension];
3232     h = msgbox([<span class="string">'Saving log to: '''</span> savefile <span class="string">''''</span>], <span class="keyword">...</span>
3233         <span class="string">'Saving Log File...'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
3234     
3235     logfile = get(handles.LogWindow,<span class="string">'string'</span>);
3236     [nrows,~]= size(logfile);
3237     fid = fopen(savefile, <span class="string">'w'</span>);
3238     <span class="keyword">for</span> row=1:nrows
3239         fprintf(fid, <span class="string">'%s \n'</span>, logfile{row,:});
3240     <span class="keyword">end</span>
3241     fclose(fid);
3242 <span class="keyword">end</span>
3243 <span class="comment">% [EOF] SaveLog_Callback</span>
3244 
3245 <span class="comment">%%%%%%%%%%%%%%%%</span>
3246 <span class="comment">% SUBFUNCTIONS %</span>
3247 <span class="comment">%%%%%%%%%%%%%%%%</span>
3248 
3249 <span class="comment">% --------------------------------------------------------------------</span>
3250 <a name="_sub91" href="#_subfunctions" class="code">function handles = buildToolbar(handles)</a>
3251 
3252 icons = <a href="#_sub107" class="code" title="subfunction icons = getIcons">getIcons</a>;
3253 ht = uitoolbar(<span class="string">'Parent'</span>,handles.figure1);
3254 
3255 <span class="comment">% Load data</span>
3256 <span class="comment">% icon = imread('C:\Users\pfricker\Desktop\icons\file_open.png');</span>
3257 <span class="comment">% icon = double(icon)/(2^16-1);</span>
3258 <span class="comment">% icon(icon==0) = NaN;</span>
3259 handles.toolbarLoadData = <span class="keyword">...</span>
3260     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3261     <span class="string">'CData'</span>,        icons(1).data, <span class="keyword">...</span>
3262     <span class="string">'TooltipString'</span>,<span class="string">'Open ASCII File'</span>);
3263 
3264 <span class="comment">% Save data</span>
3265 <span class="comment">% icon = imread('C:\Users\pfricker\Desktop\icons\file_save.png');</span>
3266 <span class="comment">% icon = double(icon)/(2^16-1);</span>
3267 <span class="comment">% icon(icon==0) = NaN;</span>
3268 handles.toolbarSaveMatFile = <span class="keyword">...</span>
3269     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3270     <span class="string">'CData'</span>,        icons(2).data, <span class="keyword">...</span>
3271     <span class="string">'TooltipString'</span>,<span class="string">'Save MAT File'</span>, <span class="keyword">...</span>
3272     <span class="string">'Separator'</span>,    <span class="string">'on'</span>);
3273 
3274 
3275 <span class="comment">% Save bathymetry</span>
3276 <span class="comment">%icon = ones(16,16,3);</span>
3277 handles.toolbarSaveBathymetry = <span class="keyword">...</span>
3278     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3279     <span class="string">'CData'</span>,        icons(5).data, <span class="keyword">...</span>
3280     <span class="string">'TooltipString'</span>,<span class="string">'Export Bathymetry'</span>);
3281 
3282 <span class="comment">% Save figures</span>
3283 <span class="comment">% icon = ones(16,16,3);</span>
3284 handles.toolbarSaveFigures = <span class="keyword">...</span>
3285     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3286     <span class="string">'CData'</span>,        icons(6).data, <span class="keyword">...</span>
3287     <span class="string">'TooltipString'</span>,<span class="string">'Export Figures'</span>);
3288 
3289 <span class="comment">% Save Excel File</span>
3290 <span class="comment">% icon = ones(16,16,3);</span>
3291 handles.toolbarSaveExcel = <span class="keyword">...</span>
3292     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3293     <span class="string">'CData'</span>,        icons(7).data, <span class="keyword">...</span>
3294     <span class="string">'TooltipString'</span>,<span class="string">'Export Excel File'</span>);
3295 
3296 
3297 <span class="comment">% Plotting parameters</span>
3298 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\PlotGeneralElement.gif');</span>
3299 <span class="comment">% icon = ind2rgb(icon,map);</span>
3300 handles.toolbarPlottingParameters = <span class="keyword">...</span>
3301     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3302     <span class="string">'CData'</span>,        icons(3).data, <span class="keyword">...</span>
3303     <span class="string">'TooltipString'</span>,<span class="string">'Plotting Parameters'</span>, <span class="keyword">...</span>
3304     <span class="string">'Separator'</span>,    <span class="string">'on'</span>);
3305 
3306 <span class="comment">% Processing parameters</span>
3307 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3308 <span class="comment">% icon = ind2rgb(icon,map);</span>
3309 handles.toolbarProcessingParameters = <span class="keyword">...</span>
3310     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3311     <span class="string">'CData'</span>,        icons(4).data, <span class="keyword">...</span>
3312     <span class="string">'TooltipString'</span>,<span class="string">'Processing Parameters'</span>);
3313 
3314 <span class="comment">% Zoom In</span>
3315 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3316 <span class="comment">% icon = ind2rgb(icon,map);</span>
3317 <span class="comment">% handles.toolbarZoomIn = ...</span>
3318 <span class="comment">%     uitoggletool('Parent',       ht, ...</span>
3319 <span class="comment">%     'CData',        icons(8).data, ...</span>
3320 <span class="comment">%     'TooltipString','Zoom In (Shiptracks)', ...</span>
3321 <span class="comment">%     'Separator',     'on');</span>
3322 
3323 <span class="comment">% Zoom Out</span>
3324 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3325 <span class="comment">% icon = ind2rgb(icon,map);</span>
3326 <span class="comment">% handles.toolbarZoomOut = ...</span>
3327 <span class="comment">%     uitoggletool('Parent',       ht, ...</span>
3328 <span class="comment">%     'CData',        icons(9).data, ...</span>
3329 <span class="comment">%     'TooltipString','Zoom Out (Shiptracks)');</span>
3330 
3331 <span class="comment">% Pan</span>
3332 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3333 <span class="comment">% icon = ind2rgb(icon,map);</span>
3334 <span class="comment">% handles.toolbarPan = ...</span>
3335 <span class="comment">%     uipushtool('Parent',       ht, ...</span>
3336 <span class="comment">%     'CData',        icons(10).data, ...</span>
3337 <span class="comment">%     'TooltipString','Pan (Shiptracks)');</span>
3338 
3339 
3340 
3341 set(handles.toolbarLoadData,            <span class="string">'ClickedCallback'</span>,{@<a href="#_sub50" class="code" title="subfunction loadDataCallback(hObject, eventdata, handles)">loadDataCallback</a>,handles})
3342 set(handles.toolbarSaveMatFile,         <span class="string">'ClickedCallback'</span>,{@<a href="#_sub51" class="code" title="subfunction saveDataCallback(hObject, eventdata, handles)">saveDataCallback</a>,handles})
3343 set(handles.toolbarSaveBathymetry,      <span class="string">'ClickedCallback'</span>,{@<a href="#_sub61" class="code" title="subfunction ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)">ExportMultibeamBathymetry_Callback</a>,handles})
3344 set(handles.toolbarSaveFigures,         <span class="string">'ClickedCallback'</span>,{@<a href="#_sub21" class="code" title="subfunction menuExportFigures_Callback(hObject, eventdata, handles)">menuExportFigures_Callback</a>,handles})
3345 set(handles.toolbarSaveExcel,           <span class="string">'ClickedCallback'</span>,{@<a href="#_sub25" class="code" title="subfunction menuSaveExcel_Callback(hObject, eventdata, handles)">menuSaveExcel_Callback</a>,handles})
3346 set(handles.toolbarPlottingParameters,  <span class="string">'ClickedCallback'</span>,{@<a href="#_sub53" class="code" title="subfunction plottingParametersCallback(hObject, eventdata, handles)">plottingParametersCallback</a>,handles})
3347 set(handles.toolbarProcessingParameters,<span class="string">'ClickedCallback'</span>,{@<a href="#_sub54" class="code" title="subfunction processingParametersCallback(hObject, eventdata, handles)">processingParametersCallback</a>,handles})
3348 <span class="comment">% set(handles.toolbarZoomIn,              'ClickedCallback',{@ShiptracksZoom_Callback,handles})</span>
3349 <span class="comment">% set(handles.toolbarZoomOut,              'ClickedCallback',{@ShiptracksZoom_Callback,handles})</span>
3350 <span class="comment">% set(handles.toolbarPan,              'ClickedCallback',{@ShiptracksPan_Callback,handles})</span>
3351 <span class="comment">% set(handles.planviewPlot,        'ClickedCallback',{@planviewPlotCallback,handles})</span>
3352 <span class="comment">% set(handles.crosssectionPlot,    'ClickedCallback',{@crosssectionPlotCallback,handles})</span>
3353 
3354 <span class="comment">% [EOF] buildtoolbar</span>
3355 
3356 
3357 <span class="comment">% --------------------------------------------------------------------</span>
3358 <a name="_sub92" href="#_subfunctions" class="code">function load_prefs(hfigure)</a>
3359 <span class="comment">% Load the GUI preferences.  Also, initialize preferences if they don't</span>
3360 <span class="comment">% already exist.</span>
3361 
3362 <span class="comment">% Preferences:</span>
3363 <span class="comment">% 'ascii'                Path and filenames of current ASCII files</span>
3364 <span class="comment">% 'mat'                  Path and filename of current MAT file</span>
3365 <span class="comment">% 'tecplot'              Path and filename of last Tecplot file</span>
3366 <span class="comment">% 'kmz'                  Path and filename of last KMZ file</span>
3367 <span class="comment">% 'multibeambathymetry'  Path and filename of last Multibeam Bathymetry file</span>
3368 <span class="comment">% 'log'                  Path and filename of last Log file</span>
3369 <span class="comment">% 'iric'                 Path and filename of last iRic ANV file</span>
3370 <span class="comment">% 'excel'                Path and filename of last Excel file</span>
3371 <span class="comment">% 'aerial'               Path and filename of last Aerial file</span>
3372 <span class="comment">% 'shoreline'            Path and filename of last Shoreline file</span>
3373 <span class="comment">% 'renderer'             Default graphics renderer</span>
3374 <span class="comment">% 'units'                Default plotting units</span>
3375 <span class="comment">% 'runcounter'           Keeps a running tally of how many times VMT is</span>
3376 <span class="comment">%                        started</span>
3377 
3378 <span class="comment">% Originals</span>
3379 <span class="comment">% prefs = {'ascii2gispath' 'ascii2kmlpath' 'asciipath'   'doqqpath' ...</span>
3380 <span class="comment">%          'endspath'      'logpath'       'matpath'     'savedpath' ...</span>
3381 <span class="comment">%          'shorepath'     'stapath'       'ysidatapath' 'ysidatapath'};</span>
3382 
3383 <span class="comment">% ASCII</span>
3384 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>)
3385     ascii = getpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>);
3386     <span class="keyword">if</span> exist(ascii.path,<span class="string">'dir'</span>)
3387         guiprefs.ascii_path = ascii.path;
3388     <span class="keyword">else</span>
3389         guiprefs.ascii_path = pwd;
3390     <span class="keyword">end</span>
3391     does_exist = false(1,length(ascii.file));
3392     <span class="keyword">for</span> k = 1:length(ascii.file) <span class="comment">% Check each file one-by-one</span>
3393         does_exist(k) = exist(fullfile(ascii.path,ascii.file{k}),<span class="string">'file'</span>);
3394     <span class="keyword">end</span>
3395     <span class="keyword">if</span> any(does_exist)
3396         guiprefs.ascii_file = ascii.file(does_exist);
3397     <span class="keyword">else</span>
3398         guiprefs.ascii_file = {<span class="string">''</span>};
3399     <span class="keyword">end</span>
3400 <span class="keyword">else</span> <span class="comment">% Initialize ASCII</span>
3401     guiprefs.ascii_path = pwd;
3402     guiprefs.ascii_file = {<span class="string">''</span>};
3403     
3404     ascii.path = pwd;
3405     ascii.file = {<span class="string">''</span>};
3406     setpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>,ascii)
3407 <span class="keyword">end</span>
3408 
3409 <span class="comment">% MAT</span>
3410 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>)
3411     mat = getpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>);
3412     <span class="keyword">if</span> exist(mat.path,<span class="string">'dir'</span>)
3413         guiprefs.mat_path = mat.path;
3414     <span class="keyword">else</span>
3415         guiprefs.mat_path = pwd;
3416     <span class="keyword">end</span>
3417     
3418     <span class="keyword">if</span> iscell(mat.file)
3419         <span class="keyword">if</span> exist(fullfile(mat.path,mat.file{1}),<span class="string">'file'</span>)
3420             guiprefs.mat_file = mat.file;
3421         <span class="keyword">else</span>
3422             guiprefs.mat_file = <span class="string">''</span>;
3423         <span class="keyword">end</span>
3424     <span class="keyword">else</span>
3425         <span class="keyword">if</span> exist(fullfile(mat.path,mat.file),<span class="string">'file'</span>)
3426             guiprefs.mat_file = mat.file;
3427         <span class="keyword">else</span>
3428             guiprefs.mat_file = <span class="string">''</span>;
3429         <span class="keyword">end</span>
3430     <span class="keyword">end</span>
3431 <span class="keyword">else</span> <span class="comment">% Initialize MAT</span>
3432     guiprefs.mat_path = pwd;
3433     guiprefs.mat_file = <span class="string">''</span>;
3434     
3435     mat.path = pwd;
3436     mat.file = <span class="string">''</span>;
3437     setpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>,mat)
3438 <span class="keyword">end</span>
3439 
3440 <span class="comment">% TECPLOT</span>
3441 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>)
3442     tecplot = getpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>);
3443     <span class="keyword">if</span> exist(tecplot.path,<span class="string">'dir'</span>)
3444         guiprefs.tecplot_path = tecplot.path;
3445     <span class="keyword">else</span>
3446         guiprefs.tecplot_path = pwd;
3447     <span class="keyword">end</span>
3448     <span class="keyword">if</span> exist(fullfile(tecplot.path,tecplot.file),<span class="string">'file'</span>)
3449         guiprefs.tecplot_file = tecplot.file;
3450     <span class="keyword">else</span>
3451         guiprefs.tecplot_file = <span class="string">''</span>;
3452     <span class="keyword">end</span>
3453 <span class="keyword">else</span> <span class="comment">% Initialize TECPLOT</span>
3454     guiprefs.tecplot_path = pwd;
3455     guiprefs.tecplot_file = <span class="string">''</span>;
3456     
3457     tecplot.path = pwd;
3458     tecplot.file = <span class="string">''</span>;
3459     setpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>,tecplot)
3460 <span class="keyword">end</span>
3461 
3462 <span class="comment">% KMZ</span>
3463 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>)
3464     kmz = getpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>);
3465     <span class="keyword">if</span> exist(kmz.path,<span class="string">'dir'</span>)
3466         guiprefs.kmz_path = kmz.path;
3467     <span class="keyword">else</span>
3468         guiprefs.kmz_path = pwd;
3469     <span class="keyword">end</span>
3470     <span class="keyword">if</span> exist(fullfile(kmz.path,kmz.file),<span class="string">'file'</span>)
3471         guiprefs.kmz_file = kmz.file;
3472     <span class="keyword">else</span>
3473         guiprefs.kmz_file = <span class="string">''</span>;
3474     <span class="keyword">end</span>
3475 <span class="keyword">else</span> <span class="comment">% Initialize KMZ</span>
3476     guiprefs.kmz_path = pwd;
3477     guiprefs.kmz_file = <span class="string">''</span>;
3478     
3479     kmz.path = pwd;
3480     kmz.file = <span class="string">''</span>;
3481     setpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>,kmz)
3482 <span class="keyword">end</span>
3483 
3484 <span class="comment">% MULTIBEAM BATHYMETRY</span>
3485 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>)
3486     multibeambathymetry = getpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>);
3487     <span class="keyword">if</span> exist(multibeambathymetry.path,<span class="string">'dir'</span>)
3488         guiprefs.multibeambathymetry_path = multibeambathymetry.path;
3489     <span class="keyword">else</span>
3490         guiprefs.multibeambathymetry_path = pwd;
3491     <span class="keyword">end</span>
3492     <span class="keyword">if</span> exist(fullfile(multibeambathymetry.path,multibeambathymetry.file),<span class="string">'file'</span>)
3493         guiprefs.multibeambathymetry_file = multibeambathymetry.file;
3494     <span class="keyword">else</span>
3495         guiprefs.multibeambathymetry_file = <span class="string">''</span>;
3496     <span class="keyword">end</span>
3497 <span class="keyword">else</span> <span class="comment">% Initialize MULTIBEAM BATHYMETRY</span>
3498     guiprefs.multibeambathymetry_path = pwd;
3499     guiprefs.multibeambathymetry_file = <span class="string">''</span>;
3500     
3501     multibeambathymetry.path = pwd;
3502     multibeambathymetry.file = <span class="string">''</span>;
3503     setpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>,multibeambathymetry)
3504 <span class="keyword">end</span>
3505 
3506 <span class="comment">% Log</span>
3507 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'log'</span>)
3508     log = getpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>);
3509     <span class="keyword">if</span> exist(log.path,<span class="string">'dir'</span>)
3510         guiprefs.log_path = log.path;
3511     <span class="keyword">else</span>
3512         guiprefs.log_path = pwd;
3513     <span class="keyword">end</span>
3514     <span class="keyword">if</span> exist(fullfile(log.path,log.file),<span class="string">'file'</span>)
3515         guiprefs.log_file = log.file;
3516     <span class="keyword">else</span>
3517         guiprefs.log_file = <span class="string">''</span>;
3518     <span class="keyword">end</span>
3519 <span class="keyword">else</span> <span class="comment">% Initialize Log</span>
3520     guiprefs.log_path = pwd;
3521     guiprefs.log_file = <span class="string">''</span>;
3522     
3523     log.path = pwd;
3524     log.file = <span class="string">''</span>;
3525     setpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>,log)
3526 <span class="keyword">end</span>
3527 
3528 <span class="comment">% iRic</span>
3529 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>)
3530     iric = getpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>);
3531     <span class="keyword">if</span> exist(iric.path,<span class="string">'dir'</span>)
3532         guiprefs.iric_path = iric.path;
3533     <span class="keyword">else</span>
3534         guiprefs.iric_path = pwd;
3535     <span class="keyword">end</span>
3536     <span class="keyword">if</span> exist(fullfile(iric.path,iric.file),<span class="string">'file'</span>)
3537         guiprefs.iric_file = iric.file;
3538     <span class="keyword">else</span>
3539         guiprefs.iric_file = <span class="string">''</span>;
3540     <span class="keyword">end</span>
3541 <span class="keyword">else</span> <span class="comment">% Initialize Log</span>
3542     guiprefs.iric_path = pwd;
3543     guiprefs.iric_file = <span class="string">''</span>;
3544     
3545     iric.path = pwd;
3546     iric.file = <span class="string">''</span>;
3547     setpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>,iric)
3548 <span class="keyword">end</span>
3549 
3550 <span class="comment">% excel</span>
3551 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>)
3552     excel = getpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>);
3553     <span class="keyword">if</span> exist(excel.path,<span class="string">'dir'</span>)
3554         guiprefs.excel_path = excel.path;
3555     <span class="keyword">else</span>
3556         guiprefs.excel_path = pwd;
3557     <span class="keyword">end</span>
3558     <span class="keyword">if</span> exist(fullfile(excel.path,excel.file),<span class="string">'file'</span>)
3559         guiprefs.excel_file = excel.file;
3560     <span class="keyword">else</span>
3561         guiprefs.excel_file = <span class="string">''</span>;
3562     <span class="keyword">end</span>
3563 <span class="keyword">else</span> <span class="comment">% Initialize pref</span>
3564     guiprefs.excel_path = pwd;
3565     guiprefs.excel_file = <span class="string">''</span>;
3566     
3567     excel.path = pwd;
3568     excel.file = <span class="string">''</span>;
3569     setpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>,excel)
3570 <span class="keyword">end</span>
3571 
3572 <span class="comment">% aerial</span>
3573 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>)
3574     aerial = getpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>);
3575     <span class="keyword">if</span> exist(aerial.path,<span class="string">'dir'</span>)
3576         guiprefs.aerial_path = aerial.path;
3577     <span class="keyword">else</span>
3578         guiprefs.aerial_path = pwd;
3579     <span class="keyword">end</span>
3580     does_exist = false(1,length(aerial.file));
3581     <span class="keyword">if</span> iscell(aerial.file)
3582     <span class="keyword">for</span> k = 1:numel(aerial.file) <span class="comment">% Check each file one-by-one</span>
3583         does_exist(k) = exist(fullfile(aerial.path,aerial.file{k}),<span class="string">'file'</span>);
3584     <span class="keyword">end</span>
3585     <span class="keyword">else</span>
3586         does_exist = exist(fullfile(aerial.path,aerial.file),<span class="string">'file'</span>);
3587     <span class="keyword">end</span>
3588     <span class="keyword">if</span> any(does_exist)
3589         guiprefs.aerial_file = aerial.file;
3590     <span class="keyword">else</span>
3591         guiprefs.aerial_file = {<span class="string">''</span>};
3592     <span class="keyword">end</span>
3593 <span class="keyword">else</span> <span class="comment">% Initialize aerial</span>
3594     guiprefs.aerial_path = pwd;
3595     guiprefs.aerial_file = {<span class="string">''</span>};
3596     
3597     aerial.path = pwd;
3598     aerial.file = {<span class="string">''</span>};
3599     setpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>,aerial)
3600 <span class="keyword">end</span>
3601 
3602 <span class="comment">% shoreline</span>
3603 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>)
3604     shoreline = getpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>);
3605     <span class="keyword">if</span> exist(shoreline.path,<span class="string">'dir'</span>)
3606         guiprefs.shoreline_path = shoreline.path;
3607     <span class="keyword">else</span>
3608         guiprefs.shoreline_path = pwd;
3609     <span class="keyword">end</span>
3610     
3611     <span class="keyword">if</span> iscell(shoreline.file)
3612         <span class="keyword">if</span> exist(fullfile(shoreline.path,shoreline.file{1}),<span class="string">'file'</span>)
3613             guiprefs.shoreline_file = shoreline.file;
3614         <span class="keyword">else</span>
3615             guiprefs.shoreline_file = <span class="string">''</span>;
3616         <span class="keyword">end</span>
3617     <span class="keyword">else</span>
3618         <span class="keyword">if</span> exist(fullfile(shoreline.path,shoreline.file),<span class="string">'file'</span>)
3619             guiprefs.shoreline_file = shoreline.file;
3620         <span class="keyword">else</span>
3621             guiprefs.shoreline_file = <span class="string">''</span>;
3622         <span class="keyword">end</span>
3623     <span class="keyword">end</span>
3624 <span class="keyword">else</span> <span class="comment">% Initialize shoreline</span>
3625     guiprefs.shoreline_path = pwd;
3626     guiprefs.shoreline_file = <span class="string">''</span>;
3627     
3628     shoreline.path = pwd;
3629     shoreline.file = <span class="string">''</span>;
3630     setpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>,shoreline)
3631 <span class="keyword">end</span>
3632 <span class="comment">% guiprefs.presentation = true;</span>
3633 <span class="comment">% guiprefs.print        = false;</span>
3634 
3635 <span class="comment">% for k = 1:length(prefs)</span>
3636 <span class="comment">%     newpref = '';</span>
3637 <span class="comment">%     if ispref('VMT',prefs{k})</span>
3638 <span class="comment">%         stored_newpref = getpref('VMT',prefs{k});</span>
3639 <span class="comment">%         if exist(stored_newpref,'dir')</span>
3640 <span class="comment">%             newpref = stored_newpref;</span>
3641 <span class="comment">%         else</span>
3642 <span class="comment">%             setpref('VMT',prefs{k},newpref)</span>
3643 <span class="comment">%         end</span>
3644 <span class="comment">%     end</span>
3645 <span class="comment">%     guiprefs.(prefs{k}) = newpref;</span>
3646 <span class="comment">% end</span>
3647 
3648 <span class="comment">% RENDERER</span>
3649 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>)
3650     renderer = getpref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>);
3651     guiprefs.renderer = renderer;
3652 <span class="keyword">else</span> <span class="comment">% Initialize RENDERER</span>
3653     renderer           = <span class="string">'OpenGL'</span>;
3654     guiprefs.renderer  = renderer;
3655     setpref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>,renderer)
3656 <span class="keyword">end</span>
3657 
3658 <span class="comment">% UNITS</span>
3659 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'units'</span>)
3660     units = getpref(<span class="string">'VMT'</span>,<span class="string">'units'</span>);
3661     guiprefs.units = units;
3662 <span class="keyword">else</span> <span class="comment">% Initialize RENDERER</span>
3663     units           = <span class="string">'metric'</span>;
3664     guiprefs.units  = renderer;
3665     setpref(<span class="string">'VMT'</span>,<span class="string">'units'</span>,units)
3666 <span class="keyword">end</span>
3667 
3668 <span class="comment">% RUNCOUNTER</span>
3669 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'runcounter'</span>)
3670     runcounter = getpref(<span class="string">'VMT'</span>,<span class="string">'runcounter'</span>)+1;
3671     guiprefs.runcounter = runcounter;
3672 <span class="keyword">else</span> <span class="comment">% Initialize RENDERER</span>
3673     runcounter           = 1;
3674     guiprefs.runcounter  = runcounter;
3675     setpref(<span class="string">'VMT'</span>,<span class="string">'runcounter'</span>,runcounter)
3676 <span class="keyword">end</span>
3677 setappdata(hfigure,<span class="string">'guiprefs'</span>,guiprefs)
3678 
3679 <span class="comment">% [EOF] load_prefs</span>
3680 
3681 
3682 <span class="comment">% --------------------------------------------------------------------</span>
3683 <a name="_sub93" href="#_subfunctions" class="code">function store_prefs(hfigure,pref)</a>
3684 <span class="comment">% Store preferences in the Application data and in the persistent</span>
3685 <span class="comment">% preferences data.</span>
3686 
3687 <span class="comment">% Preferences:</span>
3688 <span class="comment">% 'ascii'                Path and filenames of current ASCII files</span>
3689 <span class="comment">% 'mat'                  Path and filename of current MAT file</span>
3690 <span class="comment">% 'tecplot'              Path and filename of last Tecplot file</span>
3691 <span class="comment">% 'kmz'                  Path and filename of last KMZ file</span>
3692 <span class="comment">% 'multibeambathymetry'  Path and filename of last Multibeam Bathymetry file</span>
3693 <span class="comment">% 'log'                  Path and filename of last Log file</span>
3694 <span class="comment">% 'iric'                 Path and filename of last iRic ANV file</span>
3695 <span class="comment">% 'excel'                Path and filename of last Excel file</span>
3696 <span class="comment">% 'aerial'               Path and filename of last Aerial file</span>
3697 <span class="comment">% 'shoreline'            Path and filename of last Shoreline file</span>
3698 <span class="comment">% 'renderer'             Default graphics renderer</span>
3699 <span class="comment">% 'units'                Default plotting units</span>
3700 <span class="comment">% 'runcounter'           Keeps a running tally of how many times VMT is</span>
3701 <span class="comment">%                        started</span>
3702 
3703 guiprefs = getappdata(hfigure,<span class="string">'guiprefs'</span>);
3704 
3705 <span class="keyword">switch</span> pref
3706     <span class="keyword">case</span> <span class="string">'ascii'</span>
3707         ascii.path = guiprefs.ascii_path;
3708         ascii.file = guiprefs.ascii_file;
3709         setpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>,ascii)
3710     <span class="keyword">case</span> <span class="string">'mat'</span>
3711         mat.path = guiprefs.mat_path;
3712         mat.file = guiprefs.mat_file;
3713         setpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>,mat)
3714     <span class="keyword">case</span> <span class="string">'tecplot'</span>
3715         tecplot.path = guiprefs.tecplot_path;
3716         tecplot.file = guiprefs.tecplot_file;
3717         setpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>,tecplot)
3718     <span class="keyword">case</span> <span class="string">'kmz'</span>
3719         kmz.path = guiprefs.kmz_path;
3720         kmz.file = guiprefs.kmz_file;
3721         setpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>,kmz)
3722     <span class="keyword">case</span> <span class="string">'multibeambathymetry'</span>
3723         multibeambathymetry.path = guiprefs.multibeambathymetry_path;
3724         multibeambathymetry.file = guiprefs.multibeambathymetry_file;
3725         setpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>,multibeambathymetry)
3726     <span class="keyword">case</span> <span class="string">'log'</span>
3727         log.path = guiprefs.log_path;
3728         log.file = guiprefs.log_file;
3729         setpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>,log)
3730     <span class="keyword">case</span> <span class="string">'iric'</span>
3731         iric.path = guiprefs.iric_path;
3732         iric.file = guiprefs.iric_file;
3733         setpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>,iric)
3734     <span class="keyword">case</span> <span class="string">'excel'</span>
3735         excel.path = guiprefs.excel_path;
3736         excel.file = guiprefs.excel_file;
3737         setpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>,excel)
3738     <span class="keyword">case</span> <span class="string">'aerial'</span>
3739         aerial.path = guiprefs.aerial_path;
3740         aerial.file = guiprefs.aerial_file;
3741         setpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>,aerial)
3742     <span class="keyword">case</span> <span class="string">'shoreline'</span>
3743         shoreline.path = guiprefs.shoreline_path;
3744         shoreline.file = guiprefs.shoreline_file;
3745         setpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>,shoreline)
3746     <span class="keyword">case</span> <span class="string">'renderer'</span>
3747         renderer = guiprefs.renderer;
3748         setpref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>,renderer)
3749     <span class="keyword">case</span> <span class="string">'units'</span>
3750         units = guiprefs.units;
3751         setpref(<span class="string">'VMT'</span>,<span class="string">'units'</span>,units)
3752     <span class="keyword">case</span> <span class="string">'runcounter'</span>
3753         runcounter = guiprefs.runcounter;
3754         setpref(<span class="string">'VMT'</span>,<span class="string">'runcounter'</span>,runcounter)
3755     <span class="keyword">otherwise</span>
3756 <span class="keyword">end</span>
3757 
3758 <span class="comment">% if ismember(pref,prefs)</span>
3759 <span class="comment">%     setpref('VMT',pref,value)</span>
3760 <span class="comment">%</span>
3761 <span class="comment">%     guiprefs = getappdata(hfigure,'guiprefs');</span>
3762 <span class="comment">%     guiprefs.(pref) = value;</span>
3763 <span class="comment">%     setappdata(hfigure,'guiprefs',guiprefs)</span>
3764 <span class="comment">% end</span>
3765 
3766 <span class="comment">% [EOF] store_prefs</span>
3767 
3768 
3769 <span class="comment">% --------------------------------------------------------------------</span>
3770 <a name="_sub94" href="#_subfunctions" class="code">function initGUI(handles)</a>
3771 <span class="comment">% Initialize the UI controls in the GUI.</span>
3772 
3773 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3774 
3775 <span class="comment">% Set the name and version</span>
3776 set(handles.figure1,<span class="string">'Name'</span>,[<span class="string">'Velocity Mapping Toolbox (VMT) '</span> guiparams.vmt_version], <span class="keyword">...</span>
3777     <span class="string">'DockControls'</span>,<span class="string">'off'</span>)
3778 <span class="comment">%set(handles.VMTversion,             'String',guiparams.vmt_version)</span>
3779 
3780 <span class="comment">% Set the PLOT 1 axis labels</span>
3781 axes(handles.Plot1Shiptracks);
3782 set(handles.Plot1Shiptracks,<span class="string">'DataAspectRatio'</span>,[1 1 1],<span class="string">'PlotBoxAspectRatio'</span>,[1 1 1])
3783 xlabel(<span class="string">'UTM Easting (m)'</span>)
3784 ylabel(<span class="string">'UTM Northing (m)'</span>)
3785 box on
3786 grid on
3787 <span class="comment">% ticks_format('%6.0f','%8.0f'); %formats the ticks for UTM</span>
3788 
3789 <span class="comment">%%%%%%%%%%%%</span>
3790 <span class="comment">% MENU BAR %</span>
3791 <span class="comment">%%%%%%%%%%%%</span>
3792 <span class="keyword">if</span> guiparams.english_units
3793     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3794     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3795 <span class="keyword">else</span>
3796     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3797     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3798 <span class="keyword">end</span>
3799 
3800 <span class="keyword">if</span> guiparams.set_cross_section_endpoints
3801     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3802     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3803 <span class="keyword">else</span>
3804     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3805     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3806 <span class="keyword">end</span>
3807 
3808 
3809 <span class="keyword">if</span> guiparams.print
3810     set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3811     set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3812     set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3813     set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3814 <span class="keyword">elseif</span> guiparams.presentation
3815     set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3816     set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3817     set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3818     set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3819 <span class="keyword">else</span>
3820 <span class="keyword">end</span>
3821 
3822 <span class="keyword">switch</span> guiparams.renderer
3823     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
3824         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3825         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3826         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3827     <span class="keyword">case</span> <span class="string">'painters'</span>
3828         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3829         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3830         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3831     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
3832         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3833         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3834         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3835 <span class="keyword">end</span>
3836 
3837 
3838 <span class="comment">%%%%%%%%%%%%%%%</span>
3839 <span class="comment">% DATA EXPORT %</span>
3840 <span class="comment">%%%%%%%%%%%%%%%</span>
3841 <span class="comment">% BathymetryPanel</span>
3842 <span class="comment">% set(handles.BeamAngle,                  'String',guiparams.beam_angle)</span>
3843 <span class="comment">% set(handles.MagneticVariation,          'String',guiparams.magnetic_variation)</span>
3844 <span class="comment">% set(handles.WSE,                        'String',guiparams.wse)</span>
3845 <span class="comment">% set(handles.OutputAuxiliaryData,        'Value', guiparams.output_auxiliary_data)</span>
3846 
3847 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
3848 <span class="comment">% PLOTTING/PLAN VIEW %</span>
3849 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
3850 <span class="comment">% PlanViewPanel</span>
3851 set(handles.DepthRangeMin,              <span class="string">'String'</span>,guiparams.depth_range_min)
3852 set(handles.DepthRangeMax,              <span class="string">'String'</span>,guiparams.depth_range_max)
3853 set(handles.VectorScalePlanView,        <span class="string">'String'</span>,guiparams.vector_scale_plan_view)
3854 set(handles.VectorSpacingPlanview,      <span class="string">'String'</span>,guiparams.vector_spacing_plan_view)
3855 set(handles.SmoothingWindowSize,        <span class="string">'String'</span>,guiparams.smoothing_window_size)
3856 set(handles.DisplayShoreline,           <span class="string">'Value'</span>, guiparams.display_shoreline)
3857 set(handles.AddBackground,              <span class="string">'Value'</span>, guiparams.add_background)
3858 
3859 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%</span>
3860 <span class="comment">% PLOTTING/SHIP TRACKS %</span>
3861 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%</span>
3862 <span class="comment">% ShiptracksPanel</span>
3863 set(handles.HorizontalGridNodeSpacing,  <span class="string">'String'</span>,guiparams.horizontal_grid_node_spacing)
3864 set(handles.VerticalGridNodeSpacing,    <span class="string">'String'</span>,guiparams.vertical_grid_node_spacing)
3865 <span class="comment">%set(handles.SetCrossSectionEndpoints,   'Value', guiparams.set_cross_section_endpoints)</span>
3866 
3867 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
3868 <span class="comment">% PLOTTING/CROSS SECTIONS %</span>
3869 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
3870 <span class="comment">% CrossSectionsPanel</span>
3871 set(handles.Contour,                    <span class="string">'String'</span>,{guiparams.contours.string}, <span class="keyword">...</span>
3872     <span class="string">'Value'</span>, guiparams.idx_contour)
3873 set(handles.VerticalExaggeration,       <span class="string">'String'</span>,guiparams.vertical_exaggeration)
3874 set(handles.VectorScaleCrossSection,    <span class="string">'String'</span>,guiparams.vector_scale_cross_section)
3875 set(handles.HorizontalVectorSpacing,    <span class="string">'String'</span>,guiparams.horizontal_vector_spacing)
3876 set(handles.VerticalVectorSpacing,      <span class="string">'String'</span>,guiparams.vertical_vector_spacing)
3877 set(handles.HorizontalSmoothingWindow,  <span class="string">'String'</span>,guiparams.horizontal_smoothing_window)
3878 set(handles.VerticalSmoothingWindow,    <span class="string">'String'</span>,guiparams.vertical_smoothing_window)
3879 set(handles.PlotSecondaryFlowVectors,   <span class="string">'Value'</span>, guiparams.plot_secondary_flow_vectors)
3880 set(handles.SecondaryFlowVectorVariable,<span class="string">'String'</span>,{guiparams.secondary_flows.string}, <span class="keyword">...</span>
3881     <span class="string">'Value'</span>, guiparams.idx_secondary_flow_vector_variable)
3882 set(handles.IncludeVerticalVelocity,    <span class="string">'Value'</span>, guiparams.include_vertical_velocity)
3883 
3884 <span class="comment">% set(handles.EnglishUnits,               'Value',guiparams.english_units)</span>
3885 
3886 <span class="comment">% [EOF] initGUI</span>
3887 
3888 
3889 <span class="comment">% --------------------------------------------------------------------</span>
3890 <a name="_sub95" href="#_subfunctions" class="code">function set_enable(handles,enable_state)</a>
3891 
3892 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3893 
3894 <span class="keyword">switch</span> enable_state
3895     <span class="keyword">case</span> <span class="string">'init'</span>
3896         guiparams.gui_state = <span class="string">'init'</span>;
3897         set([handles.menuFile
3898             handles.menuOpen
3899             handles.menuOpenASCII
3900             handles.menuOpenMAT
3901             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3902         
3903         set([handles.toolbarLoadData
3904             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3905         set([handles.toolbarSaveMatFile
3906             handles.toolbarSaveBathymetry
3907             handles.toolbarSaveFigures
3908             handles.toolbarSaveExcel
3909             handles.toolbarPlottingParameters
3910             handles.toolbarProcessingParameters
3911             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3912         
3913         set([handles.DepthRangeMin
3914             handles.DepthRangeMax
3915             handles.VectorScalePlanView
3916             handles.VectorSpacingPlanview
3917             handles.SmoothingWindowSize
3918             handles.DisplayShoreline
3919             handles.AddBackground
3920             handles.PlotPlanView
3921             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3922         
3923         set([handles.HorizontalGridNodeSpacing
3924             handles.VerticalGridNodeSpacing
3925             handles.PlotShiptracks
3926             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3927         
3928         set([handles.Contour
3929             handles.VerticalExaggeration
3930             handles.VectorScaleCrossSection
3931             handles.HorizontalVectorSpacing
3932             handles.VerticalVectorSpacing
3933             handles.HorizontalSmoothingWindow
3934             handles.VerticalSmoothingWindow
3935             handles.PlotSecondaryFlowVectors
3936             handles.SecondaryFlowVectorVariable
3937             handles.IncludeVerticalVelocity
3938             handles.PlotCrossSection
3939             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3940         
3941     <span class="keyword">case</span> <span class="string">'fileloaded'</span>
3942         guiparams.gui_state = <span class="string">'fileloaded'</span>;
3943         set([handles.menuFile
3944             handles.menuOpen
3945             handles.menuOpenASCII
3946             handles.menuOpenMAT
3947             handles.menuSaveMAT
3948             handles.menuSaveTecplot
3949             handles.menuSaveKMZFile
3950             handles.menuParameters
3951             handles.menuPlottingParameters
3952             handles.menuMetric
3953             handles.menuEnglish
3954             handles.menuBathymetryExportSettings
3955             handles.menuExportMultibeamBathymetry
3956             handles.menuKMZVerticalOffset
3957             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3958         
3959         set([handles.toolbarLoadData
3960             handles.toolbarSaveMatFile
3961             handles.toolbarSaveBathymetry
3962             handles.toolbarSaveExcel
3963             handles.toolbarSaveFigures
3964             handles.toolbarPlottingParameters
3965             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3966         set([handles.toolbarProcessingParameters
3967             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3968         
3969            
3970         set([handles.DepthRangeMin
3971             handles.DepthRangeMax
3972             handles.VectorScalePlanView
3973             handles.VectorSpacingPlanview
3974             handles.SmoothingWindowSize
3975             handles.DisplayShoreline
3976             handles.PlotPlanView
3977             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3978         <span class="keyword">if</span> guiparams.has_mapping_toolbox
3979             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3980         <span class="keyword">else</span>
3981             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3982         <span class="keyword">end</span>
3983         
3984         set([handles.HorizontalGridNodeSpacing
3985             handles.VerticalGridNodeSpacing
3986             handles.PlotShiptracks
3987             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3988         
3989         set([handles.Contour
3990             handles.VerticalExaggeration
3991             handles.VectorScaleCrossSection
3992             handles.HorizontalVectorSpacing
3993             handles.VerticalVectorSpacing
3994             handles.HorizontalSmoothingWindow
3995             handles.VerticalSmoothingWindow
3996             handles.PlotSecondaryFlowVectors
3997             handles.SecondaryFlowVectorVariable
3998             handles.IncludeVerticalVelocity
3999             handles.PlotCrossSection
4000             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
4001     <span class="keyword">case</span> <span class="string">'multiplematfiles'</span>
4002         guiparams.gui_state = <span class="string">'multiplematfiles'</span>;
4003         set([handles.menuFile
4004             handles.menuOpen
4005             handles.menuOpenASCII
4006             handles.menuOpenMAT
4007             handles.menuParameters
4008             handles.menuPlottingParameters
4009             handles.menuMetric
4010             handles.menuEnglish
4011             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
4012         set([handles.menuSaveMAT
4013             handles.menuBathymetryExportSettings
4014             handles.menuExportMultibeamBathymetry
4015             handles.menuKMZVerticalOffset
4016             handles.menuSaveKMZFile
4017             handles.menuSaveTecplot
4018             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
4019         
4020         set([handles.toolbarLoadData
4021             handles.toolbarSaveFigures
4022             handles.toolbarPlottingParameters
4023             handles.toolbarSaveExcel
4024             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
4025         set([handles.toolbarProcessingParameters
4026             handles.toolbarSaveMatFile
4027             handles.toolbarSaveBathymetry
4028             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
4029         
4030         set([handles.DepthRangeMin
4031             handles.DepthRangeMax
4032             handles.VectorScalePlanView
4033             handles.VectorSpacingPlanview
4034             handles.SmoothingWindowSize
4035             handles.DisplayShoreline
4036             handles.PlotPlanView
4037             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
4038         <span class="keyword">if</span> guiparams.has_mapping_toolbox
4039             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'on'</span>)
4040         <span class="keyword">else</span>
4041             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'off'</span>)
4042         <span class="keyword">end</span>
4043         
4044         set([handles.HorizontalGridNodeSpacing
4045             handles.VerticalGridNodeSpacing
4046             handles.PlotShiptracks
4047             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
4048         
4049         set([handles.Contour
4050             handles.VerticalExaggeration
4051             handles.VectorScaleCrossSection
4052             handles.HorizontalVectorSpacing
4053             handles.VerticalVectorSpacing
4054             handles.HorizontalSmoothingWindow
4055             handles.VerticalSmoothingWindow
4056             handles.PlotSecondaryFlowVectors
4057             handles.SecondaryFlowVectorVariable
4058             handles.IncludeVerticalVelocity
4059             handles.PlotCrossSection
4060             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
4061     <span class="keyword">otherwise</span>
4062 <span class="keyword">end</span>
4063 
4064 <span class="comment">% Save Application Data</span>
4065 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
4066 
4067 <span class="comment">% [EOF] set_enable</span>
4068 
4069 <span class="comment">%% Compute the longitudinal dispersion coefficient</span>
4070 
4071 <span class="comment">%% --- Executes on button press in zerosecq_chkbox.</span>
4072 <span class="comment">%function zerosecq_chkbox_Callback(hObject, eventdata, handles)</span>
4073 <span class="comment">% hObject    handle to zerosecq_chkbox (see GCBO)</span>
4074 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
4075 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
4076 
4077 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of zerosecq_chkbox</span>
4078 
4079 
4080 <span class="comment">% --------------------------------------------------------------------</span>
4081 <a name="_sub96" href="#_subfunctions" class="code">function [english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style] = </a><span class="keyword">...</span>
4082     plotParametersDialog(english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style,hf)
4083 
4084 w = 500;
4085 h = 110;
4086 dx = 10;
4087 dy = 35;
4088 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
4089 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Plotting Parameters'</span>, <span class="keyword">...</span>
4090     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
4091     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4092     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
4093     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
4094     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4095     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4096     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4097     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
4098     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4099     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
4100 dialog_params.english_units               = english_units;
4101 dialog_params.set_cross_section_endpoints = set_cross_section_endpoints;
4102 dialog_params.presentation                = plot_presentation_style; <span class="comment">%presentation;</span>
4103 dialog_params.print                       = plot_print_style; <span class="comment">%print;</span>
4104 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4105 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
4106 
4107 <span class="comment">% Build the graphics:</span>
4108 <span class="comment">% -------------------</span>
4109 handles.UnitsPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4110     <span class="string">'Title'</span>, <span class="string">'Units'</span>, <span class="keyword">...</span>
4111     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4112     <span class="string">'Position'</span>,[dx dy (w-3*dx)/3 h-dx-dy+10]);
4113 handles.UnitsMetric = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4114     <span class="string">'Parent'</span>,handles.UnitsPanel, <span class="keyword">...</span>
4115     <span class="string">'String'</span>,<span class="string">'Metric'</span>, <span class="keyword">...</span>
4116     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4117     <span class="string">'Position'</span>,[15 35 100 22]);
4118 handles.UnitsEnglish = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4119     <span class="string">'Parent'</span>,handles.UnitsPanel, <span class="keyword">...</span>
4120     <span class="string">'String'</span>,<span class="string">'English'</span>, <span class="keyword">...</span>
4121     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4122     <span class="string">'Position'</span>,[15 10 100 22]);
4123 
4124 handles.EndpointsPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4125     <span class="string">'Title'</span>, <span class="string">'Cross-Section Endpoints'</span>, <span class="keyword">...</span>
4126     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4127     <span class="string">'Position'</span>,[(w+dx)/3 dy (w-3*dx)/3 h-dx-dy+10]);
4128 handles.EndpointsAutomatic = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4129     <span class="string">'Parent'</span>,handles.EndpointsPanel, <span class="keyword">...</span>
4130     <span class="string">'String'</span>,<span class="string">'Automatic'</span>, <span class="keyword">...</span>
4131     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4132     <span class="string">'Position'</span>,[15 35 100 22]);
4133 handles.EndpointsManual = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4134     <span class="string">'Parent'</span>,handles.EndpointsPanel, <span class="keyword">...</span>
4135     <span class="string">'String'</span>,<span class="string">'Set Manually'</span>, <span class="keyword">...</span>
4136     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4137     <span class="string">'Position'</span>,[15 10 100 22]);
4138 
4139 handles.StylePanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4140     <span class="string">'Title'</span>, <span class="string">'Plot Style'</span>, <span class="keyword">...</span>
4141     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4142     <span class="string">'Position'</span>,[w-w/3 dy (w-3*dx)/3 h-dx-dy+10]);
4143 handles.StylePresentation = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4144     <span class="string">'Parent'</span>,handles.StylePanel, <span class="keyword">...</span>
4145     <span class="string">'String'</span>,<span class="string">'Presentation'</span>, <span class="keyword">...</span>
4146     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4147     <span class="string">'Position'</span>,[15 35 100 22]);
4148 handles.StylePrint = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4149     <span class="string">'Parent'</span>,handles.StylePanel, <span class="keyword">...</span>
4150     <span class="string">'String'</span>,<span class="string">'Print'</span>, <span class="keyword">...</span>
4151     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4152     <span class="string">'Position'</span>,[15 10 100 22]);
4153 
4154 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4155     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4156     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
4157     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4158     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
4159 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4160     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4161     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
4162     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4163     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
4164 
4165 <span class="comment">% Update the UI controls:</span>
4166 <span class="comment">% -----------------------</span>
4167 <span class="keyword">if</span> dialog_params.english_units
4168     set(handles.UnitsMetric, <span class="string">'Value'</span>,0)
4169     set(handles.UnitsEnglish,<span class="string">'Value'</span>,1)
4170 <span class="keyword">else</span>
4171     set(handles.UnitsMetric, <span class="string">'Value'</span>,1)
4172     set(handles.UnitsEnglish,<span class="string">'Value'</span>,0)
4173 <span class="keyword">end</span>
4174 <span class="keyword">if</span> dialog_params.set_cross_section_endpoints
4175     set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,0)
4176     set(handles.EndpointsManual,   <span class="string">'Value'</span>,1)
4177 <span class="keyword">else</span>
4178     set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,1)
4179     set(handles.EndpointsManual,   <span class="string">'Value'</span>,0)
4180 <span class="keyword">end</span>
4181 <span class="keyword">if</span> dialog_params.presentation
4182     set(handles.StylePresentation, <span class="string">'Value'</span>,1)
4183     set(handles.StylePrint,        <span class="string">'Value'</span>,0)
4184 <span class="keyword">else</span>
4185     set(handles.StylePresentation, <span class="string">'Value'</span>,0)
4186     set(handles.StylePrint,        <span class="string">'Value'</span>,1)
4187 <span class="keyword">end</span>
4188 
4189 <span class="comment">% Set the callbacks:</span>
4190 <span class="comment">% ------------------</span>
4191 set(handles.Figure,            <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub102" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>, handles.OK})
4192 set(handles.UnitsMetric,       <span class="string">'Callback'</span>,       {@<a href="#_sub97" class="code" title="subfunction dialogUnits(hObject,eventdata,handles,the_units)">dialogUnits</a>,    handles,<span class="string">'metric'</span>})
4193 set(handles.UnitsEnglish,      <span class="string">'Callback'</span>,       {@<a href="#_sub97" class="code" title="subfunction dialogUnits(hObject,eventdata,handles,the_units)">dialogUnits</a>,    handles,<span class="string">'english'</span>})
4194 set(handles.EndpointsAutomatic,<span class="string">'Callback'</span>,       {@<a href="#_sub98" class="code" title="subfunction dialogEnpoints(hObject,eventdata,handles,the_endpoints)">dialogEnpoints</a>, handles,<span class="string">'auto'</span>})
4195 set(handles.EndpointsManual,   <span class="string">'Callback'</span>,       {@<a href="#_sub98" class="code" title="subfunction dialogEnpoints(hObject,eventdata,handles,the_endpoints)">dialogEnpoints</a>, handles,<span class="string">'manual'</span>})
4196 set(handles.StylePresentation, <span class="string">'Callback'</span>,       {@<a href="#_sub99" class="code" title="subfunction dialogPlotStyle(hObject,eventdata,handles,the_style)">dialogPlotStyle</a>,handles,<span class="string">'presentation'</span>})
4197 set(handles.StylePrint,        <span class="string">'Callback'</span>,       {@<a href="#_sub99" class="code" title="subfunction dialogPlotStyle(hObject,eventdata,handles,the_style)">dialogPlotStyle</a>,handles,<span class="string">'print'</span>})
4198 set(handles.OK,                <span class="string">'Callback'</span>,       {@<a href="#_sub100" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,       handles.OK})
4199 set(handles.Cancel,            <span class="string">'Callback'</span>,       {@<a href="#_sub101" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,   handles})
4200 
4201 <span class="comment">% Position the dialog and make it visible:</span>
4202 <span class="comment">% ----------------------------------------</span>
4203 fpos = get(hf,<span class="string">'Position'</span>);
4204 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
4205 movegui(handles.Figure,dpos)
4206 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
4207 
4208 <span class="comment">% Hold the dialog open:</span>
4209 <span class="comment">% ---------------------</span>
4210 waitfor(handles.OK)
4211 
4212 <span class="comment">% Return the outputs and close the dialog:</span>
4213 <span class="comment">% ----------------------------------------</span>
4214 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4215 english_units = dialog_params.english_units;
4216 set_cross_section_endpoints = dialog_params.set_cross_section_endpoints;
4217 plot_presentation_style =  dialog_params.presentation;
4218 plot_print_style =  dialog_params.print;
4219 
4220 delete(handles.Figure)
4221 
4222 <span class="comment">% [EOF] plotParametersDialog</span>
4223 
4224 
4225 <span class="comment">% --------------------------------------------------------------------</span>
4226 <a name="_sub97" href="#_subfunctions" class="code">function dialogUnits(hObject,eventdata,handles,the_units)</a>
4227 
4228 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4229 <span class="keyword">switch</span> the_units
4230     <span class="keyword">case</span> <span class="string">'metric'</span>
4231         dialog_params.english_units = false;
4232         
4233         set(handles.UnitsMetric, <span class="string">'Value'</span>,1)
4234         set(handles.UnitsEnglish,<span class="string">'Value'</span>,0)
4235     <span class="keyword">case</span> <span class="string">'english'</span>
4236         dialog_params.english_units = true;
4237         
4238         set(handles.UnitsMetric, <span class="string">'Value'</span>,0)
4239         set(handles.UnitsEnglish,<span class="string">'Value'</span>,1)
4240     <span class="keyword">otherwise</span>
4241 <span class="keyword">end</span>
4242 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4243 
4244 <span class="comment">% [EOF] dialogUnits</span>
4245 
4246 <span class="comment">% --------------------------------------------------------------------</span>
4247 <a name="_sub98" href="#_subfunctions" class="code">function dialogEnpoints(hObject,eventdata,handles,the_endpoints)</a>
4248 
4249 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4250 <span class="keyword">switch</span> the_endpoints
4251     <span class="keyword">case</span> <span class="string">'auto'</span>
4252         dialog_params.set_cross_section_endpoints = false;
4253         
4254         set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,1)
4255         set(handles.EndpointsManual,   <span class="string">'Value'</span>,0)
4256     <span class="keyword">case</span> <span class="string">'manual'</span>
4257         dialog_params.set_cross_section_endpoints = true;
4258         
4259         set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,0)
4260         set(handles.EndpointsManual,   <span class="string">'Value'</span>,1)
4261     <span class="keyword">otherwise</span>
4262 <span class="keyword">end</span>
4263 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4264 
4265 <span class="comment">% [EOF] dialogEnpoints</span>
4266 
4267 <a name="_sub99" href="#_subfunctions" class="code">function dialogPlotStyle(hObject,eventdata,handles,the_style)</a>
4268 
4269 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4270 <span class="keyword">switch</span> the_style
4271     <span class="keyword">case</span> <span class="string">'presentation'</span>
4272         dialog_params.presentation  = true;
4273         dialog_params.print         = false;
4274         
4275         set(handles.StylePresentation,<span class="string">'Value'</span>,1)
4276         set(handles.StylePrint,       <span class="string">'Value'</span>,0)
4277     <span class="keyword">case</span> <span class="string">'print'</span>
4278         dialog_params.presentation  = false;
4279         dialog_params.print         = true;
4280         
4281         set(handles.StylePresentation,<span class="string">'Value'</span>,0)
4282         set(handles.StylePrint,       <span class="string">'Value'</span>,1)
4283     <span class="keyword">otherwise</span>
4284 <span class="keyword">end</span>
4285 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4286 
4287 <span class="comment">% [EOF] dialogEnpoints</span>
4288 
4289 <span class="comment">% --------------------------------------------------------------------</span>
4290 <a name="_sub100" href="#_subfunctions" class="code">function dialogOK(hObject,eventdata,h_OK)</a>
4291 
4292 delete(h_OK)
4293 
4294 <span class="comment">% [EOF] dialogOK</span>
4295 
4296 <span class="comment">% --------------------------------------------------------------------</span>
4297 <a name="_sub101" href="#_subfunctions" class="code">function dialogCancel(hObject,eventdata,handles)</a>
4298 <span class="comment">% Return the original inputs</span>
4299 dialog_params = getappdata(handles.Figure,<span class="string">'original_dialog_params'</span>);
4300 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4301 delete(handles.OK)
4302 
4303 <span class="comment">% [EOF] dialogCancel</span>
4304 
4305 <span class="comment">% --------------------------------------------------------------------</span>
4306 <a name="_sub102" href="#_subfunctions" class="code">function dialogCloseReq(hObject,eventdata,h_OK)</a>
4307 
4308 delete(h_OK)
4309 
4310 <span class="comment">% [EOF] dialogCloseReq</span>
4311 
4312 <a name="_sub103" href="#_subfunctions" class="code">function [beam_angle,magnetic_variation,wse,output_auxiliary_data] = exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,hf)</a>
4313 w = 230;
4314 h = 200;
4315 dx = 10;
4316 dy = 35;
4317 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
4318 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Export Settings'</span>, <span class="keyword">...</span>
4319     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
4320     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4321     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
4322     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
4323     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4324     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4325     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4326     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
4327     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4328     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
4329 dialog_params.beam_angle             = beam_angle;
4330 dialog_params.magnetic_variation     = magnetic_variation;
4331 dialog_params.wse                    = wse;
4332 dialog_params.output_auxiliary_data = output_auxiliary_data;
4333 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4334 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
4335 
4336 <span class="comment">% Build the graphics:</span>
4337 <span class="comment">% -------------------</span>
4338 ph = 150;
4339 handles.BathymetryPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4340     <span class="string">'Title'</span>, <span class="string">'Bathymetry'</span>, <span class="keyword">...</span>
4341     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4342     <span class="string">'Position'</span>,[dx dy (w-2*dx) h-dx-dy+10]);
4343 handles.BeamAngleText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
4344     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4345     <span class="string">'String'</span>,<span class="string">'Beam Angle (deg)'</span>, <span class="keyword">...</span>
4346     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
4347     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
4348     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4349     <span class="string">'Position'</span>,[dx+5 h-ph+60-4 100 22]);
4350 handles.BeamAngle = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
4351     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4352     <span class="keyword">...</span><span class="comment">'String','Beam Angle (deg)', ...</span>
4353     <span class="string">'String'</span>,beam_angle,<span class="keyword">...</span>
4354     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
4355     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4356     <span class="string">'Position'</span>,[w-dx-80 h-ph+60 50 22]);
4357 handles.MagneticVariationText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
4358     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4359     <span class="string">'String'</span>,<span class="string">'Magnetic Variation'</span>, <span class="keyword">...</span>
4360     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
4361     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
4362     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4363     <span class="string">'Position'</span>,[dx+5 h-ph+30-4 100 22]);
4364 handles.MagneticVariation = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
4365     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4366     <span class="keyword">...</span><span class="comment">'String','Magnetic Variation', ...</span>
4367     <span class="string">'String'</span>,magnetic_variation,<span class="keyword">...</span>
4368     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
4369     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4370     <span class="string">'Position'</span>,[w-dx-80 h-ph+30 50 22]);
4371 handles.WSEText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
4372     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4373     <span class="string">'String'</span>,<span class="string">'WSE (m)'</span>, <span class="keyword">...</span>
4374     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
4375     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
4376     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4377     <span class="string">'Position'</span>,[dx+5 h-ph-4 100 22]);
4378 handles.WSE = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
4379     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4380     <span class="keyword">...</span><span class="comment">'String','Magnetic Variation', ...</span>
4381     <span class="string">'String'</span>,num2str(wse),<span class="keyword">...</span>
4382     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
4383     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4384     <span class="string">'Position'</span>,[w-dx-80 h-ph 50 22]);
4385 handles.OutputauxiliaryData = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4386     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4387     <span class="string">'String'</span>,<span class="string">'Output auxiliary Data'</span>, <span class="keyword">...</span>
4388     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4389     <span class="string">'Position'</span>,[dx+5 20 w-2*dx-30 22]);
4390 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4391     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4392     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
4393     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4394     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
4395 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4396     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4397     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
4398     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4399     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
4400 
4401 <span class="comment">% Update the UI controls:</span>
4402 <span class="comment">% -----------------------</span>
4403 set(handles.BeamAngle,                <span class="string">'String'</span>,dialog_params.beam_angle)
4404 set(handles.MagneticVariation,        <span class="string">'String'</span>,dialog_params.magnetic_variation)
4405 set(handles.WSE,                      <span class="string">'String'</span>,dialog_params.wse)
4406 set(handles.OutputauxiliaryData,     <span class="string">'Value'</span>, double(dialog_params.output_auxiliary_data))
4407 
4408 <span class="comment">% Set the callbacks:</span>
4409 <span class="comment">% ------------------</span>
4410 set(handles.Figure,                      <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub102" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>,handles.OK})
4411 set(handles.BeamAngle,                   <span class="string">'Callback'</span>,       {@<a href="#_sub104" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4412 set(handles.MagneticVariation,           <span class="string">'Callback'</span>,       {@<a href="#_sub104" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4413 set(handles.WSE,                         <span class="string">'Callback'</span>,       {@<a href="#_sub104" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4414 set(handles.OutputauxiliaryData,         <span class="string">'Callback'</span>,       {@<a href="#_sub104" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4415 set(handles.OK,                          <span class="string">'Callback'</span>,       {@<a href="#_sub100" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,      handles.OK})
4416 set(handles.Cancel,                      <span class="string">'Callback'</span>,       {@<a href="#_sub101" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,  handles})
4417 
4418 <span class="comment">% Position the dialog and make it visible:</span>
4419 <span class="comment">% ----------------------------------------</span>
4420 fpos = get(hf,<span class="string">'Position'</span>);
4421 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
4422 movegui(handles.Figure,dpos)
4423 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
4424 
4425 <span class="comment">% Hold the dialog open:</span>
4426 <span class="comment">% ---------------------</span>
4427 waitfor(handles.OK)
4428 
4429 <span class="comment">% Return the outputs and close the dialog:</span>
4430 <span class="comment">% ----------------------------------------</span>
4431 dialog_params           = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4432 beam_angle              = dialog_params.beam_angle;
4433 magnetic_variation      = dialog_params.magnetic_variation;
4434 wse                     = str2double(dialog_params.wse);
4435 output_auxiliary_data  = logical(dialog_params.output_auxiliary_data);
4436 
4437 delete(handles.Figure)
4438 
4439 <span class="comment">% [EOF] exportSettingsDialog</span>
4440 
4441 <span class="comment">% --------------------------------------------------------------------</span>
4442 <a name="_sub104" href="#_subfunctions" class="code">function dialogExportSettings(hObject,eventdata,handles)</a>
4443 
4444 <span class="comment">% Grab the current data</span>
4445 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4446 
4447 <span class="comment">% Set it according to the dialog box values</span>
4448 dialog_params.beam_angle                = get(handles.BeamAngle,<span class="string">'String'</span>);
4449 dialog_params.magnetic_variation        = get(handles.MagneticVariation,<span class="string">'String'</span>);
4450 dialog_params.wse                       = get(handles.WSE,<span class="string">'String'</span>);
4451 dialog_params.output_auxiliary_data    = get(handles.OutputauxiliaryData,<span class="string">'Value'</span>);
4452 
4453 <span class="comment">% Re-store the application data</span>
4454 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4455 
4456 <span class="comment">% [EOF] dialogExportSettings</span>
4457 
4458 <a name="_sub105" href="#_subfunctions" class="code">function [selected_figures] = openFiguresDialog(figure_names,hf)</a>
4459 
4460 w = 230;
4461 h = 200;
4462 dx = 10;
4463 dy = 35;
4464 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
4465 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Select open figures to export'</span>, <span class="keyword">...</span>
4466     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
4467     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4468     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
4469     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
4470     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4471     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4472     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4473     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
4474     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4475     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
4476 dialog_params.figure_names               = figure_names;
4477 dialog_params.selected_figures           = <span class="string">''</span>;
4478 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4479 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
4480 
4481 <span class="comment">% Build the graphics:</span>
4482 <span class="comment">% -------------------</span>
4483 handles.ListboxPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4484     <span class="string">'Title'</span>, <span class="string">'Figures'</span>, <span class="keyword">...</span>
4485     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4486     <span class="string">'Position'</span>,[dx dy (w-2*dx) h-dx-dy+10]);
4487 handles.Figures = uicontrol(<span class="string">'Style'</span>,<span class="string">'listbox'</span>, <span class="keyword">...</span>
4488     <span class="string">'Parent'</span>,handles.ListboxPanel, <span class="keyword">...</span>
4489     <span class="string">'BackGroundColor'</span>,<span class="string">'white'</span>,<span class="keyword">...</span>
4490     <span class="string">'String'</span>,figure_names, <span class="keyword">...</span>
4491     <span class="string">'Min'</span>, 0,<span class="keyword">...</span>
4492     <span class="string">'Max'</span>, 2,<span class="keyword">...</span>
4493     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4494     <span class="string">'Position'</span>,[15 35 (w-5*dx) 100]);
4495 
4496 
4497 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4498     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4499     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
4500     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4501     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
4502 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4503     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4504     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
4505     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4506     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
4507 
4508 <span class="comment">% Update the UI controls:</span>
4509 <span class="comment">% -----------------------</span>
4510 
4511 
4512 <span class="comment">% Set the callbacks:</span>
4513 <span class="comment">% ------------------</span>
4514 set(handles.Figure,            <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub102" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>,handles.OK})
4515 set(handles.Figures,           <span class="string">'Callback'</span>,       {@<a href="#_sub106" class="code" title="subfunction dialogSelectFigures(hObject,eventdata,handles)">dialogSelectFigures</a>    handles})
4516 set(handles.OK,                <span class="string">'Callback'</span>,       {@<a href="#_sub100" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,       handles.OK})
4517 set(handles.Cancel,            <span class="string">'Callback'</span>,       {@<a href="#_sub101" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,   handles})
4518 
4519 <span class="comment">% Position the dialog and make it visible:</span>
4520 <span class="comment">% ----------------------------------------</span>
4521 fpos = get(hf,<span class="string">'Position'</span>);
4522 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
4523 movegui(handles.Figure,dpos)
4524 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
4525 
4526 <span class="comment">% Hold the dialog open:</span>
4527 <span class="comment">% ---------------------</span>
4528 waitfor(handles.OK)
4529 
4530 <span class="comment">% Return the outputs and close the dialog:</span>
4531 <span class="comment">% ----------------------------------------</span>
4532 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4533 selected_figures = dialog_params.selected_figures;
4534 
4535 delete(handles.Figure)
4536 
4537 <span class="comment">% [EOF] openFiguresDialog</span>
4538 
4539 <span class="comment">% --------------------------------------------------------------------</span>
4540 <a name="_sub106" href="#_subfunctions" class="code">function dialogSelectFigures(hObject,eventdata,handles)</a>
4541 
4542 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4543 
4544 idx_selected = get(handles.Figures,<span class="string">'Value'</span>);
4545 fig_names    = get(handles.Figures,<span class="string">'String'</span>);
4546 selected     = fig_names(idx_selected);
4547 dialog_params.selected_figures = selected;
4548 
4549 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4550 
4551 
4552 
4553 <span class="comment">% --------------------------------------------------------------------</span>
4554 <a name="_sub107" href="#_subfunctions" class="code">function icons = getIcons</a>
4555 
4556 <span class="comment">% Load data</span>
4557 idx = 1;
4558 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4559     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4560     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   129   120   135   188   NaN   NaN   NaN
4561     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN    96   189   NaN   NaN   130   NaN    95   NaN
4562     NaN   NaN   206   206   206   206   NaN   NaN   NaN   NaN   NaN   NaN   NaN    84    79   NaN
4563     NaN   206   255   255   255   255   198   197   NaN   NaN   NaN   NaN    83    79    76   NaN
4564     198   255   255   255   255   255   255   198   198   198   198   198   198   212   212   NaN
4565     198   255   255   255   255   255   255   255   255   255   255   255   198   157   197   NaN
4566     198   255   226   198   198   198   198   198   198   198   198   198   198   198   177   NaN
4567     198   255   198   218   255   255   255   255   255   255   255   255   255   255   161   NaN
4568     198   253   198   247   255   255   255   255   255   255   255   255   255   251   155   NaN
4569     198   226   201   255   255   255   255   255   255   255   255   255   231   206   165   NaN
4570     198   207   215   255   255   255   255   255   255   255   255   255   239   198   159   NaN
4571     198   198   240   255   255   255   255   255   255   255   255   255   222   157   159   NaN
4572     198   199   255   255   255   255   255   255   255   255   255   255   191   165   159   NaN
4573     NaN   165   165   165   165   165   165   165   165   165   165   165   165   159   159   NaN
4574     NaN   NaN   159   159   159   159   159   159   159   159   159   159   159   159   NaN   NaN]/255;
4575 
4576 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4577     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4578     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   145   137   149   195   NaN   NaN   NaN
4579     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   116   196   NaN   NaN   145   NaN   116   NaN
4580     NaN   NaN   162   162   162   162   NaN   NaN   NaN   NaN   NaN   NaN   NaN   107   105   NaN
4581     NaN   162   255   255   255   255   154   197   NaN   NaN   NaN   NaN   106   104   103   NaN
4582     154   255   255   255   255   255   255   154   154   154   154   154   154   208   208   NaN
4583     154   243   243   243   243   243   243   255   255   255   255   255   154   123   197   NaN
4584     154   235   193   154   154   154   154   154   154   154   154   154   154   154   137   NaN
4585     154   215   154   191   255   255   251   255   255   255   255   255   231   255   126   NaN
4586     154   213   154   240   255   255   255   255   255   255   255   255   199   249   123   NaN
4587     154   179   160   255   247   247   247   247   247   247   247   247   190   188   115   NaN
4588     154   162   184   255   235   235   235   235   235   235   235   231   186   154   169   NaN
4589     154   154   228   255   227   227   227   227   227   227   227   223   178   123   169   NaN
4590     154   156   255   215   215   215   215   215   215   215   215   215   153   115   169   NaN
4591     NaN   115   115   115   115   115   115   115   115   115   115   115   115   169   169   NaN
4592     NaN   NaN   169   169   169   169   169   169   169   169   169   169   169   169   NaN   NaN]/255;
4593 
4594 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4595     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4596     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   166   161   170   202   NaN   NaN   NaN
4597     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   149   205   NaN   NaN   166   NaN   148   NaN
4598     NaN   NaN    34    34    34    34   NaN   NaN   NaN   NaN   NaN   NaN   NaN   141   144   NaN
4599     NaN    34   255   255   255   255    25   197   NaN   NaN   NaN   NaN   142   145   147   NaN
4600     25   255   156   156   156   156   255    25    25    25    25    25    25   200   200   NaN
4601     25   156   140   140   140   140   140   255   255   255   255   255    25    26   197   NaN
4602     25   132    80    25    25    25    25    25    25    25    25    25    25    25    25   NaN
4603     25   132    25   108   255   255   247   255   255   255   255   255   132   255    25   NaN
4604     25   112    25   137   156   156   156   156   156   156   156   156    91   150    25   NaN
4605     25    67    33   165   148   148   148   148   148   148   148   148    83    92    13   NaN
4606     25    38    64   156   132   132   132   132   132   132   132   132    67    25   176   NaN
4607     25    26   122   156   124   124   124   124   124   124   124   124    67    26   176   NaN
4608     25    28   156   108   108   108   108   108   108   108   108   108    41    13   176   NaN
4609     NaN    13    13    13    13    13    13    13    13    13    13    13    13   176   176   NaN
4610     NaN   NaN   176   176   176   176   176   176   176   176   176   176   176   176   NaN   NaN]/255;
4611 
4612 <span class="comment">% Save data</span>
4613 idx = idx+1;
4614 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4615     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4616     NaN    0.6902    0.6902    0.6902    0.6902    0.6902    0.6274    0.6274    0.5647    0.5647    0.5647    0.5019    0.5019    0.4392    0.2510       NaN
4617     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.3137    0.3765    0.2510    0.4670
4618     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.2510    0.1882    0.2510    0.4670
4619     NaN    0.6274    0.7529    0.5019    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.1882    0.5019    0.2510    0.4670
4620     NaN    0.6274    0.7529    0.4392    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.1882    0.4392    0.2510    0.4670
4621     NaN    0.6274    0.7529    0.4392    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.7529    0.1255    0.3765    0.2510    0.4670
4622     NaN    0.5647    0.7529    0.3765    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.7529    0.7529    0.0627    0.3765    0.2510    0.4670
4623     NaN    0.5647    0.7529    0.6902    0.3765    0.3137    0.3137    0.2510    0.1882    0.1882    0.1255    0.0627    0.3765    0.3137    0.2510    0.4670
4624     NaN    0.5019    0.6902    0.6902    0.6274    0.5647    0.5019    0.5019    0.5019    0.4392    0.4392    0.3765    0.3137    0.3137    0.2510    0.4670
4625     NaN    0.5019    0.6902    0.6274    0.5647    0.3137    0.3137    0.3137    0.3137    0.3137    0.3765    0.3137    0.3137    0.2510    0.2510    0.4670
4626     NaN    0.4392    0.6274    0.5647    0.5019    0.3137       NaN    0.1882    0.8157    0.8157    0.3765    0.2510    0.2510    0.2510    0.2510    0.4670
4627     NaN    0.4392    0.6274    0.5019    0.5019    0.3137    0.1882    0.4392    0.8784    0.8784    0.4392    0.1882    0.2510    0.1882    0.2510    0.4670
4628     NaN    0.4392    0.5647    0.5019    0.1255    0.1255    0.6902    0.6902    0.7529    0.7529    0.3137    0.1882    0.1882    0.1882    0.2510    0.4670
4629     NaN    0.7333    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.4670
4630     NaN       NaN    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670];
4631 
4632 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4633     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4634     NaN    0.7216    0.7216    0.6902    0.6902    0.6588    0.6274    0.5961    0.5647    0.5647    0.5333    0.5019    0.4706    0.4706    0.2196       NaN
4635     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.3451    0.3451    0.2196    0.5378
4636     NaN    0.6902    0.7529    0.5333    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.3137    0.1882    0.2196    0.5378
4637     NaN    0.6588    0.7529    0.5019    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.3137    0.4706    0.2196    0.5378
4638     NaN    0.6274    0.7529    0.4706    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.2824    0.4392    0.2196    0.5378
4639     NaN    0.5961    0.7529    0.4392    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.8157    0.2510    0.4078    0.2196    0.5378
4640     NaN    0.5647    0.7529    0.4078    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.8157    0.7843    0.2196    0.3765    0.2196    0.5378
4641     NaN    0.5333    0.7216    0.7216    0.3765    0.3765    0.3451    0.3137    0.3137    0.2824    0.2510    0.2196    0.3765    0.3451    0.2196    0.5378
4642     NaN    0.5019    0.6902    0.6902    0.6274    0.5647    0.5333    0.5019    0.4706    0.4392    0.4078    0.3765    0.3451    0.3137    0.2196    0.5378
4643     NaN    0.4706    0.6588    0.6274    0.5647    0.3451    0.3451    0.3451    0.3451    0.3765    0.4078    0.3451    0.3137    0.2824    0.2196    0.5378
4644     NaN    0.4706    0.6274    0.5647    0.5333    0.3451       NaN    0.2510    0.8470    0.8784    0.4706    0.2824    0.2824    0.2510    0.2196    0.5378
4645     NaN    0.4392    0.5961    0.5333    0.5019    0.3451    0.2510    0.4706    0.8784    0.9098    0.5019    0.2510    0.2510    0.2510    0.2196    0.5378
4646     NaN    0.4078    0.5647    0.5019    0.2824    0.1882    0.7216    0.7216    0.7529    0.7843    0.3137    0.2510    0.2510    0.2196    0.2196    0.5378
4647     NaN    0.7176    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.5378
4648     NaN       NaN    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378];
4649 
4650 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4651     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4652     NaN    0.9412    0.9412    0.9412    0.9412    0.9412    0.9412    0.8784    0.8784    0.8784    0.8784    0.8784    0.8157    0.8157    0.4392       NaN
4653     NaN    0.9412    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.7529    0.6902    0.4392    0.5997
4654     NaN    0.9412    1.0000    0.9412    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.7529    0.3765    0.4392    0.5997
4655     NaN    0.9412    1.0000    0.8784    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.6902    0.8784    0.4392    0.5997
4656     NaN    0.9412    1.0000    0.8784    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.6902    0.8157    0.4392    0.5997
4657     NaN    0.8784    1.0000    0.8157    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.8784    0.6274    0.8157    0.4392    0.5997
4658     NaN    0.8784    1.0000    0.8157    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.8784    0.8784    0.6274    0.7529    0.4392    0.5997
4659     NaN    0.8784    1.0000    1.0000    0.8157    0.7529    0.7529    0.7529    0.6902    0.6902    0.6274    0.6274    0.7529    0.7529    0.4392    0.5997
4660     NaN    0.8784    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8784    0.8157    0.8157    0.7529    0.7529    0.6902    0.4392    0.5997
4661     NaN    0.8157    1.0000    1.0000    0.9412    0.4392    0.4392    0.4392    0.4392    0.4392    0.5019    0.7529    0.6902    0.6902    0.4392    0.5997
4662     NaN    0.8157    1.0000    0.9412    0.9412    0.4392       NaN    0.2510    0.9412    0.9412    0.5019    0.6902    0.6902    0.6274    0.4392    0.5997
4663     NaN    0.8157    1.0000    0.9412    0.8784    0.4392    0.2510    0.5647    0.9412    0.9412    0.5647    0.6274    0.6274    0.6274    0.4392    0.5997
4664     NaN    0.8157    0.9412    0.8784    0.6902    0.2510    0.7529    0.7529    0.8157    0.8157    0.3137    0.6274    0.6274    0.6274    0.4392    0.5997
4665     NaN    0.8275    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.5997
4666     NaN       NaN    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997];
4667 
4668 <span class="comment">% Plotting parameters</span>
4669 idx = idx+1;
4670 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4671     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   255
4672     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4673     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4674     0   255   203    79   213   255   255   255   255   255   254   160   109   247     0   165
4675     0   254    71   224    79   255   255   255   255   255   211   101   165   123     0   165
4676     0   191   123   255   123   203   255   255   255   255   101   224   254    79     0   165
4677     0   101   239   255   224   109   255   255   255   247    79   254   254   123    36   165
4678     0   123   254   255   255    79   247   255   255   165   165   255   255   224     0   165
4679     0   255   255   255   254   160   173   255   255    87   239   255   255   255     0   165
4680     0   255   255   255   255   224   101   255   239    87   255   255   255   255     0   165
4681     0   255   255   255   255   255   101   224   123   191   255   255   255   255     0   165
4682     0   255   255   255   255   254   224    54   101   255   255   255   255   255     0   165
4683     0   255   255   255   255   255   255   247   255   255   255   255   255   255     0   165
4684     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4685     0     0     0     1     0     0     0     0     0     0     0     0     0     0     0   165
4686     255   165   165   165   172   165   165   165   165   165   165   165   165   165   165   165]/255;
4687 
4688 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4689     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
4690     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0     0
4691     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4692     0   255   203    79   213   255   255   255   255   255   254   160   109   247     0   165
4693     0   254    71   224    79   255   255   255   255   255   211   101   165   123     0   165
4694     0   191   123   255   123   203   255   255   255   255   101   224   254    79     0   165
4695     0   101   239   255   224   109   255   255   255   247    79   254   254   123     0   165
4696     0   123   254   255   255    79   247   255   255   165   165   255   255   224     0   165
4697     0   255   255   255   254   160   173   255   255    87   239   255   255   255     0   165
4698     0   255   255   255   255   224   101   255   239    87   255   255   255   255     0   165
4699     0   255   255   255   255   255   101   224   123   191   255   255   255   255     0   165
4700     0   255   255   255   255   254   224    54   101   255   255   255   255   255     0   165
4701     0   255   255   255   255   255   255   247   255   255   255   255   255   255     0   165
4702     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4703     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   165
4704     0   165   165   165   153   165   165   165   165   165   165   165   165   165   165   165]/255;
4705 
4706 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4707     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   255
4708     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4709     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4710     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4711     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4712     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4713     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4714     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4715     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4716     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4717     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4718     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4719     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4720     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4721     0    24    39     0     0     0     0     0     0     0     0     0     0     0     0   145
4722     255   145   145   145   134   145   145   145   145   145   145   145   145   145   145   145]/255;
4723 
4724 <span class="comment">% Processing parameters</span>
4725 idx = idx+1;
4726 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4727     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4728     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4729     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4730     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4731     255     0   255   255   107   255   255   107   255   255   107   255   107   255     0   255
4732     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4733     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4734     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4735     255     0   255   255   107   255   107   255   107   255   255   107   255   255     0   255
4736     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4737     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4738     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4739     255     0   255   107   255   107   255   107   255   255   107   255   107   255     0   255
4740     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4741     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4742     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4743 
4744 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4745     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4746     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4747     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4748     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4749     255     0   255   255    99   255   255    99   255   255    99   255    99   255     0   255
4750     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4751     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4752     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4753     255     0   255   255    99   255    99   255    99   255   255    99   255   255     0   255
4754     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4755     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4756     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4757     255     0   255    99   255    99   255    99   255   255    99   255    99   255     0   255
4758     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4759     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4760     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4761 
4762 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4763     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4764     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4765     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4766     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4767     255     0   255   255    99   255   255    99   255   255    99   255    99   255     0   255
4768     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4769     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4770     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4771     255     0   255   255    99   255    99   255    99   255   255    99   255   255     0   255
4772     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4773     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4774     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4775     255     0   255    99   255    99   255    99   255   255    99   255    99   255     0   255
4776     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4777     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4778     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4779 
4780 <span class="comment">% Export bathymetry dialog</span>
4781 idx = idx+1;
4782 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4783     [226    226    226    226    226    226    226    197    220    226    226    226    226    226    226    226
4784     226    226    226    226    226    227    241    144    158    241    228    228    229    228    229    226
4785     226    243    243    243    237    237    246    164    119    242    232    225    226    218    243    206
4786     179    152    153    166    148    148    177    179    63    185    141    146    154    151    179    189
4787     167    4    134    175    151    164    161    198    122    255    212    233    215    199    140    185
4788     134    50    209    241    255    255    133    118    15    20    28    94    4    0    0    89
4789     136    0    0    0    0    0    0    0    0    0    0    0    0    21    56    140
4790     208    255    226    233    255    242    215    232    251    237    226    233    207    222    156    139
4791     172    159    152    153    166    145    178    147    169    164    161    163    154    153    128    135
4792     160    164    148    139    171    150    165    154    165    185    166    173    190    190    148    162
4793     214    233    211    203    217    212    217    238    202    236    213    222    230    224    184    184
4794     219    206    174    190    219    204    201    218    183    224    219    222    217    202    176    182
4795     210    182    183    214    225    220    203    229    175    217    220    220    222    212    184    185
4796     197    175    207    224    223    220    205    231    170    221    220    220    222    217    191    187
4797     186    193    223    224    220    201    203    228    171    224    218    220    222    215    190    187
4798     189    211    220    216    204    201    214    213    187    213    216    220    220    212    193    189
4799     ]/255;
4800 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4801     [233    233    233    233    233    233    233    204    227    233    233    233    233    233    233    233
4802     233    233    233    233    233    234    247    152    167    247    235    234    235    234    236    233
4803     233    242    242    240    236    237    247    170    131    243    234    231    234    224    245    212
4804     208    193    199    209    196    196    211    197    100    211    194    196    200    199    202    196
4805     205    19    179    199    183    197    182    179    162    255    217    246    234    231    191    199
4806     167    47    229    240    255    252    139    154    87    86    99    139    79    46    23    121
4807     175    30    47    29    28    19    5    41    33    39    54    55    65    83    81    185
4808     236    255    249    253    255    251    240    255    235    255    247    252    233    245    204    190
4809     208    200    195    196    204    192    214    202    144    215    201    201    195    195    177    186
4810     200    201    189    183    206    192    204    210    111    231    209    214    222    223    199    209
4811     245    255    251    247    254    254    252    255    156    255    254    255    255    254    235    232
4812     249    244    227    237    247    244    242    255    132    239    254    250    247    244    228    231
4813     245    231    231    246    253    249    243    255    119    223    255    251    250    245    229    232
4814     239    227    244    251    251    248    244    255    110    217    255    250    251    246    233    233
4815     233    237    250    252    249    242    246    255    115    209    255    250    251    246    232    232
4816     234    245    249    247    242    242    246    231    154    192    246    249    249    245    234    233
4817     ]/255;
4818 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4819     [233    233    233    233    233    233    233    204    227    233    233    233    233    233    233    233
4820     233    233    233    233    233    234    247    152    167    247    235    234    235    234    236    233
4821     233    242    242    240    236    237    247    170    131    243    234    231    234    224    245    212
4822     208    193    199    209    196    196    211    197    100    211    194    196    200    199    202    196
4823     205    19    179    199    183    197    182    179    162    255    217    246    234    231    191    199
4824     167    47    229    240    255    252    139    154    87    86    99    139    79    46    23    121
4825     175    30    47    29    28    19    5    41    33    39    54    55    65    83    81    185
4826     236    255    249    253    255    251    240    255    235    255    247    252    233    245    204    190
4827     208    200    195    196    204    192    214    202    144    215    201    201    195    195    177    186
4828     200    201    189    183    206    192    204    210    111    231    209    214    222    223    199    209
4829     245    255    251    247    254    254    252    255    156    255    254    255    255    254    235    232
4830     249    244    227    237    247    244    242    255    132    239    254    250    247    244    228    231
4831     245    231    231    246    253    249    243    255    119    223    255    251    250    245    229    232
4832     239    227    244    251    251    248    244    255    110    217    255    250    251    246    233    233
4833     233    237    250    252    249    242    246    255    115    209    255    250    251    246    232    232
4834     234    245    249    247    242    242    246    231    154    192    246    249    249    245    234    233
4835     ]/255;
4836 
4837 <span class="comment">% Export Figures Dialog</span>
4838 idx = idx + 1;
4839 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4840     [NaN    NaN    10    23    23    23    23    23    23    23    21    3    NaN    NaN    NaN    NaN
4841     NaN    NaN    67    255    255    255    255    255    255    255    201    141    NaN    NaN    NaN    NaN
4842     NaN    NaN    43    255    241    240    241    246    252    255    186    220    151    NaN    NaN    NaN
4843     NaN    NaN    42    255    238    237    237    236    238    254    210    178    214    38    NaN    NaN
4844     NaN    NaN    43    255    241    241    241    241    240    244    252    255    255    79    NaN    NaN
4845     NaN    NaN    47    255    232    232    225    224    224    223    220    238    255    69    NaN    NaN
4846     NaN    NaN    55    233    114    225    230    223    221    221    215    237    255    67    NaN    NaN
4847     4    NaN    37    181    168    126    193    214    205    200    203    242    255    67    NaN    NaN
4848     41    164    134    153    144    139    131    209    238    223    242    240    255    67    NaN    NaN
4849     41    118    91    91    122    125    120    106    170    241    245    241    255    67    NaN    NaN
4850     41    113    91    89    97    108    99    89    117    205    190    230    255    67    NaN    NaN
4851     41    124    94    88    78    74    81    179    255    252    244    241    255    67    NaN    NaN
4852     13    34    76    187    88    92    222    255    255    250    250    250    255    73    NaN    NaN
4853     NaN    NaN    69    236    121    227    255    243    238    238    238    238    255    82    NaN    NaN
4854     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4855 
4856 
4857 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4858     [NaN    NaN    10    24    24    24    24    24    24    24    22    4    NaN    NaN    NaN    NaN
4859     NaN    NaN    69    255    255    255    255    255    255    255    204    144    NaN    NaN    NaN    NaN
4860     NaN    NaN    45    255    241    240    241    246    252    255    189    222    155    NaN    NaN    NaN
4861     NaN    NaN    43    255    238    237    237    236    238    254    210    179    215    39    NaN    NaN
4862     NaN    NaN    44    255    241    241    241    241    240    244    252    255    255    80    NaN    NaN
4863     NaN    NaN    49    255    231    230    225    224    224    223    220    238    255    70    NaN    NaN
4864     NaN    NaN    56    227    136    214    227    223    221    221    215    237    255    68    NaN    NaN
4865     4    NaN    19    157    243    154    181    210    204    200    203    242    255    67    NaN    NaN
4866     51    255    231    225    219    217    172    197    232    222    242    240    255    67    NaN    NaN
4867     52    227    184    183    195    201    204    172    169    239    245    241    255    67    NaN    NaN
4868     51    218    177    177    180    187    187    177    130    202    190    230    255    67    NaN    NaN
4869     51    237    195    183    172    170    152    175    255    251    244    241    255    67    NaN    NaN
4870     15    38    72    173    183    149    211    255    255    250    250    250    255    73    NaN    NaN
4871     NaN    NaN    65    226    174    214    252    242    238    238    238    238    255    84    NaN    NaN
4872     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4873 
4874 
4875 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4876     [NaN    NaN    9    23    23    23    23    23    23    23    21    3    NaN    NaN    NaN    NaN
4877     NaN    NaN    66    255    255    255    255    255    255    255    196    139    NaN    NaN    NaN    NaN
4878     NaN    NaN    42    255    239    238    238    244    252    255    186    216    148    NaN    NaN    NaN
4879     NaN    NaN    41    255    236    235    235    234    237    251    210    176    212    36    NaN    NaN
4880     NaN    NaN    42    255    239    239    239    239    238    241    252    255    255    78    NaN    NaN
4881     NaN    NaN    46    255    233    232    224    223    223    223    219    235    255    67    NaN    NaN
4882     NaN    NaN    53    240    101    232    230    221    219    218    213    235    255    65    NaN    NaN
4883     5    NaN    60    212    94    107    205    215    203    198    201    240    255    66    NaN    NaN
4884     34    56    40    80    70    62    94    222    241    221    240    238    255    66    NaN    NaN
4885     35    10    2    0    51    55    36    46    176    240    243    239    255    66    NaN    NaN
4886     35    11    9    7    16    34    12    6    110    204    188    228    255    66    NaN    NaN
4887     35    14    0    0    0    0    14    187    255    251    242    239    255    66    NaN    NaN
4888     12    37    84    206    0    41    234    255    255    248    248    248    255    72    NaN    NaN
4889     NaN    NaN    69    249    79    239    255    240    236    236    236    236    255    80    NaN    NaN
4890     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4891 
4892 <span class="comment">% Export Excel File</span>
4893 idx = idx + 1;
4894 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4895     [NaN    NaN    NaN    NaN    NaN    NaN  106  252  255  255  255  255  255  255  255  255
4896    38  136  109  101   96   77   95  134  106   99   93   87   90   66  255  255
4897    52  197  232  217  210  202  191  178  170  164  160  159  155   15  255  255
4898    51  181  255  255  255  255  255  255  255  255  255  255  253    9  255  255
4899    49  174  245  153  156  175  255  255  181  153  149  205  245    0  255  255
4900    47  168  199  122  149  100  155  183   99   99   15  117  245    0  255  241
4901    45  158  255  146  146  141   87   68  120   34   86  255  238    0  252  232
4902    42  144  255  255  158  158  143   74   68  117  255  255  230    0  255  255
4903    40  134  255  255  169   15  150  111   68   81  105  167  236    0  230  217
4904    37  131  255  158   99  106   10  143  117   50   51  165  252    0  255  254
4905    35  122  208    0   22   32    8   17  110   20    0   13  212    0  255  245
4906    33  115  255  255  255  255  255  250  146  113  119  106  217    0  236  217
4907    31  109  255  254  252  251  250  255  255  255  255  255  241    0  255  251
4908    29  116  190  168  164  157  145  133  126  121  117  118  112    0  215  205
4909    20   63   47   38   36   20   38   83   64   51   52   55   64   20  255  241
4910     NaN    NaN    NaN    NaN    NaN    NaN   96  249  252  228  237  251  249  203  241  246]/255;
4911 
4912 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4913     [NaN    NaN    NaN    NaN    NaN    NaN  114  252  255  255  255  255  255  255  255  255
4914    49  180  152  145  140  118  140  173  150  139  132  126  126  106  255  255
4915    67  249  252  242  237  231  221  207  201  196  194  193  193   75  255  255
4916    66  232  255  255  255  255  255  255  255  255  255  255  255   68  255  255
4917    64  226  251  197  191  200  255  255  194  170  168  214  253   61  255  255
4918    62  220  224  183  207  173  189  202  167  175  116  172  253   58  255  246
4919    60  211  255  190  196  203  166  131  187  134  148  255  249   54  254  240
4920    57  199  255  255  198  203  202  158  132  168  255  255  245   47  255  255
4921    54  190  255  255  200  110  199  185  155  147  160  203  251   44  240  230
4922    52  187  255  204  187  194  121  204  189  139   99  179  255   39  255  254
4923    49  180  230   42   49   53   36   64  182   98   65   70  228   36  255  248
4924    47  171  255  255  255  255  255  255  186  115  124  114  235   34  243  229
4925    45  166  255  255  254  254  255  255  255  255  255  255  255   33  255  252
4926    43  176  222  206  204  200  190  180  174  171  169  169  169   32  229  220
4927    30  101   81   74   69   54   72  116   96   84   84   84   94   55  255  245
4928     NaN    NaN    NaN    NaN    NaN    NaN  105  251  253  237  242  252  251  218  246  249]/255;
4929 
4930 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4931     [ NaN    NaN    NaN    NaN    NaN    NaN  125  253  255  255  255  255  255  255  255  255
4932    34  118   92   84   79   56   83  111   88   79   73   69   74   45  255  255
4933    46  180  228  207  203  195  182  169  159  155  149  149  145    0  255  255
4934    45  163  255  255  255  255  255  255  255  255  255  255  254    0  255  255
4935    42  156  248  152  155  176  255  255  181  154  147  206  245    0  255  255
4936    40  150  202  117  136   87  154  181   90   84    8  120  243    0  255  252
4937    38  138  255  145  137  131   81   65  106   27   86  255  238    0  255  250
4938    35  122  255  255  159  152  137   75   62  121  255  255  229    0  255  255
4939    33  113  255  255  171   13  145  111   67   76   84  159  234    0  255  247
4940    30  109  255  160   89   97   10  136  111   36   33  159  251    0  255  255
4941    28   99  211    0   12   23    2   11  101    0    0   13  209    0  255  253
4942    26   92  255  255  255  255  255  250  146  111  117  104  213    0  255  245
4943    23   89  255  255  255  255  255  255  255  255  255  255  241    0  255  254
4944    22   93  180  156  151  141  129  114  105   98   93   93   83    0  255  239
4945    15   43   26   17   15    0   25   63   45   39   38   39   44    9  255  252
4946     NaN    NaN    NaN    NaN    NaN    NaN  117  253  255  249  251  255  254  239  252  254]/255;
4947 
4948 <span class="comment">% Zoom In</span>
4949 idx = idx + 1;
4950 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4951     [NaN,NaN,0.745082780193790,0.603906309605554,0.603906309605554,0.603906309605554,0.603906309605554,0.568627450980392,0.764705882352941,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,0.698023956664378,0.568627450980392,0.780392156862745,0.823514152742809,0.854886701762417,0.925474937056535,0.827450980392157,0.596063172350652,0.749019607843137,NaN,NaN,NaN,NaN,NaN,NaN;0.752925917448692,0.501945525291829,0.737239642938888,0.643121995880064,0.584313725490196,0.690180819409476,0.760769054703594,1,0.894102388036927,0.596063172350652,NaN,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.639215686274510,0.650965133134966,0.600000000000000,0.596063172350652,0.196078431372549,0.596063172350652,0.764705882352941,0.941161211566339,0.721553368429084,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.686274509803922,0.678431372549020,0.682337682154574,0.662745098039216,0.196078431372549,0.650965133134966,0.639215686274510,0.788235294117647,0.811764705882353,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.764705882352941,0.815671015487907,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.682337682154574,0.815671015487907,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.866666666666667,0.952941176470588,0.803921568627451,0.803921568627451,0.196078431372549,0.619592584115358,0.607843137254902,0.737239642938888,0.741176470588235,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.721553368429084,1,1,0.968627450980392,0.196078431372549,0.709803921568628,0.670588235294118,0.807827878233005,0.564690623331045,0.772549019607843,NaN,NaN,NaN,NaN,NaN;NaN,0.592156862745098,0.839200427252613,1,1,0.901945525291829,0.788235294117647,0.792141603723201,0.549004348821241,0.654901960784314,NaN,1,NaN,NaN,NaN,NaN;NaN,NaN,0.639215686274510,0.698023956664378,0.827450980392157,0.784298466468299,0.650965133134966,0.498054474708171,0.623529411764706,0.627435721370260,0.890196078431373,0.937254901960784,0.996063172350652,NaN,NaN,NaN;NaN,NaN,NaN,0.772549019607843,0.698023956664378,0.678431372549020,0.690180819409476,0.784298466468299,0.666651407644770,0.615686274509804,0.745082780193790,1,0.933318074311437,0.996063172350652,NaN,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.517631799801633,0.745082780193790,1,0.929411764705882,1,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.513725490196078,0.741176470588235,1,0.925474937056535,0.749019607843137;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.513725490196078,0.741176470588235,0.988220035095750,0.745082780193790;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.533318074311437,0.549004348821241,0.654901960784314;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.694117647058824,0.635278858625162,NaN;];
4952 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4953     [1,1,0.745082780193790,0.670588235294118,0.670588235294118,0.670588235294118,0.670588235294118,0.576470588235294,0.760769054703594,1,1,1,1,1,1,1;1,0.701960784313725,0.650965133134966,0.917631799801633,0.968627450980392,0.992156862745098,1,0.898039215686275,0.603906309605554,0.741176470588235,1,1,1,1,1,1;0.756862745098039,0.588220035095750,0.929411764705882,0.858823529411765,0.807827878233005,0.854886701762417,0.894102388036927,1,0.976470588235294,0.596063172350652,1,1,1,1,1,1;0.721553368429084,0.823514152742809,0.878416113527123,0.835294117647059,0.831357289997711,0.274509803921569,0.815671015487907,0.894102388036927,1,0.807827878233005,0.670588235294118,1,1,1,1,1;0.670588235294118,0.901945525291829,0.890196078431373,0.890196078431373,0.878416113527123,0.274509803921569,0.854886701762417,0.831357289997711,0.937254901960784,0.933318074311437,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.937254901960784,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.878416113527123,0.937254901960784,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.988220035095750,0.862729839017319,0.862729839017319,0.274509803921569,0.815671015487907,0.803921568627451,0.921568627450980,0.854886701762417,0.670588235294118,1,1,1,1,1;0.721553368429084,0.737239642938888,1,1,0.988220035095750,0.274509803921569,0.898039215686275,0.882352941176471,0.980376897840848,0.627435721370260,0.768612191958496,1,1,1,1,1;1,0.603906309605554,0.847043564507515,1,1,0.984313725490196,0.960784313725490,0.976470588235294,0.662745098039216,0.658808270389868,1,0.615686274509804,1,1,1,1;1,1,0.650965133134966,0.701960784313725,0.854886701762417,0.874509803921569,0.780392156862745,0.564690623331045,0.615686274509804,0.627435721370260,0.733333333333333,0.713710231174182,0.600000000000000,1,1,1;1,1,1,0.772549019607843,0.705867093919280,0.686274509803922,0.694117647058824,0.784298466468299,0.674494544899672,0.572533760585946,0.498054474708171,0.741176470588235,0.709803921568628,0.600000000000000,1,1;1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.509788662546731,0.741176470588235,0.709803921568628,0.600000000000000,1;1,1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.505882352941176,0.741176470588235,0.721553368429084,0.501945525291829;1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.443152513923857,0.505882352941176,0.733333333333333,0.670588235294118;1,1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.454901960784314,0.435309376668956,0.658808270389868;1,1,1,1,1,1,1,1,1,1,1,1,1,0.694117647058824,0.647058823529412,1;];
4954 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4955     [1,1,0.796078431372549,0.854886701762417,0.854886701762417,0.854886701762417,0.854886701762417,0.713710231174182,0.792141603723201,1,1,1,1,1,1,1;1,0.768612191958496,0.827450980392157,0.956847486076143,0.976470588235294,0.992156862745098,1,0.945098039215686,0.803921568627451,0.796078431372549,1,1,1,1,1,1;0.776455329213397,0.749019607843137,0.952941176470588,0.901945525291829,0.882352941176471,0.909788662546731,0.937254901960784,1,0.988220035095750,0.819607843137255,1,1,1,1,1,1;0.858823529411765,0.882352941176471,0.909788662546731,0.882352941176471,0.886259250782025,0.470588235294118,0.882352941176471,0.933318074311437,1,0.921568627450980,0.854886701762417,1,1,1,1,1;0.854886701762417,0.925474937056535,0.909788662546731,0.913725490196078,0.905882352941177,0.470588235294118,0.901945525291829,0.894102388036927,0.960784313725490,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.945098039215686,0.949004348821241,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.921568627450980,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.952941176470588,0.992156862745098,0.917631799801633,0.917631799801633,0.470588235294118,0.945098039215686,0.949004348821241,0.941161211566339,0.937254901960784,0.854886701762417,1,1,1,1,1;0.858823529411765,0.827450980392157,1,1,0.992156862745098,0.470588235294118,0.921568627450980,0.909788662546731,0.980376897840848,0.823514152742809,0.792141603723201,1,1,1,1,1;1,0.717647058823529,0.925474937056535,1,1,0.980376897840848,0.960784313725490,0.976470588235294,0.815671015487907,0.776455329213397,1,0.180392156862745,1,1,1,1;1,1,0.776455329213397,0.870572976272221,0.941161211566339,0.937254901960784,0.866666666666667,0.717647058823529,0.682337682154574,0.607843137254902,0.490211337453269,0.435309376668956,0.203921568627451,1,1,1;1,1,1,0.799984740978103,0.796078431372549,0.792141603723201,0.764705882352941,0.792141603723201,0.780392156862745,0.545098039215686,0.125490196078431,0.325505455100328,0.450995651178759,0.203921568627451,1,1;1,1,1,1,1,1,1,1,1,0.784298466468299,0.384313725490196,0.149019607843137,0.325505455100328,0.458838788433661,0.180392156862745,1;1,1,1,1,1,1,1,1,1,1,0.796078431372549,0.396093690394446,0.149019607843137,0.329411764705882,0.458838788433661,0.254917219806210;1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.407843137254902,0.149019607843137,0.298039215686275,0.580376897840848;1,1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.403936827649348,0.258823529411765,0.674494544899672;1,1,1,1,1,1,1,1,1,1,1,1,1,0.749019607843137,0.654901960784314,1;];
4956 
4957 <span class="comment">% Zoom Out</span>
4958 idx = idx + 1;
4959 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4960     [NaN,NaN,0.745082780193790,0.603906309605554,0.603906309605554,0.603906309605554,0.603906309605554,0.568627450980392,0.764705882352941,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,0.698023956664378,0.568627450980392,0.780392156862745,0.823514152742809,0.854886701762417,0.925474937056535,0.827450980392157,0.596063172350652,0.749019607843137,NaN,NaN,NaN,NaN,NaN,NaN;0.752925917448692,0.501945525291829,0.737239642938888,0.643121995880064,0.584313725490196,0.690180819409476,0.760769054703594,1,0.894102388036927,0.596063172350652,NaN,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.639215686274510,0.650965133134966,0.600000000000000,0.596063172350652,0.643121995880064,0.596063172350652,0.764705882352941,0.941161211566339,0.721553368429084,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.686274509803922,0.678431372549020,0.682337682154574,0.662745098039216,0.650965133134966,0.650965133134966,0.639215686274510,0.788235294117647,0.811764705882353,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.764705882352941,0.815671015487907,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.682337682154574,0.815671015487907,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.866666666666667,0.952941176470588,0.760769054703594,0.760769054703594,0.760769054703594,0.760769054703594,0.760769054703594,0.737239642938888,0.741176470588235,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.721553368429084,1,1,0.968627450980392,0.870572976272221,0.709803921568628,0.670588235294118,0.807827878233005,0.564690623331045,0.772549019607843,NaN,NaN,NaN,NaN,NaN;NaN,0.592156862745098,0.839200427252613,1,1,0.901945525291829,0.788235294117647,0.792141603723201,0.549004348821241,0.654901960784314,NaN,NaN,NaN,NaN,NaN,NaN;NaN,NaN,0.639215686274510,0.698023956664378,0.827450980392157,0.784298466468299,0.650965133134966,0.498054474708171,0.623529411764706,0.627435721370260,0.890196078431373,0.937254901960784,0.996063172350652,NaN,NaN,NaN;NaN,NaN,NaN,0.772549019607843,0.698023956664378,0.678431372549020,0.690180819409476,0.784298466468299,NaN,0.615686274509804,0.745082780193790,1,0.933318074311437,0.996063172350652,NaN,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.517631799801633,0.745082780193790,1,0.929411764705882,1,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.513725490196078,0.741176470588235,1,0.925474937056535,0.749019607843137;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.513725490196078,0.741176470588235,0.988220035095750,0.745082780193790;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.533318074311437,0.549004348821241,0.654901960784314;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.694117647058824,0.635278858625162,NaN;];
4961 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4962     [1,1,0.745082780193790,0.670588235294118,0.670588235294118,0.670588235294118,0.670588235294118,0.576470588235294,0.760769054703594,1,1,1,1,1,1,1;1,0.701960784313725,0.650965133134966,0.917631799801633,0.968627450980392,0.992156862745098,1,0.898039215686275,0.603906309605554,0.741176470588235,1,1,1,1,1,1;0.756862745098039,0.588220035095750,0.929411764705882,0.858823529411765,0.807827878233005,0.854886701762417,0.894102388036927,1,0.976470588235294,0.596063172350652,1,1,1,1,1,1;0.721553368429084,0.823514152742809,0.878416113527123,0.835294117647059,0.831357289997711,0.843137254901961,0.815671015487907,0.894102388036927,1,0.807827878233005,0.670588235294118,1,1,1,1,1;0.670588235294118,0.901945525291829,0.890196078431373,0.890196078431373,0.878416113527123,0.870572976272221,0.854886701762417,0.831357289997711,0.937254901960784,0.933318074311437,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.937254901960784,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.878416113527123,0.937254901960784,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.988220035095750,0.819607843137255,0.819607843137255,0.819607843137255,0.819607843137255,0.819607843137255,0.921568627450980,0.854886701762417,0.670588235294118,1,1,1,1,1;0.721553368429084,0.737239642938888,1,1,0.988220035095750,0.952941176470588,0.898039215686275,0.882352941176471,0.980376897840848,0.627435721370260,0.768612191958496,1,1,1,1,1;1,0.603906309605554,0.847043564507515,1,1,0.984313725490196,0.960784313725490,0.976470588235294,0.662745098039216,0.658808270389868,1,1,1,1,1,1;1,1,0.650965133134966,0.701960784313725,0.854886701762417,0.874509803921569,0.780392156862745,0.564690623331045,0.615686274509804,0.627435721370260,0.733333333333333,0.713710231174182,0.600000000000000,1,1,1;1,1,1,0.772549019607843,0.705867093919280,0.686274509803922,0.694117647058824,0.784298466468299,1,0.572533760585946,0.498054474708171,0.741176470588235,0.709803921568628,0.600000000000000,1,1;1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.509788662546731,0.741176470588235,0.709803921568628,0.600000000000000,1;1,1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.505882352941176,0.741176470588235,0.721553368429084,0.501945525291829;1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.443152513923857,0.505882352941176,0.733333333333333,0.670588235294118;1,1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.454901960784314,0.435309376668956,0.658808270389868;1,1,1,1,1,1,1,1,1,1,1,1,1,0.694117647058824,0.647058823529412,1;];
4963 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4964     [1,1,0.796078431372549,0.854886701762417,0.854886701762417,0.854886701762417,0.854886701762417,0.713710231174182,0.792141603723201,1,1,1,1,1,1,1;1,0.768612191958496,0.827450980392157,0.956847486076143,0.976470588235294,0.992156862745098,1,0.945098039215686,0.803921568627451,0.796078431372549,1,1,1,1,1,1;0.776455329213397,0.749019607843137,0.952941176470588,0.901945525291829,0.882352941176471,0.909788662546731,0.937254901960784,1,0.988220035095750,0.819607843137255,1,1,1,1,1,1;0.858823529411765,0.882352941176471,0.909788662546731,0.882352941176471,0.886259250782025,0.894102388036927,0.882352941176471,0.933318074311437,1,0.921568627450980,0.854886701762417,1,1,1,1,1;0.854886701762417,0.925474937056535,0.909788662546731,0.913725490196078,0.905882352941177,0.901945525291829,0.901945525291829,0.894102388036927,0.960784313725490,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.945098039215686,0.949004348821241,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.921568627450980,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.952941176470588,0.992156862745098,0.890196078431373,0.890196078431373,0.890196078431373,0.890196078431373,0.890196078431373,0.941161211566339,0.937254901960784,0.854886701762417,1,1,1,1,1;0.858823529411765,0.827450980392157,1,1,0.992156862745098,0.964690623331045,0.921568627450980,0.909788662546731,0.980376897840848,0.823514152742809,0.792141603723201,1,1,1,1,1;1,0.717647058823529,0.925474937056535,1,1,0.980376897840848,0.960784313725490,0.976470588235294,0.815671015487907,0.776455329213397,1,1,1,1,1,1;1,1,0.776455329213397,0.870572976272221,0.941161211566339,0.937254901960784,0.866666666666667,0.717647058823529,0.682337682154574,0.607843137254902,0.490211337453269,0.435309376668956,0.203921568627451,1,1,1;1,1,1,0.799984740978103,0.796078431372549,0.792141603723201,0.764705882352941,0.792141603723201,1,0.545098039215686,0.125490196078431,0.325505455100328,0.450995651178759,0.203921568627451,1,1;1,1,1,1,1,1,1,1,1,0.784298466468299,0.384313725490196,0.149019607843137,0.325505455100328,0.458838788433661,0.180392156862745,1;1,1,1,1,1,1,1,1,1,1,0.796078431372549,0.396093690394446,0.149019607843137,0.329411764705882,0.458838788433661,0.254917219806210;1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.407843137254902,0.149019607843137,0.298039215686275,0.580376897840848;1,1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.403936827649348,0.258823529411765,0.674494544899672;1,1,1,1,1,1,1,1,1,1,1,1,1,0.749019607843137,0.654901960784314,1;];
4965 
4966 <span class="comment">% Pan</span>
4967 idx = idx + 1;
4968 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4969     [NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.290196078431373,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,NaN,NaN,0.290196078431373,0.290196078431373,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,0.290196078431373,NaN,NaN,NaN,NaN;NaN,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,NaN,NaN,NaN;NaN,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,NaN,0.290196078431373,NaN;NaN,NaN,NaN,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,0.290196078431373;NaN,NaN,NaN,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373;NaN,0.290196078431373,0.290196078431373,0.290196078431373,0.290196078431373,1,1,1,1,1,1,1,0.290196078431373,1,0.991546501869230,0.290196078431373;0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,1,1,1,1,1,0.996032654306859,0.986602578774701,0.975188830395972,0.290196078431373;0.290196078431373,1,1,1,0.290196078431373,1,1,1,1,1,1,0.991546501869230,0.981109330891890,0.968841077286946,0.290196078431373,NaN;NaN,0.290196078431373,1,1,1,1,1,1,1,0.996032654306859,0.986602578774701,0.975188830395972,0.962127107652400,0.947631036850538,0.290196078431373,NaN;NaN,NaN,0.290196078431373,1,1,1,1,1,0.991546501869230,0.981109330891890,0.968871595330739,0.955046921492332,0.939909971770810,0.923643854428931,0.290196078431373,NaN;NaN,NaN,0.290196078431373,1,1,1,0.996063172350652,0.986572060730907,0.975188830395972,0.962127107652400,0.947631036850538,0.931914244296941,0.915190356298161,0.290196078431373,NaN,NaN;NaN,NaN,NaN,0.290196078431373,1,0.991546501869230,0.981109330891890,0.968841077286946,0.955016403448539,0.939909971770810,0.923643854428931,0.906553749904631,0.888761730373083,0.290196078431373,NaN,NaN;NaN,NaN,NaN,NaN,0.290196078431373,0.975188830395972,0.962127107652400,0.947631036850538,0.931914244296941,0.915220874341955,0.897734035248341,0.879728389410239,0.290196078431373,NaN,NaN,NaN;NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.939909971770810,0.923643854428931,0.906553749904631,0.888761730373083,0.870634012359808,0.852231631952392,0.290196078431373,NaN,NaN,NaN;NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.915190356298161,0.897734035248341,0.879758907454032,0.861478599221790,0.843076218814374,0.824887464713512,0.290196078431373,NaN,NaN,NaN;];
4970 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4971     [0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894071869993134,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894071869993134,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.882536049439231,0.407843137254902;0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860105287251087,0.407843137254902;0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.882566567483024,0.868223086900130,0.851468680857557,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860105287251087,0.842221713588159,0.822354467078660,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.882566567483024,0.868223086900130,0.851468680857557,0.832516975661860,0.811795223926146,0.789547570000763,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860135805294881,0.842221713588159,0.822354467078660,0.800839246204318,0.777950713359274,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.882536049439231,0.868223086900130,0.851438162813764,0.832516975661860,0.811764705882353,0.789547570000763,0.766079194323644,0.741756313420310,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.860135805294881,0.842252231631952,0.822384985122454,0.800808728160525,0.777920195315480,0.754024567025254,0.729396505683986,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.811764705882353,0.789547570000763,0.766079194323644,0.741786831464103,0.716914625772488,0.691676203555352,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.777920195315480,0.754024567025254,0.729396505683986,0.704371709773404,0.679133287556268,0.654261081864653,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;];
4972 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4973     [0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799954222934310,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799954222934310,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799954222934310,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.785091935606928,0.709803921568628;0.709803921568628,0.799954222934310,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776272220950637,0.756130312046998,0.709803921568628;0.709803921568628,0.799984740978103,0.799954222934310,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.785091935606928,0.766628519111925,0.744960708018616,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799954222934310,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776272220950637,0.756160830090791,0.733089188982986,0.707423514152743,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.785091935606928,0.766598001068132,0.744960708018616,0.720546272983902,0.693781948577096,0.665094987411307,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776241702906844,0.756160830090791,0.733089188982986,0.707423514152743,0.679682612344549,0.650141145952545,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.785061417563134,0.766598001068132,0.744960708018616,0.720546272983902,0.693812466620890,0.665094987411307,0.634882124055848,0.603479056992447,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.756160830090791,0.733089188982986,0.707423514152743,0.679652094300755,0.650141145952545,0.619287403677424,0.587518120088502,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.693781948577096,0.665094987411307,0.634882124055848,0.603509575036240,0.571404592965591,0.538872358281834,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.650141145952545,0.619256885633631,0.587518120088502,0.555230029755093,0.522697795071336,0.490638590066377,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;];
4974 <span class="comment">% [EOF] getIcons</span>
4975 
4976 <a name="_sub108" href="#_subfunctions" class="code">function guiparams = createGUIparams</a>
4977 <span class="comment">% Creates the guiparams structure with specified defaults.</span>
4978 
4979 <span class="comment">% Check for any stored prefs</span>
4980 <span class="comment">% --------------------------</span>
4981 <span class="comment">% Currently, units and the graphics renderer are stored as persistent prefs</span>
4982 guiprefs = getpref(<span class="string">'VMT'</span>);
4983 
4984 <span class="comment">% Organized by GUI panels</span>
4985 <span class="comment">%%%%%%%%%%%%%%%%%%%</span>
4986 <span class="comment">% SHIPTRACKS PLOT %</span>
4987 <span class="comment">%%%%%%%%%%%%%%%%%%%</span>
4988 guiparams.horizontal_grid_node_spacing       = 1.0;
4989 guiparams.vertical_grid_node_spacing         = 0.4;
4990 
4991 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
4992 <span class="comment">% CROSS SECTION PLOT %</span>
4993 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
4994 guiparams.contours                           = <span class="string">''</span>; <span class="comment">% Set below</span>
4995 guiparams.contour                            = <span class="string">''</span>; <span class="comment">% Set below</span>
4996 guiparams.idx_contour                        = 1;
4997 guiparams.vertical_exaggeration              = 10;
4998 guiparams.vector_scale_cross_section         = 0.2;
4999 guiparams.horizontal_vector_spacing          = 1;
5000 guiparams.vertical_vector_spacing            = 1;
5001 guiparams.horizontal_smoothing_window        = 1;
5002 guiparams.vertical_smoothing_window          = 1;
5003 guiparams.plot_secondary_flow_vectors        = true;
5004 guiparams.secondary_flows                    = <span class="string">''</span>; <span class="comment">% Set below</span>
5005 guiparams.secondary_flow_vector_variable     = <span class="string">''</span>; <span class="comment">% Set below</span>
5006 guiparams.idx_secondary_flow_vector_variable = 1;
5007 guiparams.include_vertical_velocity          = true;
5008 
5009 <span class="comment">%%%%%%%%%%%%%%%%%%</span>
5010 <span class="comment">% PLAN VIEW PLOT %</span>
5011 <span class="comment">%%%%%%%%%%%%%%%%%%</span>
5012 guiparams.depth_range_min                    = 0;
5013 guiparams.depth_range_max                    = inf;
5014 guiparams.vector_scale_plan_view             = 1;
5015 guiparams.vector_spacing_plan_view           = 1;
5016 guiparams.smoothing_window_size              = 1;
5017 guiparams.display_shoreline                  = false;
5018 guiparams.add_background                     = false;
5019 
5020 <span class="comment">%%%%%%%%%%%%%%%</span>
5021 <span class="comment">% DATA EXPORT %</span>
5022 <span class="comment">%%%%%%%%%%%%%%%</span>
5023 guiparams.beam_angle                         = 20.0;
5024 guiparams.magnetic_variation                 = 0.0;
5025 guiparams.wse                                = 0.0;
5026 guiparams.output_auxiliary_data              = false;
5027 
5028 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
5029 <span class="comment">% Contour variables %</span>
5030 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
5031 idx = 1;
5032 guiparams.contours(idx).string   = <span class="string">'Streamwise Velocity (u)'</span>;
5033 guiparams.contours(idx).variable = <span class="string">'streamwise'</span>;
5034 idx = idx + 1;
5035 guiparams.contours(idx).string   = <span class="string">'Transverse Velocity (v)'</span>;
5036 guiparams.contours(idx).variable = <span class="string">'transverse'</span>;
5037 idx = idx + 1;
5038 guiparams.contours(idx).string   = <span class="string">'Vertical Velocity (w)'</span>;
5039 guiparams.contours(idx).variable = <span class="string">'vertical'</span>;
5040 idx = idx + 1;
5041 guiparams.contours(idx).string   = <span class="string">'Velocity Magnitude'</span>;
5042 guiparams.contours(idx).variable = <span class="string">'mag'</span>;
5043 idx = idx + 1;
5044 guiparams.contours(idx).string   = <span class="string">'East Velocity (E)'</span>;
5045 guiparams.contours(idx).variable = <span class="string">'east'</span>;
5046 idx = idx + 1;
5047 guiparams.contours(idx).string   = <span class="string">'North Velocity (N)'</span>;
5048 guiparams.contours(idx).variable = <span class="string">'north'</span>;
5049 idx = idx + 1;
5050 guiparams.contours(idx).string   = <span class="string">'Error Velocity'</span>;
5051 guiparams.contours(idx).variable = <span class="string">'error'</span>;
5052 idx = idx + 1;
5053 guiparams.contours(idx).string   = <span class="string">'Primary Velocity (zsd)'</span>;
5054 guiparams.contours(idx).variable = <span class="string">'primary_zsd'</span>;
5055 idx = idx + 1;
5056 guiparams.contours(idx).string   = <span class="string">'Secondary Velocity (zsd)'</span>;
5057 guiparams.contours(idx).variable = <span class="string">'secondary_zsd'</span>;
5058 idx = idx + 1;
5059 guiparams.contours(idx).string   = <span class="string">'Primary Velocity (Roz)'</span>;
5060 guiparams.contours(idx).variable = <span class="string">'primary_roz'</span>;
5061 idx = idx + 1;
5062 guiparams.contours(idx).string   = <span class="string">'Secondary Velocity (Roz)'</span>;
5063 guiparams.contours(idx).variable = <span class="string">'secondary_roz'</span>;
5064 idx = idx + 1;
5065 guiparams.contours(idx).string   = <span class="string">'Prim. Vel. (Roz, Downstream Comp.)'</span>;
5066 guiparams.contours(idx).variable = <span class="string">'primary_roz_x'</span>;
5067 idx = idx + 1;
5068 guiparams.contours(idx).string   = <span class="string">'Prim. Vel. (Roz, Cross-Stream Comp.)'</span>;
5069 guiparams.contours(idx).variable = <span class="string">'primary_roz_y'</span>;
5070 idx = idx + 1;
5071 guiparams.contours(idx).string   = <span class="string">'Sec. Vel. (Roz, Downstream Comp.)'</span>;
5072 guiparams.contours(idx).variable = <span class="string">'secondary_roz_x'</span>;
5073 idx = idx + 1;
5074 guiparams.contours(idx).string   = <span class="string">'Sec. Vel. (Roz, Cross-Stream Comp.)'</span>;
5075 guiparams.contours(idx).variable = <span class="string">'secondary_roz_y'</span>;
5076 idx = idx + 1;
5077 guiparams.contours(idx).string   = <span class="string">'Backscatter'</span>;
5078 guiparams.contours(idx).variable = <span class="string">'backscatter'</span>;
5079 idx = idx + 1;
5080 guiparams.contours(idx).string   = <span class="string">'Flow Direction (deg.)'</span>;
5081 guiparams.contours(idx).variable = <span class="string">'flowangle'</span>;
5082 
5083 guiparams.contour = guiparams.contours(guiparams.idx_contour).variable;
5084 
5085 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5086 <span class="comment">% Secondary Flow Vector Variables %</span>
5087 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5088 idx = 1;
5089 guiparams.secondary_flows(idx).string   = <span class="string">'Transverse'</span>;
5090 guiparams.secondary_flows(idx).variable = <span class="string">'transverse'</span>;
5091 idx = idx + 1;
5092 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (zsd)'</span>;
5093 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_zsd'</span>;
5094 idx = idx + 1;
5095 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (Roz)'</span>;
5096 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_roz'</span>;
5097 idx = idx + 1;
5098 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (Roz, Cross-Stream Comp)'</span>;
5099 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_roz_y'</span>;
5100 idx = idx + 1;
5101 guiparams.secondary_flows(idx).string   = <span class="string">'Primary (Roz, Cross-Stream Comp)'</span>;
5102 guiparams.secondary_flows(idx).variable  = <span class="string">'primary_roz_y'</span>;
5103 
5104 guiparams.secondary_flow_vector_variable = <span class="keyword">...</span>
5105     guiparams.secondary_flows(guiparams.idx_secondary_flow_vector_variable).variable;
5106 
5107 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5108 <span class="comment">% INTERNAL SETTINGS &amp; DEFAULTS %</span>
5109 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5110 <span class="comment">% Menu bar options</span>
5111 guiparams.presentation                       = true;
5112 guiparams.print                              = false;
5113 guiparams.set_cross_section_endpoints        = false;
5114 guiparams.unit_discharge_correction          = false;
5115 
5116 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'units'</span>)
5117     <span class="keyword">switch</span> guiprefs.units
5118         <span class="keyword">case</span> <span class="string">'metric'</span>
5119             guiparams.english_units          = false;
5120         <span class="keyword">case</span> <span class="string">'english'</span>
5121             guiparams.english_units          = true;
5122     <span class="keyword">end</span>
5123 <span class="keyword">else</span>
5124     guiparams.english_units                  = false;
5125 <span class="keyword">end</span>
5126 guiparams.vertical_offset                    = 0;
5127 
5128 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>)
5129     guiparams.renderer                       = guiprefs.renderer;
5130 <span class="keyword">else</span>
5131     guiparams.renderer                       = <span class="string">'OpenGL'</span>;
5132 <span class="keyword">end</span>
5133 <span class="comment">% guiparams.plot_ship_tracks                   = false;</span>
5134 <span class="comment">% guiparams.plot_planview                      = false;</span>
5135 <span class="comment">% guiparams.plot_cross_section                 = false;</span>
5136 
5137 <span class="comment">% File location defaults</span>
5138 guiparams.ascii_path                        = pwd;
5139 guiparams.ascii_file                        = <span class="string">''</span>;
5140 guiparams.mat_path                          = pwd;
5141 guiparams.mat_file                          = <span class="string">''</span>;
5142 guiparams.tecplot_path                      = pwd;
5143 guiparams.tecplot_file                      = <span class="string">''</span>;
5144 guiparams.kmz_path                          = pwd;
5145 guiparams.kmz_file                          = <span class="string">''</span>;
5146 guiparams.multibeambathymetry_path          = pwd;
5147 guiparams.multibeambathymetry_file          = <span class="string">''</span>;
5148 guiparams.log_path                          = pwd;
5149 guiparams.log_file                          = <span class="string">''</span>;
5150 <span class="comment">% Avoids problems of not finding the MCR root when running as a standalone</span>
5151 <span class="comment">% application</span>
5152 <span class="keyword">if</span> isdeployed 
5153     guiparams.has_mapping_toolbox           = true;
5154 <span class="keyword">else</span>
5155     guiparams.has_mapping_toolbox               = <span class="keyword">...</span>
5156         ~isempty(dir(fullfile(matlabroot,<span class="string">'toolbox'</span>,<span class="string">'map'</span>)));
5157 <span class="keyword">end</span>
5158 
5159 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5160 <span class="comment">% IN MEMORY DATA STORAGE %</span>
5161 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5162 guiparams.z                      = [];
5163 guiparams.A                      = [];
5164 guiparams.V                      = [];
5165 guiparams.Map                    = [];
5166 guiparams.savefile               = [];
5167 guiparams.iric_anv_planview_data = [];
5168 <span class="comment">% guiparams.zmin = []; % Don't need to store these?</span>
5169 <span class="comment">% guiparams.zmax = [];</span>
5170 <span class="comment">% guiprefs = getappdata(handles.figure1,'guiprefs');</span>
5171 guiparams.data_folder = <span class="string">''</span>;
5172 guiparams.data_files  = {<span class="string">''</span>};
5173 guiparams.gui_state   = <span class="string">'init'</span>;
5174 
5175 <span class="comment">% [EOF] createGUIparams</span>
5176 
5177 <a name="_sub109" href="#_subfunctions" class="code">function ShiptracksZoom_Callback(obj,evd,handles)</a>
5178 ticks_format(<span class="string">'%6.0f'</span>,<span class="string">'%8.0f'</span>); <span class="comment">%formats the ticks for UTM (when zooming)</span>
5179 
5180 <a name="_sub110" href="#_subfunctions" class="code">function ShiptracksPan_Callback(obj,evd,handles)</a>
5181 ticks_format(<span class="string">'%6.0f'</span>,<span class="string">'%8.0f'</span>); <span class="comment">%formats the ticks for UTM (when panning)</span>
5182 
5183 <span class="comment">% [EOF] VMT</span>
5184 
5185 
5186 
5187 
5188 
5189 <span class="comment">% --- Hidden keyboard commands</span>
5190 <a name="_sub111" href="#_subfunctions" class="code">function figure1_WindowKeyPressFcn(hObject, eventdata, handles)</a>
5191 <span class="comment">% Used to pass specific hidden keyboard commands to VMT. Currently, the</span>
5192 <span class="comment">% only use for this function is to open Beta support for SonTek M9 data.</span>
5193 <span class="comment">%</span>
5194 <span class="comment">% hObject    handle to figure1 (see GCBO)</span>
5195 <span class="comment">% eventdata  structure with the following fields (see FIGURE)</span>
5196 <span class="comment">%    Key: name of the key that was pressed, in lower case</span>
5197 <span class="comment">%    Character: character interpretation of the key(s) that was pressed</span>
5198 <span class="comment">%    Modifier: name(s) of the modifier key(s) (i.e., control, shift) pressed</span>
5199 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
5200 
5201 in1 = eventdata.Modifier; 
5202 in2 = eventdata.Key;
5203 
5204 <span class="keyword">if</span> ~isempty(in1) <span class="comment">% User pressed at least one modifier key</span>
5205     input = [in1{:} in2];
5206 <span class="keyword">else</span>
5207     input = in2;
5208 <span class="keyword">end</span>
5209 
5210 <span class="keyword">switch</span> input
5211     <span class="comment">% Hidden SonTek M9 support</span>
5212     <span class="keyword">case</span> <span class="string">'shiftcontrols'</span>
5213         msgtxt = {<span class="keyword">...</span>
5214             <span class="string">'VMT offers limited support for SonTek M9/S5 data.'</span>;<span class="keyword">...</span>
5215             <span class="string">'SonTek RiverSurveyorLive required data format:'</span>;<span class="keyword">...</span>
5216             <span class="string">'      -ENU coordinates'</span>;<span class="keyword">...</span>
5217             <span class="string">'      -Desired GPS reference (BT/GGA/VTG)'</span>
5218             <span class="string">''</span>;<span class="keyword">...</span>
5219             <span class="string">'Abosolutely NO GUARANTEE is made or implied that this'</span>;<span class="keyword">...</span>
5220             <span class="string">'functionality will work for all cases. Results are'</span>;<span class="keyword">...</span>
5221             <span class="string">'PROVISIONAL at best.'</span>};
5222         msgbox(msgtxt, <span class="string">'Hidden Functionality: Process SonTek M9'</span>, <span class="string">'warn'</span>,<span class="string">'replace'</span>)
5223         
5224         <span class="comment">% Get the Application data:</span>
5225         <span class="comment">% -------------------------</span>
5226         guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
5227         guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
5228         
5229         <span class="comment">% Ask the user to select files:</span>
5230         <span class="comment">% -----------------------------</span>
5231         <span class="comment">% current_file = fullfile(guiparams.data_folder,guiparams.data_files{1});</span>
5232         <span class="comment">% current_file = fullfile(guiprefs.mat_path,guiprefs.mat_file);</span>
5233         <span class="keyword">if</span> iscell(guiprefs.mat_file)
5234             uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file{1});
5235         <span class="keyword">else</span>
5236             uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file);
5237         <span class="keyword">end</span>
5238         [filename,pathname] = <span class="keyword">...</span>
5239             uigetfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-files (*.mat)'</span>}, <span class="keyword">...</span>
5240             <span class="string">'Select SonTek RiverSurveyor Live v3.60 MAT File'</span>, <span class="keyword">...</span>
5241             uifile, <span class="string">'MultiSelect'</span>,<span class="string">'on'</span>);
5242         
5243         <span class="keyword">if</span> ischar(pathname) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
5244             guiparams.data_folder = pathname;
5245             <span class="keyword">if</span> ischar(filename)
5246                 filename = {filename};
5247             <span class="keyword">end</span>
5248             guiparams.data_files = filename;
5249             guiparams.mat_file = <span class="string">''</span>;
5250             
5251             setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
5252             
5253             
5254             
5255             <span class="comment">% Update the preferences:</span>
5256             <span class="comment">% -----------------------</span>
5257             guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
5258             guiprefs.ascii_path = pathname;
5259             guiprefs.ascii_file = filename;
5260             setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
5261             <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'ascii'</span>)
5262             
5263             <span class="comment">% Push messages to Log Window:</span>
5264             <span class="comment">% ----------------------------</span>
5265             log_text = {<span class="keyword">...</span>
5266                 <span class="string">''</span>;<span class="keyword">...</span>
5267                 [<span class="string">'%--- '</span> datestr(now) <span class="string">' ---%'</span>];<span class="keyword">...</span>
5268                 <span class="string">'Current Project Directory:'</span>;<span class="keyword">...</span>
5269                 guiparams.data_folder;
5270                 <span class="string">'Loading the following files into memory:'</span>;<span class="keyword">...</span>
5271                 char(filename)};
5272             statusLogging(handles.LogWindow, log_text)
5273             
5274             <span class="comment">% Read the file(s)</span>
5275             <span class="comment">% ----------------</span>
5276             <span class="comment">%A = parseSonTekVMT(fullfile(pathname,filename));</span>
5277             
5278             [~,~,savefile,A,z] = <span class="keyword">...</span>
5279                 <a href="VMT_ReadFiles_SonTek.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles_SonTek(zPathName,zFileName)">VMT_ReadFiles_SonTek</a>(guiparams.data_folder,guiparams.data_files);
5280             guiparams.savefile = savefile;
5281             guiparams.A        = A;
5282             guiparams.z        = z;
5283             setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
5284             
5285             
5286             <span class="comment">% Update the GUI:</span>
5287             <span class="comment">% ---------------</span>
5288             <a href="#_sub95" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
5289         <span class="keyword">end</span>  
5290     <span class="keyword">case</span> <span class="string">'shiftcontroll'</span> <span class="comment">% Call SontekMAT2KML</span>
5291         SontekMAT2KML;
5292     <span class="keyword">case</span> <span class="string">'f1'</span> <span class="comment">% Call the VMT UsersGuide</span>
5293         <a href="#_sub46" class="code" title="subfunction menuUsersGuide_Callback(hObject, eventdata, handles)">menuUsersGuide_Callback</a>(hObject, eventdata, handles)
5294         
5295     <span class="keyword">case</span> <span class="string">'controlalte'</span>
5296         VMT_BuildCustomFlatFile;
5297     <span class="keyword">otherwise</span>
5298         <span class="comment">%disp(input)</span>
5299 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Thu 21-Aug-2014 10:40:31 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>