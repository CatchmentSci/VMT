<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of VMT</title>
  <meta name="keywords" content="VMT">
  <meta name="description" content="--- THE VELOCITY MAPPING TOOLBOX ---">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- menu.html VMT -->
<h1>VMT
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>--- THE VELOCITY MAPPING TOOLBOX ---</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function varargout = VMT(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> --- THE VELOCITY MAPPING TOOLBOX ---
 
 VMT is a Matlab-based software for processing and visualizing ADCP data
 collected along transects in rivers or other bodies of water. VMT allows
 rapid processing, visualization, and analysis of a range of ADCP datasets
 and includes utilities to export ADCP data to files compatible with
 ArcGIS, Tecplot, and Google Earth. The software can be used to explore
 patterns of three-dimensional fluid motion through several methods for
 calculation of secondary flows (e.g. Rhoads and Kenworthy, 1998; Lane et
 al., 2000). The software also includes capabilities for analyzing the
 acoustic backscatter and bathymetric data from the ADCP. A user-friendly
 graphical user interface (GUI) enhances program functionality and
 provides ready access to two- and three- dimensional plotting functions,
 allowing rapid display and interrogation of velocity, backscatter, and
 bathymetry data.
 
 CITATION: 
 Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L., Rhoads, B.
 L., Oberg, K. A., Best, J. L., Mueller, D. S., Johnson, K. K. and Riley,
 J. D. (2013), Velocity Mapping Toolbox (VMT): a processing and
 visualization suite for moving-vessel ADCP measurements. Earth Surf.
 Process. Landforms. doi: 10.1002/esp.3367

__________________________________________________________________________
 P.R. Jackson, U.S. Geological Survey, Illinois Water Science Center
 (pjackson@usgs.gov)

 Code contributed by D. Parsons, D. Mueller, J. Czuba, and F. Engel.
__________________________________________________________________________</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="VMT_BuildTecplotFile.html" class="code" title="function VMT_BuildTecplotFile(V,savefile)">VMT_BuildTecplotFile</a>	Takes the processed data structure and writes a TecPlot ASCII data file.</li><li><a href="VMT_BuildTecplotFile_XSBathy.html" class="code" title="function VMT_BuildTecplot_XSBathy(V,savefile)">VMT_BuildTecplotFile_XSBathy</a>	Takes the processed data structure and writes a TecPlot ASCII data file</li><li><a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>	Computes the layer averaged mean of y over the depth range.</li><li><a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wsedata,saveaux)">VMT_MBBathy</a>	Computes the multibeam bathymetry from the four beams of the ADCP</li><li><a href="VMT_MeanXS2GE_3D.html" class="code" title="function VMT_MeanXS2GE_3D(A,V,pathstr,filestr,vscale,voffset)">VMT_MeanXS2GE_3D</a>	Outputs the mean cross section (3-D) from VMT to Google Earth (saved as a</li><li><a href="VMT_OverlayDOQQ.html" class="code" title="function [guiprefs,log_text] = VMT_OverlayDOQQ(guiprefs,varargin)">VMT_OverlayDOQQ</a>	Prompts the user for a geotiff DOQQ (USGS) and overlays the aerial image</li><li><a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>	This function plots a plan view of the measurement region with a vector</li><li><a href="VMT_PlotShiptracks.html" class="code" title="function hf = VMT_PlotShiptracks(A,V,z,setends,hf)">VMT_PlotShiptracks</a>	Plots the shiptracks, and interpolated grid in the VMT GUI axes. Also</li><li><a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>	Plots a shoreline map given the shoreline data structure 'Map' (see</li><li><a href="VMT_PlotXSCont.html" class="code" title="function [z,A,V,zmin,zmax,log_text,fig_contour_handle] = VMT_PlotXSCont(z,A,V,var,exag,plot_english)">VMT_PlotXSCont</a>	Plots contours for the variable 'var' within the mean cross section given</li><li><a href="VMT_PlotXSContQuiver.html" class="code" title="function [z,A,V,log_text] = VMT_PlotXSContQuiver(z,A,V,var,sf,exag,qspchorz,qspcvert,secvecvar,vvelcomp,plot_english,varargin)">VMT_PlotXSContQuiver</a>	This function plots the the contour plot (mean XS) for the variable 'var'</li><li><a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>	This function is a driver to preprocess the transects data.  Several</li><li><a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>	Driver program to process multiple transects at a single cross-section</li><li><a href="VMT_ReadFiles.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles(zPathName,zFileName)">VMT_ReadFiles</a>	Read in multiple ASCII output files from WinRiver or WinRiverII.</li><li><a href="VMT_ReadFiles_SonTek.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles_SonTek(zPathName,zFileName)">VMT_ReadFiles_SonTek</a>	Read in multiple MAT output files from SonTek RSL v1.5-3.60.</li><li><a href="VMT_SaveFigs.html" class="code" title="function VMT_SaveFigs(pathname,to_export,figure_style)">VMT_SaveFigs</a>	Saves the figures (specified by fignums) from VMT as .PNG or EPS files</li><li><a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>	This routine smooths all processed variables in V struct. By default is</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="#_sub1" class="code">function VMT_OpeningFcn(hObject, eventdata, handles, varargin)</a></li><li><a href="#_sub2" class="code">function varargout = VMT_OutputFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub3" class="code">function figure1_ResizeFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub4" class="code">function figure1_CloseRequestFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub5" class="code">function menuFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub6" class="code">function menuOpen_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub7" class="code">function menuOpenASCII_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub8" class="code">function menuOpenMAT_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub9" class="code">function menuSave_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub10" class="code">function menuSaveMAT_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub11" class="code">function menuSaveTecplot_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub12" class="code">function menuSaveKMZFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub13" class="code">function menuExport_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub14" class="code">function menuFigureExportsettings_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub15" class="code">function menuPrintFormat_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub16" class="code">function menuPresentationFormat_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub17" class="code">function menuGraphicsRenderer_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub18" class="code">function menuOpenGL_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub19" class="code">function menuPainters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub20" class="code">function menuZbuffer_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub21" class="code">function menuExportFigures_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub22" class="code">function menuBathymetryExportSettings_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub23" class="code">function menuExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub24" class="code">function menuSaveANVFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub25" class="code">function menuSaveExcel_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub26" class="code">function menuParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub27" class="code">function menuProcessingParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub28" class="code">function menuUnitDischargeCorrection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub29" class="code">function menuPlottingParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub30" class="code">function menuUnits_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub31" class="code">function menuMetric_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub32" class="code">function menuEnglish_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub33" class="code">function menuSetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub34" class="code">function menuCrossSectionEndpointAutomatic_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub35" class="code">function menuCrossSectionEndpointManual_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub36" class="code">function menuPlotStyle_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub37" class="code">function menuStylePrint_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub38" class="code">function menuStylePresentation_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub39" class="code">function menuKMZVerticalOffset_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub40" class="code">function menuBathymetryParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub41" class="code">function menuTools_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub42" class="code">function menuASCII2GIS_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub43" class="code">function menuASCII2KML_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub44" class="code">function menuOpenBatchMode_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub45" class="code">function menuHelp_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub46" class="code">function menuUsersGuide_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub47" class="code">function menuFunctionLibrary_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub48" class="code">function menuCheckForUpdates_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub49" class="code">function menuAbout_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub50" class="code">function loadDataCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub51" class="code">function saveDataCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub52" class="code">function saveBathymetryCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub53" class="code">function plottingParametersCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub54" class="code">function processingParametersCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub55" class="code">function shiptracksPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub56" class="code">function planviewPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub57" class="code">function crosssectionPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub58" class="code">function SaveMATFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub59" class="code">function SaveTecplotFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub60" class="code">function SaveGoogleEarthFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub61" class="code">function ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub62" class="code">function BeamAngle_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub63" class="code">function MagneticVariation_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub64" class="code">function WSE_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub65" class="code">function OutputAuxiliaryData_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub66" class="code">function DepthRangeMin_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub67" class="code">function DepthRangeMax_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub68" class="code">function VectorScalePlanView_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub69" class="code">function VectorSpacingPlanview_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub70" class="code">function SmoothingWindowSize_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub71" class="code">function DisplayShoreline_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub72" class="code">function AddBackground_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub73" class="code">function PlotPlanView_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub74" class="code">function HorizontalGridNodeSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub75" class="code">function VerticalGridNodeSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub76" class="code">function SetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub77" class="code">function PlotShiptracks_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub78" class="code">function Contour_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub79" class="code">function VerticalExaggeration_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub80" class="code">function VectorScaleCrossSection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub81" class="code">function HorizontalVectorSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub82" class="code">function VerticalVectorSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub83" class="code">function HorizontalSmoothingWindow_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub84" class="code">function VerticalSmoothingWindow_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub85" class="code">function PlotSecondaryFlowVectors_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub86" class="code">function SecondaryFlowVectorVariable_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub87" class="code">function IncludeVerticalVelocity_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub88" class="code">function PlotCrossSection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub89" class="code">function ClearLog_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub90" class="code">function SaveLog_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub91" class="code">function handles = buildToolbar(handles)</a></li><li><a href="#_sub92" class="code">function load_prefs(hfigure)</a></li><li><a href="#_sub93" class="code">function store_prefs(hfigure,pref)</a></li><li><a href="#_sub94" class="code">function initGUI(handles)</a></li><li><a href="#_sub95" class="code">function set_enable(handles,enable_state)</a></li><li><a href="#_sub96" class="code">function [english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style] =</a></li><li><a href="#_sub97" class="code">function dialogUnits(hObject,eventdata,handles,the_units)</a></li><li><a href="#_sub98" class="code">function dialogEnpoints(hObject,eventdata,handles,the_endpoints)</a></li><li><a href="#_sub99" class="code">function dialogPlotStyle(hObject,eventdata,handles,the_style)</a></li><li><a href="#_sub100" class="code">function dialogOK(hObject,eventdata,h_OK)</a></li><li><a href="#_sub101" class="code">function dialogCancel(hObject,eventdata,handles)</a></li><li><a href="#_sub102" class="code">function dialogCloseReq(hObject,eventdata,h_OK)</a></li><li><a href="#_sub103" class="code">function [beam_angle,magnetic_variation,wse,output_auxiliary_data] = exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,hf)</a></li><li><a href="#_sub104" class="code">function dialogExportSettings(hObject,eventdata,handles)</a></li><li><a href="#_sub105" class="code">function [selected_figures] = openFiguresDialog(figure_names,hf)</a></li><li><a href="#_sub106" class="code">function dialogSelectFigures(hObject,eventdata,handles)</a></li><li><a href="#_sub107" class="code">function icons = getIcons</a></li><li><a href="#_sub108" class="code">function guiparams = createGUIparams</a></li><li><a href="#_sub109" class="code">function ShiptracksZoom_Callback(obj,evd,handles)</a></li><li><a href="#_sub110" class="code">function ShiptracksPan_Callback(obj,evd,handles)</a></li><li><a href="#_sub111" class="code">function figure1_WindowKeyPressFcn(hObject, eventdata, handles)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = VMT(varargin)</a>
0002 <span class="comment">% --- THE VELOCITY MAPPING TOOLBOX ---</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% VMT is a Matlab-based software for processing and visualizing ADCP data</span>
0005 <span class="comment">% collected along transects in rivers or other bodies of water. VMT allows</span>
0006 <span class="comment">% rapid processing, visualization, and analysis of a range of ADCP datasets</span>
0007 <span class="comment">% and includes utilities to export ADCP data to files compatible with</span>
0008 <span class="comment">% ArcGIS, Tecplot, and Google Earth. The software can be used to explore</span>
0009 <span class="comment">% patterns of three-dimensional fluid motion through several methods for</span>
0010 <span class="comment">% calculation of secondary flows (e.g. Rhoads and Kenworthy, 1998; Lane et</span>
0011 <span class="comment">% al., 2000). The software also includes capabilities for analyzing the</span>
0012 <span class="comment">% acoustic backscatter and bathymetric data from the ADCP. A user-friendly</span>
0013 <span class="comment">% graphical user interface (GUI) enhances program functionality and</span>
0014 <span class="comment">% provides ready access to two- and three- dimensional plotting functions,</span>
0015 <span class="comment">% allowing rapid display and interrogation of velocity, backscatter, and</span>
0016 <span class="comment">% bathymetry data.</span>
0017 <span class="comment">%</span>
0018 <span class="comment">% CITATION:</span>
0019 <span class="comment">% Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L., Rhoads, B.</span>
0020 <span class="comment">% L., Oberg, K. A., Best, J. L., Mueller, D. S., Johnson, K. K. and Riley,</span>
0021 <span class="comment">% J. D. (2013), Velocity Mapping Toolbox (VMT): a processing and</span>
0022 <span class="comment">% visualization suite for moving-vessel ADCP measurements. Earth Surf.</span>
0023 <span class="comment">% Process. Landforms. doi: 10.1002/esp.3367</span>
0024 <span class="comment">%</span>
0025 <span class="comment">%__________________________________________________________________________</span>
0026 <span class="comment">% P.R. Jackson, U.S. Geological Survey, Illinois Water Science Center</span>
0027 <span class="comment">% (pjackson@usgs.gov)</span>
0028 <span class="comment">%</span>
0029 <span class="comment">% Code contributed by D. Parsons, D. Mueller, J. Czuba, and F. Engel.</span>
0030 <span class="comment">%__________________________________________________________________________</span>
0031 
0032 <span class="comment">% Begin initialization code - DO NOT EDIT</span>
0033 gui_Singleton = 1;
0034 gui_State = struct(<span class="string">'gui_Name'</span>,       mfilename, <span class="keyword">...</span>
0035     <span class="string">'gui_Singleton'</span>,  gui_Singleton, <span class="keyword">...</span>
0036     <span class="string">'gui_OpeningFcn'</span>, @<a href="#_sub1" class="code" title="subfunction VMT_OpeningFcn(hObject, eventdata, handles, varargin)">VMT_OpeningFcn</a>, <span class="keyword">...</span>
0037     <span class="string">'gui_OutputFcn'</span>,  @<a href="#_sub2" class="code" title="subfunction varargout = VMT_OutputFcn(hObject, eventdata, handles)">VMT_OutputFcn</a>, <span class="keyword">...</span>
0038     <span class="string">'gui_LayoutFcn'</span>,  [] , <span class="keyword">...</span>
0039     <span class="string">'gui_Callback'</span>,   []);
0040 <span class="keyword">if</span> nargin &amp;&amp; ischar(varargin{1})
0041     gui_State.gui_Callback = str2func(varargin{1});
0042 <span class="keyword">end</span>
0043 
0044 <span class="comment">% If ERROR, write a txt file with the error dump info</span>
0045 <span class="keyword">try</span>
0046 <span class="keyword">if</span> nargout
0047     [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
0048 <span class="keyword">else</span>
0049     gui_mainfcn(gui_State, varargin{:});
0050 <span class="keyword">end</span>
0051 
0052 <span class="keyword">catch</span> err
0053     <span class="keyword">if</span> isdeployed
0054         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
0055             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
0056         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
0057             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
0058             errLogFileName},<span class="keyword">...</span>
0059             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
0060             <span class="string">'error'</span>);
0061         fid = fopen(errLogFileName,<span class="string">'W'</span>);
0062         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
0063         fclose(fid);
0064         rethrow(err)
0065     <span class="keyword">else</span>
0066         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
0067             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
0068             <span class="string">'error'</span>);
0069         rethrow(err);
0070     <span class="keyword">end</span>
0071 <span class="keyword">end</span>
0072 <span class="comment">% End initialization code - DO NOT EDIT</span>
0073 
0074 <span class="comment">%#ok&lt;*DEFNU,*INUSL,*INUSD&gt;</span>
0075 
0076 <span class="comment">% --- Executes just before VMT is made visible.</span>
0077 <a name="_sub1" href="#_subfunctions" class="code">function VMT_OpeningFcn(hObject, eventdata, handles, varargin)</a>
0078 <span class="comment">% This function has no output args, see OutputFcn.</span>
0079 <span class="comment">% hObject    handle to figure</span>
0080 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0081 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0082 <span class="comment">% varargin   command line arguments to VMT (see VARARGIN)</span>
0083 
0084 <span class="comment">% Choose default command line output for VMT</span>
0085 handles.output = hObject;
0086 
0087 <span class="comment">% Build the GUI toolbar:</span>
0088 <span class="comment">% ----------------------</span>
0089 handles = <a href="#_sub91" class="code" title="subfunction handles = buildToolbar(handles)">buildToolbar</a>(handles);
0090 
0091 <span class="comment">% Ensure path to utils &amp; docs is available</span>
0092 <span class="comment">% ----------------------------------------</span>
0093 <span class="keyword">if</span> ~isdeployed
0094     filesep = <span class="string">'\'</span>; <span class="comment">% windows</span>
0095     utilspath = [pwd filesep <span class="string">'utils'</span>];
0096     docspath  = [pwd filesep <span class="string">'doc'</span>];
0097     toolspath = [pwd filesep <span class="string">'tools'</span>];
0098     addpath(utilspath,docspath,toolspath)
0099 <span class="keyword">end</span>
0100 
0101 <span class="comment">% Update handles structure</span>
0102 <span class="comment">% ------------------------</span>
0103 guidata(hObject, handles);
0104 
0105 <span class="comment">% Load the GUI preferences:</span>
0106 <span class="comment">% -------------------------</span>
0107 <a href="#_sub92" class="code" title="subfunction load_prefs(hfigure)">load_prefs</a>(handles.figure1)
0108 
0109 <span class="comment">% Initialize the GUI parameters:</span>
0110 <span class="comment">% ------------------------------</span>
0111 guiparams = <a href="#_sub108" class="code" title="subfunction guiparams = createGUIparams">createGUIparams</a>;
0112 guiparams.vmt_version = <span class="string">'v4.06'</span>;
0113 
0114 <span class="comment">% Draw the VMT Background</span>
0115 <span class="comment">% -----------------</span>
0116 pos = get(handles.figure1,<span class="string">'position'</span>);
0117 axes(handles.VMTBackground);
0118 <span class="comment">% if ~isdeployed %isempty(dir(fullfile(matlabroot,'toolbox','images')))</span>
0119     X = imread(<span class="string">'VMT_Background.png'</span>);
0120     imdisp(X,<span class="string">'size'</span>,[pos(4) pos(3)]) <span class="comment">% Avoids problems with users not having Image Processing TB</span>
0121 <span class="comment">% else</span>
0122 <span class="comment">%     X = imread('VMT_Background.png');</span>
0123 <span class="comment">%     X = imresize(X, [pos(4) pos(3)]);</span>
0124 <span class="comment">%     X = uint8(X);</span>
0125 <span class="comment">%     imshow(X,'Border','tight')</span>
0126 <span class="comment">% end</span>
0127 uistack(handles.VMTBackground,<span class="string">'bottom'</span>)
0128 
0129 <span class="comment">% Store the application data:</span>
0130 <span class="comment">% ---------------------------</span>
0131 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0132 
0133 <span class="comment">% Initialize the GUI:</span>
0134 <span class="comment">% -------------------</span>
0135 <a href="#_sub94" class="code" title="subfunction initGUI(handles)">initGUI</a>(handles)
0136 <a href="#_sub95" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'init'</span>)
0137 <span class="comment">% set(handles.GraphicsExportPanel,'Visible','off')</span>
0138 <span class="comment">% set(handles.ProcessingPanel,'Visible','off')</span>
0139 pos = get(handles.figure1,<span class="string">'Position'</span>);
0140 <span class="comment">% pos(3) = 545;</span>
0141 <span class="comment">% set(handles.figure1,'Position',pos)</span>
0142 movegui(handles.figure1,<span class="string">'center'</span>)
0143 set(handles.figure1,<span class="string">'Resize'</span>,<span class="string">'on'</span>)
0144 
0145 <span class="comment">% Allow access to the VMT Main GUI info by other sub-GUIs by pushing it to</span>
0146 <span class="comment">% the root</span>
0147 setappdata(0  , <span class="string">'hVMTgui'</span>    , gcf);
0148 
0149 <span class="comment">% UIWAIT makes VMT wait for user response (see UIRESUME)</span>
0150 <span class="comment">% uiwait(handles.figure1);</span>
0151 <span class="comment">% [EOF] VMT_OpeningFcn</span>
0152 
0153 
0154 <span class="comment">% --- Outputs from this function are returned to the command line.</span>
0155 <a name="_sub2" href="#_subfunctions" class="code">function varargout = VMT_OutputFcn(hObject, eventdata, handles)</a>
0156 <span class="comment">% varargout  cell array for returning output args (see VARARGOUT);</span>
0157 <span class="comment">% hObject    handle to figure</span>
0158 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0159 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0160 
0161 <span class="comment">% Get default command line output from handles structure</span>
0162 varargout{1} = handles.output;
0163 <span class="comment">% [EOF] VMT_OutputFcn</span>
0164 
0165 <span class="comment">% --- Executes when figure1 is resized.</span>
0166 <a name="_sub3" href="#_subfunctions" class="code">function figure1_ResizeFcn(hObject, eventdata, handles)</a>
0167 
0168 <span class="comment">% Draw the VMT Background</span>
0169 <span class="comment">% -----------------</span>
0170 pos = get(handles.figure1,<span class="string">'position'</span>);
0171 axes(handles.VMTBackground);
0172 <span class="comment">% if ~isdeployed %isempty(dir(fullfile(matlabroot,'toolbox','images')))</span>
0173     X = imread(<span class="string">'VMT_Background.png'</span>);
0174     imdisp(X,<span class="string">'size'</span>,[pos(4) pos(3)]) <span class="comment">% Avoids problems with users not having Image Processing TB</span>
0175 <span class="comment">% else</span>
0176 <span class="comment">%     X = imread('VMT_Background.png');</span>
0177 <span class="comment">%     X = imresize(X, [pos(4) pos(3)]);</span>
0178 <span class="comment">%     X = uint8(X);</span>
0179 <span class="comment">%     imshow(X,'Border','tight')</span>
0180 <span class="comment">% end</span>
0181 uistack(handles.VMTBackground,<span class="string">'bottom'</span>)
0182 
0183 <span class="comment">% --- Executes when user attempts to close figure1.</span>
0184 <a name="_sub4" href="#_subfunctions" class="code">function figure1_CloseRequestFcn(hObject, eventdata, handles)</a>
0185 <span class="comment">% hObject    handle to figure1 (see GCBO)</span>
0186 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0187 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0188 
0189 <span class="comment">% Hint: delete(hObject) closes the figure</span>
0190 close_button = questdlg(<span class="keyword">...</span>
0191     <span class="string">'You are about to exit VMT. Any unsaved work will be lost. Are you sure?'</span>,<span class="keyword">...</span>
0192     <span class="string">'Exit VMT?'</span>,<span class="string">'No'</span>);
0193 <span class="keyword">switch</span> close_button
0194     <span class="keyword">case</span> <span class="string">'Yes'</span>
0195         delete(hObject)
0196         close all hidden
0197     <span class="keyword">otherwise</span>
0198         <span class="keyword">return</span>
0199 <span class="keyword">end</span>
0200 <span class="comment">% [EOF] figure1_CloseRequestFcn</span>
0201 
0202 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
0203 <span class="comment">% MENU BAR CALLBACKS %</span>
0204 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
0205 
0206 <span class="comment">% --------------------------------------------------------------------</span>
0207 <a name="_sub5" href="#_subfunctions" class="code">function menuFile_Callback(hObject, eventdata, handles)</a>
0208 <span class="comment">% Empty</span>
0209 
0210 <span class="comment">% --------------------------------------------------------------------</span>
0211 <a name="_sub6" href="#_subfunctions" class="code">function menuOpen_Callback(hObject, eventdata, handles)</a>
0212 <span class="comment">% Empty</span>
0213 
0214 <span class="comment">% --------------------------------------------------------------------</span>
0215 <a name="_sub7" href="#_subfunctions" class="code">function menuOpenASCII_Callback(hObject, eventdata, handles)</a>
0216 <a href="#_sub50" class="code" title="subfunction loadDataCallback(hObject, eventdata, handles)">loadDataCallback</a>(hObject, eventdata, handles)
0217 <span class="comment">% [EOF] menuOpenASCII_Callback</span>
0218 
0219 <span class="comment">% --------------------------------------------------------------------</span>
0220 <a name="_sub8" href="#_subfunctions" class="code">function menuOpenMAT_Callback(hObject, eventdata, handles)</a>
0221 
0222 <span class="comment">% Get the Application data:</span>
0223 <span class="comment">% -------------------------</span>
0224 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0225 guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0226 
0227 <span class="comment">% Ask the user to select files:</span>
0228 <span class="comment">% -----------------------------</span>
0229 <span class="comment">% current_file = fullfile(guiparams.data_folder,guiparams.data_files{1});</span>
0230 <span class="comment">% current_file = fullfile(guiprefs.mat_path,guiprefs.mat_file);</span>
0231 <span class="keyword">if</span> iscell(guiprefs.mat_file)
0232     uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file{1});
0233 <span class="keyword">else</span>
0234     uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file);
0235 <span class="keyword">end</span>
0236 [filename,pathname] = <span class="keyword">...</span>
0237     uigetfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-files (*.mat)'</span>}, <span class="keyword">...</span>
0238     <span class="string">'Select MAT File'</span>, <span class="keyword">...</span>
0239     uifile, <span class="string">'MultiSelect'</span>,<span class="string">'on'</span>);
0240 
0241 <span class="keyword">if</span> ischar(filename) <span class="comment">% Single MAT file loaded</span>
0242     <span class="comment">% Load the data:</span>
0243     <span class="comment">% --------------</span>
0244     vars = load(fullfile(pathname,filename));
0245     
0246     <span class="comment">% Make sure the selected file is a valid file:</span>
0247     <span class="comment">% --------------------------------------------</span>
0248     varnames = fieldnames(vars);
0249     <span class="keyword">if</span> isequal(sort(varnames),{<span class="string">'A'</span> <span class="string">'Map'</span> <span class="string">'V'</span> <span class="string">'z'</span>}')
0250         guiparams.mat_path = pathname;
0251         guiparams.mat_file = filename;
0252         guiparams.z = vars.z;
0253         guiparams.A = vars.A;
0254         guiparams.V = vars.V;
0255         
0256         <span class="comment">% Update the preferences:</span>
0257         <span class="comment">% -----------------------</span>
0258         guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0259         guiprefs.mat_path = pathname;
0260         guiprefs.mat_file = filename;
0261         setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0262         <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
0263                      
0264         <span class="comment">% Re-store the Application Data:</span>
0265         <span class="comment">% ------------------------------</span>
0266         setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0267         
0268         <span class="comment">% Update the GUI:</span>
0269         <span class="comment">% ---------------</span>
0270         set(handles.HorizontalGridNodeSpacing,<span class="string">'String'</span>,vars.A(1).hgns)
0271         <a href="#_sub95" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
0272     <span class="keyword">else</span> <span class="comment">% Not a valid file</span>
0273         errordlg(<span class="string">'The selected file is not a valid ADCP data MAT file.'</span>, <span class="keyword">...</span>
0274             <span class="string">'Invalid File...'</span>)
0275     <span class="keyword">end</span>
0276     
0277     <span class="comment">% Set the vertical grid node spacing</span>
0278     <span class="comment">% ----------------------------------</span>
0279     <span class="comment">% For RioGrande probes, use the bin size, else just use the default</span>
0280     <span class="comment">% Backwards compatible</span>
0281     <span class="keyword">if</span> vars.A(1).Sup.wm ~= 3 <span class="comment">% RG</span>
0282         set(handles.VerticalGridNodeSpacing,<span class="string">'String'</span>,double(vars.A(1).Sup.binSize_cm(1))/100)
0283     <span class="keyword">else</span> <span class="comment">% Older file, must be RG</span>
0284         set(handles.VerticalGridNodeSpacing,<span class="string">'String'</span>,0.4)
0285     <span class="keyword">end</span>
0286     
0287 <span class="keyword">elseif</span> iscell(filename) <span class="comment">% Multiple MAT files loaded</span>
0288     <span class="comment">% Set the filenames</span>
0289     <span class="comment">% -----------------</span>
0290     guiparams.mat_path = pathname;
0291     guiparams.mat_file = filename;
0292     
0293     <span class="comment">% Push status to log window</span>
0294     <span class="comment">% -------------------------</span>
0295     log_text = {<span class="keyword">...</span>
0296         <span class="string">'Loading previously processed MAT files.'</span>;<span class="keyword">...</span>
0297         <span class="string">'Directory:'</span>};
0298     log_text = vertcat(log_text, pathname, {<span class="string">'Files:'</span>}, filename');
0299     statusLogging(handles.LogWindow,log_text)
0300     
0301     <span class="comment">% Update the Application Data:</span>
0302     <span class="comment">% ------------------------------</span>
0303     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0304     
0305     <span class="comment">% Update the persistent preferences:</span>
0306     <span class="comment">% ----------------------------------</span>
0307     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0308     guiprefs.mat_path = pathname;
0309     guiprefs.mat_file = filename;
0310     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0311     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
0312         
0313     <span class="comment">% Update the GUI:</span>
0314     <span class="comment">% ---------------</span>
0315     <a href="#_sub95" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'multiplematfiles'</span>)
0316 <span class="keyword">end</span>
0317 
0318 <span class="comment">% [EOF] menuOpenMAT_Callback</span>
0319 
0320 <span class="comment">% --------------------------------------------------------------------</span>
0321 <a name="_sub9" href="#_subfunctions" class="code">function menuSave_Callback(hObject, eventdata, handles)</a>
0322 <span class="comment">% Empty</span>
0323 
0324 <span class="comment">% --------------------------------------------------------------------</span>
0325 <a name="_sub10" href="#_subfunctions" class="code">function menuSaveMAT_Callback(hObject, eventdata, handles)</a>
0326 <a href="#_sub51" class="code" title="subfunction saveDataCallback(hObject, eventdata, handles)">saveDataCallback</a>(hObject, eventdata, handles)
0327 <span class="comment">% [EOF] menuSaveMAT_Callback</span>
0328 
0329 <span class="comment">% --------------------------------------------------------------------</span>
0330 <a name="_sub11" href="#_subfunctions" class="code">function menuSaveTecplot_Callback(hObject, eventdata, handles)</a>
0331 <a href="#_sub59" class="code" title="subfunction SaveTecplotFile_Callback(hObject, eventdata, handles)">SaveTecplotFile_Callback</a>(handles,eventdata,handles)
0332 <span class="comment">% [EOF] menuSaveTecplot_Callback</span>
0333 
0334 <span class="comment">% --------------------------------------------------------------------</span>
0335 <a name="_sub12" href="#_subfunctions" class="code">function menuSaveKMZFile_Callback(hObject, eventdata, handles)</a>
0336 <a href="#_sub60" class="code" title="subfunction SaveGoogleEarthFile_Callback(hObject, eventdata, handles)">SaveGoogleEarthFile_Callback</a>(handles,eventdata,handles)
0337 <span class="comment">% [EOF] menuSaveKMZFile_Callback</span>
0338 
0339 <span class="comment">% --------------------------------------------------------------------</span>
0340 <a name="_sub13" href="#_subfunctions" class="code">function menuExport_Callback(hObject, eventdata, handles)</a>
0341 <span class="comment">% Empty</span>
0342 
0343 <span class="comment">% --------------------------------------------------------------------</span>
0344 <a name="_sub14" href="#_subfunctions" class="code">function menuFigureExportsettings_Callback(hObject, eventdata, handles)</a>
0345 <span class="comment">% Empty</span>
0346 
0347 <span class="comment">% --------------------------------------------------------------------</span>
0348 <a name="_sub15" href="#_subfunctions" class="code">function menuPrintFormat_Callback(hObject, eventdata, handles)</a>
0349 
0350 <span class="comment">% Get the Application Data:</span>
0351 <span class="comment">% -------------------------</span>
0352 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0353 
0354 <span class="comment">% Update the Application Data:</span>
0355 <span class="comment">% ----------------------------</span>
0356 guiparams.print        = true;
0357 guiparams.presentation = false;
0358 
0359 <span class="comment">% Re-store the Application data:</span>
0360 <span class="comment">% ------------------------------</span>
0361 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0362 
0363 <span class="comment">% Update the GUI:</span>
0364 <span class="comment">% ---------------</span>
0365 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0366 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
0367 
0368 <span class="comment">% [EOF] menuPrintFormat_Callback</span>
0369 
0370 
0371 <span class="comment">% --------------------------------------------------------------------</span>
0372 <a name="_sub16" href="#_subfunctions" class="code">function menuPresentationFormat_Callback(hObject, eventdata, handles)</a>
0373 
0374 <span class="comment">% Get the Application Data:</span>
0375 <span class="comment">% -------------------------</span>
0376 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0377 
0378 <span class="comment">% Update the Application Data:</span>
0379 <span class="comment">% ----------------------------</span>
0380 guiparams.print        = false;
0381 guiparams.presentation = true;
0382 
0383 <span class="comment">% Re-store the Application data:</span>
0384 <span class="comment">% ------------------------------</span>
0385 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0386 
0387 <span class="comment">% Update the GUI:</span>
0388 <span class="comment">% ---------------</span>
0389 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0390 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
0391 
0392 <span class="comment">% [EOF] menuPresentationFormat_Callback</span>
0393 
0394 <span class="comment">% --------------------------------------------------------------------</span>
0395 <a name="_sub17" href="#_subfunctions" class="code">function menuGraphicsRenderer_Callback(hObject, eventdata, handles)</a>
0396 <span class="comment">%  --- Empty ---</span>
0397 
0398 <span class="comment">% --------------------------------------------------------------------</span>
0399 <a name="_sub18" href="#_subfunctions" class="code">function menuOpenGL_Callback(hObject, eventdata, handles)</a>
0400 <span class="comment">% Get the Application Data:</span>
0401 <span class="comment">% -------------------------</span>
0402 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0403 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0404 
0405 <span class="comment">% Update the Application Data:</span>
0406 <span class="comment">% ----------------------------</span>
0407 guiparams.renderer  = <span class="string">'OpenGL'</span>;
0408 guiprefs.renderer   = <span class="string">'OpenGL'</span>;
0409 
0410 <span class="comment">% Re-store the Application data:</span>
0411 <span class="comment">% ------------------------------</span>
0412 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0413 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0414 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'renderer'</span>)
0415 
0416 <span class="comment">% Update the GUI:</span>
0417 <span class="comment">% ---------------</span>
0418 set(handles.menuOpenGL,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0419 set(handles.menuPainters, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0420 set(handles.menuZbuffer,  <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0421 
0422 <span class="comment">% Modify the existing figures</span>
0423 <span class="comment">% ---------------------------</span>
0424 <span class="comment">% Find what plots exist already</span>
0425 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0426 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
0427 
0428 <span class="comment">% Loop through valid figures and adjust</span>
0429 <span class="comment">% -------------------------------------</span>
0430 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
0431     <span class="keyword">for</span> i = 1:length(valid_names)
0432         <span class="comment">% Focus the figure</span>
0433         hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
0434         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0435             figure(hff)
0436             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0437         <span class="keyword">end</span>
0438         hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
0439         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0440             figure(hff)
0441             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0442         <span class="keyword">end</span>
0443     <span class="keyword">end</span>
0444 <span class="keyword">end</span>
0445 <span class="comment">% [EOF] menuOpenGL_Callback</span>
0446 
0447 
0448 <span class="comment">% --------------------------------------------------------------------</span>
0449 <a name="_sub19" href="#_subfunctions" class="code">function menuPainters_Callback(hObject, eventdata, handles)</a>
0450 <span class="comment">% Get the Application Data:</span>
0451 <span class="comment">% -------------------------</span>
0452 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0453 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0454 
0455 <span class="comment">% Update the Application Data:</span>
0456 <span class="comment">% ----------------------------</span>
0457 guiparams.renderer  = <span class="string">'painters'</span>;
0458 guiprefs.renderer   = <span class="string">'painters'</span>;
0459 
0460 <span class="comment">% Re-store the Application data:</span>
0461 <span class="comment">% ------------------------------</span>
0462 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0463 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0464 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'renderer'</span>)
0465 
0466 <span class="comment">% Update the GUI:</span>
0467 <span class="comment">% ---------------</span>
0468 set(handles.menuOpenGL,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0469 set(handles.menuPainters, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0470 set(handles.menuZbuffer,  <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0471 
0472 <span class="comment">% Modify the existing figures</span>
0473 <span class="comment">% ---------------------------</span>
0474 <span class="comment">% Find what plots exist already</span>
0475 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0476 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
0477 
0478 <span class="comment">% Loop through valid figures and adjust</span>
0479 <span class="comment">% -------------------------------------</span>
0480 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
0481     <span class="keyword">for</span> i = 1:length(valid_names)
0482         <span class="comment">% Focus the figure</span>
0483         hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
0484         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0485             figure(hff)
0486             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0487         <span class="keyword">end</span>
0488         hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
0489         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0490             figure(hff)
0491             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0492         <span class="keyword">end</span>
0493     <span class="keyword">end</span>
0494 <span class="keyword">end</span>
0495 <span class="comment">% [EOF] menuPainters_Callback</span>
0496 
0497 <span class="comment">% --------------------------------------------------------------------</span>
0498 <a name="_sub20" href="#_subfunctions" class="code">function menuZbuffer_Callback(hObject, eventdata, handles)</a>
0499 <span class="comment">% Get the Application Data:</span>
0500 <span class="comment">% -------------------------</span>
0501 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0502 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0503 
0504 <span class="comment">% Update the Application Data:</span>
0505 <span class="comment">% ----------------------------</span>
0506 guiparams.renderer  = <span class="string">'zbuffer'</span>;
0507 guiprefs.renderer   = <span class="string">'zbuffer'</span>;
0508 
0509 <span class="comment">% Re-store the Application data:</span>
0510 <span class="comment">% ------------------------------</span>
0511 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0512 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0513 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'renderer'</span>)
0514 
0515 <span class="comment">% Update the GUI:</span>
0516 <span class="comment">% ---------------</span>
0517 set(handles.menuOpenGL,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0518 set(handles.menuPainters, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0519 set(handles.menuZbuffer,  <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0520 
0521 <span class="comment">% Modify the existing figures</span>
0522 <span class="comment">% ---------------------------</span>
0523 <span class="comment">% Find what plots exist already</span>
0524 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0525 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
0526 
0527 <span class="comment">% Loop through valid figures and adjust</span>
0528 <span class="comment">% -------------------------------------</span>
0529 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
0530     <span class="keyword">for</span> i = 1:length(valid_names)
0531         <span class="comment">% Focus the figure</span>
0532         hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
0533         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0534             figure(hff)
0535             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0536         <span class="keyword">end</span>
0537         hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
0538         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0539             figure(hff)
0540             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0541         <span class="keyword">end</span>
0542     <span class="keyword">end</span>
0543 <span class="keyword">end</span>
0544 <span class="comment">% [EOF] menuZbuffer_Callback</span>
0545 
0546 <span class="comment">% --------------------------------------------------------------------</span>
0547 <a name="_sub21" href="#_subfunctions" class="code">function menuExportFigures_Callback(hObject, eventdata, handles)</a>
0548 <span class="comment">% Get the Application data:</span>
0549 <span class="comment">% -------------------------</span>
0550 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0551 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0552 
0553 <span class="comment">% Find what plots exist already</span>
0554 fig_handles = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0555 fig_names   = get(fig_handles,<span class="string">'name'</span>);
0556 
0557 <span class="comment">% Remove the VMT GUI as a valid figure in the list</span>
0558 [~, idx] = ismember({get(handles.figure1,<span class="string">'Name'</span>),<span class="string">'VMT_GraphicsControl'</span>}, fig_names);
0559 <span class="keyword">if</span> ~isempty(idx)
0560     fig_names(idx) = [];
0561 <span class="keyword">end</span>
0562 
0563 <span class="keyword">if</span> guiparams.presentation
0564     figure_style = <span class="string">'presentation'</span>;
0565 <span class="keyword">else</span>
0566     figure_style = <span class="string">'print'</span>;
0567 <span class="keyword">end</span>
0568 
0569 [selected_figures] = <a href="#_sub105" class="code" title="subfunction [selected_figures] = openFiguresDialog(figure_names,hf)">openFiguresDialog</a>(fig_names,handles.figure1);
0570 
0571 <span class="keyword">if</span> isempty(selected_figures) <span class="comment">% User pressed cancel</span>
0572     <span class="keyword">return</span>
0573 <span class="keyword">else</span>
0574     <span class="keyword">for</span> i = 1:length(selected_figures)
0575         <a href="VMT_SaveFigs.html" class="code" title="function VMT_SaveFigs(pathname,to_export,figure_style)">VMT_SaveFigs</a>(guiprefs.mat_path,selected_figures(i),figure_style)
0576     <span class="keyword">end</span>
0577 <span class="keyword">end</span>
0578 
0579 
0580 <span class="comment">% [EOF] menuExportFigures_Callback</span>
0581 
0582 <span class="comment">% --------------------------------------------------------------------</span>
0583 <a name="_sub22" href="#_subfunctions" class="code">function menuBathymetryExportSettings_Callback(hObject, eventdata, handles)</a>
0584 <span class="comment">% Get the Application data:</span>
0585 <span class="comment">% -------------------------</span>
0586 guiparams              = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0587 beam_angle             = guiparams.beam_angle; 
0588 magnetic_variation     = guiparams.magnetic_variation; 
0589 wse                    = guiparams.wse;
0590 output_auxiliary_data  = guiparams.output_auxiliary_data; 
0591 
0592 <span class="comment">% Open dialog and allow user to select settings</span>
0593 <span class="comment">% ---------------------------------------------</span>
0594 [beam_angle,<span class="keyword">...</span>
0595     magnetic_variation,<span class="keyword">...</span>
0596     wse,<span class="keyword">...</span>
0597     output_auxiliary_data] = <span class="keyword">...</span>
0598     <a href="#_sub103" class="code" title="subfunction [beam_angle,magnetic_variation,wse,output_auxiliary_data] = exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,hf)">exportSettingsDialog</a>(beam_angle,magnetic_variation,wse,output_auxiliary_data,handles.figure1);
0599 
0600 <span class="comment">% Re-store the Application data:</span>
0601 <span class="comment">% ------------------------------</span>
0602 guiparams.beam_angle            = beam_angle;
0603 guiparams.magnetic_variation    = magnetic_variation; 
0604 guiparams.wse                   = wse;
0605 guiparams.output_auxiliary_data = output_auxiliary_data;
0606 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0607 
0608 <span class="comment">% [EOF] menuExportSettings_Callback</span>
0609 
0610 <span class="comment">% --------------------------------------------------------------------</span>
0611 <a name="_sub23" href="#_subfunctions" class="code">function menuExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a>
0612 <a href="#_sub61" class="code" title="subfunction ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)">ExportMultibeamBathymetry_Callback</a>(hObject, eventdata, handles);
0613 <span class="comment">% [EOF] menuExportMultibeamBathymetry_Callback</span>
0614 
0615 
0616 <span class="comment">% --------------------------------------------------------------------</span>
0617 <a name="_sub24" href="#_subfunctions" class="code">function menuSaveANVFile_Callback(hObject, eventdata, handles)</a>
0618 
0619 <span class="comment">% Get the Application Data:</span>
0620 <span class="comment">% -------------------------</span>
0621 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0622 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0623 PVdata    = guiparams.iric_anv_planview_data;
0624 iric_path = guiprefs.iric_path;
0625 iric_file = guiprefs.iric_file;
0626 
0627 <span class="comment">% Is there any planview data?</span>
0628 <span class="keyword">if</span> isempty(PVdata)
0629     <span class="comment">% Nothing to do, warn user</span>
0630     log_text = {<span class="string">'No planview plot data to export. User must Plot Plan View first.'</span>};
0631     warndlg(log_text{:},<span class="string">'Nothing to export'</span>)
0632 <span class="keyword">else</span>
0633     <span class="comment">% Save the planview data as output and to an *.anv file with spacing</span>
0634     <span class="comment">% and smoothing (for iRiC)</span>
0635     log_text = {<span class="string">'Exporting iRic formated ANV vector file...'</span>};
0636     [iric_file,iric_path] = uiputfile(<span class="string">'*.anv'</span>,<span class="string">'Save *.anv file'</span>,<span class="keyword">...</span>
0637         fullfile(iric_path,iric_file));
0638     
0639     <span class="keyword">if</span> ischar(iric_path) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0640         outfile = fullfile(iric_path,iric_file);
0641         log_text = vertcat(log_text,{outfile});
0642         ofid   = fopen(outfile, <span class="string">'wt'</span>);
0643         outcount = fprintf(ofid,<span class="keyword">...</span>
0644             <span class="string">'%8.2f  %8.2f  %5.2f  %3.3f  %3.3f\n'</span>,PVdata.outmat);
0645         fclose(ofid);
0646     <span class="keyword">else</span>
0647         <span class="comment">% Return default iric_path and iric_file</span>
0648         iric_path = guiprefs.iric_path;
0649         iric_file = guiprefs.iric_file;
0650     <span class="keyword">end</span>
0651 <span class="keyword">end</span>
0652 
0653 <span class="comment">% Push messages to Log Window:</span>
0654 <span class="comment">% ----------------------------</span>
0655 statusLogging(handles.LogWindow, log_text)
0656 
0657 <span class="comment">% Store the persistent preferences:</span>
0658 <span class="comment">% ---------------------------------</span>
0659 guiprefs.iric_file = iric_file;
0660 guiprefs.iric_path = iric_path;
0661 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0662 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'iric'</span>)
0663 
0664 <span class="comment">% [EOF] menuSaveANVFile_Callback</span>
0665 
0666 <span class="comment">% --------------------------------------------------------------------</span>
0667 <a name="_sub25" href="#_subfunctions" class="code">function menuSaveExcel_Callback(hObject, eventdata, handles)</a>
0668 <span class="comment">% Get the Application Data:</span>
0669 <span class="comment">% -------------------------</span>
0670 guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0671 guiprefs    = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0672 excel_path  = guiprefs.excel_path;
0673 excel_file  = guiprefs.excel_file;
0674 
0675 <span class="comment">% Push messages to Log Window:</span>
0676 <span class="comment">% ----------------------------</span>
0677 log_text = {<span class="string">'Exporting Excel File (reprocessing dataset; this will create new plots)'</span>};
0678 statusLogging(handles.LogWindow, log_text)
0679 
0680 <span class="comment">% If there are multiple MAT files loaded, go ahead and export just the DAV</span>
0681 <span class="comment">% data.</span>
0682 <span class="keyword">if</span> iscell(guiparams.mat_file)
0683     <span class="comment">% Force VMT to reprocess before outputing Excel</span>
0684     <a href="#_sub56" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
0685     <span class="comment">% Refresh the Application Data:</span>
0686     guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0687     z           = guiparams.z;
0688     A           = guiparams.A;
0689     V           = guiparams.V;
0690     Map         = guiparams.Map;
0691     wse         = guiparams.wse;
0692     PVdata      = guiparams.iric_anv_planview_data;
0693     log_text = {<span class="string">'Writing data to Excel file...'</span>;<span class="keyword">...</span>
0694         <span class="string">'Multiple transected loaded. Will export Planview Data Only!'</span>};
0695     [excel_file,excel_path] = uiputfile(<span class="string">'*.xlsx'</span>,<span class="string">'Save *.xlsx file'</span>,<span class="keyword">...</span>
0696         fullfile(excel_path,excel_file));
0697     
0698     <span class="keyword">if</span> ischar(excel_path) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0699         outfile = fullfile(excel_path,excel_file);
0700         <span class="comment">%log_text = vertcat(log_text,{outfile});</span>
0701         
0702     <span class="keyword">else</span>
0703         <span class="comment">% Return default excel_path and excel_file</span>
0704         excel_path = guiprefs.excel_path;
0705         excel_file = guiprefs.excel_file;
0706         outfile = fullfile(excel_path,excel_file);
0707         <span class="comment">%log_text = vertcat(log_text,{outfile});</span>
0708     <span class="keyword">end</span>
0709     
0710     <span class="comment">% Delete the old file if it exists</span>
0711     <span class="keyword">if</span> exist(outfile, <span class="string">'file'</span>) == 2
0712         log_text = vertcat(log_text,{<span class="string">'Warning: The file'</span>;<span class="keyword">...</span>
0713             [<span class="string">'   '</span> outfile];<span class="keyword">...</span>
0714             <span class="string">'already exists. Overwriting file...'</span>});
0715         delete(outfile)
0716     <span class="keyword">end</span>
0717     
0718     <span class="comment">% Save DAV data to an Excel File</span>
0719     hwait = waitbar(0,<span class="string">'Exporting Excel File...'</span>);
0720     vmin = num2str(guiparams.depth_range_min);
0721     vmax = num2str(guiparams.depth_range_max);
0722     pvheaders = {<span class="keyword">...</span>
0723         <span class="string">'UTM_East'</span> <span class="string">'UTM_North'</span> <span class="string">'Dist_m'</span> <span class="string">'Bed_Elev_m'</span><span class="keyword">...</span>
0724         [<span class="string">'EastDAV_cm/s, dpth rng '</span> vmin <span class="string">' to '</span> vmax <span class="string">' m'</span>]<span class="keyword">...</span>
0725         [<span class="string">'NorthDAV_cm/s, dpth rng '</span> vmin <span class="string">' to '</span> vmax <span class="string">' m'</span>]<span class="keyword">...</span>
0726         <span class="string">'Vel_mag_cm/s'</span> <span class="string">'Vel_dir_deg'</span>};
0727     
0728 
0729     <span class="comment">% Initialize Variables</span>
0730     pvdata = []; Dist = [];
0731     X = []; Y = []; E = [];
0732     Ve = []; Vn =[]; Vm = []; Vd = [];
0733     
0734     <span class="comment">% Concatenate data from all MAT files into arrays</span>
0735     <span class="keyword">for</span> i = 1:length(guiparams.mat_file)
0736         <span class="comment">% Load current MAT-file</span>
0737         load(fullfile(guiparams.mat_path, guiparams.mat_file{i}))
0738         
0739         <span class="comment">% Location and Bathy</span>
0740         X = [X V.mcsX(1,:)];
0741         Y = [Y V.mcsY(1,:)];
0742         Dist = [Dist sort(V.mcsDist(1,:),<span class="string">'descend'</span>)];
0743         E = [E V.mcsBedElev];
0744         
0745         <span class="comment">% Build layer-averaged velocities</span>
0746         indx = find(V.mcsDepth(:,1) &lt; str2num(vmin) | V.mcsDepth(:,1) &gt; str2num(vmax));
0747         V.mcsX(indx,:) = nan;
0748         V.mcsY(indx,:) = nan;
0749         V.mcsEast(indx,:) = nan;
0750         V.mcsNorth(indx,:) = nan;
0751         Ve = [Ve <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast)];
0752         Vn = [Vn <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth)];
0753         Vm = [Vm sqrt(<a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast).^2 + <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth).^2)];
0754         Vd = [Vd ari2geodeg(atan2(<a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth),<a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast))*180/pi)];
0755         
0756         waitbar(i/(length(guiparams.mat_file)+1),hwait)
0757     <span class="keyword">end</span>
0758     
0759     <span class="comment">% Put output into 1 matrix</span>
0760     pvdata = [<span class="keyword">...</span>
0761         X; Y; Dist; E;<span class="keyword">...</span><span class="comment"> % Bathy and locations</span>
0762         Ve; Vn; Vm; Vd<span class="keyword">...</span><span class="comment"> % Velocity</span>
0763         ];
0764     pvdata(isnan(pvdata)) = -9999;
0765     
0766     <span class="comment">% Create table and write to Excel</span>
0767     pvout = num2cell(pvdata');
0768     pvout = vertcat(pvheaders,pvout);
0769     xlswrite(outfile,pvout,<span class="string">'Planview'</span>);
0770     
0771     <span class="comment">% Close out waitbar</span>
0772     waitbar(1,hwait)
0773     delete(hwait)
0774     
0775     <span class="comment">% Push messages to Log Window:</span>
0776     <span class="comment">% ----------------------------</span>
0777     statusLogging(handles.LogWindow, log_text)
0778 <span class="keyword">else</span>
0779     
0780     <span class="comment">% Force VMT to reprocess before outputing Excel</span>
0781     <a href="#_sub56" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
0782     <a href="#_sub57" class="code" title="subfunction crosssectionPlotCallback(hObject, eventdata, handles)">crosssectionPlotCallback</a>(hObject, eventdata, handles)
0783     <span class="comment">% Refresh the Application Data:</span>
0784     guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0785     z           = guiparams.z;
0786     A           = guiparams.A;
0787     V           = guiparams.V;
0788     Map         = guiparams.Map;
0789     wse         = guiparams.wse;
0790     PVdata      = guiparams.iric_anv_planview_data;
0791     
0792     
0793     log_text = {<span class="string">'Writing data to Excel file...'</span>};
0794     [excel_file,excel_path] = uiputfile(<span class="string">'*.xlsx'</span>,<span class="string">'Save *.xlsx file'</span>,<span class="keyword">...</span>
0795         fullfile(excel_path,excel_file));
0796     
0797     <span class="keyword">if</span> ischar(excel_path) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0798         outfile = fullfile(excel_path,excel_file);
0799         <span class="comment">%log_text = vertcat(log_text,{outfile});</span>
0800         
0801         <span class="comment">% Delete the old file if it exists</span>
0802         <span class="keyword">if</span> exist(outfile, <span class="string">'file'</span>) == 2
0803             log_text = vertcat(log_text,{<span class="string">'Warning: The file'</span>;<span class="keyword">...</span>
0804                 [<span class="string">'   '</span> outfile];<span class="keyword">...</span>
0805                 <span class="string">'already exists. Overwriting file...'</span>});
0806             delete(outfile)
0807         <span class="keyword">end</span>
0808         
0809         <span class="comment">% Push messages to Log Window:</span>
0810         <span class="comment">% ----------------------------</span>
0811         statusLogging(handles.LogWindow, log_text)
0812         
0813         <span class="comment">% Save MCS Summary to an Excel File</span>
0814         hwait = waitbar(0,<span class="string">'Exporting Excel File...'</span>);
0815         xlswrite(outfile,{<span class="string">'Files:'</span>},<span class="string">'VMTSummary'</span>,<span class="string">'H4'</span>); waitbar(1/5,hwait)
0816         sout = guiparams.data_files';
0817         xlswrite(outfile,sout,<span class="string">'VMTSummary'</span>,<span class="string">'I4'</span>); waitbar(2/5,hwait)
0818         sout = {<span class="keyword">...</span>
0819             <span class="string">'VMT: Summary of Mean Cross Section'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0820             <span class="string">'VMT '</span> guiparams.vmt_version <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0821             <span class="string">'Date Processed: '</span> datestr(now) <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0822             <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0823             <span class="string">'Mean Cross Section (MCS) Properties'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0824             <span class="string">'Horz. Grid Node Spacing (m):'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> guiparams.horizontal_grid_node_spacing;<span class="keyword">...</span>
0825             <span class="string">'Vert. Grid Node Spacing (m):'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> single(guiparams.A(1).Sup.binSize_cm)/100;<span class="keyword">...</span>
0826             <span class="string">'Endpoints:'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">'UTM_East'</span>    <span class="string">'UTM_North'</span>;<span class="keyword">...</span>
0827             <span class="string">'Left Bank'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>    V.xLeftBank V.yLeftBank;<span class="keyword">...</span>
0828             <span class="string">'Right Bank'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>    V.xRightBank V.yRightBank;<span class="keyword">...</span>
0829             <span class="string">'Total Length in meters'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.dl;<span class="keyword">...</span>
0830             <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0831             <span class="string">'Mean Flow Direction (deg)'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.mfd;<span class="keyword">...</span>
0832             <span class="string">'in geographic coordinates'</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0833             <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span>;<span class="keyword">...</span>
0834             <span class="string">'Slope'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.m;<span class="keyword">...</span>
0835             <span class="string">'Intercept'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.b;<span class="keyword">...</span>
0836             <span class="string">'Theta (deg)'</span>    <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> <span class="string">''</span> V.theta};
0837         xlswrite(outfile,sout,<span class="string">'VMTSummary'</span>,<span class="string">'A1'</span>); waitbar(3/5,hwait)
0838         
0839         <span class="comment">% Save DAV data to an Excel File</span>
0840         vmin = num2str(guiparams.depth_range_min);
0841         vmax = num2str(guiparams.depth_range_max);
0842         pvheaders = {<span class="keyword">...</span>
0843             <span class="string">'UTM_East_WGS84'</span> <span class="string">'UTM_North_WGS84'</span> <span class="string">'Dist_m'</span> <span class="string">'Bed_Elev_m'</span><span class="keyword">...</span>
0844             [<span class="string">'EastDAV_cms_dpthrng_'</span> vmin <span class="string">'_to_'</span> vmax <span class="string">'m'</span>]<span class="keyword">...</span>
0845             [<span class="string">'NorthDAV_cms_dpthrng_'</span> vmin <span class="string">'_to_'</span> vmax <span class="string">'m'</span>]<span class="keyword">...</span>
0846             <span class="string">'Vel_mag_cms'</span> <span class="string">'Vel_dir_deg'</span>};
0847         
0848         <span class="comment">% Create block style matrix of all processed data</span>
0849         pvdata = [];
0850         
0851         <span class="comment">% Sort the Distances such that when plotting in 2D (Dist. vs. Depth),</span>
0852         <span class="comment">% you are looking upstream into the transect</span>
0853         Dist = sort(V.mcsDist,2,<span class="string">'descend'</span>);
0854         
0855         <span class="comment">% Build bathy data matrix</span>
0856         pvdata = [V.mcsX(1,:); V.mcsY(1,:); Dist(1,:); V.mcsBedElev];
0857         
0858         <span class="comment">% Build layer-averaged velocities</span>
0859         indx = find(V.mcsDepth(:,1) &lt; str2num(vmin) | V.mcsDepth(:,1) &gt; str2num(vmax));
0860         V.mcsX(indx,:) = nan;
0861         V.mcsY(indx,:) = nan;
0862         V.mcsEast(indx,:) = nan;
0863         V.mcsNorth(indx,:) = nan;
0864         pvdata = [<span class="keyword">...</span>
0865             pvdata;<span class="keyword">...</span>
0866             <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast);<span class="keyword">...</span>
0867             <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth);<span class="keyword">...</span>
0868             sqrt(<a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast).^2 + <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth).^2);<span class="keyword">...</span>
0869             ari2geodeg(atan2(<a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsNorth), <a href="VMT_LayerAveMean.html" class="code" title="function lam = VMT_LayerAveMean(x,y)">VMT_LayerAveMean</a>(V.mcsDepth,V.mcsEast))*180/pi)];
0870         pvdata(isnan(pvdata)) = -9999;
0871         pvout = num2cell(pvdata');
0872         pvout = vertcat(pvheaders,pvout);
0873         xlswrite(outfile,pvout,<span class="string">'Planview'</span>);
0874         waitbar(4/5,hwait)
0875         
0876         <span class="comment">% Save MCS data to an Excel File</span>
0877         mcsheaders = {<span class="keyword">...</span>
0878             <span class="string">'UTM_East'</span> <span class="keyword">...</span>
0879             <span class="string">'UTM_North'</span><span class="keyword">...</span>
0880             <span class="string">'Distance from Left Bank, in meters'</span><span class="keyword">...</span>
0881             <span class="string">'Elevation, in meters'</span><span class="keyword">...</span>
0882             <span class="keyword">...</span><span class="comment">'Bed Elevation, in meters'...</span>
0883             <span class="string">'East Velocity, in cm/s'</span><span class="keyword">...</span>
0884             <span class="string">'North Velocity, in cm/s'</span><span class="keyword">...</span>
0885             <span class="string">'Vertical Velocity, in cm/s'</span><span class="keyword">...</span>
0886             <span class="string">'Velocity Magnitude, in cm/s'</span><span class="keyword">...</span>
0887             <span class="string">'Velocity Direction, in degrees (geographic coordinates)'</span><span class="keyword">...</span>
0888             <span class="string">'Streamwise Velocity, in cm/s'</span><span class="keyword">...</span>
0889             <span class="string">'Transverse Velocity, in cm/s'</span><span class="keyword">...</span>
0890             <span class="string">'Primary Velocity (zsd), in cm/s'</span><span class="keyword">...</span>
0891             <span class="string">'Secondary Velocity (zsd), in cm/s'</span><span class="keyword">...</span>
0892             <span class="string">'Primary Velocity (roz), in cm/s'</span><span class="keyword">...</span>
0893             <span class="string">'Secondary Velocity (roz), in cm/s'</span>};
0894         
0895         mcsdata = [<span class="keyword">...</span>
0896             V.mcsX(:)<span class="keyword">...</span>
0897             V.mcsY(:)<span class="keyword">...</span>
0898             V.mcsDist(:)<span class="keyword">...</span>
0899             (wse - V.mcsDepth(:))<span class="keyword">...</span>
0900             <span class="keyword">...</span><span class="comment">repmat((wse - V.mcsBed(:)),size(V.mcsX,1),1)...</span>
0901             V.mcsEast(:)<span class="keyword">...</span>
0902             V.mcsNorth(:)<span class="keyword">...</span>
0903             V.mcsVert(:)<span class="keyword">...</span>
0904             V.mcsMag(:)<span class="keyword">...</span>
0905             V.mcsDir(:)<span class="keyword">...</span>
0906             V.u(:)<span class="keyword">...</span>
0907             V.v(:)<span class="keyword">...</span>
0908             V.vp(:)<span class="keyword">...</span>
0909             V.vs(:)<span class="keyword">...</span>
0910             V.Roz.up(:)<span class="keyword">...</span>
0911             V.Roz.us(:)];
0912         mcsdata(isnan(mcsdata)) = -9999;
0913         
0914         mcsout = vertcat(mcsheaders,num2cell(mcsdata));
0915         xlswrite(outfile,mcsout,<span class="string">'MeanCrossSection'</span>);
0916         waitbar(1,hwait)
0917         delete(hwait)
0918         
0919     <span class="keyword">else</span>
0920         <span class="comment">% Return default excel_path and excel_file</span>
0921         excel_path = guiprefs.excel_path;
0922         excel_file = guiprefs.excel_file;
0923         outfile = fullfile(excel_path,excel_file);
0924         log_text = {<span class="string">'User aborted Excel export...'</span>};
0925     <span class="keyword">end</span>
0926     
0927     
0928     
0929 <span class="keyword">end</span>
0930 
0931 <span class="comment">% Push messages to Log Window:</span>
0932 <span class="comment">% ----------------------------</span>
0933 statusLogging(handles.LogWindow, log_text)
0934 
0935 <span class="comment">% Store the persistent preferences:</span>
0936 <span class="comment">% ---------------------------------</span>
0937 guiprefs.excel_file = excel_file;
0938 guiprefs.excel_path = excel_path;
0939 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0940 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'excel'</span>)
0941 
0942 <span class="comment">% [EOF] menuSaveExcel_Callback</span>
0943 
0944 <span class="comment">% --------------------------------------------------------------------</span>
0945 <a name="_sub26" href="#_subfunctions" class="code">function menuParameters_Callback(hObject, eventdata, handles)</a>
0946 <span class="comment">% Empty</span>
0947 
0948 <span class="comment">% --------------------------------------------------------------------</span>
0949 <a name="_sub27" href="#_subfunctions" class="code">function menuProcessingParameters_Callback(hObject, eventdata, handles)</a>
0950 <span class="comment">% Empty</span>
0951 
0952 <span class="comment">% --------------------------------------------------------------------</span>
0953 <a name="_sub28" href="#_subfunctions" class="code">function menuUnitDischargeCorrection_Callback(hObject, eventdata, handles)</a>
0954 <span class="comment">% Turn ON or OFF Unit Discharge Correction</span>
0955 
0956 <span class="comment">% Get the Application Data:</span>
0957 <span class="comment">% -------------------------</span>
0958 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0959 
0960 <span class="comment">% Update the GUI &amp; Application Data:</span>
0961 <span class="comment">% ----------------------------------</span>
0962 status = get(handles.menuUnitDischargeCorrection,<span class="string">'Checked'</span>);
0963 <span class="keyword">switch</span> status
0964     <span class="keyword">case</span> <span class="string">'on'</span> <span class="comment">% Turn it off</span>
0965         set(handles.menuUnitDischargeCorrection, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0966         guiparams.unit_discharge_correction = false;
0967     <span class="keyword">case</span> <span class="string">'off'</span> <span class="comment">% Turn it on</span>
0968         set(handles.menuUnitDischargeCorrection, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0969         guiparams.unit_discharge_correction = true;
0970 <span class="keyword">end</span>
0971 
0972 <span class="comment">% Re-store the Application data:</span>
0973 <span class="comment">% ------------------------------</span>
0974 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0975 
0976 
0977 <span class="comment">%  [EOF] menuUnitDischargeCorrection_Callback</span>
0978 
0979 <span class="comment">% --------------------------------------------------------------------</span>
0980 <a name="_sub29" href="#_subfunctions" class="code">function menuPlottingParameters_Callback(hObject, eventdata, handles)</a>
0981 <span class="comment">% Empty</span>
0982 
0983 <span class="comment">% --------------------------------------------------------------------</span>
0984 <a name="_sub30" href="#_subfunctions" class="code">function menuUnits_Callback(hObject, eventdata, handles)</a>
0985 <span class="comment">% Empty</span>
0986 
0987 <span class="comment">% --------------------------------------------------------------------</span>
0988 <a name="_sub31" href="#_subfunctions" class="code">function menuMetric_Callback(hObject, eventdata, handles)</a>
0989 <span class="comment">% Set the Plotting Parameter Units to &quot;metric&quot;</span>
0990 
0991 <span class="comment">% Get the Application Data:</span>
0992 <span class="comment">% -------------------------</span>
0993 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0994 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0995 
0996 <span class="comment">% Update the Application Data:</span>
0997 <span class="comment">% ----------------------------</span>
0998 guiparams.english_units = false;
0999 guiprefs.units = <span class="string">'metric'</span>;
1000 
1001 <span class="comment">% Re-store the Application data:</span>
1002 <span class="comment">% ------------------------------</span>
1003 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1004 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1005 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'units'</span>)
1006 
1007 <span class="comment">% Update the GUI:</span>
1008 <span class="comment">% ---------------</span>
1009 set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1010 set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1011 
1012 <span class="comment">% [EOF] menuMetric_Callback</span>
1013 
1014 
1015 <span class="comment">% --------------------------------------------------------------------</span>
1016 <a name="_sub32" href="#_subfunctions" class="code">function menuEnglish_Callback(hObject, eventdata, handles)</a>
1017 <span class="comment">% Set the Plotting Parameter Units to &quot;english&quot;</span>
1018 
1019 <span class="comment">% Get the Application Data:</span>
1020 <span class="comment">% -------------------------</span>
1021 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1022 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1023 
1024 <span class="comment">% Update the Application Data:</span>
1025 <span class="comment">% ----------------------------</span>
1026 guiparams.english_units = true;
1027 guiprefs.units = <span class="string">'english'</span>;
1028 
1029 <span class="comment">% Re-store the Application data:</span>
1030 <span class="comment">% ------------------------------</span>
1031 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1032 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1033 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'units'</span>)
1034 
1035 <span class="comment">% Update the GUI:</span>
1036 <span class="comment">% ---------------</span>
1037 set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1038 set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1039 
1040 <span class="comment">% [EOF] menuEnglish_Callback</span>
1041 
1042 
1043 <span class="comment">% --------------------------------------------------------------------</span>
1044 <a name="_sub33" href="#_subfunctions" class="code">function menuSetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a>
1045 <span class="comment">% Empty</span>
1046 
1047 <span class="comment">% --------------------------------------------------------------------</span>
1048 <a name="_sub34" href="#_subfunctions" class="code">function menuCrossSectionEndpointAutomatic_Callback(hObject, eventdata, handles)</a>
1049 <span class="comment">% Set cross-section endpoints automatically</span>
1050 
1051 <span class="comment">% Get the Application Data:</span>
1052 <span class="comment">% -------------------------</span>
1053 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1054 
1055 <span class="comment">% Update the Application Data:</span>
1056 <span class="comment">% ----------------------------</span>
1057 guiparams.set_cross_section_endpoints = false;
1058 
1059 <span class="comment">% Re-store the Application data:</span>
1060 <span class="comment">% ------------------------------</span>
1061 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1062 
1063 <span class="comment">% Update the GUI:</span>
1064 <span class="comment">% ---------------</span>
1065 set(handles.menuCrossSectionEndpointAutomatic, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1066 set(handles.menuCrossSectionEndpointManual,    <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1067 
1068 <span class="comment">% [EOF] menuCrossSectionEndpointAutomatic_Callback</span>
1069 
1070 
1071 <span class="comment">% --------------------------------------------------------------------</span>
1072 <a name="_sub35" href="#_subfunctions" class="code">function menuCrossSectionEndpointManual_Callback(hObject, eventdata, handles)</a>
1073 <span class="comment">% Set cross-section endpoints manually</span>
1074 
1075 <span class="comment">% Get the Application Data:</span>
1076 <span class="comment">% -------------------------</span>
1077 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1078 
1079 <span class="comment">% Update the Application Data:</span>
1080 <span class="comment">% ----------------------------</span>
1081 guiparams.set_cross_section_endpoints = true;
1082 
1083 <span class="comment">% Re-store the Application data:</span>
1084 <span class="comment">% ------------------------------</span>
1085 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1086 
1087 <span class="comment">% Update the GUI:</span>
1088 <span class="comment">% ---------------</span>
1089 set(handles.menuCrossSectionEndpointAutomatic, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1090 set(handles.menuCrossSectionEndpointManual,    <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1091 
1092 <span class="comment">% [EOF] menuCrossSectionEndpointManual_Callback</span>
1093 
1094 
1095 
1096 
1097 <span class="comment">% --------------------------------------------------------------------</span>
1098 <a name="_sub36" href="#_subfunctions" class="code">function menuPlotStyle_Callback(hObject, eventdata, handles)</a>
1099 <span class="comment">% Empty</span>
1100 
1101 <span class="comment">% --------------------------------------------------------------------</span>
1102 <a name="_sub37" href="#_subfunctions" class="code">function menuStylePrint_Callback(hObject, eventdata, handles)</a>
1103 
1104 <span class="comment">% Get the Application Data:</span>
1105 <span class="comment">% -------------------------</span>
1106 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1107 
1108 <span class="comment">% Update the Application Data:</span>
1109 <span class="comment">% ----------------------------</span>
1110 guiparams.print        = true;
1111 guiparams.presentation = false;
1112 
1113 <span class="comment">% Re-store the Application data:</span>
1114 <span class="comment">% ------------------------------</span>
1115 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1116 
1117 <span class="comment">% Update the GUI:</span>
1118 <span class="comment">% ---------------</span>
1119 set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1120 set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1121 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1122 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1123 
1124 <span class="comment">% Modify the existing figures</span>
1125 <span class="comment">% ---------------------------</span>
1126 <span class="comment">% Find what plots exist already</span>
1127 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
1128 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
1129 
1130 <span class="comment">% Defaults for Print Stlye Figure</span>
1131 BkgdColor   = <span class="string">'white'</span>;
1132 AxColor     = <span class="string">'black'</span>;
1133 FigColor    = <span class="string">'white'</span>; <span class="comment">% [0.3 0.3 0.3]</span>
1134 FntSize     = 14;
1135 
1136 <span class="comment">% Loop through valid figures and adjust</span>
1137 <span class="comment">% -------------------------------------</span>
1138 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
1139     
1140     <span class="keyword">for</span> i = 1:length(valid_names)
1141         <span class="keyword">switch</span> valid_names{i}
1142             <span class="keyword">case</span> <span class="string">'Plan View Map'</span>
1143                 <span class="comment">% Focus the figure</span>
1144                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
1145                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1146                     figure(hff)
1147                     
1148                     <span class="comment">% Make the changes to figure</span>
1149                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1150                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1151                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1152                     set(gca,<span class="string">'Color'</span>,FigColor)
1153                     set(gca,<span class="string">'XColor'</span>,AxColor)
1154                     set(gca,<span class="string">'YColor'</span>,AxColor)
1155                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1156                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1157                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1158                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1159                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1160                     
1161                     <span class="comment">% Add a text object at the bottom of the figure with</span>
1162                     <span class="comment">% the file(s) and path for the data</span>
1163                     ismultiplot = numel(guiparams.mat_file)&gt;1;
1164                     <span class="keyword">if</span> ~ismultiplot
1165                         filestr = guiparams.savefile;
1166                         wd = length(filestr);
1167                         hd = 1;
1168                     <span class="keyword">else</span>
1169                         <span class="comment">% Construct a filename</span>
1170                         filestr   = [{guiparams.mat_path};guiparams.mat_file'];
1171                         wd        = max(cellfun(@length,filestr));
1172                         hd        = numel(filestr);
1173                             
1174                     <span class="keyword">end</span>
1175                     
1176                     fileinfotxt = uicontrol(<span class="string">'style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>,<span class="string">'characters'</span>);
1177                     disableMenuBar(hff)
1178                     set(fileinfotxt,<span class="keyword">...</span>
1179                         <span class="string">'string'</span>,filestr)
1180                     set(fileinfotxt,<span class="keyword">...</span>
1181                         <span class="string">'position'</span>,[0,0,wd,hd],<span class="keyword">...</span>
1182                         <span class="string">'Fontsize'</span>,FntSize/2,<span class="keyword">...</span>
1183                         <span class="string">'ForegroundColor'</span>,AxColor,<span class="keyword">...</span>
1184                         <span class="string">'BackgroundColor'</span>,BkgdColor,<span class="keyword">...</span>
1185                         <span class="string">'HorizontalAlignment'</span>,<span class="string">'Left'</span>,<span class="keyword">...</span>
1186                         <span class="string">'Visible'</span>,<span class="string">'off'</span>)  <span class="comment">% hide this by default, editFigureDialog handles it now)</span>
1187                     
1188                 <span class="keyword">end</span>
1189             <span class="keyword">case</span> <span class="string">'Mean Cross Section Contour'</span>
1190                 <span class="comment">% Focus the figure</span>
1191                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
1192                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1193                     figure(hff)
1194                     
1195                     <span class="comment">% Make the changes to figure</span>
1196                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1197                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1198                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1199                     set(gca,<span class="string">'Color'</span>,FigColor)
1200                     set(gca,<span class="string">'XColor'</span>,AxColor)
1201                     set(gca,<span class="string">'YColor'</span>,AxColor)
1202                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1203                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1204                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1205                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1206                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1207                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'PlotBedElevation'</span>)   ,<span class="string">'color'</span>    ,AxColor)
1208                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'ReferenceVectorText'</span>),<span class="string">'color'</span>    ,AxColor)
1209                     
1210                     <span class="comment">% Add a text object at the bottom of the figure with</span>
1211                     <span class="comment">% the file(s) and path for the data</span>
1212                     ismultiplot = numel(guiparams.mat_file)&gt;1;
1213                     <span class="keyword">if</span> ~ismultiplot
1214                         filestr = guiparams.savefile;
1215                         wd = length(filestr);
1216                         hd = 1;
1217                     <span class="keyword">else</span>
1218                         <span class="comment">% Construct a filename</span>
1219                         filestr   = [{guiparams.mat_path};guiparams.mat_file'];
1220                         wd        = max(cellfun(@length,filestr));
1221                         hd        = numel(filestr);
1222                             
1223                     <span class="keyword">end</span>
1224                     
1225                     fileinfotxt = uicontrol(<span class="string">'style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>,<span class="string">'characters'</span>);
1226                     disableMenuBar(hff)
1227                     set(fileinfotxt,<span class="keyword">...</span>
1228                         <span class="string">'string'</span>,filestr)
1229                     set(fileinfotxt,<span class="keyword">...</span>
1230                         <span class="string">'position'</span>,[0,0,wd,hd],<span class="keyword">...</span>
1231                         <span class="string">'Fontsize'</span>,FntSize/2,<span class="keyword">...</span>
1232                         <span class="string">'ForegroundColor'</span>,AxColor,<span class="keyword">...</span>
1233                         <span class="string">'BackgroundColor'</span>,BkgdColor,<span class="keyword">...</span>
1234                         <span class="string">'HorizontalAlignment'</span>,<span class="string">'Left'</span>,<span class="keyword">...</span>
1235                         <span class="string">'Visible'</span>,<span class="string">'off'</span>)  <span class="comment">% hide this by default, editFigureDialog handles it now</span>
1236                 <span class="keyword">end</span>
1237             <span class="keyword">otherwise</span>
1238         <span class="keyword">end</span>
1239     <span class="keyword">end</span>
1240     
1241     
1242 <span class="keyword">end</span>
1243 
1244 
1245 <span class="comment">%[EOF] menuStylePrint_Callback</span>
1246 
1247 
1248 <span class="comment">% --------------------------------------------------------------------</span>
1249 <a name="_sub38" href="#_subfunctions" class="code">function menuStylePresentation_Callback(hObject, eventdata, handles)</a>
1250 <span class="comment">% Get the Application Data:</span>
1251 <span class="comment">% -------------------------</span>
1252 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1253 
1254 <span class="comment">% Update the Application Data:</span>
1255 <span class="comment">% ----------------------------</span>
1256 guiparams.print        = false;
1257 guiparams.presentation = true;
1258 
1259 <span class="comment">% Re-store the Application data:</span>
1260 <span class="comment">% ------------------------------</span>
1261 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1262 
1263 <span class="comment">% Update the GUI:</span>
1264 <span class="comment">% ---------------</span>
1265 set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1266 set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1267 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1268 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1269 
1270 <span class="comment">% Modify the existing figures</span>
1271 <span class="comment">% ---------------------------</span>
1272 <span class="comment">% Find what plots exist already</span>
1273 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
1274 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
1275 
1276 <span class="comment">% Defaults for Presentation Stlye Figure</span>
1277 <span class="comment">% --------------------------------------</span>
1278 BkgdColor   = <span class="string">'black'</span>;
1279 AxColor     = <span class="string">'white'</span>;
1280 FigColor    = <span class="string">'black'</span>; <span class="comment">% [0.3 0.3 0.3]</span>
1281 FntSize     = 14;
1282 
1283 <span class="comment">% Loop through valid figures and adjust</span>
1284 <span class="comment">% -------------------------------------</span>
1285 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
1286     
1287     <span class="keyword">for</span> i = 1:length(valid_names)
1288         <span class="keyword">switch</span> valid_names{i}
1289             <span class="keyword">case</span> <span class="string">'Plan View Map'</span>
1290                 <span class="comment">% Focus the figure</span>
1291                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
1292                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1293                     figure(hff)
1294                     
1295                     <span class="comment">% Make the changes to figure</span>
1296                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1297                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1298                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1299                     set(gca,<span class="string">'Color'</span>,FigColor)
1300                     set(gca,<span class="string">'XColor'</span>,AxColor)
1301                     set(gca,<span class="string">'YColor'</span>,AxColor)
1302                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1303                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1304                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1305                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1306                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1307                     
1308                     <span class="comment">% Add a text object at the bottom of the figure with</span>
1309                     <span class="comment">% the file(s) and path for the data</span>
1310                     ismultiplot = numel(guiparams.mat_file)&gt;1;
1311                     <span class="keyword">if</span> ~ismultiplot
1312                         filestr = guiparams.savefile;
1313                         wd = length(filestr);
1314                         hd = 1;
1315                     <span class="keyword">else</span>
1316                         <span class="comment">% Construct a filename</span>
1317                         filestr   = [{guiparams.mat_path};guiparams.mat_file'];
1318                         wd        = max(cellfun(@length,filestr));
1319                         hd        = numel(filestr);
1320                             
1321                     <span class="keyword">end</span>
1322                     
1323                     fileinfotxt = uicontrol(<span class="string">'style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>,<span class="string">'characters'</span>);
1324                     disableMenuBar(hff)
1325                     set(fileinfotxt,<span class="keyword">...</span>
1326                         <span class="string">'string'</span>,filestr)
1327                     set(fileinfotxt,<span class="keyword">...</span>
1328                         <span class="string">'position'</span>,[0,0,wd,hd],<span class="keyword">...</span>
1329                         <span class="string">'Fontsize'</span>,FntSize/2,<span class="keyword">...</span>
1330                         <span class="string">'ForegroundColor'</span>,AxColor,<span class="keyword">...</span>
1331                         <span class="string">'BackgroundColor'</span>,BkgdColor,<span class="keyword">...</span>
1332                         <span class="string">'HorizontalAlignment'</span>,<span class="string">'Left'</span>,<span class="keyword">...</span>
1333                         <span class="string">'Visible'</span>,<span class="string">'off'</span>)  <span class="comment">% hide this by default, editFigureDialog handles it now)</span>
1334                     
1335                 <span class="keyword">end</span>
1336             <span class="keyword">case</span> <span class="string">'Mean Cross Section Contour'</span>
1337                 <span class="comment">% Focus the figure</span>
1338                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
1339                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1340                     figure(hff)
1341                     
1342                     <span class="comment">% Make the changes to figure</span>
1343                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1344                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1345                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1346                     set(gca,<span class="string">'Color'</span>,[0.3 0.3 0.3]) <span class="comment">%FigColor)</span>
1347                     set(gca,<span class="string">'XColor'</span>,AxColor)
1348                     set(gca,<span class="string">'YColor'</span>,AxColor)
1349                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1350                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'XColor'</span>,AxColor,<span class="string">'YColor'</span>,AxColor);
1351                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1352                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1353                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1354                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'PlotBedElevation'</span>)   ,<span class="string">'color'</span>    ,AxColor)
1355                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'ReferenceVectorText'</span>),<span class="string">'color'</span>    ,AxColor)
1356                     
1357                     <span class="comment">% Add a text object at the bottom of the figure with</span>
1358                     <span class="comment">% the file(s) and path for the data</span>
1359                     ismultiplot = numel(guiparams.mat_file)&gt;1;
1360                     <span class="keyword">if</span> ~ismultiplot
1361                         filestr = guiparams.savefile;
1362                         wd = length(filestr);
1363                         hd = 1;
1364                     <span class="keyword">else</span>
1365                         <span class="comment">% Construct a filename</span>
1366                         filestr   = [{guiparams.mat_path};guiparams.mat_file'];
1367                         wd        = max(cellfun(@length,filestr));
1368                         hd        = numel(filestr);
1369                             
1370                     <span class="keyword">end</span>
1371                     
1372                     fileinfotxt = uicontrol(<span class="string">'style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>,<span class="string">'characters'</span>);
1373                     disableMenuBar(hff)
1374                     set(fileinfotxt,<span class="keyword">...</span>
1375                         <span class="string">'string'</span>,filestr)
1376                     set(fileinfotxt,<span class="keyword">...</span>
1377                         <span class="string">'position'</span>,[0,0,wd,hd],<span class="keyword">...</span>
1378                         <span class="string">'Fontsize'</span>,FntSize/2,<span class="keyword">...</span>
1379                         <span class="string">'ForegroundColor'</span>,AxColor,<span class="keyword">...</span>
1380                         <span class="string">'BackgroundColor'</span>,BkgdColor,<span class="keyword">...</span>
1381                         <span class="string">'HorizontalAlignment'</span>,<span class="string">'Left'</span>,<span class="keyword">...</span>
1382                         <span class="string">'Visible'</span>,<span class="string">'off'</span>)  <span class="comment">% hide this by default, editFigureDialog handles it now</span>
1383                 <span class="keyword">end</span>
1384             <span class="keyword">otherwise</span>
1385         <span class="keyword">end</span>
1386     <span class="keyword">end</span>
1387     
1388     
1389 <span class="keyword">end</span>
1390 
1391 <span class="comment">% [EOF] menuStylePresentation_Callback</span>
1392 
1393 <span class="comment">% --------------------------------------------------------------------</span>
1394 <a name="_sub39" href="#_subfunctions" class="code">function menuKMZVerticalOffset_Callback(hObject, eventdata, handles)</a>
1395 
1396 <span class="comment">% Get the Application data:</span>
1397 <span class="comment">% -------------------------</span>
1398 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1399 
1400 <span class="comment">% Initialize the answer:</span>
1401 <span class="comment">% ----------------------</span>
1402 numstr = {num2str(guiparams.vertical_offset)};
1403 answer = NaN;
1404 <span class="keyword">while</span> isnan(answer)
1405     answer = inputdlg(<span class="string">'Vertical Offset (m)'</span>,<span class="string">'KMZ Export'</span>,1,numstr);
1406     
1407     <span class="keyword">if</span> isempty(answer) <span class="comment">% User hits &quot;Cancel&quot;</span>
1408         <span class="keyword">return</span>
1409     <span class="keyword">end</span>
1410     
1411     answer = str2double(answer); <span class="comment">% A non-numeric char will be NaN</span>
1412     <span class="comment">% A numeric char will be a double</span>
1413 <span class="keyword">end</span>
1414 
1415 <span class="comment">% Re-store the Application data:</span>
1416 <span class="comment">% ------------------------------</span>
1417 guiparams.vertical_offset = answer;
1418 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1419 
1420 <span class="comment">% [EOF] menuKMZExport_Callback</span>
1421 
1422 <span class="comment">% --------------------------------------------------------------------</span>
1423 <a name="_sub40" href="#_subfunctions" class="code">function menuBathymetryParameters_Callback(hObject, eventdata, handles)</a>
1424 <span class="comment">% Not implemented</span>
1425 
1426 <span class="comment">% --------------------------------------------------------------------</span>
1427 <a name="_sub41" href="#_subfunctions" class="code">function menuTools_Callback(hObject, eventdata, handles)</a>
1428 <span class="comment">% Empty</span>
1429 
1430 <span class="comment">% --------------------------------------------------------------------</span>
1431 <a name="_sub42" href="#_subfunctions" class="code">function menuASCII2GIS_Callback(hObject, eventdata, handles)</a>
1432 ASCII2GIS_GUI
1433 <span class="comment">% [EOF] menuASCII2GIS_Callback</span>
1434 
1435 <span class="comment">% --------------------------------------------------------------------</span>
1436 <a name="_sub43" href="#_subfunctions" class="code">function menuASCII2KML_Callback(hObject, eventdata, handles)</a>
1437 
1438 <span class="comment">% Get the Application preferences:</span>
1439 <span class="comment">% --------------------------------</span>
1440 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1441 
1442 inpath = guiprefs.kmz_path;
1443 <span class="keyword">if</span> iscell(guiprefs.kmz_file)
1444     infile = guiprefs.kmz_file{1};
1445 <span class="keyword">else</span>
1446     infile = guiprefs.kmz_file;
1447 <span class="keyword">end</span>
1448 [log_text,outpath,outfile] = ASCII2KML(inpath,infile);
1449 
1450 guiprefs.kmz_path = outpath;
1451 guiprefs.kmz_file = outfile;
1452 
1453 <span class="comment">% Update persistent preferences</span>
1454 <span class="comment">% -----------------------------</span>
1455 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1456 
1457 <span class="comment">% [EOF] menuASCII2KML_Callback</span>
1458 
1459 <span class="comment">% --------------------------------------------------------------------</span>
1460 <a name="_sub44" href="#_subfunctions" class="code">function menuOpenBatchMode_Callback(hObject, eventdata, handles)</a>
1461 <span class="comment">% Get the Application preferences:</span>
1462 <span class="comment">% --------------------------------</span>
1463 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1464 
1465 VMT_BatchMode;
1466 <span class="comment">% [EOF] menuOpenBatchMode_Callback</span>
1467 
1468 <span class="comment">% --------------------------------------------------------------------</span>
1469 <a name="_sub45" href="#_subfunctions" class="code">function menuHelp_Callback(hObject, eventdata, handles)</a>
1470 <span class="comment">% Empty</span>
1471 
1472 <span class="comment">% --------------------------------------------------------------------</span>
1473 <a name="_sub46" href="#_subfunctions" class="code">function menuUsersGuide_Callback(hObject, eventdata, handles)</a>
1474 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1475 <span class="keyword">try</span> <span class="comment">% to open the User Guide PDF</span>
1476     open([pwd filesep <span class="string">'doc'</span> filesep <span class="string">'VMT User Guide '</span> guiparams.vmt_version <span class="string">'.pdf'</span>]);
1477     
1478 <span class="keyword">catch</span> err <span class="comment">%#ok&lt;NASGU&gt;</span>
1479     
1480     <span class="keyword">if</span> isdeployed
1481         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1482             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1483         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1484             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1485             errLogFileName},<span class="keyword">...</span>
1486             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1487             <span class="string">'error'</span>);
1488         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1489         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1490         fclose(fid);
1491         rethrow(err)
1492     <span class="keyword">else</span>
1493         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1494             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1495             <span class="string">'error'</span>);
1496         rethrow(err);
1497     <span class="keyword">end</span>
1498 <span class="keyword">end</span>
1499 <span class="comment">% [EOF] menuASCII2KML_Callback</span>
1500 
1501 <span class="comment">% --------------------------------------------------------------------</span>
1502 <a name="_sub47" href="#_subfunctions" class="code">function menuFunctionLibrary_Callback(hObject, eventdata, handles)</a>
1503 <span class="comment">% Get the Application data:</span>
1504 <span class="comment">% -------------------------</span>
1505 <span class="comment">% guiparams = getappdata(handles.figure1,'guiparams'); %#ok&lt;NASGU&gt;</span>
1506 
1507 <span class="keyword">try</span>
1508     <span class="comment">% Construct a URL to a local file which can be interpreted by any</span>
1509     <span class="comment">% web-browser</span>
1510     rootpath = strrep(pwd,filesep,<span class="string">'/'</span>);
1511     webaddress = [<span class="string">'file:///'</span> rootpath <span class="string">'/doc/index.html'</span>];
1512     system([<span class="string">'start '</span> webaddress]);
1513 <span class="comment">%     [stat,h,url] = web(webaddress) % Produced with m2html (FEX)</span>
1514 <span class="keyword">catch</span> err 
1515     <span class="keyword">if</span> isdeployed
1516         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1517             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1518         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1519             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1520             errLogFileName},<span class="keyword">...</span>
1521             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1522             <span class="string">'error'</span>);
1523         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1524         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1525         fclose(fid);
1526         rethrow(err)
1527     <span class="keyword">else</span>
1528         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1529             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1530             <span class="string">'error'</span>);
1531         rethrow(err);
1532     <span class="keyword">end</span>
1533 <span class="keyword">end</span>
1534 
1535 <span class="comment">% [EOF] menuFunctionLibrary_Callback</span>
1536 
1537 <span class="comment">% --------------------------------------------------------------------</span>
1538 <a name="_sub48" href="#_subfunctions" class="code">function menuCheckForUpdates_Callback(hObject, eventdata, handles)</a>
1539 
1540 <span class="comment">% Get the Application data:</span>
1541 <span class="comment">% -------------------------</span>
1542 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1543 
1544 <span class="comment">% Check version tag against the web, and display a message</span>
1545 <span class="keyword">try</span>
1546     current_vmt_version = urlread(<span class="string">'http://hydroacoustics.usgs.gov/movingboat/VMT/VMT_version.txt'</span>);
1547     <span class="comment">%     current_vmt_version = urlread('http://hydroacoustics.usgs.gov/movingboat/VMT/VMT_version.txt');</span>
1548 <span class="keyword">catch</span> err <span class="comment">%#ok&lt;NASGU&gt;</span>
1549     <span class="keyword">if</span> isdeployed
1550         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1551             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1552         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1553             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1554             errLogFileName},<span class="keyword">...</span>
1555             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1556             <span class="string">'error'</span>);
1557         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1558         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1559         fclose(fid);
1560         rethrow(err)
1561     <span class="keyword">else</span>
1562         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1563             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1564             <span class="string">'error'</span>);
1565         rethrow(err);
1566     <span class="keyword">end</span>
1567 <span class="keyword">end</span>
1568 
1569 <span class="keyword">if</span> strcmpi(guiparams.vmt_version,current_vmt_version)
1570     h = msgbox(<span class="string">'VMT is currently up to date, no updates available.'</span>,<span class="string">'Check for updates'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1571 <span class="keyword">else</span>
1572     h = msgbox(<span class="string">'VMT is out of date. Please visit the VMT homepage.'</span>,<span class="string">'Check for updates'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1573 <span class="keyword">end</span>
1574 <span class="comment">% [EOF] menuCheckForUpdates_Callback</span>
1575 
1576 <span class="comment">% --------------------------------------------------------------------</span>
1577 <a name="_sub49" href="#_subfunctions" class="code">function menuAbout_Callback(hObject, eventdata, handles)</a>
1578 
1579 <span class="comment">% Get the Application data:</span>
1580 <span class="comment">% -------------------------</span>
1581 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1582 messagestr = <span class="keyword">...</span>
1583     {<span class="string">'The Velocity Mapping Toolbox'</span>;<span class="keyword">...</span>
1584     [<span class="string">'   Version: '</span> guiparams.vmt_version];<span class="keyword">...</span>
1585     <span class="string">''</span>;<span class="keyword">...</span>
1586     <span class="string">''</span>;<span class="keyword">...</span>
1587     <span class="string">'With collaborations from:'</span>;<span class="keyword">...</span>
1588     <span class="string">'   U.S. Geological Survey'</span>;<span class="keyword">...</span>
1589     <span class="string">'   University of Illinois'</span>;<span class="keyword">...</span>
1590     <span class="string">'   University of Hull'</span>;<span class="keyword">...</span>
1591     <span class="string">''</span>;<span class="keyword">...</span>
1592     <span class="string">''</span>;<span class="keyword">...</span>
1593     <span class="string">'Citation: '</span>;<span class="keyword">...</span>
1594     <span class="string">'   Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L.,'</span>;<span class="keyword">...</span>
1595     <span class="string">'   Rhoads, B. L., Oberg, K. A., Best, J. L., Mueller, D. S.,'</span>;<span class="keyword">...</span>
1596     <span class="string">'   Johnson, K. K. and Riley, J. D. (2013), Velocity Mapping'</span>;<span class="keyword">...</span>
1597     <span class="string">'   Toolbox (VMT): a processing and visualization suite for'</span>;<span class="keyword">...</span>
1598     <span class="string">'   moving-vessel ADCP measurements. Earth Surf. Process.'</span>;<span class="keyword">...</span>
1599     <span class="string">'   Landforms.doi: 10.1002/esp.3367'</span>};
1600 h = msgbox(messagestr,<span class="string">'About VMT'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1601 <span class="comment">% [EOF] menuAbout_Callback</span>
1602 
1603 
1604 
1605 
1606 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
1607 <span class="comment">% TOOLBAR CALLBACKS %</span>
1608 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
1609 
1610 <span class="comment">% --------------------------------------------------------------------</span>
1611 <a name="_sub50" href="#_subfunctions" class="code">function loadDataCallback(hObject, eventdata, handles)</a>
1612 <span class="comment">% Read Files into Data Structure using tfile.</span>
1613 
1614 <span class="comment">% Get the Application data:</span>
1615 <span class="comment">% -------------------------</span>
1616 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1617 guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1618 
1619 <span class="comment">% Ask the user to select files:</span>
1620 <span class="comment">% -----------------------------</span>
1621 current_file = fullfile(guiprefs.ascii_path,guiprefs.ascii_file{1});
1622 [filename,pathname] = uigetfile({<span class="string">'*_ASC.TXT'</span>,<span class="string">'ASCII (*_ASC.TXT)'</span>}, <span class="keyword">...</span>
1623     <span class="string">'Select the ASCII Output Files'</span>, <span class="keyword">...</span>
1624     current_file, <span class="keyword">...</span>
1625     <span class="string">'MultiSelect'</span>,<span class="string">'on'</span>);
1626 
1627 <span class="keyword">if</span> ischar(pathname) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
1628     guiparams.data_folder = pathname;
1629     <span class="keyword">if</span> ischar(filename)
1630         filename = {filename};
1631     <span class="keyword">end</span>
1632     guiparams.data_files = filename;
1633     guiparams.mat_file = <span class="string">''</span>;
1634     
1635     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1636     
1637    
1638     
1639     <span class="comment">% Update the preferences:</span>
1640     <span class="comment">% -----------------------</span>
1641     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1642     guiprefs.ascii_path = pathname;
1643     guiprefs.ascii_file = filename;
1644     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1645     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'ascii'</span>)
1646     
1647     <span class="comment">% Push messages to Log Window:</span>
1648     <span class="comment">% ----------------------------</span>
1649     log_text = {<span class="keyword">...</span>
1650         <span class="string">''</span>;<span class="keyword">...</span>
1651         [<span class="string">'%--- '</span> datestr(now) <span class="string">' ---%'</span>];<span class="keyword">...</span>
1652         <span class="string">'Current Project Directory:'</span>;<span class="keyword">...</span>
1653         guiparams.data_folder;
1654         <span class="string">'Loading the following files into memory:'</span>;<span class="keyword">...</span>
1655         char(filename)};
1656     statusLogging(handles.LogWindow, log_text)
1657     
1658     <span class="comment">% Read the file(s)</span>
1659     <span class="comment">% ----------------</span>
1660     [~,~,savefile,A,z] = <span class="keyword">...</span>
1661         <a href="VMT_ReadFiles.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles(zPathName,zFileName)">VMT_ReadFiles</a>(guiparams.data_folder,guiparams.data_files);
1662     guiparams.savefile = savefile;
1663     guiparams.A        = A;
1664     guiparams.z        = z;
1665     
1666     
1667     <span class="comment">% Set the vertical grid node spacing</span>
1668     <span class="comment">% ----------------------------------</span>
1669     <span class="comment">% For RioGrande probes, use the bin size, else just use the default</span>
1670     <span class="comment">% Backwards compatible</span>
1671     <span class="keyword">if</span> A(1).Sup.wm ~= 3 <span class="comment">% RG</span>
1672         set(handles.VerticalGridNodeSpacing,<span class="string">'String'</span>,double(A(1).Sup.binSize_cm(1))/100)
1673         guiparams.vertical_grid_node_spacing = double(A(1).Sup.binSize_cm(1))/100;
1674     <span class="keyword">else</span> <span class="comment">% Older file, must be RR or M9</span>
1675         set(handles.VerticalGridNodeSpacing,<span class="string">'String'</span>,0.4)
1676         guiparams.vertical_grid_node_spacing = 0.4;
1677     <span class="keyword">end</span>
1678     
1679     
1680     <span class="comment">% Save application data</span>
1681     <span class="comment">% ---------------------</span>
1682     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1683        
1684 <span class="comment">%</span>
1685 <span class="comment">%     % Preprocess the data:</span>
1686 <span class="comment">%     % --------------------</span>
1687 <span class="comment">%     A = VMT_PreProcess(z,A);</span>
1688 <span class="comment">%</span>
1689 <span class="comment">%     % Push messages to Log Window:</span>
1690 <span class="comment">%     % ----------------------------</span>
1691 <span class="comment">%     log_text = {...</span>
1692 <span class="comment">%         '   Preprocessing complete.';...</span>
1693 <span class="comment">%         '   Begin Data Processing...'};</span>
1694 <span class="comment">%     statusLogging(handles.LogWindow, log_text)</span>
1695 <span class="comment">%</span>
1696 <span class="comment">%     A(1).hgns = guiparams.horizontal_grid_node_spacing;</span>
1697 <span class="comment">%     A(1).wse  = guiparams.wse;  %Set the WSE to entered value</span>
1698 <span class="comment">%     [A,V,processing_log_text] = VMT_ProcessTransects(z,A,...</span>
1699 <span class="comment">%         guiparams.set_cross_section_endpoints,...</span>
1700 <span class="comment">%         guiparams.unit_discharge_correction);</span>
1701 <span class="comment">%</span>
1702 <span class="comment">%     % Push messages to Log Window:</span>
1703 <span class="comment">%     % ----------------------------</span>
1704 <span class="comment">%     statusLogging(handles.LogWindow, processing_log_text)</span>
1705 <span class="comment">%</span>
1706 <span class="comment">%     % Store the data:</span>
1707 <span class="comment">%     % ---------------</span>
1708 <span class="comment">%     guiparams.z = z;</span>
1709 <span class="comment">%     guiparams.A = A;</span>
1710 <span class="comment">%     guiparams.V = V;</span>
1711 <span class="comment">%     setappdata(handles.figure1,'guiparams',guiparams)</span>
1712     
1713           
1714     <span class="comment">% Update the GUI:</span>
1715     <span class="comment">% ---------------</span>
1716     <a href="#_sub95" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
1717     
1718     <span class="comment">% If data are RG or SP, set vertical grid node spacing to bin size</span>
1719     
1720 <span class="keyword">end</span>
1721 <span class="comment">% [EOF] loadDataCallback</span>
1722 
1723 
1724 
1725 <span class="comment">% --------------------------------------------------------------------</span>
1726 <a name="_sub51" href="#_subfunctions" class="code">function saveDataCallback(hObject, eventdata, handles)</a>
1727 <span class="comment">% SaveMATFile_Callback(handles.SaveMATFile,eventdata,handles)</span>
1728 
1729 <span class="comment">% Get the Application data:</span>
1730 <span class="comment">% -------------------------</span>
1731 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1732 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1733 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1734 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1735 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
1736 
1737 [the_file,the_path] = <span class="keyword">...</span>
1738     uiputfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-Files (*.mat)'</span>}, <span class="keyword">...</span>
1739     <span class="string">'Save MAT-File'</span>, <span class="keyword">...</span>
1740     fullfile(guiparams.mat_path,guiparams.savefile));
1741 
1742 <span class="comment">% Save the processed data to a MAT file:</span>
1743 <span class="comment">% --------------------------------------</span>
1744 <span class="keyword">if</span> ischar(the_file)
1745     guiparams.mat_path = the_path;
1746     guiparams.mat_file = the_file;
1747     guiparams.savefile = the_file;
1748     
1749     <span class="comment">% Re-store the Application data:</span>
1750     <span class="comment">% ------------------------------</span>
1751     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1752     
1753     <span class="comment">% Update the preferences:</span>
1754     <span class="comment">% -----------------------</span>
1755     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1756     guiprefs.mat_path = the_path;
1757     guiprefs.mat_file = the_file;
1758     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1759     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
1760     
1761     [pathstr,filename,extension] = fileparts([guiparams.mat_path guiparams.savefile]);
1762     savefile = fullfile(pathstr,[filename extension]);
1763     <span class="comment">%h = msgbox(['Saving processed data in MAT File ''' filename extension ''''], ...</span>
1764     <span class="comment">%    'Saving Processed Data File...'); %#ok&lt;NASGU&gt;</span>
1765     log_text = {<span class="keyword">...</span>
1766         <span class="string">'Saving Processed Data File...'</span>;<span class="keyword">...</span>
1767         savefile};
1768     statusLogging(handles.LogWindow,log_text)
1769     save(savefile,<span class="string">'A'</span>,<span class="string">'V'</span>,<span class="string">'z'</span>,<span class="string">'Map'</span>)
1770 <span class="keyword">end</span>
1771 
1772 <span class="comment">% [EOF] saveDataCallback</span>
1773 
1774 
1775 <span class="comment">% --------------------------------------------------------------------</span>
1776 <a name="_sub52" href="#_subfunctions" class="code">function saveBathymetryCallback(hObject, eventdata, handles)</a>
1777 
1778 <span class="comment">% Get the Application data:</span>
1779 <span class="comment">% -------------------------</span>
1780 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1781 z   = guiparams.z;
1782 A   = guiparams.A;
1783 <span class="comment">% V   = guiparams.V;   %#ok&lt;NASGU&gt;</span>
1784 <span class="comment">% Map = guiparams.Map; %#ok&lt;NASGU&gt;</span>
1785 
1786 <span class="comment">% Compute multibeam bathymetry:</span>
1787 <span class="comment">% -----------------------------</span>
1788 msgbox(<span class="string">'Processing Bathymetry...Please Be Patient'</span>,<span class="string">'VMT Status'</span>,<span class="string">'help'</span>,<span class="string">'replace'</span>)
1789 <span class="comment">%A = VMT_MBBathy(z,A,savefile,handles.beam_angle,handles.MagneticVariation,handles.WSE);</span>
1790 <a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wsedata,saveaux)">VMT_MBBathy</a>(z,A,savefile, <span class="keyword">...</span>
1791     guiparams.beam_angle, <span class="keyword">...</span>
1792     guiparams.magnetic_variation, <span class="keyword">...</span>
1793     guiparams.wse, <span class="keyword">...</span>
1794     guiparams.output_auxiliary_data);
1795 
1796 msgbox(<span class="string">'Bathymetry Output Complete'</span>,<span class="string">'VMT Status'</span>,<span class="string">'help'</span>,<span class="string">'replace'</span>)
1797 
1798 <span class="comment">% [EOF] saveBathymetryCallback</span>
1799 
1800 <span class="comment">% --------------------------------------------------------------------</span>
1801 <a name="_sub53" href="#_subfunctions" class="code">function plottingParametersCallback(hObject, eventdata, handles)</a>
1802 
1803 <span class="comment">% Get the Application data:</span>
1804 <span class="comment">% -------------------------</span>
1805 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1806 
1807 [guiparams.english_units,guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
1808     guiparams.presentation,guiparams.print] = <span class="keyword">...</span>
1809     plotParametersDialog(guiparams.english_units, <span class="keyword">...</span>
1810     guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
1811     guiparams.presentation,guiparams.print,<span class="keyword">...</span>
1812     handles.figure1);
1813 
1814 <span class="comment">% Update the GUI:</span>
1815 <span class="comment">% ---------------</span>
1816 <span class="keyword">if</span> guiparams.english_units
1817     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1818     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1819 <span class="keyword">else</span>
1820     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1821     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1822 <span class="keyword">end</span>
1823 
1824 <span class="keyword">if</span> guiparams.set_cross_section_endpoints
1825     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1826     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1827 <span class="keyword">else</span>
1828     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1829     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1830 <span class="keyword">end</span>
1831 
1832 <span class="keyword">if</span> guiparams.presentation
1833     <a href="#_sub38" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
1834 <span class="comment">%     set(handles.menuStylePrint,           'Checked','off')</span>
1835 <span class="comment">%     set(handles.menuStylePresentation,    'Checked','on')</span>
1836 <span class="comment">%     set(handles.menuPrintFormat,          'Checked','off')</span>
1837 <span class="comment">%     set(handles.menuPresentationFormat,   'Checked','on')</span>
1838 <span class="keyword">else</span>
1839     <a href="#_sub37" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
1840 <span class="comment">%     set(handles.menuStylePrint,           'Checked','on')</span>
1841 <span class="comment">%     set(handles.menuStylePresentation,    'Checked','off')</span>
1842 <span class="comment">%     set(handles.menuPrintFormat,          'Checked','on')</span>
1843 <span class="comment">%     set(handles.menuPresentationFormat,   'Checked','off')</span>
1844 <span class="keyword">end</span>
1845 
1846 <span class="comment">% Re-store the Application data:</span>
1847 <span class="comment">% ------------------------------</span>
1848 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1849 
1850 <span class="comment">% [EOF] plottingParametersCallback</span>
1851 
1852 
1853 <span class="comment">% --------------------------------------------------------------------</span>
1854 <a name="_sub54" href="#_subfunctions" class="code">function processingParametersCallback(hObject, eventdata, handles)</a>
1855 
1856 <span class="comment">% Get the Application data:</span>
1857 <span class="comment">% -------------------------</span>
1858 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1859 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1860 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1861 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1862 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
1863 
1864 <span class="comment">% [EOF] processingParametersCallback</span>
1865 
1866 
1867 <span class="comment">% --------------------------------------------------------------------</span>
1868 <a name="_sub55" href="#_subfunctions" class="code">function shiptracksPlotCallback(hObject, eventdata, handles)</a>
1869 <span class="comment">% Plot 1</span>
1870 
1871 <span class="comment">% Get the Application data:</span>
1872 <span class="comment">% -------------------------</span>
1873 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1874 z = guiparams.z;
1875 A = guiparams.A;
1876 V = guiparams.V; <span class="comment">%#ok&lt;NASGU&gt;</span>
1877 <span class="comment">% Map = guiparams.Map;</span>
1878 setends = guiparams.set_cross_section_endpoints;
1879 
1880 <span class="comment">% Preprocess the data:</span>
1881 <span class="comment">% --------------------</span>
1882 A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
1883 
1884 <span class="comment">% Push messages to Log Window:</span>
1885 <span class="comment">% ----------------------------</span>
1886 log_text = {<span class="keyword">...</span>
1887     <span class="string">'   Preprocessing complete.'</span>;<span class="keyword">...</span>
1888     <span class="string">'   Begin Data Processing...'</span>};
1889 statusLogging(handles.LogWindow, log_text)
1890 
1891 <span class="comment">% Process the transects:</span>
1892 <span class="comment">% ----------------------</span>
1893 A(1).hgns = guiparams.horizontal_grid_node_spacing;
1894 A(1).vgns = guiparams.vertical_grid_node_spacing;
1895 A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
1896 [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
1897     guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
1898 
1899 <span class="comment">% Compute the smoothed variables</span>
1900 <span class="comment">% ------------------------------</span>
1901 <span class="comment">% This is required so that the V struc is complete at any point during</span>
1902 <span class="comment">% runtime.</span>
1903 V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
1904     <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
1905     guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
1906     guiparams.vertical_smoothing_window);
1907 
1908 <span class="comment">% Push messages to Log Window:</span>
1909 <span class="comment">% ----------------------------</span>
1910 statusLogging(handles.LogWindow, processing_log_text)
1911 
1912 <span class="comment">% Store the data:</span>
1913 <span class="comment">% ---------------</span>
1914 guiparams.z = z;
1915 guiparams.A = A;
1916 guiparams.V = V;
1917 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1918 
1919 <span class="comment">% Push messages to Log Window:</span>
1920 <span class="comment">% ----------------------------</span>
1921 log_text = {<span class="string">'Plotting Shiptracks (reprocessing)'</span>};
1922 statusLogging(handles.LogWindow, log_text)
1923 
1924 <span class="comment">% Create or replot the Shiptracks</span>
1925 <span class="comment">% -------------------------------</span>
1926 <span class="comment">% Grab the axes to the plot</span>
1927 <span class="comment">% axes(handles.Plot1Shiptracks);</span>
1928 <a href="VMT_PlotShiptracks.html" class="code" title="function hf = VMT_PlotShiptracks(A,V,z,setends,hf)">VMT_PlotShiptracks</a>(A,V,z,setends,handles.Plot1Shiptracks); <span class="comment">% PLOT 1</span>
1929 
1930 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
1931 <span class="comment">% New plot display window</span>
1932 <span class="comment">% h = VMT_CreatePlotDisplay('shiptracks');</span>
1933 <span class="comment">% h = figure(1); clf</span>
1934 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
1935 
1936 <span class="comment">% [EOF] shiptracksPlotCallback</span>
1937 
1938 
1939 <span class="comment">% --------------------------------------------------------------------</span>
1940 <a name="_sub56" href="#_subfunctions" class="code">function planviewPlotCallback(hObject, eventdata, handles)</a>
1941 <span class="comment">% Plot 2</span>
1942 
1943 <span class="comment">% Get the Application data:</span>
1944 <span class="comment">% -------------------------</span>
1945 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1946 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1947 
1948 <span class="keyword">if</span> iscell(guiparams.mat_file) <span class="comment">% Multiple MAT files loaded</span>
1949     <span class="comment">% Push messages to Log Window:</span>
1950     <span class="comment">% ----------------------------</span>
1951     log_text = {<span class="string">'Plotting Multiple Transects (Planview)'</span>};
1952     statusLogging(handles.LogWindow, log_text)
1953     
1954        
1955     <span class="comment">% Push plotting parameters to log window:</span>
1956     <span class="comment">% ---------------------------------------</span>
1957     log_text = {<span class="keyword">...</span>
1958         <span class="string">'Plan View Plotting Parameters'</span>;<span class="keyword">...</span>
1959         sprintf(<span class="string">'   Depth range %3.1f to %3.1f m'</span>,guiparams.depth_range_min, guiparams.depth_range_max);<span class="keyword">...</span>
1960         sprintf(<span class="string">'   Vector scale: %d'</span>,guiparams.vector_scale_plan_view);<span class="keyword">...</span>
1961         sprintf(<span class="string">'   Vector spacing: %d'</span>,guiparams.vector_spacing_plan_view);<span class="keyword">...</span>
1962         sprintf(<span class="string">'   Smoothing window size: %d'</span>,guiparams.smoothing_window_size);<span class="keyword">...</span>
1963         };
1964     statusLogging(handles.LogWindow, log_text)
1965     
1966     <span class="comment">% Plot the data:</span>
1967     <span class="comment">% --------------</span>
1968     z = [];
1969     A = [];
1970     V = [];
1971     Map = [];
1972     depth_range = [guiparams.depth_range_min guiparams.depth_range_max];
1973     [PVdata,~,log_text] = <a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>(z,A,V,Map, <span class="keyword">...</span>
1974         depth_range, <span class="keyword">...</span>
1975         guiparams.vector_scale_plan_view, <span class="keyword">...</span>
1976         guiparams.vector_spacing_plan_view, <span class="keyword">...</span>
1977         guiparams.smoothing_window_size, <span class="keyword">...</span>
1978         guiparams.display_shoreline, <span class="keyword">...</span>
1979         guiparams.english_units, <span class="keyword">...</span>
1980         guiparams.mat_file, <span class="keyword">...</span>
1981         guiparams.mat_path); <span class="comment">% PLOT2</span>
1982     statusLogging(handles.LogWindow, log_text)
1983     
1984     <span class="comment">% Plot a Shoreline Map:</span>
1985     <span class="comment">% ---------------------</span>
1986     <span class="keyword">if</span> guiparams.display_shoreline
1987         [guiprefs.shoreline_file,guiprefs.shoreline_path] = uigetfile(<span class="keyword">...</span>
1988             {<span class="string">'*.txt;*.csv'</span>,<span class="string">'All Text Files'</span>; <span class="string">'*.*'</span>,<span class="string">'All Files'</span>},<span class="keyword">...</span>
1989             <span class="string">'Select Map Text File'</span>,<span class="keyword">...</span>
1990             fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
1991         <span class="keyword">if</span> ischar(guiprefs.shoreline_file) <span class="comment">% User did not hit cancel</span>
1992             mapdata = dlmread(fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
1993             Map.UTMe   = mapdata(:,1);
1994             Map.UTMn   = mapdata(:,2);
1995             Map.infile = fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file);
1996             <span class="comment">%Map.UTMzone = zone;</span>
1997         <span class="keyword">else</span>
1998             Map = [];
1999         <span class="keyword">end</span>
2000         <a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>(Map)
2001         log_text = {<span class="keyword">...</span>
2002             <span class="string">'   Loading map file.'</span>;<span class="keyword">...</span>
2003             <span class="string">'   Plotting shoreline.'</span><span class="keyword">...</span>
2004             };
2005         statusLogging(handles.LogWindow, log_text)
2006     <span class="keyword">else</span>
2007         Map = [];
2008     <span class="keyword">end</span>
2009     
2010 <span class="keyword">else</span>
2011     z = guiparams.z;
2012     A = guiparams.A;
2013     <span class="comment">% V = guiparams.V;</span>
2014     Map = guiparams.Map;
2015     
2016     <span class="comment">% Push messages to Log Window:</span>
2017     <span class="comment">% ----------------------------</span>
2018     log_text = {<span class="string">'Plotting Depth Averaged Vectors (reprocessing)'</span>};
2019     statusLogging(handles.LogWindow, log_text)
2020     
2021         
2022     <span class="comment">% Preprocess the data:</span>
2023     <span class="comment">% --------------------</span>
2024     A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
2025     
2026     <span class="comment">% Process the transects:</span>
2027     <span class="comment">% ----------------------</span>
2028     A(1).hgns = guiparams.horizontal_grid_node_spacing;
2029     A(1).vgns = guiparams.vertical_grid_node_spacing;
2030     A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2031     [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2032         guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
2033     
2034     <span class="comment">% Compute the smoothed variables</span>
2035     <span class="comment">% ------------------------------</span>
2036     <span class="comment">% This is required so that the V struc is complete at any point during</span>
2037     <span class="comment">% runtime.</span>
2038     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2039         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
2040         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2041         guiparams.vertical_smoothing_window);
2042     
2043     <span class="comment">% Push messages to Log Window:</span>
2044     <span class="comment">% ----------------------------</span>
2045     statusLogging(handles.LogWindow, processing_log_text)
2046     
2047     <span class="comment">% Plot the cross section:</span>
2048     <span class="comment">% -----------------------</span>
2049     log_text = {<span class="keyword">...</span>
2050         <span class="string">'Plan View Plotting Parameters'</span>;<span class="keyword">...</span>
2051         sprintf(<span class="string">'   Depth range %3.1f to %3.1f m'</span>,guiparams.depth_range_min, guiparams.depth_range_max);<span class="keyword">...</span>
2052         sprintf(<span class="string">'   Vector scale: %d'</span>,guiparams.vector_scale_plan_view);<span class="keyword">...</span>
2053         sprintf(<span class="string">'   Vector spacing: %d'</span>,guiparams.vector_spacing_plan_view);<span class="keyword">...</span>
2054         sprintf(<span class="string">'   Smoothing window size: %d'</span>,guiparams.smoothing_window_size);<span class="keyword">...</span>
2055         };
2056     statusLogging(handles.LogWindow, log_text)
2057     
2058     <span class="comment">% Plot the data:</span>
2059     <span class="comment">% --------------</span>
2060     <span class="comment">%msgbox('Plotting Plan View','VMT Status','help','replace');</span>
2061     depth_range = [guiparams.depth_range_min guiparams.depth_range_max];
2062     
2063     
2064     [PVdata,~,log_text] = <a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>(z,A,V,Map, <span class="keyword">...</span>
2065         depth_range, <span class="keyword">...</span>
2066         guiparams.vector_scale_plan_view, <span class="keyword">...</span>
2067         guiparams.vector_spacing_plan_view, <span class="keyword">...</span>
2068         guiparams.smoothing_window_size, <span class="keyword">...</span>
2069         guiparams.display_shoreline, <span class="keyword">...</span>
2070         guiparams.english_units, <span class="keyword">...</span>
2071         guiparams.mat_file, <span class="keyword">...</span>
2072         guiparams.mat_path); <span class="comment">% PLOT2</span>
2073     statusLogging(handles.LogWindow, log_text)
2074     
2075     <span class="comment">% Plot a Shoreline Map:</span>
2076     <span class="comment">% ---------------------</span>
2077     <span class="keyword">if</span> guiparams.display_shoreline
2078         [guiprefs.shoreline_file,guiprefs.shoreline_path] = uigetfile(<span class="keyword">...</span>
2079             {<span class="string">'*.txt;*.csv'</span>,<span class="string">'All Text Files'</span>; <span class="string">'*.*'</span>,<span class="string">'All Files'</span>},<span class="keyword">...</span>
2080             <span class="string">'Select Map Text File'</span>,<span class="keyword">...</span>
2081             fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
2082         <span class="keyword">if</span> ischar(guiprefs.shoreline_file) <span class="comment">% User did not hit cancel</span>
2083             mapdata = dlmread(fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
2084             Map.UTMe   = mapdata(:,1);
2085             Map.UTMn   = mapdata(:,2);
2086             Map.infile = fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file);
2087             <span class="comment">%Map.UTMzone = zone;</span>
2088         <span class="keyword">else</span>
2089             Map = [];
2090         <span class="keyword">end</span>
2091         <a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>(Map)
2092         log_text = {<span class="keyword">...</span>
2093             <span class="string">'   Loading map file.'</span>;<span class="keyword">...</span>
2094             <span class="string">'   Plotting shoreline.'</span><span class="keyword">...</span>
2095             };
2096         statusLogging(handles.LogWindow, log_text)
2097     <span class="keyword">else</span>
2098         Map = [];
2099     <span class="keyword">end</span>
2100     
2101 <span class="keyword">end</span>
2102 
2103 <span class="keyword">if</span> guiparams.add_background
2104     [guiprefs,log_text] = <a href="VMT_OverlayDOQQ.html" class="code" title="function [guiprefs,log_text] = VMT_OverlayDOQQ(guiprefs,varargin)">VMT_OverlayDOQQ</a>(guiprefs);
2105     statusLogging(handles.LogWindow, log_text)
2106 <span class="keyword">end</span>
2107 
2108 <span class="comment">% Update guiparams</span>
2109 <span class="comment">% ----------------</span>
2110 guiparams.z   = z;
2111 guiparams.A   = A;
2112 guiparams.V   = V;
2113 guiparams.Map = Map;
2114 guiparams.iric_anv_planview_data = PVdata;
2115 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams);
2116 
2117 <span class="comment">% Update preferences</span>
2118 <span class="comment">% ------------------</span>
2119 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2120 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'shoreline'</span>)
2121 <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'aerial'</span>)
2122 
2123 <span class="comment">% Force plot to be formated properly</span>
2124 <span class="comment">% ----------------------------------</span>
2125 <span class="keyword">if</span> guiparams.presentation
2126     <a href="#_sub38" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
2127 <span class="keyword">else</span>
2128     <a href="#_sub37" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
2129 <span class="keyword">end</span>
2130 <span class="keyword">switch</span> guiparams.renderer
2131     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
2132         <a href="#_sub18" class="code" title="subfunction menuOpenGL_Callback(hObject, eventdata, handles)">menuOpenGL_Callback</a>(hObject, eventdata, handles)
2133     <span class="keyword">case</span> <span class="string">'painters'</span>
2134         <a href="#_sub19" class="code" title="subfunction menuPainters_Callback(hObject, eventdata, handles)">menuPainters_Callback</a>(hObject, eventdata, handles)
2135     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
2136         <a href="#_sub20" class="code" title="subfunction menuZbuffer_Callback(hObject, eventdata, handles)">menuZbuffer_Callback</a>(hObject, eventdata, handles)
2137 <span class="keyword">end</span>
2138 
2139 <span class="comment">% Focus the figure</span>
2140 <span class="comment">% ----------------</span>
2141 hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
2142 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
2143     figure(hff)
2144 <span class="keyword">end</span>
2145 
2146 <span class="comment">% Start the Graphics Control Gui</span>
2147 <span class="comment">% ------------------------------</span>
2148 VMT_GraphicsControl
2149 
2150 <span class="comment">% [EOF] planviewPlotCallback</span>
2151 
2152 
2153 <span class="comment">% --------------------------------------------------------------------</span>
2154 <a name="_sub57" href="#_subfunctions" class="code">function crosssectionPlotCallback(hObject, eventdata, handles)</a>
2155 <span class="comment">% Plot 3</span>
2156 
2157 <span class="comment">% Get the Application data:</span>
2158 <span class="comment">% -------------------------</span>
2159 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2160 z = guiparams.z;
2161 A = guiparams.A;
2162 <span class="comment">% V = guiparams.V;</span>
2163 <span class="comment">% Map = guiparams.Map;</span>
2164 
2165 <span class="comment">% Preprocess the data:</span>
2166 <span class="comment">% --------------------</span>
2167 A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
2168 
2169 <span class="comment">% Push messages to Log Window:</span>
2170 <span class="comment">% ----------------------------</span>
2171 log_text = {<span class="string">'Plotting Cross Section (reprocessing)'</span>};
2172 statusLogging(handles.LogWindow, log_text)
2173 
2174 <span class="comment">% Process the transects:</span>
2175 <span class="comment">% ----------------------</span>
2176 A(1).hgns = guiparams.horizontal_grid_node_spacing;
2177 A(1).vgns = guiparams.vertical_grid_node_spacing;
2178 A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2179 [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2180     guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
2181 
2182 <span class="comment">% Push messages to Log Window:</span>
2183 <span class="comment">% ----------------------------</span>
2184 statusLogging(handles.LogWindow, processing_log_text)
2185 
2186 <span class="comment">% Plot the cross section:</span>
2187 <span class="comment">% -----------------------</span>
2188 log_text = {<span class="keyword">...</span>
2189     <span class="string">'Cross Section Plotting Parameters'</span>;<span class="keyword">...</span>
2190     sprintf(<span class="string">'   Contour variable: %s'</span>          ,guiparams.contours(guiparams.idx_contour).string);<span class="keyword">...</span>
2191     sprintf(<span class="string">'   Vertical exaggeration: %d'</span>     ,guiparams.vertical_exaggeration);<span class="keyword">...</span>
2192     sprintf(<span class="string">'   Vector scale: %3.1f'</span>           ,guiparams.vector_scale_cross_section);<span class="keyword">...</span>
2193     sprintf(<span class="string">'   Horizontal vector spacing: %d'</span> ,guiparams.horizontal_vector_spacing);<span class="keyword">...</span>
2194     sprintf(<span class="string">'   Vertical vector spacing: %d'</span>   ,guiparams.vertical_vector_spacing);<span class="keyword">...</span>
2195     sprintf(<span class="string">'   Horizontal smooting window: %d'</span>,guiparams.horizontal_smoothing_window);<span class="keyword">...</span>
2196     sprintf(<span class="string">'   Vertical smoothing window: %d'</span> ,guiparams.vertical_smoothing_window);<span class="keyword">...</span>
2197     };
2198 <span class="keyword">if</span> guiparams.plot_secondary_flow_vectors
2199     log_text = vertcat(log_text, {<span class="keyword">...</span>
2200         sprintf(<span class="string">'   Vector variable: %s'</span>,guiparams.secondary_flows(guiparams.idx_secondary_flow_vector_variable).string);<span class="keyword">...</span>
2201         sprintf(<span class="string">'   Inc. vertical component?: %d'</span>,guiparams.include_vertical_velocity)<span class="keyword">...</span>
2202         });
2203 <span class="keyword">end</span>
2204 <span class="comment">% Push messages to Log Window:</span>
2205 <span class="comment">% ----------------------------</span>
2206 statusLogging(handles.LogWindow, log_text)
2207 
2208 <span class="keyword">if</span> guiparams.plot_secondary_flow_vectors
2209     <span class="comment">%msgbox('Plotting Cross Section','VMT Status','help','replace')</span>
2210 <span class="comment">%     V = VMT_SmoothVar(V, ...</span>
2211 <span class="comment">%         ...guiparams.contour, ...</span>
2212 <span class="comment">%         guiparams.horizontal_smoothing_window, ...</span>
2213 <span class="comment">%         guiparams.vertical_smoothing_window);</span>
2214     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2215         <span class="keyword">...</span><span class="comment">guiparams.secondary_flow_vector_variable, ...</span>
2216         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2217         guiparams.vertical_smoothing_window);
2218     [~,A,V,plot_cont_log_text] = <a href="VMT_PlotXSContQuiver.html" class="code" title="function [z,A,V,log_text] = VMT_PlotXSContQuiver(z,A,V,var,sf,exag,qspchorz,qspcvert,secvecvar,vvelcomp,plot_english,varargin)">VMT_PlotXSContQuiver</a>(z,A,V, <span class="keyword">...</span>
2219         guiparams.contour, <span class="keyword">...</span>
2220         guiparams.vector_scale_cross_section, <span class="keyword">...</span>
2221         guiparams.vertical_exaggeration, <span class="keyword">...</span>
2222         guiparams.horizontal_vector_spacing, <span class="keyword">...</span>
2223         guiparams.vertical_vector_spacing, <span class="keyword">...</span>
2224         guiparams.secondary_flow_vector_variable, <span class="keyword">...</span>
2225         guiparams.include_vertical_velocity, <span class="keyword">...</span>
2226         guiparams.english_units); <span class="comment">%#ok&lt;ASGLU&gt; % PLOT3</span>
2227     
2228 <span class="keyword">elseif</span> ~guiparams.plot_secondary_flow_vectors
2229     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2230         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
2231         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2232         guiparams.vertical_smoothing_window);
2233     
2234     [~,A,V,zmin,zmax,plot_cont_log_text] = <a href="VMT_PlotXSCont.html" class="code" title="function [z,A,V,zmin,zmax,log_text,fig_contour_handle] = VMT_PlotXSCont(z,A,V,var,exag,plot_english)">VMT_PlotXSCont</a>(z,A,V, <span class="keyword">...</span>
2235         guiparams.contour, <span class="keyword">...</span>
2236         guiparams.vertical_exaggeration, <span class="keyword">...</span>
2237         guiparams.english_units);  <span class="comment">%#ok&lt;ASGLU&gt;</span>
2238     
2239     guiparams.zmin = zmin;
2240     guiparams.zmax = zmax;
2241     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2242 <span class="keyword">end</span>
2243 
2244 <span class="comment">% Force plot to be formated properly</span>
2245 <span class="comment">% ----------------------------------</span>
2246 <span class="keyword">if</span> guiparams.presentation
2247     <a href="#_sub38" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
2248 <span class="keyword">else</span>
2249     <a href="#_sub37" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
2250 <span class="keyword">end</span>
2251 <span class="keyword">switch</span> guiparams.renderer
2252     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
2253         <a href="#_sub18" class="code" title="subfunction menuOpenGL_Callback(hObject, eventdata, handles)">menuOpenGL_Callback</a>(hObject, eventdata, handles)
2254     <span class="keyword">case</span> <span class="string">'painters'</span>
2255         <a href="#_sub19" class="code" title="subfunction menuPainters_Callback(hObject, eventdata, handles)">menuPainters_Callback</a>(hObject, eventdata, handles)
2256     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
2257         <a href="#_sub20" class="code" title="subfunction menuZbuffer_Callback(hObject, eventdata, handles)">menuZbuffer_Callback</a>(hObject, eventdata, handles)
2258 <span class="keyword">end</span>
2259 
2260 <span class="comment">% Focus the figure</span>
2261 <span class="comment">% ----------------</span>
2262 hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
2263 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
2264     figure(hff)
2265 <span class="keyword">end</span>
2266 
2267 <span class="comment">% Re-store the Application data:</span>
2268 <span class="comment">% ------------------------------</span>
2269 guiparams.V = V;
2270 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2271 
2272 <span class="comment">% Start the Graphics Control Gui</span>
2273 <span class="comment">% ------------------------------</span>
2274 VMT_GraphicsControl
2275 
2276 <span class="comment">% Push messages to Log Window:</span>
2277 <span class="comment">% ----------------------------</span>
2278 statusLogging(handles.LogWindow, plot_cont_log_text)
2279 <span class="comment">% msgbox('Plotting Complete','VMT Status','help','replace')</span>
2280 
2281 <span class="comment">% [EOF] crosssectionPlotCallback</span>
2282 
2283 
2284 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2285 <span class="comment">% DATA EXPORT CALLBACKS %</span>
2286 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2287 
2288 <span class="comment">% --------------------------------------------------------------------</span>
2289 <a name="_sub58" href="#_subfunctions" class="code">function SaveMATFile_Callback(hObject, eventdata, handles)</a>
2290 <span class="comment">% saveDataCallback(hObject, eventdata, handles)</span>
2291 
2292 <span class="comment">% Get the Application data:</span>
2293 <span class="comment">% -------------------------</span>
2294 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2295 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2296 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2297 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2298 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
2299 
2300 [the_file,the_path] = <span class="keyword">...</span>
2301     uiputfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-Files (*.mat)'</span>}, <span class="keyword">...</span>
2302     <span class="string">'Save MAT-File'</span>, <span class="keyword">...</span>
2303     fullfile(guiparams.mat_path,guiparams.savefile));
2304 
2305 <span class="comment">% Save the processed data to a MAT file:</span>
2306 <span class="comment">% --------------------------------------</span>
2307 <span class="keyword">if</span> ischar(the_file)
2308     guiparams.mat_path = the_path;
2309     guiparams.mat_file = the_file;
2310     guiparams.savefile = the_file;
2311     
2312     <span class="comment">% Re-store the Application data:</span>
2313     <span class="comment">% ------------------------------</span>
2314     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2315     
2316     <span class="comment">% Update the preferences:</span>
2317     <span class="comment">% -----------------------</span>
2318     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2319     guiprefs.mat_path = the_path;
2320     guiprefs.mat_file = the_file;
2321     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2322     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
2323     
2324     [~,filename,extension] = fileparts(guiparams.savefile);
2325     savefile = [filename extension];
2326     h = msgbox([<span class="string">'Saving processed data in MAT File '''</span> savefile <span class="string">''''</span>], <span class="keyword">...</span>
2327         <span class="string">'Saving Processed Data File...'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
2328     disp(<span class="string">'Saving Processed Data File...'</span>)
2329     disp(savefile)
2330     save(savefile,<span class="string">'A'</span>,<span class="string">'V'</span>,<span class="string">'z'</span>,<span class="string">'Map'</span>)
2331 <span class="keyword">end</span>
2332 
2333 <span class="comment">% [EOF] SaveMATFile_Callback</span>
2334 
2335 
2336 <span class="comment">% --------------------------------------------------------------------</span>
2337 <a name="_sub59" href="#_subfunctions" class="code">function SaveTecplotFile_Callback(hObject, eventdata, handles)</a>
2338 
2339 <span class="comment">% Get the Application data:</span>
2340 <span class="comment">% -------------------------</span>
2341 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2342 <span class="comment">% z   = guiparams.z;</span>
2343 <span class="comment">% A   = guiparams.A;</span>
2344 V   = guiparams.V;
2345 <span class="comment">% Map = guiparams.Map;</span>
2346 
2347 [the_file,the_path] = <span class="keyword">...</span>
2348     uiputfile({<span class="string">'*.dat'</span>,<span class="string">'Tecplot Files (*.dat)'</span>}, <span class="keyword">...</span>
2349     <span class="string">'Save Tecplot File'</span>, <span class="keyword">...</span>
2350     fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2351 
2352 <span class="comment">% Output the data (no smoothing) to Tecplot:</span>
2353 <span class="comment">% ------------------------------------------</span>
2354 <span class="keyword">if</span> ischar(the_file)
2355     guiparams.tecplot_path = the_path;
2356     guiparams.tecplot_file = the_file;
2357     
2358     <span class="comment">% Re-store the Application data:</span>
2359     <span class="comment">% ------------------------------</span>
2360     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2361     
2362     <span class="comment">% Update the preferences:</span>
2363     <span class="comment">% -----------------------</span>
2364     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2365     guiprefs.tecplot_path = the_path;
2366     guiprefs.tecplot_file = the_file;
2367     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2368     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'tecplot'</span>)
2369     
2370     <span class="comment">% Push to log window</span>
2371     <span class="comment">% ------------------</span>
2372     log_text = {<span class="keyword">...</span>
2373         <span class="string">'Exporting Data to Tecplot (*.dat) File...'</span>;<span class="keyword">...</span>
2374         <span class="string">'Directory:'</span>;<span class="keyword">...</span>
2375         the_path;<span class="keyword">...</span>
2376         [<span class="string">'Filename: '</span> the_file]};
2377     statusLogging(handles.LogWindow,log_text)
2378         
2379     <span class="keyword">if</span> isempty(V)
2380         A = guiparams.A;
2381         A(1).hgns = guiparams.horizontal_grid_node_spacing;
2382         A(1).vgns = guiparams.vertical_grid_node_spacing;
2383         A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2384         [~,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2385             guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
2386             guiparams.unit_discharge_correction);
2387     <span class="keyword">end</span>
2388     <a href="VMT_BuildTecplotFile.html" class="code" title="function VMT_BuildTecplotFile(V,savefile)">VMT_BuildTecplotFile</a>(V,fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2389     
2390     <span class="comment">% Push to log window</span>
2391     <span class="comment">% ------------------</span>
2392     log_text = {<span class="string">'Exporting XS Bathy Data to Tecplot (*.dat) File...'</span>};
2393     statusLogging(handles.LogWindow,log_text)
2394     
2395     <a href="VMT_BuildTecplotFile_XSBathy.html" class="code" title="function VMT_BuildTecplot_XSBathy(V,savefile)">VMT_BuildTecplotFile_XSBathy</a>(V,fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2396     
2397     <span class="comment">% Push to log window</span>
2398     <span class="comment">% ------------------</span>
2399     log_text = {<span class="string">'Tecplot Export Complete'</span>};
2400     statusLogging(handles.LogWindow,log_text)
2401    
2402 <span class="keyword">end</span>
2403 
2404 <span class="comment">% [EOF] SaveTechplotFile_Callback</span>
2405 
2406 
2407 <span class="comment">% --------------------------------------------------------------------</span>
2408 <a name="_sub60" href="#_subfunctions" class="code">function SaveGoogleEarthFile_Callback(hObject, eventdata, handles)</a>
2409 
2410 <span class="comment">% Get the Application data:</span>
2411 <span class="comment">% -------------------------</span>
2412 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2413 <span class="comment">% z   = guiparams.z;</span>
2414 A   = guiparams.A;
2415 V   = guiparams.V;
2416 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
2417 
2418 [the_file,the_path] = <span class="keyword">...</span>
2419     uiputfile({<span class="string">'*.kmz'</span>,<span class="string">'Google Earth Files (*.kmz)'</span>}, <span class="keyword">...</span>
2420     <span class="string">'Save Google Earth File'</span>, <span class="keyword">...</span>
2421     fullfile(guiparams.kmz_path,guiparams.kmz_file));
2422 
2423 <span class="comment">% Save the processed data to a Google Earth (KMZ) file:</span>
2424 <span class="comment">% -----------------------------------------------------</span>
2425 <span class="keyword">if</span> ischar(the_file)
2426     guiparams.kmz_path = the_path;
2427     guiparams.kmz_file = the_file;
2428     
2429     <span class="comment">% Re-store the Application data:</span>
2430     <span class="comment">% ------------------------------</span>
2431     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2432     
2433     <span class="comment">% Update the preferences:</span>
2434     <span class="comment">% -----------------------</span>
2435     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2436     guiprefs.kmz_path = the_path;
2437     guiprefs.kmz_file = the_file;
2438     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2439     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'kmz'</span>)
2440     
2441     <span class="comment">%     if guiparams.display_shoreline</span>
2442     <span class="comment">%         VMT_Shoreline2GE_3D(A,Map, ...</span>
2443     <span class="comment">%                             guiparams.vertical_exaggeration, ...</span>
2444     <span class="comment">%                             guiparams.vertical_offset);</span>
2445     <span class="comment">%     end</span>
2446     <span class="keyword">if</span> isempty(V)
2447         A = guiparams.A;
2448         A(1).hgns = guiparams.horizontal_grid_node_spacing;
2449         A(1).vgns = guiparams.vertical_grid_node_spacing;
2450         A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2451         [~,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2452             guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
2453             guiparams.unit_discharge_correction);
2454     <span class="keyword">end</span>
2455     <a href="VMT_MeanXS2GE_3D.html" class="code" title="function VMT_MeanXS2GE_3D(A,V,pathstr,filestr,vscale,voffset)">VMT_MeanXS2GE_3D</a>(A,V,[], <span class="keyword">...</span>
2456         fullfile(guiparams.kmz_path,guiparams.kmz_file), <span class="keyword">...</span>
2457         guiparams.vertical_exaggeration, <span class="keyword">...</span>
2458         guiparams.vertical_offset);
2459 <span class="keyword">end</span>
2460 
2461 <span class="comment">% [EOF] SaveGoogleEarthFile_Callback</span>
2462 
2463 
2464 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2465 <span class="comment">% DATA EXPORT/BATHYMETRY CALLBACKS %</span>
2466 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2467 
2468 <span class="comment">% --------------------------------------------------------------------</span>
2469 <a name="_sub61" href="#_subfunctions" class="code">function ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a>
2470 
2471 <span class="comment">% Get the Application data:</span>
2472 <span class="comment">% -------------------------</span>
2473 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2474 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2475 z = guiparams.z;
2476 A = guiparams.A;
2477 V = guiparams.V; <span class="comment">%#ok&lt;NASGU&gt;</span>
2478 <span class="comment">% Map = guiparams.Map;</span>
2479 setends = guiparams.set_cross_section_endpoints;
2480 
2481 [the_file,the_path] = <span class="keyword">...</span>
2482     uiputfile({<span class="string">'*.csv'</span>,<span class="string">'Multibeam Bathymetry Files (*.csv)'</span>}, <span class="keyword">...</span>
2483     <span class="string">'Export Multibeam Bathymetry'</span>, <span class="keyword">...</span>
2484     fullfile(guiprefs.multibeambathymetry_path, <span class="keyword">...</span>
2485     guiprefs.multibeambathymetry_file));
2486 
2487 <span class="keyword">if</span> ischar(the_file)
2488     guiparams.multibeambathymetry_path = the_path;
2489     guiparams.multibeambathymetry_file = the_file;
2490     
2491     <span class="comment">% Re-store the Application data:</span>
2492     <span class="comment">% ------------------------------</span>
2493     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2494     
2495     <span class="comment">% Update the preferences:</span>
2496     <span class="comment">% -----------------------</span>
2497     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2498     guiprefs.multibeambathymetry_path = the_path;
2499     guiprefs.multibeambathymetry_file = the_file;
2500     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2501     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'multibeambathymetry'</span>)
2502     
2503     <span class="keyword">if</span> guiparams.output_auxiliary_data
2504     <span class="keyword">end</span>
2505     
2506     <span class="comment">%msgbox('Processing Bathymetry...Please Be Patient','VMT Status','help','replace')</span>
2507     
2508     savefile = fullfile(guiparams.multibeambathymetry_path, <span class="keyword">...</span>
2509         guiparams.multibeambathymetry_file);
2510     
2511     log_text = {<span class="string">'Multibeam bathymetry file saved to:'</span>;<span class="keyword">...</span>
2512         [<span class="string">'   '</span> savefile]};
2513     statusLogging(handles.LogWindow,log_text)
2514     
2515     <span class="comment">% Process the transects:</span>
2516     <span class="comment">% ----------------------</span>
2517     A(1).hgns = guiparams.horizontal_grid_node_spacing;
2518     A(1).vgns = guiparams.vertical_grid_node_spacing;
2519     A(1).wse  = guiparams.wse;  <span class="comment">%Set the WSE to entered value</span>
2520     [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2521         guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction);
2522     
2523     <span class="comment">% Compute the smoothed variables</span>
2524     <span class="comment">% ------------------------------</span>
2525     <span class="comment">% This is required so that the V struc is complete at any point during</span>
2526     <span class="comment">% runtime.</span>
2527     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2528         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
2529         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2530         guiparams.vertical_smoothing_window);
2531     
2532     <span class="comment">% Push messages to Log Window:</span>
2533     <span class="comment">% ----------------------------</span>
2534     statusLogging(handles.LogWindow, processing_log_text)
2535 
2536     
2537     <a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wsedata,saveaux)">VMT_MBBathy</a>(guiparams.z, <span class="keyword">...</span>
2538         guiparams.A, <span class="keyword">...</span>
2539         savefile, <span class="keyword">...</span>
2540         guiparams.beam_angle, <span class="keyword">...</span>
2541         guiparams.magnetic_variation, <span class="keyword">...</span>
2542         guiparams.wse, <span class="keyword">...</span>
2543         guiparams.output_auxiliary_data);
2544     
2545     <span class="comment">%msgbox('Bathymetry Output Complete','VMT Status','help','replace')</span>
2546     
2547 <span class="keyword">end</span>
2548 
2549 <span class="comment">% [EOF] ExportMultibeamBathymetry_Callback</span>
2550 
2551 
2552 <span class="comment">% --------------------------------------------------------------------</span>
2553 <a name="_sub62" href="#_subfunctions" class="code">function BeamAngle_Callback(hObject, eventdata, handles)</a>
2554 <span class="comment">% Get the beam angle</span>
2555 
2556 <span class="comment">% Get the Application data:</span>
2557 <span class="comment">% -------------------------</span>
2558 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2559 
2560 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2561 <span class="comment">% ----------------------------------------------------------------</span>
2562 new_beam_angle = str2double(get(hObject,<span class="string">'String'</span>));
2563 is_a_number = ~isnan(new_beam_angle);
2564 is_positive = new_beam_angle&gt;=0;
2565 
2566 <span class="comment">% Modify the Application data:</span>
2567 <span class="comment">% ----------------------------</span>
2568 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2569     guiparams.beam_angle = new_beam_angle;
2570     
2571     <span class="comment">% Re-store the Application data:</span>
2572     <span class="comment">% ------------------------------</span>
2573     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2574     
2575 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2576     set(hObject,<span class="string">'String'</span>,guiparams.beam_angle)
2577 <span class="keyword">end</span>
2578 
2579 <span class="comment">% [EOF] BeamAngle_Callback</span>
2580 
2581 
2582 <span class="comment">% --------------------------------------------------------------------</span>
2583 <a name="_sub63" href="#_subfunctions" class="code">function MagneticVariation_Callback(hObject, eventdata, handles)</a>
2584 <span class="comment">% Get the Magnetic Variation</span>
2585 
2586 <span class="comment">% Get the Application data:</span>
2587 <span class="comment">% -------------------------</span>
2588 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2589 
2590 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2591 <span class="comment">% ----------------------------------------------------------------</span>
2592 new_magnetic_variation = str2double(get(hObject,<span class="string">'String'</span>));
2593 is_a_number = ~isnan(new_magnetic_variation);
2594 is_positive = new_magnetic_variation&gt;=0;
2595 
2596 <span class="comment">% Modify the Application data:</span>
2597 <span class="comment">% ----------------------------</span>
2598 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2599     guiparams.magnetic_variation = new_magnetic_variation;
2600     
2601     <span class="comment">% Re-store the Application data:</span>
2602     <span class="comment">% ------------------------------</span>
2603     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2604     
2605 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2606     set(hObject,<span class="string">'String'</span>,guiparams.magnetic_variation)
2607 <span class="keyword">end</span>
2608 
2609 <span class="comment">% [EOF] MagneticVariation_Callback</span>
2610 
2611 
2612 <span class="comment">% --------------------------------------------------------------------</span>
2613 <a name="_sub64" href="#_subfunctions" class="code">function WSE_Callback(hObject, eventdata, handles)</a>
2614 
2615 <span class="comment">% Get the Application data:</span>
2616 <span class="comment">% -------------------------</span>
2617 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2618 
2619 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2620 <span class="comment">% ----------------------------------------------------------------</span>
2621 new_wse = str2double(get(hObject,<span class="string">'String'</span>));
2622 is_a_number = ~isnan(new_wse);
2623 is_positive = new_wse&gt;=0;
2624 
2625 <span class="comment">% Modify the Application data:</span>
2626 <span class="comment">% ----------------------------</span>
2627 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2628     guiparams.wse = new_wse;
2629     
2630     <span class="comment">% Re-store the Application data:</span>
2631     <span class="comment">% ------------------------------</span>
2632     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2633     
2634 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2635     set(hObject,<span class="string">'String'</span>,guiparams.wse)
2636 <span class="keyword">end</span>
2637 
2638 <span class="comment">% [EOF] WSE_Callback</span>
2639 
2640 
2641 <span class="comment">% --------------------------------------------------------------------</span>
2642 <a name="_sub65" href="#_subfunctions" class="code">function OutputAuxiliaryData_Callback(hObject, eventdata, handles)</a>
2643 <span class="comment">% Bathymetry Auxiliary Data</span>
2644 
2645 <span class="comment">% Get the Application data:</span>
2646 <span class="comment">% -------------------------</span>
2647 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2648 
2649 <span class="comment">% Modify the Application data:</span>
2650 <span class="comment">% ----------------------------</span>
2651 guiparams.output_auxiliary_data = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2652 
2653 <span class="comment">% Re-store the Application data:</span>
2654 <span class="comment">% ------------------------------</span>
2655 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2656 
2657 <span class="comment">% [EOF] OutputAuxiliaryData_Callback</span>
2658 
2659 
2660 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2661 <span class="comment">% PLOTTING/PLAN VIEW PLOT CALLBACKS %</span>
2662 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2663 
2664 <span class="comment">% --------------------------------------------------------------------</span>
2665 <a name="_sub66" href="#_subfunctions" class="code">function DepthRangeMin_Callback(hObject, eventdata, handles)</a>
2666 
2667 <span class="comment">% Get the Application data:</span>
2668 <span class="comment">% -------------------------</span>
2669 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2670 
2671 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2672 <span class="comment">% ----------------------------------------------------------------</span>
2673 new_depth_range_min = str2double(get(hObject,<span class="string">'String'</span>));
2674 is_a_number = ~isnan(new_depth_range_min);
2675 is_positive = new_depth_range_min&gt;=0;
2676 
2677 <span class="comment">% Modify the Application data:</span>
2678 <span class="comment">% ----------------------------</span>
2679 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2680     guiparams.depth_range_min = new_depth_range_min;
2681     
2682     <span class="comment">% Re-store the Application data:</span>
2683     <span class="comment">% ------------------------------</span>
2684     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2685     
2686 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2687     set(hObject,<span class="string">'String'</span>,guiparams.depth_range_min)
2688 <span class="keyword">end</span>
2689 
2690 <span class="comment">% [EOF] DepthRangeMin_Callback</span>
2691 
2692 
2693 <span class="comment">% --------------------------------------------------------------------</span>
2694 <a name="_sub67" href="#_subfunctions" class="code">function DepthRangeMax_Callback(hObject, eventdata, handles)</a>
2695 
2696 <span class="comment">% Get the Application data:</span>
2697 <span class="comment">% -------------------------</span>
2698 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2699 
2700 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2701 <span class="comment">% ----------------------------------------------------------------</span>
2702 new_depth_range_max = str2double(get(hObject,<span class="string">'String'</span>));
2703 is_a_number = ~isnan(new_depth_range_max);
2704 is_positive = new_depth_range_max&gt;=0;
2705 
2706 <span class="comment">% Modify the Application data:</span>
2707 <span class="comment">% ----------------------------</span>
2708 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2709     guiparams.depth_range_max = new_depth_range_max;
2710     
2711     <span class="comment">% Re-store the Application data:</span>
2712     <span class="comment">% ------------------------------</span>
2713     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2714     
2715 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2716     set(hObject,<span class="string">'String'</span>,guiparams.depth_range_max)
2717 <span class="keyword">end</span>
2718 
2719 <span class="comment">% [EOF] DepthMax_Callback</span>
2720 
2721 
2722 <span class="comment">% --------------------------------------------------------------------</span>
2723 <a name="_sub68" href="#_subfunctions" class="code">function VectorScalePlanView_Callback(hObject, eventdata, handles)</a>
2724 <span class="comment">% Set quiver scale (contour)</span>
2725 
2726 <span class="comment">% Get the Application data:</span>
2727 <span class="comment">% -------------------------</span>
2728 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2729 
2730 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2731 <span class="comment">% ----------------------------------------------------------------</span>
2732 new_vector_scale_plan_view = str2double(get(hObject,<span class="string">'String'</span>));
2733 is_a_number = ~isnan(new_vector_scale_plan_view);
2734 is_positive = new_vector_scale_plan_view&gt;=0;
2735 
2736 <span class="comment">% Modify the Application data:</span>
2737 <span class="comment">% ----------------------------</span>
2738 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2739     guiparams.vector_scale_plan_view = round(new_vector_scale_plan_view);
2740     
2741     <span class="comment">% Re-store the Application data:</span>
2742     <span class="comment">% ------------------------------</span>
2743     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2744     
2745 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2746     set(hObject,<span class="string">'String'</span>,guiparams.vector_scale_plan_view)
2747 <span class="keyword">end</span>
2748 
2749 <span class="comment">% [EOF] VectorScalePlanView_Callback</span>
2750 
2751 
2752 <span class="comment">% --------------------------------------------------------------------</span>
2753 <a name="_sub69" href="#_subfunctions" class="code">function VectorSpacingPlanview_Callback(hObject, eventdata, handles)</a>
2754 <span class="comment">% Set quiver spacing (contour, horizontal)</span>
2755 
2756 <span class="comment">% Get the Application data:</span>
2757 <span class="comment">% -------------------------</span>
2758 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2759 
2760 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2761 <span class="comment">% ----------------------------------------------------------------</span>
2762 new_vector_spacing_plan_view = str2double(get(hObject,<span class="string">'String'</span>));
2763 is_a_number = ~isnan(new_vector_spacing_plan_view);
2764 is_positive = new_vector_spacing_plan_view&gt;=0;
2765 
2766 <span class="comment">% Modify the Application data:</span>
2767 <span class="comment">% ----------------------------</span>
2768 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2769     guiparams.vector_spacing_plan_view = round(new_vector_spacing_plan_view);
2770     
2771     <span class="comment">% Re-store the Application data:</span>
2772     <span class="comment">% ------------------------------</span>
2773     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2774     
2775 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2776     set(hObject,<span class="string">'String'</span>,guiparams.vector_spacing_plan_view)
2777 <span class="keyword">end</span>
2778 
2779 <span class="comment">% [EOF] VectorSpacingPlanview_Callback</span>
2780 
2781 
2782 <span class="comment">% --------------------------------------------------------------------</span>
2783 <a name="_sub70" href="#_subfunctions" class="code">function SmoothingWindowSize_Callback(hObject, eventdata, handles)</a>
2784 <span class="comment">% Plan View smoothing window size</span>
2785 
2786 <span class="comment">% Get the Application data:</span>
2787 <span class="comment">% -------------------------</span>
2788 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2789 
2790 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2791 <span class="comment">% ----------------------------------------------------------------</span>
2792 new_smoothing_window_size = str2double(get(hObject,<span class="string">'String'</span>));
2793 is_a_number = ~isnan(new_smoothing_window_size);
2794 is_positive = new_smoothing_window_size&gt;=0;
2795 
2796 <span class="comment">% Modify the Application data:</span>
2797 <span class="comment">% ----------------------------</span>
2798 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2799     guiparams.smoothing_window_size = round(new_smoothing_window_size);
2800     
2801     <span class="comment">% Re-store the Application data:</span>
2802     <span class="comment">% ------------------------------</span>
2803     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2804     
2805 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2806     set(hObject,<span class="string">'String'</span>,guiparams.smoothing_window_size)
2807 <span class="keyword">end</span>
2808 
2809 <span class="comment">% [EOF] SmoothingWindowSize_Callback</span>
2810 
2811 
2812 <span class="comment">% --------------------------------------------------------------------</span>
2813 <a name="_sub71" href="#_subfunctions" class="code">function DisplayShoreline_Callback(hObject, eventdata, handles)</a>
2814 
2815 <span class="comment">% Get the Application data:</span>
2816 <span class="comment">% -------------------------</span>
2817 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2818 
2819 <span class="comment">% Modify the Application data:</span>
2820 <span class="comment">% ----------------------------</span>
2821 guiparams.display_shoreline = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2822 
2823 <span class="comment">% Re-store the Application data:</span>
2824 <span class="comment">% ------------------------------</span>
2825 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2826 
2827 <span class="comment">% [EOF] DisplayShoreline_Callback</span>
2828 
2829 
2830 <span class="comment">% --------------------------------------------------------------------</span>
2831 <a name="_sub72" href="#_subfunctions" class="code">function AddBackground_Callback(hObject, eventdata, handles)</a>
2832 
2833 <span class="comment">% Get the Application data:</span>
2834 <span class="comment">% -------------------------</span>
2835 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2836 
2837 <span class="comment">% Modify the Application data:</span>
2838 <span class="comment">% ----------------------------</span>
2839 guiparams.add_background = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2840 
2841 <span class="comment">% Re-store the Application data:</span>
2842 <span class="comment">% ------------------------------</span>
2843 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2844 
2845 <span class="comment">% [EOF] AddBackground_Callback</span>
2846 
2847 
2848 <span class="comment">% --------------------------------------------------------------------</span>
2849 <a name="_sub73" href="#_subfunctions" class="code">function PlotPlanView_Callback(hObject, eventdata, handles)</a>
2850 <a href="#_sub56" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
2851 <span class="comment">% [EOF] PlotPlanView_Callback</span>
2852 
2853 
2854 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2855 <span class="comment">% PLOTTING/SHIP TRACKS PLOT CALLBACKS %</span>
2856 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2857 
2858 <span class="comment">% --------------------------------------------------------------------</span>
2859 <a name="_sub74" href="#_subfunctions" class="code">function HorizontalGridNodeSpacing_Callback(hObject, eventdata, handles)</a>
2860 <span class="comment">% Set the horizontal grid node spacing</span>
2861 
2862 <span class="comment">% Get the Application data:</span>
2863 <span class="comment">% -------------------------</span>
2864 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2865 
2866 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2867 <span class="comment">% ----------------------------------------------------------------</span>
2868 new_horizontal_grid_node_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2869 is_a_number = ~isnan(new_horizontal_grid_node_spacing);
2870 is_positive = new_horizontal_grid_node_spacing&gt;=0;
2871 
2872 <span class="comment">% Modify the Application data:</span>
2873 <span class="comment">% ----------------------------</span>
2874 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2875     guiparams.horizontal_grid_node_spacing = new_horizontal_grid_node_spacing;
2876     
2877     <span class="comment">% Re-store the Application data:</span>
2878     <span class="comment">% ------------------------------</span>
2879     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2880     
2881 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2882     set(hObject,<span class="string">'String'</span>,guiparams.horizontal_grid_node_spacing)
2883 <span class="keyword">end</span>
2884 
2885 <span class="comment">% [EOF] HorizontalGridNodeSpacing_Callback</span>
2886 
2887 <span class="comment">% --------------------------------------------------------------------</span>
2888 <a name="_sub75" href="#_subfunctions" class="code">function VerticalGridNodeSpacing_Callback(hObject, eventdata, handles)</a>
2889 <span class="comment">% Set the horizontal grid node spacing</span>
2890 
2891 <span class="comment">% Get the Application data:</span>
2892 <span class="comment">% -------------------------</span>
2893 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2894 
2895 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2896 <span class="comment">% ----------------------------------------------------------------</span>
2897 new_vertical_grid_node_spacing = str2double(get(hObject,<span class="string">'String'</span>));
2898 is_a_number = ~isnan(new_vertical_grid_node_spacing);
2899 is_positive = new_vertical_grid_node_spacing&gt;=0;
2900 
2901 <span class="comment">% Modify the Application data:</span>
2902 <span class="comment">% ----------------------------</span>
2903 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2904     guiparams.vertical_grid_node_spacing = new_vertical_grid_node_spacing;
2905     
2906     <span class="comment">% Re-store the Application data:</span>
2907     <span class="comment">% ------------------------------</span>
2908     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2909     
2910 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2911     set(hObject,<span class="string">'String'</span>,guiparams.vertical_grid_node_spacing)
2912 <span class="keyword">end</span>
2913 
2914 <span class="comment">% [EOF] VerticalGridNodeSpacing_Callback</span>
2915 
2916 <span class="comment">% --------------------------------------------------------------------</span>
2917 <a name="_sub76" href="#_subfunctions" class="code">function SetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a>
2918 <span class="comment">% Set the cross section endpoints manually</span>
2919 
2920 <span class="comment">% Get the Application data:</span>
2921 <span class="comment">% -------------------------</span>
2922 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2923 
2924 <span class="comment">% Modify the Application data:</span>
2925 <span class="comment">% ----------------------------</span>
2926 guiparams.set_cross_section_endpoints = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2927 
2928 <span class="comment">% Re-store the Application data:</span>
2929 <span class="comment">% ------------------------------</span>
2930 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2931 
2932 <span class="comment">% [EOF] SetCrossSectionEndpoints_Callback</span>
2933 
2934 
2935 <span class="comment">% --------------------------------------------------------------------</span>
2936 <a name="_sub77" href="#_subfunctions" class="code">function PlotShiptracks_Callback(hObject, eventdata, handles)</a>
2937 <a href="#_sub55" class="code" title="subfunction shiptracksPlotCallback(hObject, eventdata, handles)">shiptracksPlotCallback</a>(hObject, eventdata, handles)
2938 <span class="comment">% [EOF] PlotShiptracks_Callback</span>
2939 
2940 
2941 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2942 <span class="comment">% PLOTTING/CROSS SECTION PLOT CALLBACKS %</span>
2943 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2944 
2945 <span class="comment">% --------------------------------------------------------------------</span>
2946 <a name="_sub78" href="#_subfunctions" class="code">function Contour_Callback(hObject, eventdata, handles)</a>
2947 
2948 <span class="comment">% Get the Application data:</span>
2949 <span class="comment">% -------------------------</span>
2950 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2951 
2952 <span class="comment">% Modify the Application data:</span>
2953 <span class="comment">% ----------------------------</span>
2954 idx_variable = get(hObject,<span class="string">'Value'</span>);
2955 guiparams.idx_contour = idx_variable;
2956 guiparams.contour = guiparams.contours(idx_variable).variable;
2957 
2958 <span class="comment">% Re-store the Application data:</span>
2959 <span class="comment">% ------------------------------</span>
2960 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2961 
2962 <span class="comment">% [EOF] Contour_Callback</span>
2963 
2964 
2965 <span class="comment">% --------------------------------------------------------------------</span>
2966 <a name="_sub79" href="#_subfunctions" class="code">function VerticalExaggeration_Callback(hObject, eventdata, handles)</a>
2967 <span class="comment">% Set vertical exaggeration</span>
2968 
2969 <span class="comment">% Get the Application data:</span>
2970 <span class="comment">% -------------------------</span>
2971 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2972 
2973 <span class="comment">% Modify the Application data:</span>
2974 <span class="comment">% ----------------------------</span>
2975 guiparams.vertical_exaggeration = str2double(get(hObject,<span class="string">'String'</span>));
2976 
2977 <span class="comment">% Re-store the Application data:</span>
2978 <span class="comment">% ------------------------------</span>
2979 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2980 
2981 <span class="comment">% Update the GUI:</span>
2982 <span class="comment">% ---------------</span>
2983 <span class="comment">% updateGUI(handles,guiparams)</span>
2984 
2985 <span class="comment">% [EOF] VerticalExaggeration_Callback</span>
2986 
2987 
2988 <span class="comment">% --------------------------------------------------------------------</span>
2989 <a name="_sub80" href="#_subfunctions" class="code">function VectorScaleCrossSection_Callback(hObject, eventdata, handles)</a>
2990 
2991 <span class="comment">% Get the Application data:</span>
2992 <span class="comment">% -------------------------</span>
2993 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2994 
2995 <span class="comment">% Modify the Application data:</span>
2996 <span class="comment">% ----------------------------</span>
2997 guiparams.vector_scale_cross_section = str2double(get(hObject,<span class="string">'String'</span>));
2998 
2999 <span class="comment">% Re-store the Application data:</span>
3000 <span class="comment">% ------------------------------</span>
3001 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3002 
3003 <span class="comment">% Update the GUI:</span>
3004 <span class="comment">% ---------------</span>
3005 <span class="comment">% updateGUI(handles,guiparams)</span>
3006 
3007 <span class="comment">% [EOF] VectorScaleCrossSection_Callback</span>
3008 
3009 
3010 <span class="comment">% --------------------------------------------------------------------</span>
3011 <a name="_sub81" href="#_subfunctions" class="code">function HorizontalVectorSpacing_Callback(hObject, eventdata, handles)</a>
3012 
3013 <span class="comment">% Get the Application data:</span>
3014 <span class="comment">% -------------------------</span>
3015 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3016 
3017 <span class="comment">% Modify the Application data:</span>
3018 <span class="comment">% ----------------------------</span>
3019 guiparams.horizontal_vector_spacing = str2double(get(hObject,<span class="string">'String'</span>));
3020 
3021 <span class="comment">% Re-store the Application data:</span>
3022 <span class="comment">% ------------------------------</span>
3023 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3024 
3025 <span class="comment">% Update the GUI:</span>
3026 <span class="comment">% ---------------</span>
3027 <span class="comment">% updateGUI(handles,guiparams)</span>
3028 
3029 <span class="comment">% [EOF] HorizontalVectorSpacing_Callback</span>
3030 
3031 
3032 <span class="comment">% --------------------------------------------------------------------</span>
3033 <a name="_sub82" href="#_subfunctions" class="code">function VerticalVectorSpacing_Callback(hObject, eventdata, handles)</a>
3034 <span class="comment">% Get the vertical quiver spacing for contour plots</span>
3035 
3036 <span class="comment">% Get the Application data:</span>
3037 <span class="comment">% -------------------------</span>
3038 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3039 
3040 <span class="comment">% Modify the Application data:</span>
3041 <span class="comment">% ----------------------------</span>
3042 guiparams.vertical_vector_spacing = str2double(get(hObject,<span class="string">'String'</span>));
3043 
3044 <span class="comment">% Re-store the Application data:</span>
3045 <span class="comment">% ------------------------------</span>
3046 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3047 
3048 <span class="comment">% Update the GUI:</span>
3049 <span class="comment">% ---------------</span>
3050 <span class="comment">% updateGUI(handles,guiparams)</span>
3051 
3052 <span class="comment">% [EOF] VerticalVectorSpacing_Callback</span>
3053 
3054 
3055 <span class="comment">% --------------------------------------------------------------------</span>
3056 <a name="_sub83" href="#_subfunctions" class="code">function HorizontalSmoothingWindow_Callback(hObject, eventdata, handles)</a>
3057 <span class="comment">% Horizontal Smoothing</span>
3058 
3059 <span class="comment">% Get the Application data:</span>
3060 <span class="comment">% -------------------------</span>
3061 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3062 
3063 <span class="comment">% Modify the Application data:</span>
3064 <span class="comment">% ----------------------------</span>
3065 guiparams.horizontal_smoothing_window = str2double(get(hObject,<span class="string">'String'</span>));
3066 
3067 <span class="comment">% Re-store the Application data:</span>
3068 <span class="comment">% ------------------------------</span>
3069 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3070 
3071 <span class="comment">% Update the GUI:</span>
3072 <span class="comment">% ---------------</span>
3073 <span class="comment">% updateGUI(handles,guiparams)</span>
3074 
3075 <span class="comment">% [EOF] HorizontalSmoothingWindow_Callback</span>
3076 
3077 
3078 <span class="comment">% --------------------------------------------------------------------</span>
3079 <a name="_sub84" href="#_subfunctions" class="code">function VerticalSmoothingWindow_Callback(hObject, eventdata, handles)</a>
3080 <span class="comment">% Vertical Smoothing</span>
3081 
3082 <span class="comment">% Get the Application data:</span>
3083 <span class="comment">% -------------------------</span>
3084 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3085 
3086 <span class="comment">% Modify the Application data:</span>
3087 <span class="comment">% ----------------------------</span>
3088 guiparams.vertical_smoothing_window = str2double(get(hObject,<span class="string">'String'</span>));
3089 
3090 <span class="comment">% Re-store the Application data:</span>
3091 <span class="comment">% ------------------------------</span>
3092 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3093 
3094 <span class="comment">% Update the GUI:</span>
3095 <span class="comment">% ---------------</span>
3096 <span class="comment">% updateGUI(handles,guiparams)</span>
3097 
3098 <span class="comment">% [EOF] VerticalSmoothingWindow_Callback</span>
3099 
3100 
3101 <span class="comment">% --------------------------------------------------------------------</span>
3102 <a name="_sub85" href="#_subfunctions" class="code">function PlotSecondaryFlowVectors_Callback(hObject, eventdata, handles)</a>
3103 
3104 <span class="comment">% Get the Application data:</span>
3105 <span class="comment">% -------------------------</span>
3106 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3107 
3108 <span class="comment">% Modify the Application data:</span>
3109 <span class="comment">% ----------------------------</span>
3110 guiparams.plot_secondary_flow_vectors = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
3111 
3112 <span class="comment">% Re-store the Application data:</span>
3113 <span class="comment">% ------------------------------</span>
3114 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3115 
3116 <span class="comment">% [EOF] PlotSecondaryFlowVectors_Callback</span>
3117 
3118 
3119 <span class="comment">% --------------------------------------------------------------------</span>
3120 <a name="_sub86" href="#_subfunctions" class="code">function SecondaryFlowVectorVariable_Callback(hObject, eventdata, handles)</a>
3121 
3122 <span class="comment">% Get the Application data:</span>
3123 <span class="comment">% -------------------------</span>
3124 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3125 
3126 <span class="comment">% Modify the Application data:</span>
3127 <span class="comment">% ----------------------------</span>
3128 idx_variable = get(hObject,<span class="string">'Value'</span>);
3129 guiparams.idx_secondary_flow_vector_variable = idx_variable;
3130 guiparams.secondary_flow_vector_variable = guiparams.secondary_flows(idx_variable).variable;
3131 
3132 <span class="comment">% Re-store the Application data:</span>
3133 <span class="comment">% ------------------------------</span>
3134 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3135 
3136 <span class="comment">% [EOF] SecondaryFlowVectorVariable_Callback</span>
3137 
3138 
3139 <span class="comment">% --------------------------------------------------------------------</span>
3140 <a name="_sub87" href="#_subfunctions" class="code">function IncludeVerticalVelocity_Callback(hObject, eventdata, handles)</a>
3141 
3142 <span class="comment">% Get the Application data:</span>
3143 <span class="comment">% -------------------------</span>
3144 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3145 
3146 <span class="comment">% Modify the Application data:</span>
3147 <span class="comment">% ----------------------------</span>
3148 guiparams.include_vertical_velocity = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
3149 
3150 <span class="comment">% Re-store the Application data:</span>
3151 <span class="comment">% ------------------------------</span>
3152 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3153 
3154 <span class="comment">% [EOF] IncludeVerticalVelocity_Callback</span>
3155 
3156 
3157 <span class="comment">% --------------------------------------------------------------------</span>
3158 <a name="_sub88" href="#_subfunctions" class="code">function PlotCrossSection_Callback(hObject, eventdata, handles)</a>
3159 <a href="#_sub57" class="code" title="subfunction crosssectionPlotCallback(hObject, eventdata, handles)">crosssectionPlotCallback</a>(hObject, eventdata, handles)
3160 <span class="comment">% [EOF] PlotCrossSection_Callback</span>
3161 
3162 
3163 <span class="comment">% --------------------------------------------------------------------</span>
3164 <a name="_sub89" href="#_subfunctions" class="code">function ClearLog_Callback(hObject, eventdata, handles)</a>
3165 set(handles.LogWindow,<span class="string">'string'</span>,<span class="string">''</span>)
3166 <span class="comment">% [EOF] ClearLog_Callback</span>
3167 
3168 <span class="comment">% --------------------------------------------------------------------</span>
3169 <a name="_sub90" href="#_subfunctions" class="code">function SaveLog_Callback(hObject, eventdata, handles)</a>
3170 
3171 <span class="comment">% Get the Application data:</span>
3172 <span class="comment">% -------------------------</span>
3173 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3174 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
3175 <span class="comment">% z   = guiparams.z;   %#ok&lt;NASGU&gt;</span>
3176 <span class="comment">% A   = guiparams.A;   %#ok&lt;NASGU&gt;</span>
3177 <span class="comment">% V   = guiparams.V;   %#ok&lt;NASGU&gt;</span>
3178 <span class="comment">% Map = guiparams.Map; %#ok&lt;NASGU&gt;</span>
3179 
3180 [the_file,the_path] = <span class="keyword">...</span>
3181     uiputfile({<span class="string">'*.txt'</span>,<span class="string">'TXT-Files (*.txt)'</span>}, <span class="keyword">...</span>
3182     <span class="string">'Choose where to save the log file'</span>, <span class="keyword">...</span>
3183     fullfile(guiprefs.log_path,guiprefs.log_file));
3184 
3185 <span class="comment">% Save the log to a TXT file:</span>
3186 <span class="comment">% ---------------------------</span>
3187 <span class="keyword">if</span> ischar(the_file)
3188     guiparams.log_path = the_path;
3189     guiparams.log_file = the_file;
3190     <span class="comment">%guiparams.savefile = the_file;</span>
3191     
3192     <span class="comment">% Re-store the Application data:</span>
3193     <span class="comment">% ------------------------------</span>
3194     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3195     
3196     <span class="comment">% Update the preferences:</span>
3197     <span class="comment">% -----------------------</span>
3198     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
3199     guiprefs.log_path = the_path;
3200     guiprefs.log_file = the_file;
3201     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
3202     <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'log'</span>)
3203     
3204     [~,filename,extension] = fileparts(the_file);
3205     savefile = [the_path filename extension];
3206     h = msgbox([<span class="string">'Saving log to: '''</span> savefile <span class="string">''''</span>], <span class="keyword">...</span>
3207         <span class="string">'Saving Log File...'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
3208     
3209     logfile = get(handles.LogWindow,<span class="string">'string'</span>);
3210     [nrows,~]= size(logfile);
3211     fid = fopen(savefile, <span class="string">'w'</span>);
3212     <span class="keyword">for</span> row=1:nrows
3213         fprintf(fid, <span class="string">'%s \n'</span>, logfile{row,:});
3214     <span class="keyword">end</span>
3215     fclose(fid);
3216 <span class="keyword">end</span>
3217 <span class="comment">% [EOF] SaveLog_Callback</span>
3218 
3219 <span class="comment">%%%%%%%%%%%%%%%%</span>
3220 <span class="comment">% SUBFUNCTIONS %</span>
3221 <span class="comment">%%%%%%%%%%%%%%%%</span>
3222 
3223 <span class="comment">% --------------------------------------------------------------------</span>
3224 <a name="_sub91" href="#_subfunctions" class="code">function handles = buildToolbar(handles)</a>
3225 
3226 icons = <a href="#_sub107" class="code" title="subfunction icons = getIcons">getIcons</a>;
3227 ht = uitoolbar(<span class="string">'Parent'</span>,handles.figure1);
3228 
3229 <span class="comment">% Load data</span>
3230 <span class="comment">% icon = imread('C:\Users\pfricker\Desktop\icons\file_open.png');</span>
3231 <span class="comment">% icon = double(icon)/(2^16-1);</span>
3232 <span class="comment">% icon(icon==0) = NaN;</span>
3233 handles.toolbarLoadData = <span class="keyword">...</span>
3234     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3235     <span class="string">'CData'</span>,        icons(1).data, <span class="keyword">...</span>
3236     <span class="string">'TooltipString'</span>,<span class="string">'Open ASCII File'</span>);
3237 
3238 <span class="comment">% Save data</span>
3239 <span class="comment">% icon = imread('C:\Users\pfricker\Desktop\icons\file_save.png');</span>
3240 <span class="comment">% icon = double(icon)/(2^16-1);</span>
3241 <span class="comment">% icon(icon==0) = NaN;</span>
3242 handles.toolbarSaveMatFile = <span class="keyword">...</span>
3243     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3244     <span class="string">'CData'</span>,        icons(2).data, <span class="keyword">...</span>
3245     <span class="string">'TooltipString'</span>,<span class="string">'Save MAT File'</span>, <span class="keyword">...</span>
3246     <span class="string">'Separator'</span>,    <span class="string">'on'</span>);
3247 
3248 
3249 <span class="comment">% Save bathymetry</span>
3250 <span class="comment">%icon = ones(16,16,3);</span>
3251 handles.toolbarSaveBathymetry = <span class="keyword">...</span>
3252     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3253     <span class="string">'CData'</span>,        icons(5).data, <span class="keyword">...</span>
3254     <span class="string">'TooltipString'</span>,<span class="string">'Export Bathymetry'</span>);
3255 
3256 <span class="comment">% Save figures</span>
3257 <span class="comment">% icon = ones(16,16,3);</span>
3258 handles.toolbarSaveFigures = <span class="keyword">...</span>
3259     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3260     <span class="string">'CData'</span>,        icons(6).data, <span class="keyword">...</span>
3261     <span class="string">'TooltipString'</span>,<span class="string">'Export Figures'</span>);
3262 
3263 <span class="comment">% Save Excel File</span>
3264 <span class="comment">% icon = ones(16,16,3);</span>
3265 handles.toolbarSaveExcel = <span class="keyword">...</span>
3266     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3267     <span class="string">'CData'</span>,        icons(7).data, <span class="keyword">...</span>
3268     <span class="string">'TooltipString'</span>,<span class="string">'Export Excel File'</span>);
3269 
3270 
3271 <span class="comment">% Plotting parameters</span>
3272 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\PlotGeneralElement.gif');</span>
3273 <span class="comment">% icon = ind2rgb(icon,map);</span>
3274 handles.toolbarPlottingParameters = <span class="keyword">...</span>
3275     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3276     <span class="string">'CData'</span>,        icons(3).data, <span class="keyword">...</span>
3277     <span class="string">'TooltipString'</span>,<span class="string">'Plotting Parameters'</span>, <span class="keyword">...</span>
3278     <span class="string">'Separator'</span>,    <span class="string">'on'</span>);
3279 
3280 <span class="comment">% Processing parameters</span>
3281 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3282 <span class="comment">% icon = ind2rgb(icon,map);</span>
3283 handles.toolbarProcessingParameters = <span class="keyword">...</span>
3284     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3285     <span class="string">'CData'</span>,        icons(4).data, <span class="keyword">...</span>
3286     <span class="string">'TooltipString'</span>,<span class="string">'Processing Parameters'</span>);
3287 
3288 <span class="comment">% Zoom In</span>
3289 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3290 <span class="comment">% icon = ind2rgb(icon,map);</span>
3291 <span class="comment">% handles.toolbarZoomIn = ...</span>
3292 <span class="comment">%     uitoggletool('Parent',       ht, ...</span>
3293 <span class="comment">%     'CData',        icons(8).data, ...</span>
3294 <span class="comment">%     'TooltipString','Zoom In (Shiptracks)', ...</span>
3295 <span class="comment">%     'Separator',     'on');</span>
3296 
3297 <span class="comment">% Zoom Out</span>
3298 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3299 <span class="comment">% icon = ind2rgb(icon,map);</span>
3300 <span class="comment">% handles.toolbarZoomOut = ...</span>
3301 <span class="comment">%     uitoggletool('Parent',       ht, ...</span>
3302 <span class="comment">%     'CData',        icons(9).data, ...</span>
3303 <span class="comment">%     'TooltipString','Zoom Out (Shiptracks)');</span>
3304 
3305 <span class="comment">% Pan</span>
3306 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3307 <span class="comment">% icon = ind2rgb(icon,map);</span>
3308 <span class="comment">% handles.toolbarPan = ...</span>
3309 <span class="comment">%     uipushtool('Parent',       ht, ...</span>
3310 <span class="comment">%     'CData',        icons(10).data, ...</span>
3311 <span class="comment">%     'TooltipString','Pan (Shiptracks)');</span>
3312 
3313 
3314 
3315 set(handles.toolbarLoadData,            <span class="string">'ClickedCallback'</span>,{@<a href="#_sub50" class="code" title="subfunction loadDataCallback(hObject, eventdata, handles)">loadDataCallback</a>,handles})
3316 set(handles.toolbarSaveMatFile,         <span class="string">'ClickedCallback'</span>,{@<a href="#_sub51" class="code" title="subfunction saveDataCallback(hObject, eventdata, handles)">saveDataCallback</a>,handles})
3317 set(handles.toolbarSaveBathymetry,      <span class="string">'ClickedCallback'</span>,{@<a href="#_sub61" class="code" title="subfunction ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)">ExportMultibeamBathymetry_Callback</a>,handles})
3318 set(handles.toolbarSaveFigures,         <span class="string">'ClickedCallback'</span>,{@<a href="#_sub21" class="code" title="subfunction menuExportFigures_Callback(hObject, eventdata, handles)">menuExportFigures_Callback</a>,handles})
3319 set(handles.toolbarSaveExcel,           <span class="string">'ClickedCallback'</span>,{@<a href="#_sub25" class="code" title="subfunction menuSaveExcel_Callback(hObject, eventdata, handles)">menuSaveExcel_Callback</a>,handles})
3320 set(handles.toolbarPlottingParameters,  <span class="string">'ClickedCallback'</span>,{@<a href="#_sub53" class="code" title="subfunction plottingParametersCallback(hObject, eventdata, handles)">plottingParametersCallback</a>,handles})
3321 set(handles.toolbarProcessingParameters,<span class="string">'ClickedCallback'</span>,{@<a href="#_sub54" class="code" title="subfunction processingParametersCallback(hObject, eventdata, handles)">processingParametersCallback</a>,handles})
3322 <span class="comment">% set(handles.toolbarZoomIn,              'ClickedCallback',{@ShiptracksZoom_Callback,handles})</span>
3323 <span class="comment">% set(handles.toolbarZoomOut,              'ClickedCallback',{@ShiptracksZoom_Callback,handles})</span>
3324 <span class="comment">% set(handles.toolbarPan,              'ClickedCallback',{@ShiptracksPan_Callback,handles})</span>
3325 <span class="comment">% set(handles.planviewPlot,        'ClickedCallback',{@planviewPlotCallback,handles})</span>
3326 <span class="comment">% set(handles.crosssectionPlot,    'ClickedCallback',{@crosssectionPlotCallback,handles})</span>
3327 
3328 <span class="comment">% [EOF] buildtoolbar</span>
3329 
3330 
3331 <span class="comment">% --------------------------------------------------------------------</span>
3332 <a name="_sub92" href="#_subfunctions" class="code">function load_prefs(hfigure)</a>
3333 <span class="comment">% Load the GUI preferences.  Also, initialize preferences if they don't</span>
3334 <span class="comment">% already exist.</span>
3335 
3336 <span class="comment">% Preferences:</span>
3337 <span class="comment">% 'ascii'                Path and filenames of current ASCII files</span>
3338 <span class="comment">% 'mat'                  Path and filename of current MAT file</span>
3339 <span class="comment">% 'tecplot'              Path and filename of last Tecplot file</span>
3340 <span class="comment">% 'kmz'                  Path and filename of last KMZ file</span>
3341 <span class="comment">% 'multibeambathymetry'  Path and filename of last Multibeam Bathymetry file</span>
3342 <span class="comment">% 'log'                  Path and filename of last Log file</span>
3343 <span class="comment">% 'iric'                 Path and filename of last iRic ANV file</span>
3344 <span class="comment">% 'excel'                Path and filename of last Excel file</span>
3345 <span class="comment">% 'aerial'               Path and filename of last Aerial file</span>
3346 <span class="comment">% 'shoreline'            Path and filename of last Shoreline file</span>
3347 <span class="comment">% 'renderer'             Default graphics renderer</span>
3348 <span class="comment">% 'units'                Default plotting units</span>
3349 
3350 <span class="comment">% Originals</span>
3351 <span class="comment">% prefs = {'ascii2gispath' 'ascii2kmlpath' 'asciipath'   'doqqpath' ...</span>
3352 <span class="comment">%          'endspath'      'logpath'       'matpath'     'savedpath' ...</span>
3353 <span class="comment">%          'shorepath'     'stapath'       'ysidatapath' 'ysidatapath'};</span>
3354 
3355 <span class="comment">% ASCII</span>
3356 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>)
3357     ascii = getpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>);
3358     <span class="keyword">if</span> exist(ascii.path,<span class="string">'dir'</span>)
3359         guiprefs.ascii_path = ascii.path;
3360     <span class="keyword">else</span>
3361         guiprefs.ascii_path = pwd;
3362     <span class="keyword">end</span>
3363     does_exist = false(1,length(ascii.file));
3364     <span class="keyword">for</span> k = 1:length(ascii.file) <span class="comment">% Check each file one-by-one</span>
3365         does_exist(k) = exist(fullfile(ascii.path,ascii.file{k}),<span class="string">'file'</span>);
3366     <span class="keyword">end</span>
3367     <span class="keyword">if</span> any(does_exist)
3368         guiprefs.ascii_file = ascii.file(does_exist);
3369     <span class="keyword">else</span>
3370         guiprefs.ascii_file = {<span class="string">''</span>};
3371     <span class="keyword">end</span>
3372 <span class="keyword">else</span> <span class="comment">% Initialize ASCII</span>
3373     guiprefs.ascii_path = pwd;
3374     guiprefs.ascii_file = {<span class="string">''</span>};
3375     
3376     ascii.path = pwd;
3377     ascii.file = {<span class="string">''</span>};
3378     setpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>,ascii)
3379 <span class="keyword">end</span>
3380 
3381 <span class="comment">% MAT</span>
3382 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>)
3383     mat = getpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>);
3384     <span class="keyword">if</span> exist(mat.path,<span class="string">'dir'</span>)
3385         guiprefs.mat_path = mat.path;
3386     <span class="keyword">else</span>
3387         guiprefs.mat_path = pwd;
3388     <span class="keyword">end</span>
3389     
3390     <span class="keyword">if</span> iscell(mat.file)
3391         <span class="keyword">if</span> exist(fullfile(mat.path,mat.file{1}),<span class="string">'file'</span>)
3392             guiprefs.mat_file = mat.file;
3393         <span class="keyword">else</span>
3394             guiprefs.mat_file = <span class="string">''</span>;
3395         <span class="keyword">end</span>
3396     <span class="keyword">else</span>
3397         <span class="keyword">if</span> exist(fullfile(mat.path,mat.file),<span class="string">'file'</span>)
3398             guiprefs.mat_file = mat.file;
3399         <span class="keyword">else</span>
3400             guiprefs.mat_file = <span class="string">''</span>;
3401         <span class="keyword">end</span>
3402     <span class="keyword">end</span>
3403 <span class="keyword">else</span> <span class="comment">% Initialize MAT</span>
3404     guiprefs.mat_path = pwd;
3405     guiprefs.mat_file = <span class="string">''</span>;
3406     
3407     mat.path = pwd;
3408     mat.file = <span class="string">''</span>;
3409     setpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>,mat)
3410 <span class="keyword">end</span>
3411 
3412 <span class="comment">% TECPLOT</span>
3413 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>)
3414     tecplot = getpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>);
3415     <span class="keyword">if</span> exist(tecplot.path,<span class="string">'dir'</span>)
3416         guiprefs.tecplot_path = tecplot.path;
3417     <span class="keyword">else</span>
3418         guiprefs.tecplot_path = pwd;
3419     <span class="keyword">end</span>
3420     <span class="keyword">if</span> exist(fullfile(tecplot.path,tecplot.file),<span class="string">'file'</span>)
3421         guiprefs.tecplot_file = tecplot.file;
3422     <span class="keyword">else</span>
3423         guiprefs.tecplot_file = <span class="string">''</span>;
3424     <span class="keyword">end</span>
3425 <span class="keyword">else</span> <span class="comment">% Initialize TECPLOT</span>
3426     guiprefs.tecplot_path = pwd;
3427     guiprefs.tecplot_file = <span class="string">''</span>;
3428     
3429     tecplot.path = pwd;
3430     tecplot.file = <span class="string">''</span>;
3431     setpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>,tecplot)
3432 <span class="keyword">end</span>
3433 
3434 <span class="comment">% KMZ</span>
3435 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>)
3436     kmz = getpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>);
3437     <span class="keyword">if</span> exist(kmz.path,<span class="string">'dir'</span>)
3438         guiprefs.kmz_path = kmz.path;
3439     <span class="keyword">else</span>
3440         guiprefs.kmz_path = pwd;
3441     <span class="keyword">end</span>
3442     <span class="keyword">if</span> exist(fullfile(kmz.path,kmz.file),<span class="string">'file'</span>)
3443         guiprefs.kmz_file = kmz.file;
3444     <span class="keyword">else</span>
3445         guiprefs.kmz_file = <span class="string">''</span>;
3446     <span class="keyword">end</span>
3447 <span class="keyword">else</span> <span class="comment">% Initialize KMZ</span>
3448     guiprefs.kmz_path = pwd;
3449     guiprefs.kmz_file = <span class="string">''</span>;
3450     
3451     kmz.path = pwd;
3452     kmz.file = <span class="string">''</span>;
3453     setpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>,kmz)
3454 <span class="keyword">end</span>
3455 
3456 <span class="comment">% MULTIBEAM BATHYMETRY</span>
3457 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>)
3458     multibeambathymetry = getpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>);
3459     <span class="keyword">if</span> exist(multibeambathymetry.path,<span class="string">'dir'</span>)
3460         guiprefs.multibeambathymetry_path = multibeambathymetry.path;
3461     <span class="keyword">else</span>
3462         guiprefs.multibeambathymetry_path = pwd;
3463     <span class="keyword">end</span>
3464     <span class="keyword">if</span> exist(fullfile(multibeambathymetry.path,multibeambathymetry.file),<span class="string">'file'</span>)
3465         guiprefs.multibeambathymetry_file = multibeambathymetry.file;
3466     <span class="keyword">else</span>
3467         guiprefs.multibeambathymetry_file = <span class="string">''</span>;
3468     <span class="keyword">end</span>
3469 <span class="keyword">else</span> <span class="comment">% Initialize MULTIBEAM BATHYMETRY</span>
3470     guiprefs.multibeambathymetry_path = pwd;
3471     guiprefs.multibeambathymetry_file = <span class="string">''</span>;
3472     
3473     multibeambathymetry.path = pwd;
3474     multibeambathymetry.file = <span class="string">''</span>;
3475     setpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>,multibeambathymetry)
3476 <span class="keyword">end</span>
3477 
3478 <span class="comment">% Log</span>
3479 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'log'</span>)
3480     log = getpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>);
3481     <span class="keyword">if</span> exist(log.path,<span class="string">'dir'</span>)
3482         guiprefs.log_path = log.path;
3483     <span class="keyword">else</span>
3484         guiprefs.log_path = pwd;
3485     <span class="keyword">end</span>
3486     <span class="keyword">if</span> exist(fullfile(log.path,log.file),<span class="string">'file'</span>)
3487         guiprefs.log_file = log.file;
3488     <span class="keyword">else</span>
3489         guiprefs.log_file = <span class="string">''</span>;
3490     <span class="keyword">end</span>
3491 <span class="keyword">else</span> <span class="comment">% Initialize Log</span>
3492     guiprefs.log_path = pwd;
3493     guiprefs.log_file = <span class="string">''</span>;
3494     
3495     log.path = pwd;
3496     log.file = <span class="string">''</span>;
3497     setpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>,log)
3498 <span class="keyword">end</span>
3499 
3500 <span class="comment">% iRic</span>
3501 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>)
3502     iric = getpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>);
3503     <span class="keyword">if</span> exist(iric.path,<span class="string">'dir'</span>)
3504         guiprefs.iric_path = iric.path;
3505     <span class="keyword">else</span>
3506         guiprefs.iric_path = pwd;
3507     <span class="keyword">end</span>
3508     <span class="keyword">if</span> exist(fullfile(iric.path,iric.file),<span class="string">'file'</span>)
3509         guiprefs.iric_file = iric.file;
3510     <span class="keyword">else</span>
3511         guiprefs.iric_file = <span class="string">''</span>;
3512     <span class="keyword">end</span>
3513 <span class="keyword">else</span> <span class="comment">% Initialize Log</span>
3514     guiprefs.iric_path = pwd;
3515     guiprefs.iric_file = <span class="string">''</span>;
3516     
3517     iric.path = pwd;
3518     iric.file = <span class="string">''</span>;
3519     setpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>,iric)
3520 <span class="keyword">end</span>
3521 
3522 <span class="comment">% excel</span>
3523 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>)
3524     excel = getpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>);
3525     <span class="keyword">if</span> exist(excel.path,<span class="string">'dir'</span>)
3526         guiprefs.excel_path = excel.path;
3527     <span class="keyword">else</span>
3528         guiprefs.excel_path = pwd;
3529     <span class="keyword">end</span>
3530     <span class="keyword">if</span> exist(fullfile(excel.path,excel.file),<span class="string">'file'</span>)
3531         guiprefs.excel_file = excel.file;
3532     <span class="keyword">else</span>
3533         guiprefs.excel_file = <span class="string">''</span>;
3534     <span class="keyword">end</span>
3535 <span class="keyword">else</span> <span class="comment">% Initialize pref</span>
3536     guiprefs.excel_path = pwd;
3537     guiprefs.excel_file = <span class="string">''</span>;
3538     
3539     excel.path = pwd;
3540     excel.file = <span class="string">''</span>;
3541     setpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>,excel)
3542 <span class="keyword">end</span>
3543 
3544 <span class="comment">% aerial</span>
3545 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>)
3546     aerial = getpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>);
3547     <span class="keyword">if</span> exist(aerial.path,<span class="string">'dir'</span>)
3548         guiprefs.aerial_path = aerial.path;
3549     <span class="keyword">else</span>
3550         guiprefs.aerial_path = pwd;
3551     <span class="keyword">end</span>
3552     does_exist = false(1,length(aerial.file));
3553     <span class="keyword">if</span> iscell(aerial.file)
3554     <span class="keyword">for</span> k = 1:numel(aerial.file) <span class="comment">% Check each file one-by-one</span>
3555         does_exist(k) = exist(fullfile(aerial.path,aerial.file{k}),<span class="string">'file'</span>);
3556     <span class="keyword">end</span>
3557     <span class="keyword">else</span>
3558         does_exist = exist(fullfile(aerial.path,aerial.file),<span class="string">'file'</span>);
3559     <span class="keyword">end</span>
3560     <span class="keyword">if</span> any(does_exist)
3561         guiprefs.aerial_file = aerial.file;
3562     <span class="keyword">else</span>
3563         guiprefs.aerial_file = {<span class="string">''</span>};
3564     <span class="keyword">end</span>
3565 <span class="keyword">else</span> <span class="comment">% Initialize aerial</span>
3566     guiprefs.aerial_path = pwd;
3567     guiprefs.aerial_file = {<span class="string">''</span>};
3568     
3569     aerial.path = pwd;
3570     aerial.file = {<span class="string">''</span>};
3571     setpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>,aerial)
3572 <span class="keyword">end</span>
3573 
3574 <span class="comment">% shoreline</span>
3575 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>)
3576     shoreline = getpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>);
3577     <span class="keyword">if</span> exist(shoreline.path,<span class="string">'dir'</span>)
3578         guiprefs.shoreline_path = shoreline.path;
3579     <span class="keyword">else</span>
3580         guiprefs.shoreline_path = pwd;
3581     <span class="keyword">end</span>
3582     
3583     <span class="keyword">if</span> iscell(shoreline.file)
3584         <span class="keyword">if</span> exist(fullfile(shoreline.path,shoreline.file{1}),<span class="string">'file'</span>)
3585             guiprefs.shoreline_file = shoreline.file;
3586         <span class="keyword">else</span>
3587             guiprefs.shoreline_file = <span class="string">''</span>;
3588         <span class="keyword">end</span>
3589     <span class="keyword">else</span>
3590         <span class="keyword">if</span> exist(fullfile(shoreline.path,shoreline.file),<span class="string">'file'</span>)
3591             guiprefs.shoreline_file = shoreline.file;
3592         <span class="keyword">else</span>
3593             guiprefs.shoreline_file = <span class="string">''</span>;
3594         <span class="keyword">end</span>
3595     <span class="keyword">end</span>
3596 <span class="keyword">else</span> <span class="comment">% Initialize shoreline</span>
3597     guiprefs.shoreline_path = pwd;
3598     guiprefs.shoreline_file = <span class="string">''</span>;
3599     
3600     shoreline.path = pwd;
3601     shoreline.file = <span class="string">''</span>;
3602     setpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>,shoreline)
3603 <span class="keyword">end</span>
3604 <span class="comment">% guiprefs.presentation = true;</span>
3605 <span class="comment">% guiprefs.print        = false;</span>
3606 
3607 <span class="comment">% for k = 1:length(prefs)</span>
3608 <span class="comment">%     newpref = '';</span>
3609 <span class="comment">%     if ispref('VMT',prefs{k})</span>
3610 <span class="comment">%         stored_newpref = getpref('VMT',prefs{k});</span>
3611 <span class="comment">%         if exist(stored_newpref,'dir')</span>
3612 <span class="comment">%             newpref = stored_newpref;</span>
3613 <span class="comment">%         else</span>
3614 <span class="comment">%             setpref('VMT',prefs{k},newpref)</span>
3615 <span class="comment">%         end</span>
3616 <span class="comment">%     end</span>
3617 <span class="comment">%     guiprefs.(prefs{k}) = newpref;</span>
3618 <span class="comment">% end</span>
3619 
3620 <span class="comment">% RENDERER</span>
3621 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>)
3622     renderer = getpref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>);
3623     guiprefs.renderer = renderer;
3624 <span class="keyword">else</span> <span class="comment">% Initialize RENDERER</span>
3625     renderer           = <span class="string">'OpenGL'</span>;
3626     guiprefs.renderer  = renderer;
3627     setpref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>,renderer)
3628 <span class="keyword">end</span>
3629 
3630 <span class="comment">% UNITS</span>
3631 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'units'</span>)
3632     units = getpref(<span class="string">'VMT'</span>,<span class="string">'units'</span>);
3633     guiprefs.units = units;
3634 <span class="keyword">else</span> <span class="comment">% Initialize RENDERER</span>
3635     units           = <span class="string">'metric'</span>;
3636     guiprefs.units  = renderer;
3637     setpref(<span class="string">'VMT'</span>,<span class="string">'units'</span>,units)
3638 <span class="keyword">end</span>
3639 
3640 setappdata(hfigure,<span class="string">'guiprefs'</span>,guiprefs)
3641 
3642 <span class="comment">% [EOF] load_prefs</span>
3643 
3644 
3645 <span class="comment">% --------------------------------------------------------------------</span>
3646 <a name="_sub93" href="#_subfunctions" class="code">function store_prefs(hfigure,pref)</a>
3647 <span class="comment">% Store preferences in the Application data and in the persistent</span>
3648 <span class="comment">% preferences data.</span>
3649 
3650 <span class="comment">% Preferences:</span>
3651 <span class="comment">% 'ascii'                Path and filenames of current ASCII files</span>
3652 <span class="comment">% 'mat'                  Path and filename of current MAT file</span>
3653 <span class="comment">% 'tecplot'              Path and filename of last Tecplot file</span>
3654 <span class="comment">% 'kmz'                  Path and filename of last KMZ file</span>
3655 <span class="comment">% 'multibeambathymetry'  Path and filename of last Multibeam Bathymetry file</span>
3656 <span class="comment">% 'log'                  Path and filename of last Log file</span>
3657 <span class="comment">% 'iric'                 Path and filename of last iRic ANV file</span>
3658 <span class="comment">% 'excel'                Path and filename of last Excel file</span>
3659 <span class="comment">% 'aerial'               Path and filename of last Aerial file</span>
3660 <span class="comment">% 'shoreline'            Path and filename of last Shoreline file</span>
3661 <span class="comment">% 'renderer'             Default graphics renderer</span>
3662 <span class="comment">% 'units'                Default plotting units</span>
3663 
3664 guiprefs = getappdata(hfigure,<span class="string">'guiprefs'</span>);
3665 
3666 <span class="keyword">switch</span> pref
3667     <span class="keyword">case</span> <span class="string">'ascii'</span>
3668         ascii.path = guiprefs.ascii_path;
3669         ascii.file = guiprefs.ascii_file;
3670         setpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>,ascii)
3671     <span class="keyword">case</span> <span class="string">'mat'</span>
3672         mat.path = guiprefs.mat_path;
3673         mat.file = guiprefs.mat_file;
3674         setpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>,mat)
3675     <span class="keyword">case</span> <span class="string">'tecplot'</span>
3676         tecplot.path = guiprefs.tecplot_path;
3677         tecplot.file = guiprefs.tecplot_file;
3678         setpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>,tecplot)
3679     <span class="keyword">case</span> <span class="string">'kmz'</span>
3680         kmz.path = guiprefs.kmz_path;
3681         kmz.file = guiprefs.kmz_file;
3682         setpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>,kmz)
3683     <span class="keyword">case</span> <span class="string">'multibeambathymetry'</span>
3684         multibeambathymetry.path = guiprefs.multibeambathymetry_path;
3685         multibeambathymetry.file = guiprefs.multibeambathymetry_file;
3686         setpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>,multibeambathymetry)
3687     <span class="keyword">case</span> <span class="string">'log'</span>
3688         log.path = guiprefs.log_path;
3689         log.file = guiprefs.log_file;
3690         setpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>,log)
3691     <span class="keyword">case</span> <span class="string">'iric'</span>
3692         iric.path = guiprefs.iric_path;
3693         iric.file = guiprefs.iric_file;
3694         setpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>,iric)
3695     <span class="keyword">case</span> <span class="string">'excel'</span>
3696         excel.path = guiprefs.excel_path;
3697         excel.file = guiprefs.excel_file;
3698         setpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>,excel)
3699     <span class="keyword">case</span> <span class="string">'aerial'</span>
3700         aerial.path = guiprefs.aerial_path;
3701         aerial.file = guiprefs.aerial_file;
3702         setpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>,aerial)
3703     <span class="keyword">case</span> <span class="string">'shoreline'</span>
3704         shoreline.path = guiprefs.shoreline_path;
3705         shoreline.file = guiprefs.shoreline_file;
3706         setpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>,shoreline)
3707     <span class="keyword">case</span> <span class="string">'renderer'</span>
3708         renderer = guiprefs.renderer;
3709         setpref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>,renderer)
3710     <span class="keyword">case</span> <span class="string">'units'</span>
3711         units = guiprefs.units;
3712         setpref(<span class="string">'VMT'</span>,<span class="string">'units'</span>,units)
3713     <span class="keyword">otherwise</span>
3714 <span class="keyword">end</span>
3715 
3716 <span class="comment">% if ismember(pref,prefs)</span>
3717 <span class="comment">%     setpref('VMT',pref,value)</span>
3718 <span class="comment">%</span>
3719 <span class="comment">%     guiprefs = getappdata(hfigure,'guiprefs');</span>
3720 <span class="comment">%     guiprefs.(pref) = value;</span>
3721 <span class="comment">%     setappdata(hfigure,'guiprefs',guiprefs)</span>
3722 <span class="comment">% end</span>
3723 
3724 <span class="comment">% [EOF] store_prefs</span>
3725 
3726 
3727 <span class="comment">% --------------------------------------------------------------------</span>
3728 <a name="_sub94" href="#_subfunctions" class="code">function initGUI(handles)</a>
3729 <span class="comment">% Initialize the UI controls in the GUI.</span>
3730 
3731 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3732 
3733 <span class="comment">% Set the name and version</span>
3734 set(handles.figure1,<span class="string">'Name'</span>,[<span class="string">'Velocity Mapping Toolbox (VMT) '</span> guiparams.vmt_version], <span class="keyword">...</span>
3735     <span class="string">'DockControls'</span>,<span class="string">'off'</span>)
3736 <span class="comment">%set(handles.VMTversion,             'String',guiparams.vmt_version)</span>
3737 
3738 <span class="comment">% Set the PLOT 1 axis labels</span>
3739 axes(handles.Plot1Shiptracks);
3740 set(handles.Plot1Shiptracks,<span class="string">'DataAspectRatio'</span>,[1 1 1],<span class="string">'PlotBoxAspectRatio'</span>,[1 1 1])
3741 xlabel(<span class="string">'UTM Easting (m)'</span>)
3742 ylabel(<span class="string">'UTM Northing (m)'</span>)
3743 box on
3744 grid on
3745 <span class="comment">% ticks_format('%6.0f','%8.0f'); %formats the ticks for UTM</span>
3746 
3747 <span class="comment">%%%%%%%%%%%%</span>
3748 <span class="comment">% MENU BAR %</span>
3749 <span class="comment">%%%%%%%%%%%%</span>
3750 <span class="keyword">if</span> guiparams.english_units
3751     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3752     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3753 <span class="keyword">else</span>
3754     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3755     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3756 <span class="keyword">end</span>
3757 
3758 <span class="keyword">if</span> guiparams.set_cross_section_endpoints
3759     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3760     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3761 <span class="keyword">else</span>
3762     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3763     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3764 <span class="keyword">end</span>
3765 
3766 
3767 <span class="keyword">if</span> guiparams.print
3768     set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3769     set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
3770     set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3771     set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3772 <span class="keyword">elseif</span> guiparams.presentation
3773     set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3774     set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
3775     set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3776     set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3777 <span class="keyword">else</span>
3778 <span class="keyword">end</span>
3779 
3780 <span class="keyword">switch</span> guiparams.renderer
3781     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
3782         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3783         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3784         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3785     <span class="keyword">case</span> <span class="string">'painters'</span>
3786         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3787         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3788         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3789     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
3790         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3791         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'off'</span>)
3792         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
3793 <span class="keyword">end</span>
3794 
3795 
3796 <span class="comment">%%%%%%%%%%%%%%%</span>
3797 <span class="comment">% DATA EXPORT %</span>
3798 <span class="comment">%%%%%%%%%%%%%%%</span>
3799 <span class="comment">% BathymetryPanel</span>
3800 <span class="comment">% set(handles.BeamAngle,                  'String',guiparams.beam_angle)</span>
3801 <span class="comment">% set(handles.MagneticVariation,          'String',guiparams.magnetic_variation)</span>
3802 <span class="comment">% set(handles.WSE,                        'String',guiparams.wse)</span>
3803 <span class="comment">% set(handles.OutputAuxiliaryData,        'Value', guiparams.output_auxiliary_data)</span>
3804 
3805 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
3806 <span class="comment">% PLOTTING/PLAN VIEW %</span>
3807 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
3808 <span class="comment">% PlanViewPanel</span>
3809 set(handles.DepthRangeMin,              <span class="string">'String'</span>,guiparams.depth_range_min)
3810 set(handles.DepthRangeMax,              <span class="string">'String'</span>,guiparams.depth_range_max)
3811 set(handles.VectorScalePlanView,        <span class="string">'String'</span>,guiparams.vector_scale_plan_view)
3812 set(handles.VectorSpacingPlanview,      <span class="string">'String'</span>,guiparams.vector_spacing_plan_view)
3813 set(handles.SmoothingWindowSize,        <span class="string">'String'</span>,guiparams.smoothing_window_size)
3814 set(handles.DisplayShoreline,           <span class="string">'Value'</span>, guiparams.display_shoreline)
3815 set(handles.AddBackground,              <span class="string">'Value'</span>, guiparams.add_background)
3816 
3817 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%</span>
3818 <span class="comment">% PLOTTING/SHIP TRACKS %</span>
3819 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%</span>
3820 <span class="comment">% ShiptracksPanel</span>
3821 set(handles.HorizontalGridNodeSpacing,  <span class="string">'String'</span>,guiparams.horizontal_grid_node_spacing)
3822 set(handles.VerticalGridNodeSpacing,    <span class="string">'String'</span>,guiparams.vertical_grid_node_spacing)
3823 <span class="comment">%set(handles.SetCrossSectionEndpoints,   'Value', guiparams.set_cross_section_endpoints)</span>
3824 
3825 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
3826 <span class="comment">% PLOTTING/CROSS SECTIONS %</span>
3827 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
3828 <span class="comment">% CrossSectionsPanel</span>
3829 set(handles.Contour,                    <span class="string">'String'</span>,{guiparams.contours.string}, <span class="keyword">...</span>
3830     <span class="string">'Value'</span>, guiparams.idx_contour)
3831 set(handles.VerticalExaggeration,       <span class="string">'String'</span>,guiparams.vertical_exaggeration)
3832 set(handles.VectorScaleCrossSection,    <span class="string">'String'</span>,guiparams.vector_scale_cross_section)
3833 set(handles.HorizontalVectorSpacing,    <span class="string">'String'</span>,guiparams.horizontal_vector_spacing)
3834 set(handles.VerticalVectorSpacing,      <span class="string">'String'</span>,guiparams.vertical_vector_spacing)
3835 set(handles.HorizontalSmoothingWindow,  <span class="string">'String'</span>,guiparams.horizontal_smoothing_window)
3836 set(handles.VerticalSmoothingWindow,    <span class="string">'String'</span>,guiparams.vertical_smoothing_window)
3837 set(handles.PlotSecondaryFlowVectors,   <span class="string">'Value'</span>, guiparams.plot_secondary_flow_vectors)
3838 set(handles.SecondaryFlowVectorVariable,<span class="string">'String'</span>,{guiparams.secondary_flows.string}, <span class="keyword">...</span>
3839     <span class="string">'Value'</span>, guiparams.idx_secondary_flow_vector_variable)
3840 set(handles.IncludeVerticalVelocity,    <span class="string">'Value'</span>, guiparams.include_vertical_velocity)
3841 
3842 <span class="comment">% set(handles.EnglishUnits,               'Value',guiparams.english_units)</span>
3843 
3844 <span class="comment">% [EOF] initGUI</span>
3845 
3846 
3847 <span class="comment">% --------------------------------------------------------------------</span>
3848 <a name="_sub95" href="#_subfunctions" class="code">function set_enable(handles,enable_state)</a>
3849 
3850 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3851 
3852 <span class="keyword">switch</span> enable_state
3853     <span class="keyword">case</span> <span class="string">'init'</span>
3854         guiparams.gui_state = <span class="string">'init'</span>;
3855         set([handles.menuFile
3856             handles.menuOpen
3857             handles.menuOpenASCII
3858             handles.menuOpenMAT
3859             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3860         
3861         set([handles.toolbarLoadData
3862             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3863         set([handles.toolbarSaveMatFile
3864             handles.toolbarSaveBathymetry
3865             handles.toolbarSaveFigures
3866             handles.toolbarSaveExcel
3867             handles.toolbarPlottingParameters
3868             handles.toolbarProcessingParameters
3869             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3870         
3871         set([handles.DepthRangeMin
3872             handles.DepthRangeMax
3873             handles.VectorScalePlanView
3874             handles.VectorSpacingPlanview
3875             handles.SmoothingWindowSize
3876             handles.DisplayShoreline
3877             handles.AddBackground
3878             handles.PlotPlanView
3879             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3880         
3881         set([handles.HorizontalGridNodeSpacing
3882             handles.VerticalGridNodeSpacing
3883             handles.PlotShiptracks
3884             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3885         
3886         set([handles.Contour
3887             handles.VerticalExaggeration
3888             handles.VectorScaleCrossSection
3889             handles.HorizontalVectorSpacing
3890             handles.VerticalVectorSpacing
3891             handles.HorizontalSmoothingWindow
3892             handles.VerticalSmoothingWindow
3893             handles.PlotSecondaryFlowVectors
3894             handles.SecondaryFlowVectorVariable
3895             handles.IncludeVerticalVelocity
3896             handles.PlotCrossSection
3897             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3898         
3899     <span class="keyword">case</span> <span class="string">'fileloaded'</span>
3900         guiparams.gui_state = <span class="string">'fileloaded'</span>;
3901         set([handles.menuFile
3902             handles.menuOpen
3903             handles.menuOpenASCII
3904             handles.menuOpenMAT
3905             handles.menuSaveMAT
3906             handles.menuSaveTecplot
3907             handles.menuSaveKMZFile
3908             handles.menuParameters
3909             handles.menuPlottingParameters
3910             handles.menuMetric
3911             handles.menuEnglish
3912             handles.menuBathymetryExportSettings
3913             handles.menuExportMultibeamBathymetry
3914             handles.menuKMZVerticalOffset
3915             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3916         
3917         set([handles.toolbarLoadData
3918             handles.toolbarSaveMatFile
3919             handles.toolbarSaveBathymetry
3920             handles.toolbarSaveExcel
3921             handles.toolbarSaveFigures
3922             handles.toolbarPlottingParameters
3923             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3924         set([handles.toolbarProcessingParameters
3925             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3926         
3927            
3928         set([handles.DepthRangeMin
3929             handles.DepthRangeMax
3930             handles.VectorScalePlanView
3931             handles.VectorSpacingPlanview
3932             handles.SmoothingWindowSize
3933             handles.DisplayShoreline
3934             handles.PlotPlanView
3935             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3936         <span class="keyword">if</span> guiparams.has_mapping_toolbox
3937             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3938         <span class="keyword">else</span>
3939             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3940         <span class="keyword">end</span>
3941         
3942         set([handles.HorizontalGridNodeSpacing
3943             handles.VerticalGridNodeSpacing
3944             handles.PlotShiptracks
3945             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3946         
3947         set([handles.Contour
3948             handles.VerticalExaggeration
3949             handles.VectorScaleCrossSection
3950             handles.HorizontalVectorSpacing
3951             handles.VerticalVectorSpacing
3952             handles.HorizontalSmoothingWindow
3953             handles.VerticalSmoothingWindow
3954             handles.PlotSecondaryFlowVectors
3955             handles.SecondaryFlowVectorVariable
3956             handles.IncludeVerticalVelocity
3957             handles.PlotCrossSection
3958             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3959     <span class="keyword">case</span> <span class="string">'multiplematfiles'</span>
3960         guiparams.gui_state = <span class="string">'multiplematfiles'</span>;
3961         set([handles.menuFile
3962             handles.menuOpen
3963             handles.menuOpenASCII
3964             handles.menuOpenMAT
3965             handles.menuParameters
3966             handles.menuPlottingParameters
3967             handles.menuMetric
3968             handles.menuEnglish
3969             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3970         set([handles.menuSaveMAT
3971             handles.menuBathymetryExportSettings
3972             handles.menuExportMultibeamBathymetry
3973             handles.menuKMZVerticalOffset
3974             handles.menuSaveKMZFile
3975             handles.menuSaveTecplot
3976             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3977         
3978         set([handles.toolbarLoadData
3979             handles.toolbarSaveFigures
3980             handles.toolbarPlottingParameters
3981             handles.toolbarSaveExcel
3982             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3983         set([handles.toolbarProcessingParameters
3984             handles.toolbarSaveMatFile
3985             handles.toolbarSaveBathymetry
3986             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
3987         
3988         set([handles.DepthRangeMin
3989             handles.DepthRangeMax
3990             handles.VectorScalePlanView
3991             handles.VectorSpacingPlanview
3992             handles.SmoothingWindowSize
3993             handles.DisplayShoreline
3994             handles.PlotPlanView
3995             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3996         <span class="keyword">if</span> guiparams.has_mapping_toolbox
3997             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'on'</span>)
3998         <span class="keyword">else</span>
3999             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'off'</span>)
4000         <span class="keyword">end</span>
4001         
4002         set([handles.HorizontalGridNodeSpacing
4003             handles.VerticalGridNodeSpacing
4004             handles.PlotShiptracks
4005             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
4006         
4007         set([handles.Contour
4008             handles.VerticalExaggeration
4009             handles.VectorScaleCrossSection
4010             handles.HorizontalVectorSpacing
4011             handles.VerticalVectorSpacing
4012             handles.HorizontalSmoothingWindow
4013             handles.VerticalSmoothingWindow
4014             handles.PlotSecondaryFlowVectors
4015             handles.SecondaryFlowVectorVariable
4016             handles.IncludeVerticalVelocity
4017             handles.PlotCrossSection
4018             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
4019     <span class="keyword">otherwise</span>
4020 <span class="keyword">end</span>
4021 
4022 <span class="comment">% Save Application Data</span>
4023 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
4024 
4025 <span class="comment">% [EOF] set_enable</span>
4026 
4027 <span class="comment">%% Compute the longitudinal dispersion coefficient</span>
4028 
4029 <span class="comment">%% --- Executes on button press in zerosecq_chkbox.</span>
4030 <span class="comment">%function zerosecq_chkbox_Callback(hObject, eventdata, handles)</span>
4031 <span class="comment">% hObject    handle to zerosecq_chkbox (see GCBO)</span>
4032 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
4033 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
4034 
4035 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of zerosecq_chkbox</span>
4036 
4037 
4038 <span class="comment">% --------------------------------------------------------------------</span>
4039 <a name="_sub96" href="#_subfunctions" class="code">function [english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style] = </a><span class="keyword">...</span>
4040     plotParametersDialog(english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style,hf)
4041 
4042 w = 500;
4043 h = 110;
4044 dx = 10;
4045 dy = 35;
4046 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
4047 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Plotting Parameters'</span>, <span class="keyword">...</span>
4048     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
4049     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4050     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
4051     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
4052     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4053     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4054     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4055     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
4056     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4057     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
4058 dialog_params.english_units               = english_units;
4059 dialog_params.set_cross_section_endpoints = set_cross_section_endpoints;
4060 dialog_params.presentation                = plot_presentation_style; <span class="comment">%presentation;</span>
4061 dialog_params.print                       = plot_print_style; <span class="comment">%print;</span>
4062 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4063 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
4064 
4065 <span class="comment">% Build the graphics:</span>
4066 <span class="comment">% -------------------</span>
4067 handles.UnitsPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4068     <span class="string">'Title'</span>, <span class="string">'Units'</span>, <span class="keyword">...</span>
4069     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4070     <span class="string">'Position'</span>,[dx dy (w-3*dx)/3 h-dx-dy+10]);
4071 handles.UnitsMetric = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4072     <span class="string">'Parent'</span>,handles.UnitsPanel, <span class="keyword">...</span>
4073     <span class="string">'String'</span>,<span class="string">'Metric'</span>, <span class="keyword">...</span>
4074     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4075     <span class="string">'Position'</span>,[15 35 100 22]);
4076 handles.UnitsEnglish = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4077     <span class="string">'Parent'</span>,handles.UnitsPanel, <span class="keyword">...</span>
4078     <span class="string">'String'</span>,<span class="string">'English'</span>, <span class="keyword">...</span>
4079     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4080     <span class="string">'Position'</span>,[15 10 100 22]);
4081 
4082 handles.EndpointsPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4083     <span class="string">'Title'</span>, <span class="string">'Cross-Section Endpoints'</span>, <span class="keyword">...</span>
4084     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4085     <span class="string">'Position'</span>,[(w+dx)/3 dy (w-3*dx)/3 h-dx-dy+10]);
4086 handles.EndpointsAutomatic = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4087     <span class="string">'Parent'</span>,handles.EndpointsPanel, <span class="keyword">...</span>
4088     <span class="string">'String'</span>,<span class="string">'Automatic'</span>, <span class="keyword">...</span>
4089     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4090     <span class="string">'Position'</span>,[15 35 100 22]);
4091 handles.EndpointsManual = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4092     <span class="string">'Parent'</span>,handles.EndpointsPanel, <span class="keyword">...</span>
4093     <span class="string">'String'</span>,<span class="string">'Set Manually'</span>, <span class="keyword">...</span>
4094     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4095     <span class="string">'Position'</span>,[15 10 100 22]);
4096 
4097 handles.StylePanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4098     <span class="string">'Title'</span>, <span class="string">'Plot Style'</span>, <span class="keyword">...</span>
4099     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4100     <span class="string">'Position'</span>,[w-w/3 dy (w-3*dx)/3 h-dx-dy+10]);
4101 handles.StylePresentation = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4102     <span class="string">'Parent'</span>,handles.StylePanel, <span class="keyword">...</span>
4103     <span class="string">'String'</span>,<span class="string">'Presentation'</span>, <span class="keyword">...</span>
4104     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4105     <span class="string">'Position'</span>,[15 35 100 22]);
4106 handles.StylePrint = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4107     <span class="string">'Parent'</span>,handles.StylePanel, <span class="keyword">...</span>
4108     <span class="string">'String'</span>,<span class="string">'Print'</span>, <span class="keyword">...</span>
4109     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4110     <span class="string">'Position'</span>,[15 10 100 22]);
4111 
4112 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4113     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4114     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
4115     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4116     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
4117 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4118     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4119     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
4120     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4121     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
4122 
4123 <span class="comment">% Update the UI controls:</span>
4124 <span class="comment">% -----------------------</span>
4125 <span class="keyword">if</span> dialog_params.english_units
4126     set(handles.UnitsMetric, <span class="string">'Value'</span>,0)
4127     set(handles.UnitsEnglish,<span class="string">'Value'</span>,1)
4128 <span class="keyword">else</span>
4129     set(handles.UnitsMetric, <span class="string">'Value'</span>,1)
4130     set(handles.UnitsEnglish,<span class="string">'Value'</span>,0)
4131 <span class="keyword">end</span>
4132 <span class="keyword">if</span> dialog_params.set_cross_section_endpoints
4133     set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,0)
4134     set(handles.EndpointsManual,   <span class="string">'Value'</span>,1)
4135 <span class="keyword">else</span>
4136     set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,1)
4137     set(handles.EndpointsManual,   <span class="string">'Value'</span>,0)
4138 <span class="keyword">end</span>
4139 <span class="keyword">if</span> dialog_params.presentation
4140     set(handles.StylePresentation, <span class="string">'Value'</span>,1)
4141     set(handles.StylePrint,        <span class="string">'Value'</span>,0)
4142 <span class="keyword">else</span>
4143     set(handles.StylePresentation, <span class="string">'Value'</span>,0)
4144     set(handles.StylePrint,        <span class="string">'Value'</span>,1)
4145 <span class="keyword">end</span>
4146 
4147 <span class="comment">% Set the callbacks:</span>
4148 <span class="comment">% ------------------</span>
4149 set(handles.Figure,            <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub102" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>, handles.OK})
4150 set(handles.UnitsMetric,       <span class="string">'Callback'</span>,       {@<a href="#_sub97" class="code" title="subfunction dialogUnits(hObject,eventdata,handles,the_units)">dialogUnits</a>,    handles,<span class="string">'metric'</span>})
4151 set(handles.UnitsEnglish,      <span class="string">'Callback'</span>,       {@<a href="#_sub97" class="code" title="subfunction dialogUnits(hObject,eventdata,handles,the_units)">dialogUnits</a>,    handles,<span class="string">'english'</span>})
4152 set(handles.EndpointsAutomatic,<span class="string">'Callback'</span>,       {@<a href="#_sub98" class="code" title="subfunction dialogEnpoints(hObject,eventdata,handles,the_endpoints)">dialogEnpoints</a>, handles,<span class="string">'auto'</span>})
4153 set(handles.EndpointsManual,   <span class="string">'Callback'</span>,       {@<a href="#_sub98" class="code" title="subfunction dialogEnpoints(hObject,eventdata,handles,the_endpoints)">dialogEnpoints</a>, handles,<span class="string">'manual'</span>})
4154 set(handles.StylePresentation, <span class="string">'Callback'</span>,       {@<a href="#_sub99" class="code" title="subfunction dialogPlotStyle(hObject,eventdata,handles,the_style)">dialogPlotStyle</a>,handles,<span class="string">'presentation'</span>})
4155 set(handles.StylePrint,        <span class="string">'Callback'</span>,       {@<a href="#_sub99" class="code" title="subfunction dialogPlotStyle(hObject,eventdata,handles,the_style)">dialogPlotStyle</a>,handles,<span class="string">'print'</span>})
4156 set(handles.OK,                <span class="string">'Callback'</span>,       {@<a href="#_sub100" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,       handles.OK})
4157 set(handles.Cancel,            <span class="string">'Callback'</span>,       {@<a href="#_sub101" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,   handles})
4158 
4159 <span class="comment">% Position the dialog and make it visible:</span>
4160 <span class="comment">% ----------------------------------------</span>
4161 fpos = get(hf,<span class="string">'Position'</span>);
4162 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
4163 movegui(handles.Figure,dpos)
4164 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
4165 
4166 <span class="comment">% Hold the dialog open:</span>
4167 <span class="comment">% ---------------------</span>
4168 waitfor(handles.OK)
4169 
4170 <span class="comment">% Return the outputs and close the dialog:</span>
4171 <span class="comment">% ----------------------------------------</span>
4172 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4173 english_units = dialog_params.english_units;
4174 set_cross_section_endpoints = dialog_params.set_cross_section_endpoints;
4175 plot_presentation_style =  dialog_params.presentation;
4176 plot_print_style =  dialog_params.print;
4177 
4178 delete(handles.Figure)
4179 
4180 <span class="comment">% [EOF] plotParametersDialog</span>
4181 
4182 
4183 <span class="comment">% --------------------------------------------------------------------</span>
4184 <a name="_sub97" href="#_subfunctions" class="code">function dialogUnits(hObject,eventdata,handles,the_units)</a>
4185 
4186 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4187 <span class="keyword">switch</span> the_units
4188     <span class="keyword">case</span> <span class="string">'metric'</span>
4189         dialog_params.english_units = false;
4190         
4191         set(handles.UnitsMetric, <span class="string">'Value'</span>,1)
4192         set(handles.UnitsEnglish,<span class="string">'Value'</span>,0)
4193     <span class="keyword">case</span> <span class="string">'english'</span>
4194         dialog_params.english_units = true;
4195         
4196         set(handles.UnitsMetric, <span class="string">'Value'</span>,0)
4197         set(handles.UnitsEnglish,<span class="string">'Value'</span>,1)
4198     <span class="keyword">otherwise</span>
4199 <span class="keyword">end</span>
4200 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4201 
4202 <span class="comment">% [EOF] dialogUnits</span>
4203 
4204 <span class="comment">% --------------------------------------------------------------------</span>
4205 <a name="_sub98" href="#_subfunctions" class="code">function dialogEnpoints(hObject,eventdata,handles,the_endpoints)</a>
4206 
4207 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4208 <span class="keyword">switch</span> the_endpoints
4209     <span class="keyword">case</span> <span class="string">'auto'</span>
4210         dialog_params.set_cross_section_endpoints = false;
4211         
4212         set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,1)
4213         set(handles.EndpointsManual,   <span class="string">'Value'</span>,0)
4214     <span class="keyword">case</span> <span class="string">'manual'</span>
4215         dialog_params.set_cross_section_endpoints = true;
4216         
4217         set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,0)
4218         set(handles.EndpointsManual,   <span class="string">'Value'</span>,1)
4219     <span class="keyword">otherwise</span>
4220 <span class="keyword">end</span>
4221 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4222 
4223 <span class="comment">% [EOF] dialogEnpoints</span>
4224 
4225 <a name="_sub99" href="#_subfunctions" class="code">function dialogPlotStyle(hObject,eventdata,handles,the_style)</a>
4226 
4227 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4228 <span class="keyword">switch</span> the_style
4229     <span class="keyword">case</span> <span class="string">'presentation'</span>
4230         dialog_params.presentation  = true;
4231         dialog_params.print         = false;
4232         
4233         set(handles.StylePresentation,<span class="string">'Value'</span>,1)
4234         set(handles.StylePrint,       <span class="string">'Value'</span>,0)
4235     <span class="keyword">case</span> <span class="string">'print'</span>
4236         dialog_params.presentation  = false;
4237         dialog_params.print         = true;
4238         
4239         set(handles.StylePresentation,<span class="string">'Value'</span>,0)
4240         set(handles.StylePrint,       <span class="string">'Value'</span>,1)
4241     <span class="keyword">otherwise</span>
4242 <span class="keyword">end</span>
4243 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4244 
4245 <span class="comment">% [EOF] dialogEnpoints</span>
4246 
4247 <span class="comment">% --------------------------------------------------------------------</span>
4248 <a name="_sub100" href="#_subfunctions" class="code">function dialogOK(hObject,eventdata,h_OK)</a>
4249 
4250 delete(h_OK)
4251 
4252 <span class="comment">% [EOF] dialogOK</span>
4253 
4254 <span class="comment">% --------------------------------------------------------------------</span>
4255 <a name="_sub101" href="#_subfunctions" class="code">function dialogCancel(hObject,eventdata,handles)</a>
4256 <span class="comment">% Return the original inputs</span>
4257 dialog_params = getappdata(handles.Figure,<span class="string">'original_dialog_params'</span>);
4258 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4259 delete(handles.OK)
4260 
4261 <span class="comment">% [EOF] dialogCancel</span>
4262 
4263 <span class="comment">% --------------------------------------------------------------------</span>
4264 <a name="_sub102" href="#_subfunctions" class="code">function dialogCloseReq(hObject,eventdata,h_OK)</a>
4265 
4266 delete(h_OK)
4267 
4268 <span class="comment">% [EOF] dialogCloseReq</span>
4269 
4270 <a name="_sub103" href="#_subfunctions" class="code">function [beam_angle,magnetic_variation,wse,output_auxiliary_data] = exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,hf)</a>
4271 w = 230;
4272 h = 200;
4273 dx = 10;
4274 dy = 35;
4275 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
4276 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Export Settings'</span>, <span class="keyword">...</span>
4277     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
4278     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4279     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
4280     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
4281     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4282     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4283     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4284     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
4285     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4286     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
4287 dialog_params.beam_angle             = beam_angle;
4288 dialog_params.magnetic_variation     = magnetic_variation;
4289 dialog_params.wse                    = wse;
4290 dialog_params.output_auxiliary_data = output_auxiliary_data;
4291 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4292 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
4293 
4294 <span class="comment">% Build the graphics:</span>
4295 <span class="comment">% -------------------</span>
4296 ph = 150;
4297 handles.BathymetryPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4298     <span class="string">'Title'</span>, <span class="string">'Bathymetry'</span>, <span class="keyword">...</span>
4299     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4300     <span class="string">'Position'</span>,[dx dy (w-2*dx) h-dx-dy+10]);
4301 handles.BeamAngleText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
4302     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4303     <span class="string">'String'</span>,<span class="string">'Beam Angle (deg)'</span>, <span class="keyword">...</span>
4304     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
4305     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
4306     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4307     <span class="string">'Position'</span>,[dx+5 h-ph+60-4 100 22]);
4308 handles.BeamAngle = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
4309     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4310     <span class="keyword">...</span><span class="comment">'String','Beam Angle (deg)', ...</span>
4311     <span class="string">'String'</span>,beam_angle,<span class="keyword">...</span>
4312     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
4313     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4314     <span class="string">'Position'</span>,[w-dx-80 h-ph+60 50 22]);
4315 handles.MagneticVariationText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
4316     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4317     <span class="string">'String'</span>,<span class="string">'Magnetic Variation'</span>, <span class="keyword">...</span>
4318     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
4319     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
4320     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4321     <span class="string">'Position'</span>,[dx+5 h-ph+30-4 100 22]);
4322 handles.MagneticVariation = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
4323     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4324     <span class="keyword">...</span><span class="comment">'String','Magnetic Variation', ...</span>
4325     <span class="string">'String'</span>,magnetic_variation,<span class="keyword">...</span>
4326     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
4327     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4328     <span class="string">'Position'</span>,[w-dx-80 h-ph+30 50 22]);
4329 handles.WSEText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
4330     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4331     <span class="string">'String'</span>,<span class="string">'WSE (m)'</span>, <span class="keyword">...</span>
4332     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
4333     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
4334     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4335     <span class="string">'Position'</span>,[dx+5 h-ph-4 100 22]);
4336 handles.WSE = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
4337     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4338     <span class="keyword">...</span><span class="comment">'String','Magnetic Variation', ...</span>
4339     <span class="string">'String'</span>,num2str(wse),<span class="keyword">...</span>
4340     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
4341     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4342     <span class="string">'Position'</span>,[w-dx-80 h-ph 50 22]);
4343 handles.OutputauxiliaryData = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4344     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4345     <span class="string">'String'</span>,<span class="string">'Output auxiliary Data'</span>, <span class="keyword">...</span>
4346     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4347     <span class="string">'Position'</span>,[dx+5 20 w-2*dx-30 22]);
4348 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4349     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4350     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
4351     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4352     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
4353 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4354     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4355     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
4356     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4357     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
4358 
4359 <span class="comment">% Update the UI controls:</span>
4360 <span class="comment">% -----------------------</span>
4361 set(handles.BeamAngle,                <span class="string">'String'</span>,dialog_params.beam_angle)
4362 set(handles.MagneticVariation,        <span class="string">'String'</span>,dialog_params.magnetic_variation)
4363 set(handles.WSE,                      <span class="string">'String'</span>,dialog_params.wse)
4364 set(handles.OutputauxiliaryData,     <span class="string">'Value'</span>, double(dialog_params.output_auxiliary_data))
4365 
4366 <span class="comment">% Set the callbacks:</span>
4367 <span class="comment">% ------------------</span>
4368 set(handles.Figure,                      <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub102" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>,handles.OK})
4369 set(handles.BeamAngle,                   <span class="string">'Callback'</span>,       {@<a href="#_sub104" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4370 set(handles.MagneticVariation,           <span class="string">'Callback'</span>,       {@<a href="#_sub104" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4371 set(handles.WSE,                         <span class="string">'Callback'</span>,       {@<a href="#_sub104" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4372 set(handles.OutputauxiliaryData,         <span class="string">'Callback'</span>,       {@<a href="#_sub104" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4373 set(handles.OK,                          <span class="string">'Callback'</span>,       {@<a href="#_sub100" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,      handles.OK})
4374 set(handles.Cancel,                      <span class="string">'Callback'</span>,       {@<a href="#_sub101" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,  handles})
4375 
4376 <span class="comment">% Position the dialog and make it visible:</span>
4377 <span class="comment">% ----------------------------------------</span>
4378 fpos = get(hf,<span class="string">'Position'</span>);
4379 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
4380 movegui(handles.Figure,dpos)
4381 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
4382 
4383 <span class="comment">% Hold the dialog open:</span>
4384 <span class="comment">% ---------------------</span>
4385 waitfor(handles.OK)
4386 
4387 <span class="comment">% Return the outputs and close the dialog:</span>
4388 <span class="comment">% ----------------------------------------</span>
4389 dialog_params           = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4390 beam_angle              = dialog_params.beam_angle;
4391 magnetic_variation      = dialog_params.magnetic_variation;
4392 wse                     = str2double(dialog_params.wse);
4393 output_auxiliary_data  = logical(dialog_params.output_auxiliary_data);
4394 
4395 delete(handles.Figure)
4396 
4397 <span class="comment">% [EOF] exportSettingsDialog</span>
4398 
4399 <span class="comment">% --------------------------------------------------------------------</span>
4400 <a name="_sub104" href="#_subfunctions" class="code">function dialogExportSettings(hObject,eventdata,handles)</a>
4401 
4402 <span class="comment">% Grab the current data</span>
4403 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4404 
4405 <span class="comment">% Set it according to the dialog box values</span>
4406 dialog_params.beam_angle                = get(handles.BeamAngle,<span class="string">'String'</span>);
4407 dialog_params.magnetic_variation        = get(handles.MagneticVariation,<span class="string">'String'</span>);
4408 dialog_params.wse                       = get(handles.WSE,<span class="string">'String'</span>);
4409 dialog_params.output_auxiliary_data    = get(handles.OutputauxiliaryData,<span class="string">'Value'</span>);
4410 
4411 <span class="comment">% Re-store the application data</span>
4412 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4413 
4414 <span class="comment">% [EOF] dialogExportSettings</span>
4415 
4416 <a name="_sub105" href="#_subfunctions" class="code">function [selected_figures] = openFiguresDialog(figure_names,hf)</a>
4417 
4418 w = 230;
4419 h = 200;
4420 dx = 10;
4421 dy = 35;
4422 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
4423 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Select open figures to export'</span>, <span class="keyword">...</span>
4424     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
4425     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4426     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
4427     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
4428     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4429     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4430     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4431     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
4432     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4433     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
4434 dialog_params.figure_names               = figure_names;
4435 dialog_params.selected_figures           = <span class="string">''</span>;
4436 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4437 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
4438 
4439 <span class="comment">% Build the graphics:</span>
4440 <span class="comment">% -------------------</span>
4441 handles.ListboxPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4442     <span class="string">'Title'</span>, <span class="string">'Figures'</span>, <span class="keyword">...</span>
4443     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4444     <span class="string">'Position'</span>,[dx dy (w-2*dx) h-dx-dy+10]);
4445 handles.Figures = uicontrol(<span class="string">'Style'</span>,<span class="string">'listbox'</span>, <span class="keyword">...</span>
4446     <span class="string">'Parent'</span>,handles.ListboxPanel, <span class="keyword">...</span>
4447     <span class="string">'BackGroundColor'</span>,<span class="string">'white'</span>,<span class="keyword">...</span>
4448     <span class="string">'String'</span>,figure_names, <span class="keyword">...</span>
4449     <span class="string">'Min'</span>, 0,<span class="keyword">...</span>
4450     <span class="string">'Max'</span>, 2,<span class="keyword">...</span>
4451     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4452     <span class="string">'Position'</span>,[15 35 (w-5*dx) 100]);
4453 
4454 
4455 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4456     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4457     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
4458     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4459     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
4460 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4461     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4462     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
4463     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4464     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
4465 
4466 <span class="comment">% Update the UI controls:</span>
4467 <span class="comment">% -----------------------</span>
4468 
4469 
4470 <span class="comment">% Set the callbacks:</span>
4471 <span class="comment">% ------------------</span>
4472 set(handles.Figure,            <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub102" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>,handles.OK})
4473 set(handles.Figures,           <span class="string">'Callback'</span>,       {@<a href="#_sub106" class="code" title="subfunction dialogSelectFigures(hObject,eventdata,handles)">dialogSelectFigures</a>    handles})
4474 set(handles.OK,                <span class="string">'Callback'</span>,       {@<a href="#_sub100" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,       handles.OK})
4475 set(handles.Cancel,            <span class="string">'Callback'</span>,       {@<a href="#_sub101" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,   handles})
4476 
4477 <span class="comment">% Position the dialog and make it visible:</span>
4478 <span class="comment">% ----------------------------------------</span>
4479 fpos = get(hf,<span class="string">'Position'</span>);
4480 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
4481 movegui(handles.Figure,dpos)
4482 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
4483 
4484 <span class="comment">% Hold the dialog open:</span>
4485 <span class="comment">% ---------------------</span>
4486 waitfor(handles.OK)
4487 
4488 <span class="comment">% Return the outputs and close the dialog:</span>
4489 <span class="comment">% ----------------------------------------</span>
4490 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4491 selected_figures = dialog_params.selected_figures;
4492 
4493 delete(handles.Figure)
4494 
4495 <span class="comment">% [EOF] openFiguresDialog</span>
4496 
4497 <span class="comment">% --------------------------------------------------------------------</span>
4498 <a name="_sub106" href="#_subfunctions" class="code">function dialogSelectFigures(hObject,eventdata,handles)</a>
4499 
4500 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4501 
4502 idx_selected = get(handles.Figures,<span class="string">'Value'</span>);
4503 fig_names    = get(handles.Figures,<span class="string">'String'</span>);
4504 selected     = fig_names(idx_selected);
4505 dialog_params.selected_figures = selected;
4506 
4507 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4508 
4509 
4510 
4511 <span class="comment">% --------------------------------------------------------------------</span>
4512 <a name="_sub107" href="#_subfunctions" class="code">function icons = getIcons</a>
4513 
4514 <span class="comment">% Load data</span>
4515 idx = 1;
4516 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4517     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4518     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   129   120   135   188   NaN   NaN   NaN
4519     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN    96   189   NaN   NaN   130   NaN    95   NaN
4520     NaN   NaN   206   206   206   206   NaN   NaN   NaN   NaN   NaN   NaN   NaN    84    79   NaN
4521     NaN   206   255   255   255   255   198   197   NaN   NaN   NaN   NaN    83    79    76   NaN
4522     198   255   255   255   255   255   255   198   198   198   198   198   198   212   212   NaN
4523     198   255   255   255   255   255   255   255   255   255   255   255   198   157   197   NaN
4524     198   255   226   198   198   198   198   198   198   198   198   198   198   198   177   NaN
4525     198   255   198   218   255   255   255   255   255   255   255   255   255   255   161   NaN
4526     198   253   198   247   255   255   255   255   255   255   255   255   255   251   155   NaN
4527     198   226   201   255   255   255   255   255   255   255   255   255   231   206   165   NaN
4528     198   207   215   255   255   255   255   255   255   255   255   255   239   198   159   NaN
4529     198   198   240   255   255   255   255   255   255   255   255   255   222   157   159   NaN
4530     198   199   255   255   255   255   255   255   255   255   255   255   191   165   159   NaN
4531     NaN   165   165   165   165   165   165   165   165   165   165   165   165   159   159   NaN
4532     NaN   NaN   159   159   159   159   159   159   159   159   159   159   159   159   NaN   NaN]/255;
4533 
4534 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4535     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4536     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   145   137   149   195   NaN   NaN   NaN
4537     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   116   196   NaN   NaN   145   NaN   116   NaN
4538     NaN   NaN   162   162   162   162   NaN   NaN   NaN   NaN   NaN   NaN   NaN   107   105   NaN
4539     NaN   162   255   255   255   255   154   197   NaN   NaN   NaN   NaN   106   104   103   NaN
4540     154   255   255   255   255   255   255   154   154   154   154   154   154   208   208   NaN
4541     154   243   243   243   243   243   243   255   255   255   255   255   154   123   197   NaN
4542     154   235   193   154   154   154   154   154   154   154   154   154   154   154   137   NaN
4543     154   215   154   191   255   255   251   255   255   255   255   255   231   255   126   NaN
4544     154   213   154   240   255   255   255   255   255   255   255   255   199   249   123   NaN
4545     154   179   160   255   247   247   247   247   247   247   247   247   190   188   115   NaN
4546     154   162   184   255   235   235   235   235   235   235   235   231   186   154   169   NaN
4547     154   154   228   255   227   227   227   227   227   227   227   223   178   123   169   NaN
4548     154   156   255   215   215   215   215   215   215   215   215   215   153   115   169   NaN
4549     NaN   115   115   115   115   115   115   115   115   115   115   115   115   169   169   NaN
4550     NaN   NaN   169   169   169   169   169   169   169   169   169   169   169   169   NaN   NaN]/255;
4551 
4552 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4553     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4554     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   166   161   170   202   NaN   NaN   NaN
4555     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   149   205   NaN   NaN   166   NaN   148   NaN
4556     NaN   NaN    34    34    34    34   NaN   NaN   NaN   NaN   NaN   NaN   NaN   141   144   NaN
4557     NaN    34   255   255   255   255    25   197   NaN   NaN   NaN   NaN   142   145   147   NaN
4558     25   255   156   156   156   156   255    25    25    25    25    25    25   200   200   NaN
4559     25   156   140   140   140   140   140   255   255   255   255   255    25    26   197   NaN
4560     25   132    80    25    25    25    25    25    25    25    25    25    25    25    25   NaN
4561     25   132    25   108   255   255   247   255   255   255   255   255   132   255    25   NaN
4562     25   112    25   137   156   156   156   156   156   156   156   156    91   150    25   NaN
4563     25    67    33   165   148   148   148   148   148   148   148   148    83    92    13   NaN
4564     25    38    64   156   132   132   132   132   132   132   132   132    67    25   176   NaN
4565     25    26   122   156   124   124   124   124   124   124   124   124    67    26   176   NaN
4566     25    28   156   108   108   108   108   108   108   108   108   108    41    13   176   NaN
4567     NaN    13    13    13    13    13    13    13    13    13    13    13    13   176   176   NaN
4568     NaN   NaN   176   176   176   176   176   176   176   176   176   176   176   176   NaN   NaN]/255;
4569 
4570 <span class="comment">% Save data</span>
4571 idx = idx+1;
4572 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4573     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4574     NaN    0.6902    0.6902    0.6902    0.6902    0.6902    0.6274    0.6274    0.5647    0.5647    0.5647    0.5019    0.5019    0.4392    0.2510       NaN
4575     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.3137    0.3765    0.2510    0.4670
4576     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.2510    0.1882    0.2510    0.4670
4577     NaN    0.6274    0.7529    0.5019    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.1882    0.5019    0.2510    0.4670
4578     NaN    0.6274    0.7529    0.4392    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.1882    0.4392    0.2510    0.4670
4579     NaN    0.6274    0.7529    0.4392    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.7529    0.1255    0.3765    0.2510    0.4670
4580     NaN    0.5647    0.7529    0.3765    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.7529    0.7529    0.0627    0.3765    0.2510    0.4670
4581     NaN    0.5647    0.7529    0.6902    0.3765    0.3137    0.3137    0.2510    0.1882    0.1882    0.1255    0.0627    0.3765    0.3137    0.2510    0.4670
4582     NaN    0.5019    0.6902    0.6902    0.6274    0.5647    0.5019    0.5019    0.5019    0.4392    0.4392    0.3765    0.3137    0.3137    0.2510    0.4670
4583     NaN    0.5019    0.6902    0.6274    0.5647    0.3137    0.3137    0.3137    0.3137    0.3137    0.3765    0.3137    0.3137    0.2510    0.2510    0.4670
4584     NaN    0.4392    0.6274    0.5647    0.5019    0.3137       NaN    0.1882    0.8157    0.8157    0.3765    0.2510    0.2510    0.2510    0.2510    0.4670
4585     NaN    0.4392    0.6274    0.5019    0.5019    0.3137    0.1882    0.4392    0.8784    0.8784    0.4392    0.1882    0.2510    0.1882    0.2510    0.4670
4586     NaN    0.4392    0.5647    0.5019    0.1255    0.1255    0.6902    0.6902    0.7529    0.7529    0.3137    0.1882    0.1882    0.1882    0.2510    0.4670
4587     NaN    0.7333    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.4670
4588     NaN       NaN    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670];
4589 
4590 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4591     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4592     NaN    0.7216    0.7216    0.6902    0.6902    0.6588    0.6274    0.5961    0.5647    0.5647    0.5333    0.5019    0.4706    0.4706    0.2196       NaN
4593     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.3451    0.3451    0.2196    0.5378
4594     NaN    0.6902    0.7529    0.5333    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.3137    0.1882    0.2196    0.5378
4595     NaN    0.6588    0.7529    0.5019    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.3137    0.4706    0.2196    0.5378
4596     NaN    0.6274    0.7529    0.4706    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.2824    0.4392    0.2196    0.5378
4597     NaN    0.5961    0.7529    0.4392    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.8157    0.2510    0.4078    0.2196    0.5378
4598     NaN    0.5647    0.7529    0.4078    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.8157    0.7843    0.2196    0.3765    0.2196    0.5378
4599     NaN    0.5333    0.7216    0.7216    0.3765    0.3765    0.3451    0.3137    0.3137    0.2824    0.2510    0.2196    0.3765    0.3451    0.2196    0.5378
4600     NaN    0.5019    0.6902    0.6902    0.6274    0.5647    0.5333    0.5019    0.4706    0.4392    0.4078    0.3765    0.3451    0.3137    0.2196    0.5378
4601     NaN    0.4706    0.6588    0.6274    0.5647    0.3451    0.3451    0.3451    0.3451    0.3765    0.4078    0.3451    0.3137    0.2824    0.2196    0.5378
4602     NaN    0.4706    0.6274    0.5647    0.5333    0.3451       NaN    0.2510    0.8470    0.8784    0.4706    0.2824    0.2824    0.2510    0.2196    0.5378
4603     NaN    0.4392    0.5961    0.5333    0.5019    0.3451    0.2510    0.4706    0.8784    0.9098    0.5019    0.2510    0.2510    0.2510    0.2196    0.5378
4604     NaN    0.4078    0.5647    0.5019    0.2824    0.1882    0.7216    0.7216    0.7529    0.7843    0.3137    0.2510    0.2510    0.2196    0.2196    0.5378
4605     NaN    0.7176    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.5378
4606     NaN       NaN    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378];
4607 
4608 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4609     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4610     NaN    0.9412    0.9412    0.9412    0.9412    0.9412    0.9412    0.8784    0.8784    0.8784    0.8784    0.8784    0.8157    0.8157    0.4392       NaN
4611     NaN    0.9412    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.7529    0.6902    0.4392    0.5997
4612     NaN    0.9412    1.0000    0.9412    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.7529    0.3765    0.4392    0.5997
4613     NaN    0.9412    1.0000    0.8784    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.6902    0.8784    0.4392    0.5997
4614     NaN    0.9412    1.0000    0.8784    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.6902    0.8157    0.4392    0.5997
4615     NaN    0.8784    1.0000    0.8157    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.8784    0.6274    0.8157    0.4392    0.5997
4616     NaN    0.8784    1.0000    0.8157    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.8784    0.8784    0.6274    0.7529    0.4392    0.5997
4617     NaN    0.8784    1.0000    1.0000    0.8157    0.7529    0.7529    0.7529    0.6902    0.6902    0.6274    0.6274    0.7529    0.7529    0.4392    0.5997
4618     NaN    0.8784    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8784    0.8157    0.8157    0.7529    0.7529    0.6902    0.4392    0.5997
4619     NaN    0.8157    1.0000    1.0000    0.9412    0.4392    0.4392    0.4392    0.4392    0.4392    0.5019    0.7529    0.6902    0.6902    0.4392    0.5997
4620     NaN    0.8157    1.0000    0.9412    0.9412    0.4392       NaN    0.2510    0.9412    0.9412    0.5019    0.6902    0.6902    0.6274    0.4392    0.5997
4621     NaN    0.8157    1.0000    0.9412    0.8784    0.4392    0.2510    0.5647    0.9412    0.9412    0.5647    0.6274    0.6274    0.6274    0.4392    0.5997
4622     NaN    0.8157    0.9412    0.8784    0.6902    0.2510    0.7529    0.7529    0.8157    0.8157    0.3137    0.6274    0.6274    0.6274    0.4392    0.5997
4623     NaN    0.8275    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.5997
4624     NaN       NaN    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997];
4625 
4626 <span class="comment">% Plotting parameters</span>
4627 idx = idx+1;
4628 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4629     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   255
4630     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4631     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4632     0   255   203    79   213   255   255   255   255   255   254   160   109   247     0   165
4633     0   254    71   224    79   255   255   255   255   255   211   101   165   123     0   165
4634     0   191   123   255   123   203   255   255   255   255   101   224   254    79     0   165
4635     0   101   239   255   224   109   255   255   255   247    79   254   254   123    36   165
4636     0   123   254   255   255    79   247   255   255   165   165   255   255   224     0   165
4637     0   255   255   255   254   160   173   255   255    87   239   255   255   255     0   165
4638     0   255   255   255   255   224   101   255   239    87   255   255   255   255     0   165
4639     0   255   255   255   255   255   101   224   123   191   255   255   255   255     0   165
4640     0   255   255   255   255   254   224    54   101   255   255   255   255   255     0   165
4641     0   255   255   255   255   255   255   247   255   255   255   255   255   255     0   165
4642     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4643     0     0     0     1     0     0     0     0     0     0     0     0     0     0     0   165
4644     255   165   165   165   172   165   165   165   165   165   165   165   165   165   165   165]/255;
4645 
4646 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4647     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
4648     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0     0
4649     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4650     0   255   203    79   213   255   255   255   255   255   254   160   109   247     0   165
4651     0   254    71   224    79   255   255   255   255   255   211   101   165   123     0   165
4652     0   191   123   255   123   203   255   255   255   255   101   224   254    79     0   165
4653     0   101   239   255   224   109   255   255   255   247    79   254   254   123     0   165
4654     0   123   254   255   255    79   247   255   255   165   165   255   255   224     0   165
4655     0   255   255   255   254   160   173   255   255    87   239   255   255   255     0   165
4656     0   255   255   255   255   224   101   255   239    87   255   255   255   255     0   165
4657     0   255   255   255   255   255   101   224   123   191   255   255   255   255     0   165
4658     0   255   255   255   255   254   224    54   101   255   255   255   255   255     0   165
4659     0   255   255   255   255   255   255   247   255   255   255   255   255   255     0   165
4660     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4661     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   165
4662     0   165   165   165   153   165   165   165   165   165   165   165   165   165   165   165]/255;
4663 
4664 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4665     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   255
4666     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4667     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4668     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4669     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4670     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4671     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4672     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4673     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4674     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4675     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4676     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4677     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4678     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4679     0    24    39     0     0     0     0     0     0     0     0     0     0     0     0   145
4680     255   145   145   145   134   145   145   145   145   145   145   145   145   145   145   145]/255;
4681 
4682 <span class="comment">% Processing parameters</span>
4683 idx = idx+1;
4684 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4685     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4686     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4687     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4688     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4689     255     0   255   255   107   255   255   107   255   255   107   255   107   255     0   255
4690     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4691     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4692     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4693     255     0   255   255   107   255   107   255   107   255   255   107   255   255     0   255
4694     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4695     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4696     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4697     255     0   255   107   255   107   255   107   255   255   107   255   107   255     0   255
4698     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4699     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4700     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4701 
4702 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4703     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4704     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4705     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4706     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4707     255     0   255   255    99   255   255    99   255   255    99   255    99   255     0   255
4708     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4709     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4710     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4711     255     0   255   255    99   255    99   255    99   255   255    99   255   255     0   255
4712     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4713     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4714     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4715     255     0   255    99   255    99   255    99   255   255    99   255    99   255     0   255
4716     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4717     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4718     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4719 
4720 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4721     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4722     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4723     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4724     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4725     255     0   255   255    99   255   255    99   255   255    99   255    99   255     0   255
4726     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4727     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4728     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4729     255     0   255   255    99   255    99   255    99   255   255    99   255   255     0   255
4730     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4731     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4732     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4733     255     0   255    99   255    99   255    99   255   255    99   255    99   255     0   255
4734     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4735     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4736     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4737 
4738 <span class="comment">% Export bathymetry dialog</span>
4739 idx = idx+1;
4740 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4741     [226    226    226    226    226    226    226    197    220    226    226    226    226    226    226    226
4742     226    226    226    226    226    227    241    144    158    241    228    228    229    228    229    226
4743     226    243    243    243    237    237    246    164    119    242    232    225    226    218    243    206
4744     179    152    153    166    148    148    177    179    63    185    141    146    154    151    179    189
4745     167    4    134    175    151    164    161    198    122    255    212    233    215    199    140    185
4746     134    50    209    241    255    255    133    118    15    20    28    94    4    0    0    89
4747     136    0    0    0    0    0    0    0    0    0    0    0    0    21    56    140
4748     208    255    226    233    255    242    215    232    251    237    226    233    207    222    156    139
4749     172    159    152    153    166    145    178    147    169    164    161    163    154    153    128    135
4750     160    164    148    139    171    150    165    154    165    185    166    173    190    190    148    162
4751     214    233    211    203    217    212    217    238    202    236    213    222    230    224    184    184
4752     219    206    174    190    219    204    201    218    183    224    219    222    217    202    176    182
4753     210    182    183    214    225    220    203    229    175    217    220    220    222    212    184    185
4754     197    175    207    224    223    220    205    231    170    221    220    220    222    217    191    187
4755     186    193    223    224    220    201    203    228    171    224    218    220    222    215    190    187
4756     189    211    220    216    204    201    214    213    187    213    216    220    220    212    193    189
4757     ]/255;
4758 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4759     [233    233    233    233    233    233    233    204    227    233    233    233    233    233    233    233
4760     233    233    233    233    233    234    247    152    167    247    235    234    235    234    236    233
4761     233    242    242    240    236    237    247    170    131    243    234    231    234    224    245    212
4762     208    193    199    209    196    196    211    197    100    211    194    196    200    199    202    196
4763     205    19    179    199    183    197    182    179    162    255    217    246    234    231    191    199
4764     167    47    229    240    255    252    139    154    87    86    99    139    79    46    23    121
4765     175    30    47    29    28    19    5    41    33    39    54    55    65    83    81    185
4766     236    255    249    253    255    251    240    255    235    255    247    252    233    245    204    190
4767     208    200    195    196    204    192    214    202    144    215    201    201    195    195    177    186
4768     200    201    189    183    206    192    204    210    111    231    209    214    222    223    199    209
4769     245    255    251    247    254    254    252    255    156    255    254    255    255    254    235    232
4770     249    244    227    237    247    244    242    255    132    239    254    250    247    244    228    231
4771     245    231    231    246    253    249    243    255    119    223    255    251    250    245    229    232
4772     239    227    244    251    251    248    244    255    110    217    255    250    251    246    233    233
4773     233    237    250    252    249    242    246    255    115    209    255    250    251    246    232    232
4774     234    245    249    247    242    242    246    231    154    192    246    249    249    245    234    233
4775     ]/255;
4776 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4777     [233    233    233    233    233    233    233    204    227    233    233    233    233    233    233    233
4778     233    233    233    233    233    234    247    152    167    247    235    234    235    234    236    233
4779     233    242    242    240    236    237    247    170    131    243    234    231    234    224    245    212
4780     208    193    199    209    196    196    211    197    100    211    194    196    200    199    202    196
4781     205    19    179    199    183    197    182    179    162    255    217    246    234    231    191    199
4782     167    47    229    240    255    252    139    154    87    86    99    139    79    46    23    121
4783     175    30    47    29    28    19    5    41    33    39    54    55    65    83    81    185
4784     236    255    249    253    255    251    240    255    235    255    247    252    233    245    204    190
4785     208    200    195    196    204    192    214    202    144    215    201    201    195    195    177    186
4786     200    201    189    183    206    192    204    210    111    231    209    214    222    223    199    209
4787     245    255    251    247    254    254    252    255    156    255    254    255    255    254    235    232
4788     249    244    227    237    247    244    242    255    132    239    254    250    247    244    228    231
4789     245    231    231    246    253    249    243    255    119    223    255    251    250    245    229    232
4790     239    227    244    251    251    248    244    255    110    217    255    250    251    246    233    233
4791     233    237    250    252    249    242    246    255    115    209    255    250    251    246    232    232
4792     234    245    249    247    242    242    246    231    154    192    246    249    249    245    234    233
4793     ]/255;
4794 
4795 <span class="comment">% Export Figures Dialog</span>
4796 idx = idx + 1;
4797 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4798     [NaN    NaN    10    23    23    23    23    23    23    23    21    3    NaN    NaN    NaN    NaN
4799     NaN    NaN    67    255    255    255    255    255    255    255    201    141    NaN    NaN    NaN    NaN
4800     NaN    NaN    43    255    241    240    241    246    252    255    186    220    151    NaN    NaN    NaN
4801     NaN    NaN    42    255    238    237    237    236    238    254    210    178    214    38    NaN    NaN
4802     NaN    NaN    43    255    241    241    241    241    240    244    252    255    255    79    NaN    NaN
4803     NaN    NaN    47    255    232    232    225    224    224    223    220    238    255    69    NaN    NaN
4804     NaN    NaN    55    233    114    225    230    223    221    221    215    237    255    67    NaN    NaN
4805     4    NaN    37    181    168    126    193    214    205    200    203    242    255    67    NaN    NaN
4806     41    164    134    153    144    139    131    209    238    223    242    240    255    67    NaN    NaN
4807     41    118    91    91    122    125    120    106    170    241    245    241    255    67    NaN    NaN
4808     41    113    91    89    97    108    99    89    117    205    190    230    255    67    NaN    NaN
4809     41    124    94    88    78    74    81    179    255    252    244    241    255    67    NaN    NaN
4810     13    34    76    187    88    92    222    255    255    250    250    250    255    73    NaN    NaN
4811     NaN    NaN    69    236    121    227    255    243    238    238    238    238    255    82    NaN    NaN
4812     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4813 
4814 
4815 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4816     [NaN    NaN    10    24    24    24    24    24    24    24    22    4    NaN    NaN    NaN    NaN
4817     NaN    NaN    69    255    255    255    255    255    255    255    204    144    NaN    NaN    NaN    NaN
4818     NaN    NaN    45    255    241    240    241    246    252    255    189    222    155    NaN    NaN    NaN
4819     NaN    NaN    43    255    238    237    237    236    238    254    210    179    215    39    NaN    NaN
4820     NaN    NaN    44    255    241    241    241    241    240    244    252    255    255    80    NaN    NaN
4821     NaN    NaN    49    255    231    230    225    224    224    223    220    238    255    70    NaN    NaN
4822     NaN    NaN    56    227    136    214    227    223    221    221    215    237    255    68    NaN    NaN
4823     4    NaN    19    157    243    154    181    210    204    200    203    242    255    67    NaN    NaN
4824     51    255    231    225    219    217    172    197    232    222    242    240    255    67    NaN    NaN
4825     52    227    184    183    195    201    204    172    169    239    245    241    255    67    NaN    NaN
4826     51    218    177    177    180    187    187    177    130    202    190    230    255    67    NaN    NaN
4827     51    237    195    183    172    170    152    175    255    251    244    241    255    67    NaN    NaN
4828     15    38    72    173    183    149    211    255    255    250    250    250    255    73    NaN    NaN
4829     NaN    NaN    65    226    174    214    252    242    238    238    238    238    255    84    NaN    NaN
4830     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4831 
4832 
4833 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4834     [NaN    NaN    9    23    23    23    23    23    23    23    21    3    NaN    NaN    NaN    NaN
4835     NaN    NaN    66    255    255    255    255    255    255    255    196    139    NaN    NaN    NaN    NaN
4836     NaN    NaN    42    255    239    238    238    244    252    255    186    216    148    NaN    NaN    NaN
4837     NaN    NaN    41    255    236    235    235    234    237    251    210    176    212    36    NaN    NaN
4838     NaN    NaN    42    255    239    239    239    239    238    241    252    255    255    78    NaN    NaN
4839     NaN    NaN    46    255    233    232    224    223    223    223    219    235    255    67    NaN    NaN
4840     NaN    NaN    53    240    101    232    230    221    219    218    213    235    255    65    NaN    NaN
4841     5    NaN    60    212    94    107    205    215    203    198    201    240    255    66    NaN    NaN
4842     34    56    40    80    70    62    94    222    241    221    240    238    255    66    NaN    NaN
4843     35    10    2    0    51    55    36    46    176    240    243    239    255    66    NaN    NaN
4844     35    11    9    7    16    34    12    6    110    204    188    228    255    66    NaN    NaN
4845     35    14    0    0    0    0    14    187    255    251    242    239    255    66    NaN    NaN
4846     12    37    84    206    0    41    234    255    255    248    248    248    255    72    NaN    NaN
4847     NaN    NaN    69    249    79    239    255    240    236    236    236    236    255    80    NaN    NaN
4848     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
4849 
4850 <span class="comment">% Export Excel File</span>
4851 idx = idx + 1;
4852 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4853     [NaN    NaN    NaN    NaN    NaN    NaN  106  252  255  255  255  255  255  255  255  255
4854    38  136  109  101   96   77   95  134  106   99   93   87   90   66  255  255
4855    52  197  232  217  210  202  191  178  170  164  160  159  155   15  255  255
4856    51  181  255  255  255  255  255  255  255  255  255  255  253    9  255  255
4857    49  174  245  153  156  175  255  255  181  153  149  205  245    0  255  255
4858    47  168  199  122  149  100  155  183   99   99   15  117  245    0  255  241
4859    45  158  255  146  146  141   87   68  120   34   86  255  238    0  252  232
4860    42  144  255  255  158  158  143   74   68  117  255  255  230    0  255  255
4861    40  134  255  255  169   15  150  111   68   81  105  167  236    0  230  217
4862    37  131  255  158   99  106   10  143  117   50   51  165  252    0  255  254
4863    35  122  208    0   22   32    8   17  110   20    0   13  212    0  255  245
4864    33  115  255  255  255  255  255  250  146  113  119  106  217    0  236  217
4865    31  109  255  254  252  251  250  255  255  255  255  255  241    0  255  251
4866    29  116  190  168  164  157  145  133  126  121  117  118  112    0  215  205
4867    20   63   47   38   36   20   38   83   64   51   52   55   64   20  255  241
4868     NaN    NaN    NaN    NaN    NaN    NaN   96  249  252  228  237  251  249  203  241  246]/255;
4869 
4870 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4871     [NaN    NaN    NaN    NaN    NaN    NaN  114  252  255  255  255  255  255  255  255  255
4872    49  180  152  145  140  118  140  173  150  139  132  126  126  106  255  255
4873    67  249  252  242  237  231  221  207  201  196  194  193  193   75  255  255
4874    66  232  255  255  255  255  255  255  255  255  255  255  255   68  255  255
4875    64  226  251  197  191  200  255  255  194  170  168  214  253   61  255  255
4876    62  220  224  183  207  173  189  202  167  175  116  172  253   58  255  246
4877    60  211  255  190  196  203  166  131  187  134  148  255  249   54  254  240
4878    57  199  255  255  198  203  202  158  132  168  255  255  245   47  255  255
4879    54  190  255  255  200  110  199  185  155  147  160  203  251   44  240  230
4880    52  187  255  204  187  194  121  204  189  139   99  179  255   39  255  254
4881    49  180  230   42   49   53   36   64  182   98   65   70  228   36  255  248
4882    47  171  255  255  255  255  255  255  186  115  124  114  235   34  243  229
4883    45  166  255  255  254  254  255  255  255  255  255  255  255   33  255  252
4884    43  176  222  206  204  200  190  180  174  171  169  169  169   32  229  220
4885    30  101   81   74   69   54   72  116   96   84   84   84   94   55  255  245
4886     NaN    NaN    NaN    NaN    NaN    NaN  105  251  253  237  242  252  251  218  246  249]/255;
4887 
4888 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4889     [ NaN    NaN    NaN    NaN    NaN    NaN  125  253  255  255  255  255  255  255  255  255
4890    34  118   92   84   79   56   83  111   88   79   73   69   74   45  255  255
4891    46  180  228  207  203  195  182  169  159  155  149  149  145    0  255  255
4892    45  163  255  255  255  255  255  255  255  255  255  255  254    0  255  255
4893    42  156  248  152  155  176  255  255  181  154  147  206  245    0  255  255
4894    40  150  202  117  136   87  154  181   90   84    8  120  243    0  255  252
4895    38  138  255  145  137  131   81   65  106   27   86  255  238    0  255  250
4896    35  122  255  255  159  152  137   75   62  121  255  255  229    0  255  255
4897    33  113  255  255  171   13  145  111   67   76   84  159  234    0  255  247
4898    30  109  255  160   89   97   10  136  111   36   33  159  251    0  255  255
4899    28   99  211    0   12   23    2   11  101    0    0   13  209    0  255  253
4900    26   92  255  255  255  255  255  250  146  111  117  104  213    0  255  245
4901    23   89  255  255  255  255  255  255  255  255  255  255  241    0  255  254
4902    22   93  180  156  151  141  129  114  105   98   93   93   83    0  255  239
4903    15   43   26   17   15    0   25   63   45   39   38   39   44    9  255  252
4904     NaN    NaN    NaN    NaN    NaN    NaN  117  253  255  249  251  255  254  239  252  254]/255;
4905 
4906 <span class="comment">% Zoom In</span>
4907 idx = idx + 1;
4908 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4909     [NaN,NaN,0.745082780193790,0.603906309605554,0.603906309605554,0.603906309605554,0.603906309605554,0.568627450980392,0.764705882352941,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,0.698023956664378,0.568627450980392,0.780392156862745,0.823514152742809,0.854886701762417,0.925474937056535,0.827450980392157,0.596063172350652,0.749019607843137,NaN,NaN,NaN,NaN,NaN,NaN;0.752925917448692,0.501945525291829,0.737239642938888,0.643121995880064,0.584313725490196,0.690180819409476,0.760769054703594,1,0.894102388036927,0.596063172350652,NaN,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.639215686274510,0.650965133134966,0.600000000000000,0.596063172350652,0.196078431372549,0.596063172350652,0.764705882352941,0.941161211566339,0.721553368429084,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.686274509803922,0.678431372549020,0.682337682154574,0.662745098039216,0.196078431372549,0.650965133134966,0.639215686274510,0.788235294117647,0.811764705882353,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.764705882352941,0.815671015487907,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.682337682154574,0.815671015487907,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.866666666666667,0.952941176470588,0.803921568627451,0.803921568627451,0.196078431372549,0.619592584115358,0.607843137254902,0.737239642938888,0.741176470588235,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.721553368429084,1,1,0.968627450980392,0.196078431372549,0.709803921568628,0.670588235294118,0.807827878233005,0.564690623331045,0.772549019607843,NaN,NaN,NaN,NaN,NaN;NaN,0.592156862745098,0.839200427252613,1,1,0.901945525291829,0.788235294117647,0.792141603723201,0.549004348821241,0.654901960784314,NaN,1,NaN,NaN,NaN,NaN;NaN,NaN,0.639215686274510,0.698023956664378,0.827450980392157,0.784298466468299,0.650965133134966,0.498054474708171,0.623529411764706,0.627435721370260,0.890196078431373,0.937254901960784,0.996063172350652,NaN,NaN,NaN;NaN,NaN,NaN,0.772549019607843,0.698023956664378,0.678431372549020,0.690180819409476,0.784298466468299,0.666651407644770,0.615686274509804,0.745082780193790,1,0.933318074311437,0.996063172350652,NaN,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.517631799801633,0.745082780193790,1,0.929411764705882,1,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.513725490196078,0.741176470588235,1,0.925474937056535,0.749019607843137;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.513725490196078,0.741176470588235,0.988220035095750,0.745082780193790;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.533318074311437,0.549004348821241,0.654901960784314;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.694117647058824,0.635278858625162,NaN;];
4910 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4911     [1,1,0.745082780193790,0.670588235294118,0.670588235294118,0.670588235294118,0.670588235294118,0.576470588235294,0.760769054703594,1,1,1,1,1,1,1;1,0.701960784313725,0.650965133134966,0.917631799801633,0.968627450980392,0.992156862745098,1,0.898039215686275,0.603906309605554,0.741176470588235,1,1,1,1,1,1;0.756862745098039,0.588220035095750,0.929411764705882,0.858823529411765,0.807827878233005,0.854886701762417,0.894102388036927,1,0.976470588235294,0.596063172350652,1,1,1,1,1,1;0.721553368429084,0.823514152742809,0.878416113527123,0.835294117647059,0.831357289997711,0.274509803921569,0.815671015487907,0.894102388036927,1,0.807827878233005,0.670588235294118,1,1,1,1,1;0.670588235294118,0.901945525291829,0.890196078431373,0.890196078431373,0.878416113527123,0.274509803921569,0.854886701762417,0.831357289997711,0.937254901960784,0.933318074311437,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.937254901960784,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.878416113527123,0.937254901960784,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.988220035095750,0.862729839017319,0.862729839017319,0.274509803921569,0.815671015487907,0.803921568627451,0.921568627450980,0.854886701762417,0.670588235294118,1,1,1,1,1;0.721553368429084,0.737239642938888,1,1,0.988220035095750,0.274509803921569,0.898039215686275,0.882352941176471,0.980376897840848,0.627435721370260,0.768612191958496,1,1,1,1,1;1,0.603906309605554,0.847043564507515,1,1,0.984313725490196,0.960784313725490,0.976470588235294,0.662745098039216,0.658808270389868,1,0.615686274509804,1,1,1,1;1,1,0.650965133134966,0.701960784313725,0.854886701762417,0.874509803921569,0.780392156862745,0.564690623331045,0.615686274509804,0.627435721370260,0.733333333333333,0.713710231174182,0.600000000000000,1,1,1;1,1,1,0.772549019607843,0.705867093919280,0.686274509803922,0.694117647058824,0.784298466468299,0.674494544899672,0.572533760585946,0.498054474708171,0.741176470588235,0.709803921568628,0.600000000000000,1,1;1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.509788662546731,0.741176470588235,0.709803921568628,0.600000000000000,1;1,1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.505882352941176,0.741176470588235,0.721553368429084,0.501945525291829;1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.443152513923857,0.505882352941176,0.733333333333333,0.670588235294118;1,1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.454901960784314,0.435309376668956,0.658808270389868;1,1,1,1,1,1,1,1,1,1,1,1,1,0.694117647058824,0.647058823529412,1;];
4912 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4913     [1,1,0.796078431372549,0.854886701762417,0.854886701762417,0.854886701762417,0.854886701762417,0.713710231174182,0.792141603723201,1,1,1,1,1,1,1;1,0.768612191958496,0.827450980392157,0.956847486076143,0.976470588235294,0.992156862745098,1,0.945098039215686,0.803921568627451,0.796078431372549,1,1,1,1,1,1;0.776455329213397,0.749019607843137,0.952941176470588,0.901945525291829,0.882352941176471,0.909788662546731,0.937254901960784,1,0.988220035095750,0.819607843137255,1,1,1,1,1,1;0.858823529411765,0.882352941176471,0.909788662546731,0.882352941176471,0.886259250782025,0.470588235294118,0.882352941176471,0.933318074311437,1,0.921568627450980,0.854886701762417,1,1,1,1,1;0.854886701762417,0.925474937056535,0.909788662546731,0.913725490196078,0.905882352941177,0.470588235294118,0.901945525291829,0.894102388036927,0.960784313725490,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.945098039215686,0.949004348821241,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.921568627450980,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.952941176470588,0.992156862745098,0.917631799801633,0.917631799801633,0.470588235294118,0.945098039215686,0.949004348821241,0.941161211566339,0.937254901960784,0.854886701762417,1,1,1,1,1;0.858823529411765,0.827450980392157,1,1,0.992156862745098,0.470588235294118,0.921568627450980,0.909788662546731,0.980376897840848,0.823514152742809,0.792141603723201,1,1,1,1,1;1,0.717647058823529,0.925474937056535,1,1,0.980376897840848,0.960784313725490,0.976470588235294,0.815671015487907,0.776455329213397,1,0.180392156862745,1,1,1,1;1,1,0.776455329213397,0.870572976272221,0.941161211566339,0.937254901960784,0.866666666666667,0.717647058823529,0.682337682154574,0.607843137254902,0.490211337453269,0.435309376668956,0.203921568627451,1,1,1;1,1,1,0.799984740978103,0.796078431372549,0.792141603723201,0.764705882352941,0.792141603723201,0.780392156862745,0.545098039215686,0.125490196078431,0.325505455100328,0.450995651178759,0.203921568627451,1,1;1,1,1,1,1,1,1,1,1,0.784298466468299,0.384313725490196,0.149019607843137,0.325505455100328,0.458838788433661,0.180392156862745,1;1,1,1,1,1,1,1,1,1,1,0.796078431372549,0.396093690394446,0.149019607843137,0.329411764705882,0.458838788433661,0.254917219806210;1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.407843137254902,0.149019607843137,0.298039215686275,0.580376897840848;1,1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.403936827649348,0.258823529411765,0.674494544899672;1,1,1,1,1,1,1,1,1,1,1,1,1,0.749019607843137,0.654901960784314,1;];
4914 
4915 <span class="comment">% Zoom Out</span>
4916 idx = idx + 1;
4917 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4918     [NaN,NaN,0.745082780193790,0.603906309605554,0.603906309605554,0.603906309605554,0.603906309605554,0.568627450980392,0.764705882352941,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,0.698023956664378,0.568627450980392,0.780392156862745,0.823514152742809,0.854886701762417,0.925474937056535,0.827450980392157,0.596063172350652,0.749019607843137,NaN,NaN,NaN,NaN,NaN,NaN;0.752925917448692,0.501945525291829,0.737239642938888,0.643121995880064,0.584313725490196,0.690180819409476,0.760769054703594,1,0.894102388036927,0.596063172350652,NaN,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.639215686274510,0.650965133134966,0.600000000000000,0.596063172350652,0.643121995880064,0.596063172350652,0.764705882352941,0.941161211566339,0.721553368429084,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.686274509803922,0.678431372549020,0.682337682154574,0.662745098039216,0.650965133134966,0.650965133134966,0.639215686274510,0.788235294117647,0.811764705882353,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.764705882352941,0.815671015487907,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.682337682154574,0.815671015487907,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.866666666666667,0.952941176470588,0.760769054703594,0.760769054703594,0.760769054703594,0.760769054703594,0.760769054703594,0.737239642938888,0.741176470588235,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.721553368429084,1,1,0.968627450980392,0.870572976272221,0.709803921568628,0.670588235294118,0.807827878233005,0.564690623331045,0.772549019607843,NaN,NaN,NaN,NaN,NaN;NaN,0.592156862745098,0.839200427252613,1,1,0.901945525291829,0.788235294117647,0.792141603723201,0.549004348821241,0.654901960784314,NaN,NaN,NaN,NaN,NaN,NaN;NaN,NaN,0.639215686274510,0.698023956664378,0.827450980392157,0.784298466468299,0.650965133134966,0.498054474708171,0.623529411764706,0.627435721370260,0.890196078431373,0.937254901960784,0.996063172350652,NaN,NaN,NaN;NaN,NaN,NaN,0.772549019607843,0.698023956664378,0.678431372549020,0.690180819409476,0.784298466468299,NaN,0.615686274509804,0.745082780193790,1,0.933318074311437,0.996063172350652,NaN,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.517631799801633,0.745082780193790,1,0.929411764705882,1,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.513725490196078,0.741176470588235,1,0.925474937056535,0.749019607843137;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.513725490196078,0.741176470588235,0.988220035095750,0.745082780193790;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.533318074311437,0.549004348821241,0.654901960784314;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.694117647058824,0.635278858625162,NaN;];
4919 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4920     [1,1,0.745082780193790,0.670588235294118,0.670588235294118,0.670588235294118,0.670588235294118,0.576470588235294,0.760769054703594,1,1,1,1,1,1,1;1,0.701960784313725,0.650965133134966,0.917631799801633,0.968627450980392,0.992156862745098,1,0.898039215686275,0.603906309605554,0.741176470588235,1,1,1,1,1,1;0.756862745098039,0.588220035095750,0.929411764705882,0.858823529411765,0.807827878233005,0.854886701762417,0.894102388036927,1,0.976470588235294,0.596063172350652,1,1,1,1,1,1;0.721553368429084,0.823514152742809,0.878416113527123,0.835294117647059,0.831357289997711,0.843137254901961,0.815671015487907,0.894102388036927,1,0.807827878233005,0.670588235294118,1,1,1,1,1;0.670588235294118,0.901945525291829,0.890196078431373,0.890196078431373,0.878416113527123,0.870572976272221,0.854886701762417,0.831357289997711,0.937254901960784,0.933318074311437,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.937254901960784,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.878416113527123,0.937254901960784,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.988220035095750,0.819607843137255,0.819607843137255,0.819607843137255,0.819607843137255,0.819607843137255,0.921568627450980,0.854886701762417,0.670588235294118,1,1,1,1,1;0.721553368429084,0.737239642938888,1,1,0.988220035095750,0.952941176470588,0.898039215686275,0.882352941176471,0.980376897840848,0.627435721370260,0.768612191958496,1,1,1,1,1;1,0.603906309605554,0.847043564507515,1,1,0.984313725490196,0.960784313725490,0.976470588235294,0.662745098039216,0.658808270389868,1,1,1,1,1,1;1,1,0.650965133134966,0.701960784313725,0.854886701762417,0.874509803921569,0.780392156862745,0.564690623331045,0.615686274509804,0.627435721370260,0.733333333333333,0.713710231174182,0.600000000000000,1,1,1;1,1,1,0.772549019607843,0.705867093919280,0.686274509803922,0.694117647058824,0.784298466468299,1,0.572533760585946,0.498054474708171,0.741176470588235,0.709803921568628,0.600000000000000,1,1;1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.509788662546731,0.741176470588235,0.709803921568628,0.600000000000000,1;1,1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.505882352941176,0.741176470588235,0.721553368429084,0.501945525291829;1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.443152513923857,0.505882352941176,0.733333333333333,0.670588235294118;1,1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.454901960784314,0.435309376668956,0.658808270389868;1,1,1,1,1,1,1,1,1,1,1,1,1,0.694117647058824,0.647058823529412,1;];
4921 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4922     [1,1,0.796078431372549,0.854886701762417,0.854886701762417,0.854886701762417,0.854886701762417,0.713710231174182,0.792141603723201,1,1,1,1,1,1,1;1,0.768612191958496,0.827450980392157,0.956847486076143,0.976470588235294,0.992156862745098,1,0.945098039215686,0.803921568627451,0.796078431372549,1,1,1,1,1,1;0.776455329213397,0.749019607843137,0.952941176470588,0.901945525291829,0.882352941176471,0.909788662546731,0.937254901960784,1,0.988220035095750,0.819607843137255,1,1,1,1,1,1;0.858823529411765,0.882352941176471,0.909788662546731,0.882352941176471,0.886259250782025,0.894102388036927,0.882352941176471,0.933318074311437,1,0.921568627450980,0.854886701762417,1,1,1,1,1;0.854886701762417,0.925474937056535,0.909788662546731,0.913725490196078,0.905882352941177,0.901945525291829,0.901945525291829,0.894102388036927,0.960784313725490,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.945098039215686,0.949004348821241,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.921568627450980,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.952941176470588,0.992156862745098,0.890196078431373,0.890196078431373,0.890196078431373,0.890196078431373,0.890196078431373,0.941161211566339,0.937254901960784,0.854886701762417,1,1,1,1,1;0.858823529411765,0.827450980392157,1,1,0.992156862745098,0.964690623331045,0.921568627450980,0.909788662546731,0.980376897840848,0.823514152742809,0.792141603723201,1,1,1,1,1;1,0.717647058823529,0.925474937056535,1,1,0.980376897840848,0.960784313725490,0.976470588235294,0.815671015487907,0.776455329213397,1,1,1,1,1,1;1,1,0.776455329213397,0.870572976272221,0.941161211566339,0.937254901960784,0.866666666666667,0.717647058823529,0.682337682154574,0.607843137254902,0.490211337453269,0.435309376668956,0.203921568627451,1,1,1;1,1,1,0.799984740978103,0.796078431372549,0.792141603723201,0.764705882352941,0.792141603723201,1,0.545098039215686,0.125490196078431,0.325505455100328,0.450995651178759,0.203921568627451,1,1;1,1,1,1,1,1,1,1,1,0.784298466468299,0.384313725490196,0.149019607843137,0.325505455100328,0.458838788433661,0.180392156862745,1;1,1,1,1,1,1,1,1,1,1,0.796078431372549,0.396093690394446,0.149019607843137,0.329411764705882,0.458838788433661,0.254917219806210;1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.407843137254902,0.149019607843137,0.298039215686275,0.580376897840848;1,1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.403936827649348,0.258823529411765,0.674494544899672;1,1,1,1,1,1,1,1,1,1,1,1,1,0.749019607843137,0.654901960784314,1;];
4923 
4924 <span class="comment">% Pan</span>
4925 idx = idx + 1;
4926 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4927     [NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.290196078431373,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,NaN,NaN,0.290196078431373,0.290196078431373,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,0.290196078431373,NaN,NaN,NaN,NaN;NaN,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,NaN,NaN,NaN;NaN,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,NaN,0.290196078431373,NaN;NaN,NaN,NaN,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,0.290196078431373;NaN,NaN,NaN,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373;NaN,0.290196078431373,0.290196078431373,0.290196078431373,0.290196078431373,1,1,1,1,1,1,1,0.290196078431373,1,0.991546501869230,0.290196078431373;0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,1,1,1,1,1,0.996032654306859,0.986602578774701,0.975188830395972,0.290196078431373;0.290196078431373,1,1,1,0.290196078431373,1,1,1,1,1,1,0.991546501869230,0.981109330891890,0.968841077286946,0.290196078431373,NaN;NaN,0.290196078431373,1,1,1,1,1,1,1,0.996032654306859,0.986602578774701,0.975188830395972,0.962127107652400,0.947631036850538,0.290196078431373,NaN;NaN,NaN,0.290196078431373,1,1,1,1,1,0.991546501869230,0.981109330891890,0.968871595330739,0.955046921492332,0.939909971770810,0.923643854428931,0.290196078431373,NaN;NaN,NaN,0.290196078431373,1,1,1,0.996063172350652,0.986572060730907,0.975188830395972,0.962127107652400,0.947631036850538,0.931914244296941,0.915190356298161,0.290196078431373,NaN,NaN;NaN,NaN,NaN,0.290196078431373,1,0.991546501869230,0.981109330891890,0.968841077286946,0.955016403448539,0.939909971770810,0.923643854428931,0.906553749904631,0.888761730373083,0.290196078431373,NaN,NaN;NaN,NaN,NaN,NaN,0.290196078431373,0.975188830395972,0.962127107652400,0.947631036850538,0.931914244296941,0.915220874341955,0.897734035248341,0.879728389410239,0.290196078431373,NaN,NaN,NaN;NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.939909971770810,0.923643854428931,0.906553749904631,0.888761730373083,0.870634012359808,0.852231631952392,0.290196078431373,NaN,NaN,NaN;NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.915190356298161,0.897734035248341,0.879758907454032,0.861478599221790,0.843076218814374,0.824887464713512,0.290196078431373,NaN,NaN,NaN;];
4928 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4929     [0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894071869993134,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894071869993134,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.882536049439231,0.407843137254902;0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860105287251087,0.407843137254902;0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.882566567483024,0.868223086900130,0.851468680857557,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860105287251087,0.842221713588159,0.822354467078660,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.882566567483024,0.868223086900130,0.851468680857557,0.832516975661860,0.811795223926146,0.789547570000763,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860135805294881,0.842221713588159,0.822354467078660,0.800839246204318,0.777950713359274,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.882536049439231,0.868223086900130,0.851438162813764,0.832516975661860,0.811764705882353,0.789547570000763,0.766079194323644,0.741756313420310,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.860135805294881,0.842252231631952,0.822384985122454,0.800808728160525,0.777920195315480,0.754024567025254,0.729396505683986,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.811764705882353,0.789547570000763,0.766079194323644,0.741786831464103,0.716914625772488,0.691676203555352,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.777920195315480,0.754024567025254,0.729396505683986,0.704371709773404,0.679133287556268,0.654261081864653,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;];
4930 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4931     [0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799954222934310,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799954222934310,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799954222934310,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.785091935606928,0.709803921568628;0.709803921568628,0.799954222934310,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776272220950637,0.756130312046998,0.709803921568628;0.709803921568628,0.799984740978103,0.799954222934310,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.785091935606928,0.766628519111925,0.744960708018616,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799954222934310,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776272220950637,0.756160830090791,0.733089188982986,0.707423514152743,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.785091935606928,0.766598001068132,0.744960708018616,0.720546272983902,0.693781948577096,0.665094987411307,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776241702906844,0.756160830090791,0.733089188982986,0.707423514152743,0.679682612344549,0.650141145952545,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.785061417563134,0.766598001068132,0.744960708018616,0.720546272983902,0.693812466620890,0.665094987411307,0.634882124055848,0.603479056992447,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.756160830090791,0.733089188982986,0.707423514152743,0.679652094300755,0.650141145952545,0.619287403677424,0.587518120088502,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.693781948577096,0.665094987411307,0.634882124055848,0.603509575036240,0.571404592965591,0.538872358281834,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.650141145952545,0.619256885633631,0.587518120088502,0.555230029755093,0.522697795071336,0.490638590066377,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;];
4932 <span class="comment">% [EOF] getIcons</span>
4933 
4934 <a name="_sub108" href="#_subfunctions" class="code">function guiparams = createGUIparams</a>
4935 <span class="comment">% Creates the guiparams structure with specified defaults.</span>
4936 
4937 <span class="comment">% Check for any stored prefs</span>
4938 <span class="comment">% --------------------------</span>
4939 <span class="comment">% Currently, units and the graphics renderer are stored as persistent prefs</span>
4940 guiprefs = getpref(<span class="string">'VMT'</span>);
4941 
4942 <span class="comment">% Organized by GUI panels</span>
4943 <span class="comment">%%%%%%%%%%%%%%%%%%%</span>
4944 <span class="comment">% SHIPTRACKS PLOT %</span>
4945 <span class="comment">%%%%%%%%%%%%%%%%%%%</span>
4946 guiparams.horizontal_grid_node_spacing       = 1.0;
4947 guiparams.vertical_grid_node_spacing         = 0.4;
4948 
4949 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
4950 <span class="comment">% CROSS SECTION PLOT %</span>
4951 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
4952 guiparams.contours                           = <span class="string">''</span>; <span class="comment">% Set below</span>
4953 guiparams.contour                            = <span class="string">''</span>; <span class="comment">% Set below</span>
4954 guiparams.idx_contour                        = 1;
4955 guiparams.vertical_exaggeration              = 10;
4956 guiparams.vector_scale_cross_section         = 0.2;
4957 guiparams.horizontal_vector_spacing          = 1;
4958 guiparams.vertical_vector_spacing            = 1;
4959 guiparams.horizontal_smoothing_window        = 1;
4960 guiparams.vertical_smoothing_window          = 1;
4961 guiparams.plot_secondary_flow_vectors        = true;
4962 guiparams.secondary_flows                    = <span class="string">''</span>; <span class="comment">% Set below</span>
4963 guiparams.secondary_flow_vector_variable     = <span class="string">''</span>; <span class="comment">% Set below</span>
4964 guiparams.idx_secondary_flow_vector_variable = 1;
4965 guiparams.include_vertical_velocity          = true;
4966 
4967 <span class="comment">%%%%%%%%%%%%%%%%%%</span>
4968 <span class="comment">% PLAN VIEW PLOT %</span>
4969 <span class="comment">%%%%%%%%%%%%%%%%%%</span>
4970 guiparams.depth_range_min                    = 0;
4971 guiparams.depth_range_max                    = inf;
4972 guiparams.vector_scale_plan_view             = 1;
4973 guiparams.vector_spacing_plan_view           = 1;
4974 guiparams.smoothing_window_size              = 1;
4975 guiparams.display_shoreline                  = false;
4976 guiparams.add_background                     = false;
4977 
4978 <span class="comment">%%%%%%%%%%%%%%%</span>
4979 <span class="comment">% DATA EXPORT %</span>
4980 <span class="comment">%%%%%%%%%%%%%%%</span>
4981 guiparams.beam_angle                         = 20.0;
4982 guiparams.magnetic_variation                 = 0.0;
4983 guiparams.wse                                = 0.0;
4984 guiparams.output_auxiliary_data              = false;
4985 
4986 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
4987 <span class="comment">% Contour variables %</span>
4988 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
4989 idx = 1;
4990 guiparams.contours(idx).string   = <span class="string">'Streamwise Velocity (u)'</span>;
4991 guiparams.contours(idx).variable = <span class="string">'streamwise'</span>;
4992 idx = idx + 1;
4993 guiparams.contours(idx).string   = <span class="string">'Transverse Velocity (v)'</span>;
4994 guiparams.contours(idx).variable = <span class="string">'transverse'</span>;
4995 idx = idx + 1;
4996 guiparams.contours(idx).string   = <span class="string">'Vertical Velocity (w)'</span>;
4997 guiparams.contours(idx).variable = <span class="string">'vertical'</span>;
4998 idx = idx + 1;
4999 guiparams.contours(idx).string   = <span class="string">'Velocity Magnitude'</span>;
5000 guiparams.contours(idx).variable = <span class="string">'mag'</span>;
5001 idx = idx + 1;
5002 guiparams.contours(idx).string   = <span class="string">'East Velocity (E)'</span>;
5003 guiparams.contours(idx).variable = <span class="string">'east'</span>;
5004 idx = idx + 1;
5005 guiparams.contours(idx).string   = <span class="string">'North Velocity (N)'</span>;
5006 guiparams.contours(idx).variable = <span class="string">'north'</span>;
5007 idx = idx + 1;
5008 guiparams.contours(idx).string   = <span class="string">'Error Velocity'</span>;
5009 guiparams.contours(idx).variable = <span class="string">'error'</span>;
5010 idx = idx + 1;
5011 guiparams.contours(idx).string   = <span class="string">'Primary Velocity (zsd)'</span>;
5012 guiparams.contours(idx).variable = <span class="string">'primary_zsd'</span>;
5013 idx = idx + 1;
5014 guiparams.contours(idx).string   = <span class="string">'Secondary Velocity (zsd)'</span>;
5015 guiparams.contours(idx).variable = <span class="string">'secondary_zsd'</span>;
5016 idx = idx + 1;
5017 guiparams.contours(idx).string   = <span class="string">'Primary Velocity (Roz)'</span>;
5018 guiparams.contours(idx).variable = <span class="string">'primary_roz'</span>;
5019 idx = idx + 1;
5020 guiparams.contours(idx).string   = <span class="string">'Secondary Velocity (Roz)'</span>;
5021 guiparams.contours(idx).variable = <span class="string">'secondary_roz'</span>;
5022 idx = idx + 1;
5023 guiparams.contours(idx).string   = <span class="string">'Prim. Vel. (Roz, Downstream Comp.)'</span>;
5024 guiparams.contours(idx).variable = <span class="string">'primary_roz_x'</span>;
5025 idx = idx + 1;
5026 guiparams.contours(idx).string   = <span class="string">'Prim. Vel. (Roz, Cross-Stream Comp.)'</span>;
5027 guiparams.contours(idx).variable = <span class="string">'primary_roz_y'</span>;
5028 idx = idx + 1;
5029 guiparams.contours(idx).string   = <span class="string">'Sec. Vel. (Roz, Downstream Comp.)'</span>;
5030 guiparams.contours(idx).variable = <span class="string">'secondary_roz_x'</span>;
5031 idx = idx + 1;
5032 guiparams.contours(idx).string   = <span class="string">'Sec. Vel. (Roz, Cross-Stream Comp.)'</span>;
5033 guiparams.contours(idx).variable = <span class="string">'secondary_roz_y'</span>;
5034 idx = idx + 1;
5035 guiparams.contours(idx).string   = <span class="string">'Backscatter'</span>;
5036 guiparams.contours(idx).variable = <span class="string">'backscatter'</span>;
5037 idx = idx + 1;
5038 guiparams.contours(idx).string   = <span class="string">'Flow Direction (deg.)'</span>;
5039 guiparams.contours(idx).variable = <span class="string">'flowangle'</span>;
5040 
5041 guiparams.contour = guiparams.contours(guiparams.idx_contour).variable;
5042 
5043 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5044 <span class="comment">% Secondary Flow Vector Variables %</span>
5045 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5046 idx = 1;
5047 guiparams.secondary_flows(idx).string   = <span class="string">'Transverse'</span>;
5048 guiparams.secondary_flows(idx).variable = <span class="string">'transverse'</span>;
5049 idx = idx + 1;
5050 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (zsd)'</span>;
5051 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_zsd'</span>;
5052 idx = idx + 1;
5053 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (Roz)'</span>;
5054 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_roz'</span>;
5055 idx = idx + 1;
5056 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (Roz, Cross-Stream Comp)'</span>;
5057 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_roz_y'</span>;
5058 idx = idx + 1;
5059 guiparams.secondary_flows(idx).string   = <span class="string">'Primary (Roz, Cross-Stream Comp)'</span>;
5060 guiparams.secondary_flows(idx).variable  = <span class="string">'primary_roz_y'</span>;
5061 
5062 guiparams.secondary_flow_vector_variable = <span class="keyword">...</span>
5063     guiparams.secondary_flows(guiparams.idx_secondary_flow_vector_variable).variable;
5064 
5065 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5066 <span class="comment">% INTERNAL SETTINGS &amp; DEFAULTS %</span>
5067 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5068 <span class="comment">% Menu bar options</span>
5069 guiparams.presentation                       = true;
5070 guiparams.print                              = false;
5071 guiparams.set_cross_section_endpoints        = false;
5072 guiparams.unit_discharge_correction          = false;
5073 
5074 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'units'</span>)
5075     <span class="keyword">switch</span> guiprefs.units
5076         <span class="keyword">case</span> <span class="string">'metric'</span>
5077             guiparams.english_units          = false;
5078         <span class="keyword">case</span> <span class="string">'english'</span>
5079             guiparams.english_units          = true;
5080     <span class="keyword">end</span>
5081 <span class="keyword">else</span>
5082     guiparams.english_units                  = false;
5083 <span class="keyword">end</span>
5084 guiparams.vertical_offset                    = 0;
5085 
5086 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>)
5087     guiparams.renderer                       = guiprefs.renderer;
5088 <span class="keyword">else</span>
5089     guiparams.renderer                       = <span class="string">'OpenGL'</span>;
5090 <span class="keyword">end</span>
5091 <span class="comment">% guiparams.plot_ship_tracks                   = false;</span>
5092 <span class="comment">% guiparams.plot_planview                      = false;</span>
5093 <span class="comment">% guiparams.plot_cross_section                 = false;</span>
5094 
5095 <span class="comment">% File location defaults</span>
5096 guiparams.ascii_path                        = pwd;
5097 guiparams.ascii_file                        = <span class="string">''</span>;
5098 guiparams.mat_path                          = pwd;
5099 guiparams.mat_file                          = <span class="string">''</span>;
5100 guiparams.tecplot_path                      = pwd;
5101 guiparams.tecplot_file                      = <span class="string">''</span>;
5102 guiparams.kmz_path                          = pwd;
5103 guiparams.kmz_file                          = <span class="string">''</span>;
5104 guiparams.multibeambathymetry_path          = pwd;
5105 guiparams.multibeambathymetry_file          = <span class="string">''</span>;
5106 guiparams.log_path                          = pwd;
5107 guiparams.log_file                          = <span class="string">''</span>;
5108 <span class="comment">% Avoids problems of not finding the MCR root when running as a standalone</span>
5109 <span class="comment">% application</span>
5110 <span class="keyword">if</span> isdeployed 
5111     guiparams.has_mapping_toolbox           = true;
5112 <span class="keyword">else</span>
5113     guiparams.has_mapping_toolbox               = <span class="keyword">...</span>
5114         ~isempty(dir(fullfile(matlabroot,<span class="string">'toolbox'</span>,<span class="string">'map'</span>)));
5115 <span class="keyword">end</span>
5116 
5117 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5118 <span class="comment">% IN MEMORY DATA STORAGE %</span>
5119 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5120 guiparams.z                      = [];
5121 guiparams.A                      = [];
5122 guiparams.V                      = [];
5123 guiparams.Map                    = [];
5124 guiparams.savefile               = [];
5125 guiparams.iric_anv_planview_data = [];
5126 <span class="comment">% guiparams.zmin = []; % Don't need to store these?</span>
5127 <span class="comment">% guiparams.zmax = [];</span>
5128 <span class="comment">% guiprefs = getappdata(handles.figure1,'guiprefs');</span>
5129 guiparams.data_folder = <span class="string">''</span>;
5130 guiparams.data_files  = {<span class="string">''</span>};
5131 guiparams.gui_state   = <span class="string">'init'</span>;
5132 
5133 <span class="comment">% [EOF] createGUIparams</span>
5134 
5135 <a name="_sub109" href="#_subfunctions" class="code">function ShiptracksZoom_Callback(obj,evd,handles)</a>
5136 ticks_format(<span class="string">'%6.0f'</span>,<span class="string">'%8.0f'</span>); <span class="comment">%formats the ticks for UTM (when zooming)</span>
5137 
5138 <a name="_sub110" href="#_subfunctions" class="code">function ShiptracksPan_Callback(obj,evd,handles)</a>
5139 ticks_format(<span class="string">'%6.0f'</span>,<span class="string">'%8.0f'</span>); <span class="comment">%formats the ticks for UTM (when panning)</span>
5140 
5141 <span class="comment">% [EOF] VMT</span>
5142 
5143 
5144 
5145 
5146 
5147 <span class="comment">% --- Hidden keyboard commands</span>
5148 <a name="_sub111" href="#_subfunctions" class="code">function figure1_WindowKeyPressFcn(hObject, eventdata, handles)</a>
5149 <span class="comment">% Used to pass specific hidden keyboard commands to VMT. Currently, the</span>
5150 <span class="comment">% only use for this function is to open Beta support for SonTek M9 data.</span>
5151 <span class="comment">%</span>
5152 <span class="comment">% hObject    handle to figure1 (see GCBO)</span>
5153 <span class="comment">% eventdata  structure with the following fields (see FIGURE)</span>
5154 <span class="comment">%    Key: name of the key that was pressed, in lower case</span>
5155 <span class="comment">%    Character: character interpretation of the key(s) that was pressed</span>
5156 <span class="comment">%    Modifier: name(s) of the modifier key(s) (i.e., control, shift) pressed</span>
5157 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
5158 
5159 in1 = eventdata.Modifier; 
5160 in2 = eventdata.Key;
5161 
5162 <span class="keyword">if</span> ~isempty(in1) <span class="comment">% User pressed at least one modifier key</span>
5163     input = [in1{:} in2];
5164 <span class="keyword">else</span>
5165     input = in2;
5166 <span class="keyword">end</span>
5167 
5168 <span class="keyword">switch</span> input
5169     <span class="comment">% Hidden SonTek M9 support</span>
5170     <span class="keyword">case</span> <span class="string">'shiftcontrols'</span>
5171         msgtxt = {<span class="keyword">...</span>
5172             <span class="string">'VMT offers limited support for SonTek M9/S5 data.'</span>;<span class="keyword">...</span>
5173             <span class="string">'SonTek RiverSurveyorLive required data format:'</span>;<span class="keyword">...</span>
5174             <span class="string">'      -ENU coordinates'</span>;<span class="keyword">...</span>
5175             <span class="string">'      -Desired GPS reference (BT/GGA/VTG)'</span>
5176             <span class="string">''</span>;<span class="keyword">...</span>
5177             <span class="string">'Abosolutely NO GUARANTEE is made or implied that this'</span>;<span class="keyword">...</span>
5178             <span class="string">'functionality will work for all cases. Results are'</span>;<span class="keyword">...</span>
5179             <span class="string">'PROVISIONAL at best.'</span>};
5180         msgbox(msgtxt, <span class="string">'Hidden Functionality: Process SonTek M9'</span>, <span class="string">'warn'</span>,<span class="string">'replace'</span>)
5181         
5182         <span class="comment">% Get the Application data:</span>
5183         <span class="comment">% -------------------------</span>
5184         guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
5185         guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
5186         
5187         <span class="comment">% Ask the user to select files:</span>
5188         <span class="comment">% -----------------------------</span>
5189         <span class="comment">% current_file = fullfile(guiparams.data_folder,guiparams.data_files{1});</span>
5190         <span class="comment">% current_file = fullfile(guiprefs.mat_path,guiprefs.mat_file);</span>
5191         <span class="keyword">if</span> iscell(guiprefs.mat_file)
5192             uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file{1});
5193         <span class="keyword">else</span>
5194             uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file);
5195         <span class="keyword">end</span>
5196         [filename,pathname] = <span class="keyword">...</span>
5197             uigetfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-files (*.mat)'</span>}, <span class="keyword">...</span>
5198             <span class="string">'Select SonTek RiverSurveyor Live v3.60 MAT File'</span>, <span class="keyword">...</span>
5199             uifile, <span class="string">'MultiSelect'</span>,<span class="string">'on'</span>);
5200         
5201         <span class="keyword">if</span> ischar(pathname) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
5202             guiparams.data_folder = pathname;
5203             <span class="keyword">if</span> ischar(filename)
5204                 filename = {filename};
5205             <span class="keyword">end</span>
5206             guiparams.data_files = filename;
5207             guiparams.mat_file = <span class="string">''</span>;
5208             
5209             setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
5210             
5211             
5212             
5213             <span class="comment">% Update the preferences:</span>
5214             <span class="comment">% -----------------------</span>
5215             guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
5216             guiprefs.ascii_path = pathname;
5217             guiprefs.ascii_file = filename;
5218             setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
5219             <a href="#_sub93" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'ascii'</span>)
5220             
5221             <span class="comment">% Push messages to Log Window:</span>
5222             <span class="comment">% ----------------------------</span>
5223             log_text = {<span class="keyword">...</span>
5224                 <span class="string">''</span>;<span class="keyword">...</span>
5225                 [<span class="string">'%--- '</span> datestr(now) <span class="string">' ---%'</span>];<span class="keyword">...</span>
5226                 <span class="string">'Current Project Directory:'</span>;<span class="keyword">...</span>
5227                 guiparams.data_folder;
5228                 <span class="string">'Loading the following files into memory:'</span>;<span class="keyword">...</span>
5229                 char(filename)};
5230             statusLogging(handles.LogWindow, log_text)
5231             
5232             <span class="comment">% Read the file(s)</span>
5233             <span class="comment">% ----------------</span>
5234             <span class="comment">%A = parseSonTekVMT(fullfile(pathname,filename));</span>
5235             
5236             [~,~,savefile,A,z] = <span class="keyword">...</span>
5237                 <a href="VMT_ReadFiles_SonTek.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles_SonTek(zPathName,zFileName)">VMT_ReadFiles_SonTek</a>(guiparams.data_folder,guiparams.data_files);
5238             guiparams.savefile = savefile;
5239             guiparams.A        = A;
5240             guiparams.z        = z;
5241             setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
5242             
5243             
5244             <span class="comment">% Update the GUI:</span>
5245             <span class="comment">% ---------------</span>
5246             <a href="#_sub95" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
5247         <span class="keyword">end</span>  
5248     <span class="keyword">case</span> <span class="string">'shiftcontroll'</span> <span class="comment">% Call SontekMAT2KML</span>
5249         SontekMAT2KML;
5250     <span class="keyword">case</span> <span class="string">'f1'</span> <span class="comment">% Call the VMT UsersGuide</span>
5251         <a href="#_sub46" class="code" title="subfunction menuUsersGuide_Callback(hObject, eventdata, handles)">menuUsersGuide_Callback</a>(hObject, eventdata, handles)
5252         
5253     <span class="keyword">case</span> <span class="string">'controlalte'</span>
5254         VMT_BuildCustomFlatFile;
5255     <span class="keyword">otherwise</span>
5256         <span class="comment">%disp(input)</span>
5257 <span class="keyword">end</span>
5258 
5259 
5260 
5261</pre></div>
<hr><address>Generated on Tue 08-Jul-2014 15:31:39 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>