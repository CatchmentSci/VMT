<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of VMT</title>
  <meta name="keywords" content="VMT">
  <meta name="description" content="--- THE VELOCITY MAPPING TOOLBOX ---">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- menu.html VMT -->
<h1>VMT
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>--- THE VELOCITY MAPPING TOOLBOX ---</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function varargout = VMT(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> --- THE VELOCITY MAPPING TOOLBOX ---
 
 VMT is a Matlab-based software for processing and visualizing ADCP data
 collected along transects in rivers or other bodies of water. VMT allows
 rapid processing, visualization, and analysis of a range of ADCP datasets
 and includes utilities to export ADCP data to files compatible with
 ArcGIS, Tecplot, and Google Earth. The software can be used to explore
 patterns of three-dimensional fluid motion through several methods for
 calculation of secondary flows (e.g. Rhoads and Kenworthy, 1998; Lane et
 al., 2000). The software also includes capabilities for analyzing the
 acoustic backscatter and bathymetric data from the ADCP. A user-friendly
 graphical user interface (GUI) enhances program functionality and
 provides ready access to two- and three- dimensional plotting functions,
 allowing rapid display and interrogation of velocity, backscatter, and
 bathymetry data.
 
 CITATION: 
 Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L., Rhoads, B.
 L., Oberg, K. A., Best, J. L., Mueller, D. S., Johnson, K. K. and Riley,
 J. D. (2013), Velocity Mapping Toolbox (VMT): a processing and
 visualization suite for moving-vessel ADCP measurements. Earth Surf.
 Process. Landforms. doi: 10.1002/esp.3367

__________________________________________________________________________
 P.R. Jackson, U.S. Geological Survey, Illinois Water Science Center
 (pjackson@usgs.gov)

 Code contributed by D. Parsons, D. Mueller, J. Czuba, and F. Engel.
__________________________________________________________________________</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="VMT_BuildTecplotFile.html" class="code" title="function VMT_BuildTecplotFile(V,savefile)">VMT_BuildTecplotFile</a>	Takes the processed data structure and writes a TecPlot ASCII data file.</li><li><a href="VMT_BuildTecplotFile_XSBathy.html" class="code" title="function VMT_BuildTecplot_XSBathy(V,savefile)">VMT_BuildTecplotFile_XSBathy</a>	Takes the processed data structure and writes a TecPlot ASCII data file</li><li><a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wseval,saveaux)">VMT_MBBathy</a>	Computes the multibeam bathymetry from the four beams of the ADCP</li><li><a href="VMT_MeanXS2GE_3D.html" class="code" title="function VMT_MeanXS2GE_3D(A,V,pathstr,filestr,vscale,voffset)">VMT_MeanXS2GE_3D</a>	Outputs the mean cross section (3-D) from VMT to Google Earth (saved as a</li><li><a href="VMT_OverlayDOQQ.html" class="code" title="function [guiprefs,log_text] = VMT_OverlayDOQQ(guiprefs,varargin)">VMT_OverlayDOQQ</a>	Prompts the user for a geotiff DOQQ (USGS) and overlays the aerial image</li><li><a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>	This function plots a plan view of the measurement region with a vector</li><li><a href="VMT_PlotShiptracks.html" class="code" title="function hf = VMT_PlotShiptracks(A,V,z,setends,hf)">VMT_PlotShiptracks</a>	Plots the shiptracks, and interpolated grid in the VMT GUI axes. Also</li><li><a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>	Plots a shoreline map given the shoreline data structure 'Map' (see</li><li><a href="VMT_PlotXSCont.html" class="code" title="function [z,A,V,zmin,zmax,log_text,fig_contour_handle] = VMT_PlotXSCont(z,A,V,var,exag,plot_english,allow_flux_flip,start_bank)">VMT_PlotXSCont</a>	Plots contours for the variable 'var' within the mean cross section given</li><li><a href="VMT_PlotXSContQuiver.html" class="code" title="function [z,A,V,toquiv,log_text] = VMT_PlotXSContQuiver(z,A,V,var,sf,exag,qspchorz,qspcvert,secvecvar,vvelcomp,plot_english,allow_flux_flip,start_bank,varargin)">VMT_PlotXSContQuiver</a>	This function plots the the contour plot (mean XS) for the variable 'var'</li><li><a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>	This function is a driver to preprocess the transects data.  Several</li><li><a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection,eta,start_bank)">VMT_ProcessTransects</a>	Driver program to process multiple transects at a single cross-section</li><li><a href="VMT_ReadFiles.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles(zPathName,zFileName)">VMT_ReadFiles</a>	Read in multiple ASCII output files from WinRiver or WinRiverII.</li><li><a href="VMT_ReadFiles_SonTek.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles_SonTek(zPathName,zFileName)">VMT_ReadFiles_SonTek</a>	Read in multiple MAT output files from SonTek RSL v1.5-3.60.</li><li><a href="VMT_SaveExcelOutput.html" class="code" title="function [log_text] = VMT_SaveExcelOutput(excel_path,excel_file,outputType,dataPath,dataFiles,V,A,z,Map,wse,PVdata)">VMT_SaveExcelOutput</a>	Function to save Excel spreadsheet of the VMT output information</li><li><a href="VMT_SaveFigs.html" class="code" title="function VMT_SaveFigs(pathname,to_export,figure_style)">VMT_SaveFigs</a>	Saves the figures (specified by fignums) from VMT as .PNG or EPS files</li><li><a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>	This routine smooths all processed variables in V struct. By default is</li><li><a href="VMT_Vorticity.html" class="code" title="function [V] = VMT_Vorticity(V)">VMT_Vorticity</a>	Not currently implemented</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="#_sub1" class="code">function VMT_OpeningFcn(hObject, eventdata, handles, varargin)</a></li><li><a href="#_sub2" class="code">function varargout = VMT_OutputFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub3" class="code">function figure1_ResizeFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub4" class="code">function figure1_CloseRequestFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub5" class="code">function menuFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub6" class="code">function menuOpen_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub7" class="code">function menuOpenASCII_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub8" class="code">function menuOpenSonTekMAT_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub9" class="code">function menuOpenMAT_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub10" class="code">function closeOpenFigures(hObject, eventdata, handles)</a></li><li><a href="#_sub11" class="code">function menuSave_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub12" class="code">function menuSaveMAT_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub13" class="code">function menuSaveTecplot_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub14" class="code">function menuSaveKMZFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub15" class="code">function menuExport_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub16" class="code">function menuFigureExportsettings_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub17" class="code">function menuPrintFormat_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub18" class="code">function menuPresentationFormat_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub19" class="code">function menuGraphicsRenderer_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub20" class="code">function menuOpenGL_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub21" class="code">function menuPainters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub22" class="code">function menuZbuffer_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub23" class="code">function menuExportFigures_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub24" class="code">function menuBathymetryExportSettings_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub25" class="code">function [wsedata] = loadTideFile(infile)</a></li><li><a href="#_sub26" class="code">function menuExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub27" class="code">function menuSaveANVFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub28" class="code">function menuSaveExcel_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub29" class="code">function menuExportCustomFlatFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub30" class="code">function menuSettings_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub31" class="code">function menuProcessingSettings_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub32" class="code">function menuUnitDischargeCorrection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub33" class="code">function menuPlottingParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub34" class="code">function menuUnits_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub35" class="code">function menuMetric_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub36" class="code">function menuEnglish_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub37" class="code">function menuVerticalReference_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub38" class="code">function VerticalReference_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub39" class="code">function menuSetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub40" class="code">function menuCrossSectionEndpointAutomatic_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub41" class="code">function menuCrossSectionEndpointManual_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub42" class="code">function menuPlotStyle_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub43" class="code">function menuStylePrint_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub44" class="code">function menuStylePresentation_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub45" class="code">function menuAdvancedSettings_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub46" class="code">function menuBathymetryParameters_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub47" class="code">function menuTools_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub48" class="code">function menuASCII2GIS_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub49" class="code">function menuASCII2KML_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub50" class="code">function menuSonTekMAT2KML_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub51" class="code">function menuOpenBatchMode_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub52" class="code">function menuHelp_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub53" class="code">function menuUsersGuide_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub54" class="code">function menuFunctionLibrary_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub55" class="code">function menuCheckForUpdates_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub56" class="code">function menuAbout_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub57" class="code">function loadDataCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub58" class="code">function saveDataCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub59" class="code">function saveBathymetryCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub60" class="code">function plottingParametersCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub61" class="code">function processingParametersCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub62" class="code">function shiptracksPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub63" class="code">function planviewPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub64" class="code">function crosssectionPlotCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub65" class="code">function SaveMATFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub66" class="code">function SaveTecplotFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub67" class="code">function SaveGoogleEarthFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub68" class="code">function ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub69" class="code">function BeamAngle_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub70" class="code">function MagneticVariation_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub71" class="code">function OutputAuxiliaryData_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub72" class="code">function DepthRangeMin_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub73" class="code">function DepthRangeMax_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub74" class="code">function VectorScalePlanView_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub75" class="code">function VectorSpacingPlanview_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub76" class="code">function SmoothingWindowSize_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub77" class="code">function AddBackground_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub78" class="code">function PlotPlanView_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub79" class="code">function HorizontalGridNodeSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub80" class="code">function VerticalGridNodeSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub81" class="code">function SetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub82" class="code">function PlotShiptracks_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub83" class="code">function Contour_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub84" class="code">function VerticalExaggeration_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub85" class="code">function VectorScaleCrossSection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub86" class="code">function HorizontalVectorSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub87" class="code">function VerticalVectorSpacing_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub88" class="code">function HorizontalSmoothingWindow_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub89" class="code">function VerticalSmoothingWindow_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub90" class="code">function PlotSecondaryFlowVectors_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub91" class="code">function SecondaryFlowVectorVariable_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub92" class="code">function IncludeVerticalVelocity_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub93" class="code">function PlotCrossSection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub94" class="code">function ClearLog_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub95" class="code">function SaveLog_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub96" class="code">function handles = buildToolbar(handles)</a></li><li><a href="#_sub97" class="code">function load_prefs(hfigure)</a></li><li><a href="#_sub98" class="code">function store_prefs(hfigure,pref)</a></li><li><a href="#_sub99" class="code">function initGUI(handles)</a></li><li><a href="#_sub100" class="code">function set_enable(handles,enable_state)</a></li><li><a href="#_sub101" class="code">function [english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style] =</a></li><li><a href="#_sub102" class="code">function dialogUnits(hObject,eventdata,handles,the_units)</a></li><li><a href="#_sub103" class="code">function dialogEnpoints(hObject,eventdata,handles,the_endpoints)</a></li><li><a href="#_sub104" class="code">function dialogPlotStyle(hObject,eventdata,handles,the_style)</a></li><li><a href="#_sub105" class="code">function dialogOK(hObject,eventdata,h_OK)</a></li><li><a href="#_sub106" class="code">function dialogCancel(hObject,eventdata,handles)</a></li><li><a href="#_sub107" class="code">function dialogCloseReq(hObject,eventdata,h_OK)</a></li><li><a href="#_sub108" class="code">function [beam_angle,magnetic_variation,wse,output_auxiliary_data,load_wse_tide_file] =</a></li><li><a href="#_sub109" class="code">function dialogExportSettings(hObject,eventdata,handles)</a></li><li><a href="#_sub110" class="code">function [selected_figures] = openFiguresDialog(figure_names,hf)</a></li><li><a href="#_sub111" class="code">function dialogSelectFigures(hObject,eventdata,handles)</a></li><li><a href="#_sub112" class="code">function icons = getIcons</a></li><li><a href="#_sub113" class="code">function guiparams = createGUIparams</a></li><li><a href="#_sub114" class="code">function ShiptracksZoom_Callback(obj,evd,handles)</a></li><li><a href="#_sub115" class="code">function ShiptracksPan_Callback(obj,evd,handles)</a></li><li><a href="#_sub116" class="code">function figure1_WindowKeyPressFcn(hObject, eventdata, handles)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = VMT(varargin)</a>
0002 <span class="comment">% --- THE VELOCITY MAPPING TOOLBOX ---</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% VMT is a Matlab-based software for processing and visualizing ADCP data</span>
0005 <span class="comment">% collected along transects in rivers or other bodies of water. VMT allows</span>
0006 <span class="comment">% rapid processing, visualization, and analysis of a range of ADCP datasets</span>
0007 <span class="comment">% and includes utilities to export ADCP data to files compatible with</span>
0008 <span class="comment">% ArcGIS, Tecplot, and Google Earth. The software can be used to explore</span>
0009 <span class="comment">% patterns of three-dimensional fluid motion through several methods for</span>
0010 <span class="comment">% calculation of secondary flows (e.g. Rhoads and Kenworthy, 1998; Lane et</span>
0011 <span class="comment">% al., 2000). The software also includes capabilities for analyzing the</span>
0012 <span class="comment">% acoustic backscatter and bathymetric data from the ADCP. A user-friendly</span>
0013 <span class="comment">% graphical user interface (GUI) enhances program functionality and</span>
0014 <span class="comment">% provides ready access to two- and three- dimensional plotting functions,</span>
0015 <span class="comment">% allowing rapid display and interrogation of velocity, backscatter, and</span>
0016 <span class="comment">% bathymetry data.</span>
0017 <span class="comment">%</span>
0018 <span class="comment">% CITATION:</span>
0019 <span class="comment">% Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L., Rhoads, B.</span>
0020 <span class="comment">% L., Oberg, K. A., Best, J. L., Mueller, D. S., Johnson, K. K. and Riley,</span>
0021 <span class="comment">% J. D. (2013), Velocity Mapping Toolbox (VMT): a processing and</span>
0022 <span class="comment">% visualization suite for moving-vessel ADCP measurements. Earth Surf.</span>
0023 <span class="comment">% Process. Landforms. doi: 10.1002/esp.3367</span>
0024 <span class="comment">%</span>
0025 <span class="comment">%__________________________________________________________________________</span>
0026 <span class="comment">% P.R. Jackson, U.S. Geological Survey, Illinois Water Science Center</span>
0027 <span class="comment">% (pjackson@usgs.gov)</span>
0028 <span class="comment">%</span>
0029 <span class="comment">% Code contributed by D. Parsons, D. Mueller, J. Czuba, and F. Engel.</span>
0030 <span class="comment">%__________________________________________________________________________</span>
0031 
0032 <span class="comment">% Begin initialization code - DO NOT EDIT</span>
0033 <span class="comment">% Adress 2015b java bug #1293244</span>
0034 javax.swing.UIManager.setLookAndFeel(<span class="string">'com.sun.java.swing.plaf.windows.WindowsLookAndFeel'</span>)
0035 gui_Singleton = 1;
0036 gui_State = struct(<span class="string">'gui_Name'</span>,       mfilename, <span class="keyword">...</span>
0037     <span class="string">'gui_Singleton'</span>,  gui_Singleton, <span class="keyword">...</span>
0038     <span class="string">'gui_OpeningFcn'</span>, @<a href="#_sub1" class="code" title="subfunction VMT_OpeningFcn(hObject, eventdata, handles, varargin)">VMT_OpeningFcn</a>, <span class="keyword">...</span>
0039     <span class="string">'gui_OutputFcn'</span>,  @<a href="#_sub2" class="code" title="subfunction varargout = VMT_OutputFcn(hObject, eventdata, handles)">VMT_OutputFcn</a>, <span class="keyword">...</span>
0040     <span class="string">'gui_LayoutFcn'</span>,  [] , <span class="keyword">...</span>
0041     <span class="string">'gui_Callback'</span>,   []);
0042 <span class="keyword">if</span> nargin &amp;&amp; ischar(varargin{1})
0043     gui_State.gui_Callback = str2func(varargin{1});
0044 <span class="keyword">end</span>
0045 
0046 <span class="comment">% If ERROR, write a txt file with the error dump info</span>
0047 <span class="keyword">try</span>
0048 <span class="keyword">if</span> nargout
0049     [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
0050 <span class="keyword">else</span>
0051     gui_mainfcn(gui_State, varargin{:});
0052 <span class="keyword">end</span>
0053 
0054 <span class="keyword">catch</span> err
0055     <span class="keyword">if</span> isdeployed
0056         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
0057             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
0058         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
0059             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
0060             errLogFileName},<span class="keyword">...</span>
0061             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
0062             <span class="string">'error'</span>);
0063         fid = fopen(errLogFileName,<span class="string">'W'</span>);
0064         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
0065         fclose(fid);
0066         rethrow(err)
0067     <span class="keyword">else</span>
0068         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
0069             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
0070             <span class="string">'error'</span>);
0071         rethrow(err);
0072     <span class="keyword">end</span>
0073 <span class="keyword">end</span>
0074 <span class="comment">% End initialization code - DO NOT EDIT</span>
0075 
0076 <span class="comment">%#ok&lt;*DEFNU,*INUSL,*INUSD&gt;</span>
0077 
0078 <span class="comment">% --- Executes just before VMT is made visible.</span>
0079 <a name="_sub1" href="#_subfunctions" class="code">function VMT_OpeningFcn(hObject, eventdata, handles, varargin)</a>
0080 <span class="comment">% This function has no output args, see OutputFcn.</span>
0081 <span class="comment">% hObject    handle to figure</span>
0082 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0083 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0084 <span class="comment">% varargin   command line arguments to VMT (see VARARGIN)</span>
0085 
0086 <span class="comment">% Choose default command line output for VMT</span>
0087 handles.output = hObject;
0088 
0089 <span class="comment">% Build the GUI toolbar:</span>
0090 <span class="comment">% ----------------------</span>
0091 handles = <a href="#_sub96" class="code" title="subfunction handles = buildToolbar(handles)">buildToolbar</a>(handles);
0092 
0093 <span class="comment">% Ensure path to utils &amp; docs is available</span>
0094 <span class="comment">% ----------------------------------------</span>
0095 <span class="keyword">if</span> ~isdeployed
0096     utilspath = [pwd filesep <span class="string">'utils'</span>];
0097     docspath  = [pwd filesep <span class="string">'doc'</span>];
0098     toolspath = [pwd filesep <span class="string">'tools'</span>];
0099     addpath(utilspath,docspath,toolspath)
0100 <span class="keyword">end</span>
0101 
0102 <span class="comment">% Update handles structure</span>
0103 <span class="comment">% ------------------------</span>
0104 guidata(hObject, handles);
0105 
0106 <span class="comment">% Load the GUI preferences:</span>
0107 <span class="comment">% -------------------------</span>
0108 <a href="#_sub97" class="code" title="subfunction load_prefs(hfigure)">load_prefs</a>(handles.figure1)
0109 
0110 <span class="comment">% Initialize the GUI parameters:</span>
0111 <span class="comment">% ------------------------------</span>
0112 guiparams = <a href="#_sub113" class="code" title="subfunction guiparams = createGUIparams">createGUIparams</a>;
0113 guiparams.vmt_version = {<span class="string">'v4.08'</span>; <span class="string">'r20171005'</span>};
0114 
0115 <span class="comment">% Draw the VMT Background</span>
0116 <span class="comment">% -----------------</span>
0117 pos = get(handles.figure1,<span class="string">'position'</span>);
0118 axes(handles.VMTBackground);
0119 <span class="comment">% if ~isdeployed %isempty(dir(fullfile(matlabroot,'toolbox','images')))</span>
0120     X = imread(<span class="string">'VMT_Background.png'</span>);
0121     imdisp(X,<span class="string">'size'</span>,[pos(4) pos(3)]) <span class="comment">% Avoids problems with users not having Image Processing TB</span>
0122 <span class="comment">% else</span>
0123 <span class="comment">%     X = imread('VMT_Background.png');</span>
0124 <span class="comment">%     X = imresize(X, [pos(4) pos(3)]);</span>
0125 <span class="comment">%     X = uint8(X);</span>
0126 <span class="comment">%     imshow(X,'Border','tight')</span>
0127 <span class="comment">% end</span>
0128 uistack(handles.VMTBackground,<span class="string">'bottom'</span>)
0129 
0130 <span class="comment">% Store the application data:</span>
0131 <span class="comment">% ---------------------------</span>
0132 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0133 <span class="comment">% guiprefs = getappdata(handles.figure1,'guiprefs');</span>
0134 <span class="comment">% setappdata(handles.figure1,'guiprefs',guiprefs)</span>
0135 <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'runcounter'</span>)
0136 
0137 <span class="comment">% Auto-check for updates</span>
0138 <span class="comment">% ----------------------</span>
0139 thres = 20; 
0140 runcounter = getpref(<span class="string">'VMT'</span>,<span class="string">'runcounter'</span>);
0141 time_to_check = (mod(runcounter,thres)==0);
0142 <span class="keyword">if</span> time_to_check
0143     <a href="#_sub55" class="code" title="subfunction menuCheckForUpdates_Callback(hObject, eventdata, handles)">menuCheckForUpdates_Callback</a>(hObject, eventdata, handles)
0144 <span class="keyword">end</span>
0145 
0146 <span class="comment">% Initialize the GUI:</span>
0147 <span class="comment">% -------------------</span>
0148 <a href="#_sub99" class="code" title="subfunction initGUI(handles)">initGUI</a>(handles)
0149 <a href="#_sub100" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'init'</span>)
0150 
0151 <span class="comment">% Allow VMT GUI to be resized depending on the screen resolution</span>
0152 <span class="comment">% set(0,'units','pixels')</span>
0153 <span class="comment">% Pix_SS = get(0,'screensize');</span>
0154 <span class="comment">% movegui(handles.figure1,'center')</span>
0155 set(handles.figure1,<span class="string">'Resize'</span>,<span class="string">'on'</span>)
0156 
0157 <span class="comment">% Allow access to the VMT Main GUI info by other sub-GUIs by pushing it to</span>
0158 <span class="comment">% the root</span>
0159 setappdata(0  , <span class="string">'hVMTgui'</span>    , gcf);
0160 
0161 <span class="comment">% UIWAIT makes VMT wait for user response (see UIRESUME)</span>
0162 <span class="comment">% uiwait(handles.figure1);</span>
0163 <span class="comment">% [EOF] VMT_OpeningFcn</span>
0164 
0165 
0166 <span class="comment">% --- Outputs from this function are returned to the command line.</span>
0167 <a name="_sub2" href="#_subfunctions" class="code">function varargout = VMT_OutputFcn(hObject, eventdata, handles)</a>
0168 <span class="comment">% varargout  cell array for returning output args (see VARARGOUT);</span>
0169 <span class="comment">% hObject    handle to figure</span>
0170 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0171 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0172 
0173 <span class="comment">% Get default command line output from handles structure</span>
0174 varargout{1} = handles.output;
0175 <span class="comment">% [EOF] VMT_OutputFcn</span>
0176 
0177 <span class="comment">% --- Executes when figure1 is resized.</span>
0178 <a name="_sub3" href="#_subfunctions" class="code">function figure1_ResizeFcn(hObject, eventdata, handles)</a>
0179 
0180 <span class="comment">% Draw the VMT Background</span>
0181 <span class="comment">% -----------------</span>
0182 pos = get(handles.figure1,<span class="string">'position'</span>);
0183 axes(handles.VMTBackground);
0184 <span class="comment">% if ~isdeployed %isempty(dir(fullfile(matlabroot,'toolbox','images')))</span>
0185     X = imread(<span class="string">'VMT_Background.png'</span>);
0186     imdisp(X,<span class="string">'size'</span>,[pos(4) pos(3)]) <span class="comment">% Avoids problems with users not having Image Processing TB</span>
0187 <span class="comment">% else</span>
0188 <span class="comment">%     X = imread('VMT_Background.png');</span>
0189 <span class="comment">%     X = imresize(X, [pos(4) pos(3)]);</span>
0190 <span class="comment">%     X = uint8(X);</span>
0191 <span class="comment">%     imshow(X,'Border','tight')</span>
0192 <span class="comment">% end</span>
0193 uistack(handles.VMTBackground,<span class="string">'bottom'</span>)
0194 
0195 <span class="comment">% --- Executes when user attempts to close figure1.</span>
0196 <a name="_sub4" href="#_subfunctions" class="code">function figure1_CloseRequestFcn(hObject, eventdata, handles)</a>
0197 <span class="comment">% hObject    handle to figure1 (see GCBO)</span>
0198 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0199 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0200 
0201 <span class="comment">% Hint: delete(hObject) closes the figure</span>
0202 who_called = get(hObject,<span class="string">'tag'</span>);
0203 close_button = questdlg(<span class="keyword">...</span>
0204     <span class="string">'You are about to exit VMT. Any unsaved work will be lost. Are you sure?'</span>,<span class="keyword">...</span>
0205     <span class="string">'Exit VMT?'</span>,<span class="string">'No'</span>);
0206 <span class="keyword">switch</span> close_button
0207     <span class="keyword">case</span> <span class="string">'Yes'</span>
0208         closereq
0209         close all hidden
0210     <span class="keyword">otherwise</span>
0211         <span class="keyword">return</span>
0212 <span class="keyword">end</span>
0213 <span class="comment">% [EOF] figure1_CloseRequestFcn</span>
0214 
0215 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
0216 <span class="comment">% MENU BAR CALLBACKS %</span>
0217 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
0218 
0219 <span class="comment">% --------------------------------------------------------------------</span>
0220 <a name="_sub5" href="#_subfunctions" class="code">function menuFile_Callback(hObject, eventdata, handles)</a>
0221 <span class="comment">% Empty</span>
0222 
0223 <span class="comment">% --------------------------------------------------------------------</span>
0224 <a name="_sub6" href="#_subfunctions" class="code">function menuOpen_Callback(hObject, eventdata, handles)</a>
0225 <span class="comment">% Empty</span>
0226 
0227 <span class="comment">% --------------------------------------------------------------------</span>
0228 <a name="_sub7" href="#_subfunctions" class="code">function menuOpenASCII_Callback(hObject, eventdata, handles)</a>
0229 <a href="#_sub57" class="code" title="subfunction loadDataCallback(hObject, eventdata, handles)">loadDataCallback</a>(hObject, eventdata, handles)
0230 <span class="comment">% [EOF] menuOpenASCII_Callback</span>
0231 
0232 <span class="comment">% --------------------------------------------------------------------</span>
0233 <a name="_sub8" href="#_subfunctions" class="code">function menuOpenSonTekMAT_Callback(hObject, eventdata, handles)</a>
0234 axes(findobj(handles.figure1,<span class="string">'Tag'</span>,<span class="string">'Plot1Shiptracks'</span>)); cla
0235 <a href="#_sub10" class="code" title="subfunction closeOpenFigures(hObject, eventdata, handles)">closeOpenFigures</a>(hObject, eventdata, handles)
0236 <span class="comment">% Get the Application data:</span>
0237 <span class="comment">% -------------------------</span>
0238 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0239 guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0240 
0241 <span class="comment">% Ask the user to select files:</span>
0242 <span class="comment">% -----------------------------</span>
0243 <span class="comment">% current_file = fullfile(guiparams.data_folder,guiparams.data_files{1});</span>
0244 <span class="comment">% current_file = fullfile(guiprefs.mat_path,guiprefs.mat_file);</span>
0245 <span class="keyword">if</span> iscell(guiprefs.mat_file)
0246     uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file{1});
0247 <span class="keyword">else</span>
0248     uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file);
0249 <span class="keyword">end</span>
0250 [filename,pathname] = <span class="keyword">...</span>
0251     uigetfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-files (*.mat)'</span>}, <span class="keyword">...</span>
0252     <span class="string">'Select SonTek RiverSurveyor Live v3.60 MAT File'</span>, <span class="keyword">...</span>
0253     uifile, <span class="string">'MultiSelect'</span>,<span class="string">'on'</span>);
0254 
0255 <span class="keyword">if</span> ischar(pathname) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0256     guiparams.data_folder = pathname;
0257     <span class="keyword">if</span> ischar(filename)
0258         filename = {filename};
0259     <span class="keyword">end</span>
0260     guiparams.data_files = filename;
0261     guiparams.mat_file = <span class="string">''</span>;
0262     
0263     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0264     
0265     
0266     
0267     <span class="comment">% Update the preferences:</span>
0268     <span class="comment">% -----------------------</span>
0269     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0270     guiprefs.ascii_path = pathname;
0271     guiprefs.ascii_file = filename;
0272     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0273     <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'ascii'</span>)
0274     
0275     <span class="comment">% Push messages to Log Window:</span>
0276     <span class="comment">% ----------------------------</span>
0277     log_text = {<span class="keyword">...</span>
0278         <span class="string">''</span>;<span class="keyword">...</span>
0279         [<span class="string">'%--- '</span> datestr(now) <span class="string">' ---%'</span>];<span class="keyword">...</span>
0280         <span class="string">'Current Project Directory:'</span>;<span class="keyword">...</span>
0281         guiparams.data_folder;
0282         <span class="string">'Loading the following files into memory:'</span>;<span class="keyword">...</span>
0283         char(filename)};
0284     statusLogging(handles.LogWindow, log_text)
0285     
0286     <span class="comment">% Read the file(s)</span>
0287     <span class="comment">% ----------------</span>
0288     <span class="comment">%A = parseSonTekVMT(fullfile(pathname,filename));</span>
0289     
0290     [~,~,savefile,A,z] = <span class="keyword">...</span>
0291         <a href="VMT_ReadFiles_SonTek.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles_SonTek(zPathName,zFileName)">VMT_ReadFiles_SonTek</a>(guiparams.data_folder,guiparams.data_files);
0292     guiparams.savefile = savefile;
0293     guiparams.A        = A;
0294     guiparams.z        = z;
0295     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0296     
0297     <span class="comment">% Process and display ShipTracks</span>
0298     <span class="comment">% ------------------------------</span>
0299     <a href="#_sub62" class="code" title="subfunction shiptracksPlotCallback(hObject, eventdata, handles)">shiptracksPlotCallback</a>(hObject, eventdata, handles)
0300     
0301     <span class="comment">% Update the GUI:</span>
0302     <span class="comment">% ---------------</span>
0303     <a href="#_sub100" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
0304 <span class="keyword">end</span>
0305 <span class="comment">% [EOF] menuOpenSonTekMAT_Callback</span>
0306 
0307 <span class="comment">% --------------------------------------------------------------------</span>
0308 <a name="_sub9" href="#_subfunctions" class="code">function menuOpenMAT_Callback(hObject, eventdata, handles)</a>
0309 axes(findobj(handles.figure1,<span class="string">'Tag'</span>,<span class="string">'Plot1Shiptracks'</span>)); cla
0310 <a href="#_sub10" class="code" title="subfunction closeOpenFigures(hObject, eventdata, handles)">closeOpenFigures</a>(hObject, eventdata, handles)
0311 <span class="comment">% Get the Application data:</span>
0312 <span class="comment">% -------------------------</span>
0313 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0314 guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0315 
0316 <span class="comment">% Ask the user to select files:</span>
0317 <span class="comment">% -----------------------------</span>
0318 <span class="comment">% current_file = fullfile(guiparams.data_folder,guiparams.data_files{1});</span>
0319 <span class="comment">% current_file = fullfile(guiprefs.mat_path,guiprefs.mat_file);</span>
0320 <span class="keyword">if</span> iscell(guiprefs.mat_file)
0321     uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file{1});
0322 <span class="keyword">else</span>
0323     uifile = fullfile(guiprefs.mat_path,guiprefs.mat_file);
0324 <span class="keyword">end</span>
0325 [filename,pathname] = <span class="keyword">...</span>
0326     uigetfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-files (*.mat)'</span>}, <span class="keyword">...</span>
0327     <span class="string">'Select MAT File'</span>, <span class="keyword">...</span>
0328     uifile, <span class="string">'MultiSelect'</span>,<span class="string">'on'</span>);
0329 
0330 <span class="keyword">if</span> ischar(filename) <span class="comment">% Single MAT file loaded</span>
0331     temp_filename = filename;
0332 <span class="keyword">elseif</span> iscell(filename)
0333     temp_filename = filename{1};
0334 <span class="keyword">else</span> <span class="comment">% Not a valid file</span>
0335     errordlg(<span class="string">'The selected file is not a valid ADCP data MAT file.'</span>, <span class="keyword">...</span>
0336         <span class="string">'Invalid File...'</span>)
0337 <span class="keyword">end</span>
0338     
0339 <span class="comment">% Load the data:</span>
0340 <span class="comment">% --------------</span>
0341 vars = load(fullfile(pathname,temp_filename)); <span class="comment">%Use first file to get the HGNS and VGNS</span>
0342 
0343 <span class="comment">% Make sure the selected file is a valid file:</span>
0344 <span class="comment">% --------------------------------------------</span>
0345 varnames = fieldnames(vars);
0346 <span class="keyword">if</span> isequal(sort(varnames),{<span class="string">'A'</span> <span class="string">'Map'</span> <span class="string">'V'</span> <span class="string">'z'</span>}')
0347     guiparams.mat_path = pathname;
0348     guiparams.mat_file = temp_filename;
0349     guiparams.z = vars.z;
0350     guiparams.A = vars.A;
0351     guiparams.V = vars.V;
0352 
0353     <span class="comment">% Update the preferences:</span>
0354     <span class="comment">% -----------------------</span>
0355     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0356     guiprefs.mat_path = pathname;
0357     guiprefs.mat_file = temp_filename;
0358     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0359     <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
0360 
0361     <span class="comment">% Re-store the Application Data:</span>
0362     <span class="comment">% ------------------------------</span>
0363     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0364 
0365     <span class="comment">% Update the GUI:</span>
0366     <span class="comment">% ---------------</span>
0367     set(handles.HorizontalGridNodeSpacing,<span class="string">'String'</span>,vars.A(1).hgns)
0368     guiparams.horizontal_grid_node_spacing = vars.A(1).hgns;
0369     <a href="#_sub100" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
0370 <span class="keyword">else</span> <span class="comment">% Not a valid file</span>
0371     errordlg(<span class="string">'The selected file is not a valid ADCP data MAT file.'</span>, <span class="keyword">...</span>
0372         <span class="string">'Invalid File...'</span>)
0373 <span class="keyword">end</span>
0374 
0375 <span class="comment">% Set the vertical grid node spacing</span>
0376 <span class="comment">% ----------------------------------</span>
0377 <span class="comment">% For RioGrande probes, use the bin size, else just use the default</span>
0378 <span class="comment">% Backwards compatible</span>
0379 <span class="keyword">if</span> vars.A(1).Sup.wm ~= 3 <span class="comment">% RG</span>
0380     set(handles.VerticalGridNodeSpacing,<span class="string">'String'</span>,double(vars.A(1).Sup.binSize_cm(1))/100)
0381     guiparams.vertical_grid_node_spacing = double(vars.A(1).Sup.binSize_cm(1))/100;
0382 <span class="keyword">else</span> <span class="comment">% Older file, must be RG</span>
0383     set(handles.VerticalGridNodeSpacing,<span class="string">'String'</span>,0.4)
0384     guiparams.vertical_grid_node_spacing = 0.4;
0385 <span class="keyword">end</span>
0386 
0387 <span class="comment">% Update the Application Data:</span>
0388 <span class="comment">% ------------------------------</span>
0389 <a href="#_sub100" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
0390 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0391     
0392 <span class="keyword">if</span> iscell(filename) <span class="comment">% Multiple MAT files loaded</span>
0393     <span class="comment">% Set the filenames</span>
0394     <span class="comment">% -----------------</span>
0395     guiparams.mat_path = pathname;
0396     guiparams.mat_file = filename;
0397     
0398     <span class="comment">% Push status to log window</span>
0399     <span class="comment">% -------------------------</span>
0400     log_text = {<span class="keyword">...</span>
0401         <span class="string">'Loading previously processed MAT files.'</span>;<span class="keyword">...</span>
0402         <span class="string">'Directory:'</span>};
0403     log_text = vertcat(log_text, pathname, {<span class="string">'Files:'</span>}, filename');
0404     statusLogging(handles.LogWindow,log_text)
0405     
0406     <span class="comment">% Update V structure to include current plotting settings</span>
0407     guiparams.V.version = guiparams.vmt_version{1}; V.release = guiparams.vmt_version{2};
0408     guiparams.V.plotSettings.shiptracks.horizontal_grid_node_spacing = guiparams.horizontal_grid_node_spacing;
0409     guiparams.V.plotSettings.shiptracks.vertical_grid_node_spacing = guiparams.vertical_grid_node_spacing;
0410     guiparams.V.plotSettings.planview.depth_range_min = guiparams.depth_range_min;
0411     guiparams.V.plotSettings.planview.depth_range_max = guiparams.depth_range_max;
0412     guiparams.V.plotSettings.planview.vector_scale_plan_view = guiparams.vector_scale_plan_view;
0413     guiparams.V.plotSettings.planview.vector_spacing_plan_view = guiparams.vector_spacing_plan_view;
0414     guiparams.V.plotSettings.planview.smoothing_window_size = guiparams.smoothing_window_size;
0415     guiparams.V.plotSettings.planview.plotref = guiparams.plotref;
0416     guiparams.V.plotSettings.mcs.contour = guiparams.contour;
0417     guiparams.V.plotSettings.mcs.vertical_exaggeration = guiparams.vertical_exaggeration;
0418     guiparams.V.plotSettings.mcs.vector_scale_cross_section = guiparams.vector_scale_cross_section;
0419     guiparams.V.plotSettings.mcs.horizontal_vector_spacing = guiparams.horizontal_vector_spacing;
0420     guiparams.V.plotSettings.mcs.vertical_vector_spacing = guiparams.vertical_vector_spacing;
0421     guiparams.V.plotSettings.mcs.horizontal_smoothing_window = guiparams.horizontal_smoothing_window;
0422     guiparams.V.plotSettings.mcs.vertical_smoothing_window = guiparams.vertical_smoothing_window;
0423     guiparams.V.plotSettings.mcs.plot_secondary_flow_vectors = guiparams.plot_secondary_flow_vectors;
0424     guiparams.V.plotSettings.mcs.secondary_flow_vector_variable = guiparams.secondary_flow_vector_variable;
0425     guiparams.V.plotSettings.mcs.include_vertical_velocity = guiparams.include_vertical_velocity;
0426     
0427     <span class="comment">% Update the Application Data:</span>
0428     <span class="comment">% ------------------------------</span>
0429     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0430     <a href="#_sub100" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'multiplematfiles'</span>)
0431     
0432     <span class="comment">% Update the persistent preferences:</span>
0433     <span class="comment">% ----------------------------------</span>
0434     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0435     guiprefs.mat_path = pathname;
0436     guiprefs.mat_file = filename;
0437     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0438     <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
0439 <span class="keyword">end</span>
0440 
0441 
0442 <span class="comment">% Process and display ShipTracks if single cross-section loaded</span>
0443 <span class="comment">% ------------------------------</span>
0444 <span class="keyword">if</span> iscell(filename) <span class="comment">% Multiple MAT files loaded</span>
0445     ax = findobj(handles.figure1,<span class="string">'Tag'</span>,<span class="string">'Plot1Shiptracks'</span>);
0446     axes(ax)
0447     pos = [xlim; ylim]/2; pos = pos(:,2)';
0448     TextH = text(pos(1),pos(2), <span class="string">'Multiple Mat-Files Loaded'</span>, <span class="keyword">...</span>
0449         <span class="string">'HorizontalAlignment'</span>, <span class="string">'center'</span>, <span class="keyword">...</span>
0450         <span class="string">'VerticalAlignment'</span>, <span class="string">'middle'</span>,<span class="keyword">...</span>
0451         <span class="string">'FontSize'</span>,14,<span class="keyword">...</span>
0452         <span class="string">'FontWeight'</span>,<span class="string">'bold'</span>,<span class="keyword">...</span>
0453         <span class="string">'EdgeColor'</span>,[0 0 0],<span class="keyword">...</span>
0454         <span class="string">'LineWidth'</span>,1.5);
0455 <span class="keyword">else</span>
0456     <a href="#_sub62" class="code" title="subfunction shiptracksPlotCallback(hObject, eventdata, handles)">shiptracksPlotCallback</a>(hObject, eventdata, handles)
0457 <span class="keyword">end</span>
0458 
0459 <span class="comment">% [EOF] menuOpenMAT_Callback</span>
0460 
0461 <span class="comment">% --------------------------------------------------------------------</span>
0462 <a name="_sub10" href="#_subfunctions" class="code">function closeOpenFigures(hObject, eventdata, handles)</a>
0463 fig_planview_handle = findobj(0,<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
0464 <span class="keyword">if</span> ~isempty(fig_planview_handle) &amp;&amp;  ishandle(fig_planview_handle)
0465     delete(fig_planview_handle)
0466 <span class="keyword">end</span>
0467 fig_contour_handle = findobj(0,<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
0468 <span class="keyword">if</span> ~isempty(fig_contour_handle) &amp;&amp;  ishandle(fig_contour_handle)
0469     delete(fig_contour_handle);
0470 <span class="keyword">end</span>
0471 <span class="comment">% [EOF] closeOpenFigures</span>
0472 
0473 <span class="comment">% --------------------------------------------------------------------</span>
0474 <a name="_sub11" href="#_subfunctions" class="code">function menuSave_Callback(hObject, eventdata, handles)</a>
0475 <span class="comment">% Empty</span>
0476 
0477 <span class="comment">% --------------------------------------------------------------------</span>
0478 <a name="_sub12" href="#_subfunctions" class="code">function menuSaveMAT_Callback(hObject, eventdata, handles)</a>
0479 <a href="#_sub58" class="code" title="subfunction saveDataCallback(hObject, eventdata, handles)">saveDataCallback</a>(hObject, eventdata, handles)
0480 <span class="comment">% [EOF] menuSaveMAT_Callback</span>
0481 
0482 <span class="comment">% --------------------------------------------------------------------</span>
0483 <a name="_sub13" href="#_subfunctions" class="code">function menuSaveTecplot_Callback(hObject, eventdata, handles)</a>
0484 <a href="#_sub66" class="code" title="subfunction SaveTecplotFile_Callback(hObject, eventdata, handles)">SaveTecplotFile_Callback</a>(handles,eventdata,handles)
0485 <span class="comment">% [EOF] menuSaveTecplot_Callback</span>
0486 
0487 <span class="comment">% --------------------------------------------------------------------</span>
0488 <a name="_sub14" href="#_subfunctions" class="code">function menuSaveKMZFile_Callback(hObject, eventdata, handles)</a>
0489 <a href="#_sub67" class="code" title="subfunction SaveGoogleEarthFile_Callback(hObject, eventdata, handles)">SaveGoogleEarthFile_Callback</a>(handles,eventdata,handles)
0490 <span class="comment">% [EOF] menuSaveKMZFile_Callback</span>
0491 
0492 <span class="comment">% --------------------------------------------------------------------</span>
0493 <a name="_sub15" href="#_subfunctions" class="code">function menuExport_Callback(hObject, eventdata, handles)</a>
0494 <span class="comment">% Empty</span>
0495 
0496 <span class="comment">% --------------------------------------------------------------------</span>
0497 <a name="_sub16" href="#_subfunctions" class="code">function menuFigureExportsettings_Callback(hObject, eventdata, handles)</a>
0498 <span class="comment">% Empty</span>
0499 
0500 <span class="comment">% --------------------------------------------------------------------</span>
0501 <a name="_sub17" href="#_subfunctions" class="code">function menuPrintFormat_Callback(hObject, eventdata, handles)</a>
0502 
0503 <span class="comment">% Get the Application Data:</span>
0504 <span class="comment">% -------------------------</span>
0505 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0506 
0507 <span class="comment">% Update the Application Data:</span>
0508 <span class="comment">% ----------------------------</span>
0509 guiparams.print        = true;
0510 guiparams.presentation = false;
0511 
0512 <span class="comment">% Re-store the Application data:</span>
0513 <span class="comment">% ------------------------------</span>
0514 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0515 
0516 <span class="comment">% Update the GUI:</span>
0517 <span class="comment">% ---------------</span>
0518 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0519 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
0520 
0521 <span class="comment">% [EOF] menuPrintFormat_Callback</span>
0522 
0523 
0524 <span class="comment">% --------------------------------------------------------------------</span>
0525 <a name="_sub18" href="#_subfunctions" class="code">function menuPresentationFormat_Callback(hObject, eventdata, handles)</a>
0526 
0527 <span class="comment">% Get the Application Data:</span>
0528 <span class="comment">% -------------------------</span>
0529 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0530 
0531 <span class="comment">% Update the Application Data:</span>
0532 <span class="comment">% ----------------------------</span>
0533 guiparams.print        = false;
0534 guiparams.presentation = true;
0535 
0536 <span class="comment">% Re-store the Application data:</span>
0537 <span class="comment">% ------------------------------</span>
0538 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0539 
0540 <span class="comment">% Update the GUI:</span>
0541 <span class="comment">% ---------------</span>
0542 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0543 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
0544 
0545 <span class="comment">% [EOF] menuPresentationFormat_Callback</span>
0546 
0547 <span class="comment">% --------------------------------------------------------------------</span>
0548 <a name="_sub19" href="#_subfunctions" class="code">function menuGraphicsRenderer_Callback(hObject, eventdata, handles)</a>
0549 <span class="comment">%  --- Empty ---</span>
0550 
0551 <span class="comment">% --------------------------------------------------------------------</span>
0552 <a name="_sub20" href="#_subfunctions" class="code">function menuOpenGL_Callback(hObject, eventdata, handles)</a>
0553 <span class="comment">% Get the Application Data:</span>
0554 <span class="comment">% -------------------------</span>
0555 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0556 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0557 
0558 <span class="comment">% Update the Application Data:</span>
0559 <span class="comment">% ----------------------------</span>
0560 guiparams.renderer  = <span class="string">'OpenGL'</span>;
0561 guiprefs.renderer   = <span class="string">'OpenGL'</span>;
0562 
0563 <span class="comment">% Re-store the Application data:</span>
0564 <span class="comment">% ------------------------------</span>
0565 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0566 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0567 <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'renderer'</span>)
0568 
0569 <span class="comment">% Update the GUI:</span>
0570 <span class="comment">% ---------------</span>
0571 set(handles.menuOpenGL,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0572 set(handles.menuPainters, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0573 set(handles.menuZbuffer,  <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0574 
0575 <span class="comment">% Modify the existing figures</span>
0576 <span class="comment">% ---------------------------</span>
0577 <span class="comment">% Find what plots exist already</span>
0578 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0579 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
0580 
0581 <span class="comment">% Loop through valid figures and adjust</span>
0582 <span class="comment">% -------------------------------------</span>
0583 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
0584     <span class="keyword">for</span> i = 1:length(valid_names)
0585         <span class="comment">% Focus the figure</span>
0586         hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
0587         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0588             figure(hff)
0589             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0590         <span class="keyword">end</span>
0591         hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
0592         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0593             figure(hff)
0594             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0595         <span class="keyword">end</span>
0596     <span class="keyword">end</span>
0597 <span class="keyword">end</span>
0598 <span class="comment">% [EOF] menuOpenGL_Callback</span>
0599 
0600 
0601 <span class="comment">% --------------------------------------------------------------------</span>
0602 <a name="_sub21" href="#_subfunctions" class="code">function menuPainters_Callback(hObject, eventdata, handles)</a>
0603 <span class="comment">% Get the Application Data:</span>
0604 <span class="comment">% -------------------------</span>
0605 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0606 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0607 
0608 <span class="comment">% Update the Application Data:</span>
0609 <span class="comment">% ----------------------------</span>
0610 guiparams.renderer  = <span class="string">'painters'</span>;
0611 guiprefs.renderer   = <span class="string">'painters'</span>;
0612 
0613 <span class="comment">% Re-store the Application data:</span>
0614 <span class="comment">% ------------------------------</span>
0615 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0616 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0617 <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'renderer'</span>)
0618 
0619 <span class="comment">% Update the GUI:</span>
0620 <span class="comment">% ---------------</span>
0621 set(handles.menuOpenGL,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0622 set(handles.menuPainters, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0623 set(handles.menuZbuffer,  <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0624 
0625 <span class="comment">% Modify the existing figures</span>
0626 <span class="comment">% ---------------------------</span>
0627 <span class="comment">% Find what plots exist already</span>
0628 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0629 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
0630 
0631 <span class="comment">% Loop through valid figures and adjust</span>
0632 <span class="comment">% -------------------------------------</span>
0633 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
0634     <span class="keyword">for</span> i = 1:length(valid_names)
0635         <span class="comment">% Focus the figure</span>
0636         hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
0637         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0638             figure(hff)
0639             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0640         <span class="keyword">end</span>
0641         hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
0642         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0643             figure(hff)
0644             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0645         <span class="keyword">end</span>
0646     <span class="keyword">end</span>
0647 <span class="keyword">end</span>
0648 <span class="comment">% [EOF] menuPainters_Callback</span>
0649 
0650 <span class="comment">% --------------------------------------------------------------------</span>
0651 <a name="_sub22" href="#_subfunctions" class="code">function menuZbuffer_Callback(hObject, eventdata, handles)</a>
0652 <span class="comment">% Get the Application Data:</span>
0653 <span class="comment">% -------------------------</span>
0654 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0655 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0656 
0657 <span class="comment">% Update the Application Data:</span>
0658 <span class="comment">% ----------------------------</span>
0659 guiparams.renderer  = <span class="string">'zbuffer'</span>;
0660 guiprefs.renderer   = <span class="string">'zbuffer'</span>;
0661 
0662 <span class="comment">% Re-store the Application data:</span>
0663 <span class="comment">% ------------------------------</span>
0664 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0665 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0666 <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'renderer'</span>)
0667 
0668 <span class="comment">% Update the GUI:</span>
0669 <span class="comment">% ---------------</span>
0670 set(handles.menuOpenGL,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0671 set(handles.menuPainters, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0672 set(handles.menuZbuffer,  <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0673 
0674 <span class="comment">% Modify the existing figures</span>
0675 <span class="comment">% ---------------------------</span>
0676 <span class="comment">% Find what plots exist already</span>
0677 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0678 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
0679 
0680 <span class="comment">% Loop through valid figures and adjust</span>
0681 <span class="comment">% -------------------------------------</span>
0682 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
0683     <span class="keyword">for</span> i = 1:length(valid_names)
0684         <span class="comment">% Focus the figure</span>
0685         hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
0686         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0687             figure(hff)
0688             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0689         <span class="keyword">end</span>
0690         hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
0691         <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
0692             figure(hff)
0693             set(hff,<span class="string">'Renderer'</span>,guiparams.renderer)
0694         <span class="keyword">end</span>
0695     <span class="keyword">end</span>
0696 <span class="keyword">end</span>
0697 <span class="comment">% [EOF] menuZbuffer_Callback</span>
0698 
0699 <span class="comment">% --------------------------------------------------------------------</span>
0700 <a name="_sub23" href="#_subfunctions" class="code">function menuExportFigures_Callback(hObject, eventdata, handles)</a>
0701 <span class="comment">% Get the Application data:</span>
0702 <span class="comment">% -------------------------</span>
0703 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0704 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0705 
0706 <span class="comment">% Find what plots exist already</span>
0707 fig_handles = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
0708 fig_names   = get(fig_handles,<span class="string">'name'</span>);
0709 
0710 <span class="comment">% Remove the VMT GUI as a valid figure in the list</span>
0711 [~, idx] = ismember({get(handles.figure1,<span class="string">'Name'</span>),<span class="string">'VMT_GraphicsControl'</span>}, fig_names);
0712 <span class="keyword">if</span> ~isempty(idx)
0713     fig_names(idx) = [];
0714 <span class="keyword">end</span>
0715 
0716 <span class="keyword">if</span> guiparams.presentation
0717     figure_style = <span class="string">'presentation'</span>;
0718 <span class="keyword">else</span>
0719     figure_style = <span class="string">'print'</span>;
0720 <span class="keyword">end</span>
0721 
0722 [selected_figures] = <a href="#_sub110" class="code" title="subfunction [selected_figures] = openFiguresDialog(figure_names,hf)">openFiguresDialog</a>(fig_names,handles.figure1);
0723 
0724 <span class="keyword">if</span> isempty(selected_figures) <span class="comment">% User pressed cancel</span>
0725     <span class="keyword">return</span>
0726 <span class="keyword">else</span>
0727     <span class="keyword">for</span> i = 1:length(selected_figures)
0728         <a href="VMT_SaveFigs.html" class="code" title="function VMT_SaveFigs(pathname,to_export,figure_style)">VMT_SaveFigs</a>(guiprefs.mat_path,selected_figures(i),figure_style)
0729     <span class="keyword">end</span>
0730 <span class="keyword">end</span>
0731 
0732 
0733 <span class="comment">% [EOF] menuExportFigures_Callback</span>
0734 
0735 <span class="comment">% --------------------------------------------------------------------</span>
0736 <a name="_sub24" href="#_subfunctions" class="code">function menuBathymetryExportSettings_Callback(hObject, eventdata, handles)</a>
0737 <span class="comment">% Get the Application data:</span>
0738 <span class="comment">% -------------------------</span>
0739 guiparams              = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0740 beam_angle             = guiparams.beam_angle; 
0741 magnetic_variation     = guiparams.magnetic_variation; 
0742 wse                    = guiparams.water_surface_elevation;
0743 output_auxiliary_data  = guiparams.output_auxiliary_data;
0744 load_wse_tide_file     = guiparams.load_wse_tide_file;
0745 
0746 <span class="comment">% Open dialog and allow user to select settings</span>
0747 <span class="comment">% ---------------------------------------------</span>
0748 [beam_angle,<span class="keyword">...</span>
0749     magnetic_variation,<span class="keyword">...</span>
0750     wse,<span class="keyword">...</span>
0751     output_auxiliary_data,<span class="keyword">...</span>
0752     load_wse_tide_file] = <span class="keyword">...</span>
0753     exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,load_wse_tide_file,handles.figure1);
0754 
0755 <span class="comment">% Re-store the Application data:</span>
0756 <span class="comment">% ------------------------------</span>
0757 guiparams.beam_angle            = beam_angle;
0758 guiparams.magnetic_variation    = magnetic_variation; 
0759 guiparams.load_wse_tide_file    = load_wse_tide_file;
0760 <span class="keyword">if</span> guiparams.load_wse_tide_file <span class="comment">% prompt and load file</span>
0761       infile = fullfile(<span class="keyword">...</span>
0762         guiparams.multibeambathymetry_path,<span class="keyword">...</span>
0763         guiparams.multibeambathymetry_file);
0764     [wsedata] = <a href="#_sub25" class="code" title="subfunction [wsedata] = loadTideFile(infile)">loadTideFile</a>(infile);
0765     guiparams.water_surface_elevation = wsedata;
0766 <span class="keyword">else</span>
0767       guiparams.water_surface_elevation = wse;
0768 <span class="keyword">end</span>
0769 guiparams.output_auxiliary_data = output_auxiliary_data;
0770 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0771 
0772 <span class="comment">% [EOF] menuExportSettings_Callback</span>
0773 
0774 <span class="comment">% --------------------------------------------------------------------</span>
0775 <a name="_sub25" href="#_subfunctions" class="code">function [wsedata] = loadTideFile(infile)</a>
0776 <span class="comment">% wsedata.obstime</span>
0777 <span class="comment">% wsedata.elev</span>
0778 
0779 <span class="comment">% Determine Files to Process</span>
0780 <span class="comment">% Ask the user to select files:</span>
0781 <span class="comment">% -----------------------------</span>
0782 [zFileName,zPathName] = uigetfile({<span class="string">'*.csv'</span>,<span class="string">'Comma Separated Values File (*.csv)'</span>;<span class="string">'*.*'</span>,<span class="string">'All files (*.*)'</span>}, <span class="keyword">...</span>
0783     <span class="string">'Select the WSE Tide file'</span>, <span class="keyword">...</span>
0784     infile, <span class="keyword">...</span>
0785     <span class="string">'MultiSelect'</span>,<span class="string">'off'</span>);
0786 
0787 <span class="keyword">if</span> ischar(zPathName) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0788     data = csvread(fullfile(zPathName,zFileName));
0789     wsedata.obstime = datenum(data(:,1:6));
0790     wsedata.elev    = data(:,7);
0791 <span class="keyword">else</span>
0792     wsedata.obstime = [];
0793     wsedata.elev    = [];
0794     warndlg(<span class="string">'Loading a tide file failed. Please try again.'</span>,<span class="string">'Warning: No tide file loaded'</span>)
0795 <span class="keyword">end</span>
0796 <span class="comment">%  [EOF] loadTideFile</span>
0797 
0798 <span class="comment">% --------------------------------------------------------------------</span>
0799 <a name="_sub26" href="#_subfunctions" class="code">function menuExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a>
0800 <a href="#_sub68" class="code" title="subfunction ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)">ExportMultibeamBathymetry_Callback</a>(hObject, eventdata, handles);
0801 <span class="comment">% [EOF] menuExportMultibeamBathymetry_Callback</span>
0802 
0803 
0804 <span class="comment">% --------------------------------------------------------------------</span>
0805 <a name="_sub27" href="#_subfunctions" class="code">function menuSaveANVFile_Callback(hObject, eventdata, handles)</a>
0806 
0807 <span class="comment">% Get the Application Data:</span>
0808 <span class="comment">% -------------------------</span>
0809 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0810 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0811 PVdata    = guiparams.iric_anv_planview_data;
0812 iric_path = guiprefs.iric_path;
0813 iric_file = guiprefs.iric_file;
0814 
0815 <span class="comment">% Is there any planview data?</span>
0816 <span class="keyword">if</span> isempty(PVdata)
0817     <span class="comment">% Nothing to do, warn user</span>
0818     log_text = {<span class="string">'No planview plot data to export. User must Plot Plan View first.'</span>};
0819     warndlg(log_text{:},<span class="string">'Nothing to export'</span>)
0820 <span class="keyword">else</span>
0821     <span class="comment">% Save the planview data as output and to an *.anv file with spacing</span>
0822     <span class="comment">% and smoothing (for iRiC)</span>
0823     log_text = {<span class="string">'Exporting iRic formated ANV vector file...'</span>};
0824     [iric_file,iric_path] = uiputfile(<span class="string">'*.anv'</span>,<span class="string">'Save *.anv file'</span>,<span class="keyword">...</span>
0825         fullfile(iric_path,iric_file));
0826     
0827     <span class="keyword">if</span> ischar(iric_path) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
0828         outfile = fullfile(iric_path,iric_file);
0829         log_text = vertcat(log_text,{outfile});
0830         ofid   = fopen(outfile, <span class="string">'wt'</span>);
0831         outcount = fprintf(ofid,<span class="keyword">...</span>
0832             <span class="string">'%8.2f  %8.2f  %5.2f  %3.3f  %3.3f\n'</span>,PVdata.outmat);
0833         fclose(ofid);
0834     <span class="keyword">else</span>
0835         <span class="comment">% Return default iric_path and iric_file</span>
0836         iric_path = guiprefs.iric_path;
0837         iric_file = guiprefs.iric_file;
0838     <span class="keyword">end</span>
0839 <span class="keyword">end</span>
0840 
0841 <span class="comment">% Push messages to Log Window:</span>
0842 <span class="comment">% ----------------------------</span>
0843 statusLogging(handles.LogWindow, log_text)
0844 
0845 <span class="comment">% Store the persistent preferences:</span>
0846 <span class="comment">% ---------------------------------</span>
0847 guiprefs.iric_file = iric_file;
0848 guiprefs.iric_path = iric_path;
0849 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0850 <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'iric'</span>)
0851 
0852 <span class="comment">% [EOF] menuSaveANVFile_Callback</span>
0853 
0854 <span class="comment">% --------------------------------------------------------------------</span>
0855 <a name="_sub28" href="#_subfunctions" class="code">function menuSaveExcel_Callback(hObject, eventdata, handles)</a>
0856 <span class="comment">% Get the Application Data:</span>
0857 <span class="comment">% -------------------------</span>
0858 guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0859 guiprefs    = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0860 excel_path  = guiprefs.excel_path;
0861 excel_file  = guiprefs.excel_file;
0862 
0863 <span class="comment">% Push messages to Log Window:</span>
0864 <span class="comment">% ----------------------------</span>
0865 log_text = {<span class="string">'Exporting Excel File (reprocessing dataset; this will create new plots)'</span>};
0866 statusLogging(handles.LogWindow, log_text)
0867 
0868 <span class="comment">% If there are multiple MAT files loaded, go ahead and export just the DAV</span>
0869 <span class="comment">% data.</span>
0870 <span class="keyword">if</span> iscell(guiparams.mat_file)
0871     outputType = <span class="string">'Multiple'</span>;
0872     <span class="comment">% Force VMT to reprocess before outputing Excel</span>
0873     <a href="#_sub63" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
0874     <span class="comment">% Refresh the Application Data:</span>
0875     guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0876     z           = guiparams.z;
0877     A           = guiparams.A;
0878     V           = guiparams.V;
0879     Map         = guiparams.Map;
0880     wse         = guiparams.water_surface_elevation;
0881     PVdata      = guiparams.iric_anv_planview_data;
0882     dataFiles = guiparams.mat_file;
0883     dataPath  = guiparams.mat_path;
0884     [log_text] = <a href="VMT_SaveExcelOutput.html" class="code" title="function [log_text] = VMT_SaveExcelOutput(excel_path,excel_file,outputType,dataPath,dataFiles,V,A,z,Map,wse,PVdata)">VMT_SaveExcelOutput</a>(excel_path,excel_file,outputType,dataPath,dataFiles,V,A,z,Map,wse,PVdata);
0885     
0886 <span class="comment">%     if ischar(excel_path) % The user did not hit &quot;Cancel&quot;</span>
0887 <span class="comment">%         full_excelfile = fullfile(excel_path,excel_file);</span>
0888 <span class="comment">%         %log_text = vertcat(log_text,{outfile});</span>
0889 <span class="comment">%</span>
0890 <span class="comment">%     else</span>
0891 <span class="comment">%         % Return default excel_path and excel_file</span>
0892 <span class="comment">%         excel_path = guiprefs.excel_path;</span>
0893 <span class="comment">%         excel_file = guiprefs.excel_file;</span>
0894 <span class="comment">%         full_excelfile = fullfile(excel_path,excel_file);</span>
0895 <span class="comment">%         %log_text = vertcat(log_text,{outfile});</span>
0896 <span class="comment">%     end</span>
0897     
0898     
0899 <span class="keyword">else</span>
0900     outputType = <span class="string">'Single'</span>;
0901     <span class="comment">% Force VMT to reprocess before outputing Excel</span>
0902     <a href="#_sub63" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
0903     <a href="#_sub64" class="code" title="subfunction crosssectionPlotCallback(hObject, eventdata, handles)">crosssectionPlotCallback</a>(hObject, eventdata, handles)
0904     <span class="comment">% Refresh the Application Data:</span>
0905     guiparams   = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0906     z           = guiparams.z;
0907     A           = guiparams.A;
0908     V           = guiparams.V;
0909     Map         = guiparams.Map;
0910     wse         = guiparams.water_surface_elevation;
0911     PVdata      = guiparams.iric_anv_planview_data; <span class="comment">% this is what's in the</span>
0912                                                     <span class="comment">% Planview Plot exactly</span>
0913   
0914     <span class="keyword">if</span> isempty(guiparams.data_files{1}) <span class="comment">% Loaded MAT file</span>
0915         dataFiles = {guiparams.mat_file};
0916         dataPath  = {guiparams.mat_path};
0917     <span class="keyword">else</span> <span class="comment">% ASCII file(s)</span>
0918         dataFiles = guiparams.data_files';
0919         dataPath  = {guiparams.ascii_path};
0920     <span class="keyword">end</span>
0921     [log_text] = <a href="VMT_SaveExcelOutput.html" class="code" title="function [log_text] = VMT_SaveExcelOutput(excel_path,excel_file,outputType,dataPath,dataFiles,V,A,z,Map,wse,PVdata)">VMT_SaveExcelOutput</a>(excel_path,excel_file,outputType,dataPath,dataFiles,V,A,z,Map,wse,PVdata);
0922 <span class="keyword">end</span>
0923 
0924 <span class="comment">% Push messages to Log Window:</span>
0925 <span class="comment">% ----------------------------</span>
0926 statusLogging(handles.LogWindow, log_text)
0927 
0928 <span class="comment">% Store the persistent preferences:</span>
0929 <span class="comment">% ---------------------------------</span>
0930 guiprefs.excel_file = excel_file;
0931 guiprefs.excel_path = excel_path;
0932 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
0933 <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'excel'</span>)
0934 <span class="comment">% [EOF] menuSaveExcel_Callback</span>
0935 
0936 
0937 <span class="comment">% --------------------------------------------------------------------</span>
0938 <a name="_sub29" href="#_subfunctions" class="code">function menuExportCustomFlatFile_Callback(hObject, eventdata, handles)</a>
0939 <span class="comment">% Call separate GUI</span>
0940 VMT_BuildCustomFlatFile;
0941 <span class="comment">% [EOF] menuExportCustomFlatFile_Callback</span>
0942 
0943 <span class="comment">% --------------------------------------------------------------------</span>
0944 <a name="_sub30" href="#_subfunctions" class="code">function menuSettings_Callback(hObject, eventdata, handles)</a>
0945 <span class="comment">% Empty</span>
0946 
0947 <span class="comment">% --------------------------------------------------------------------</span>
0948 <a name="_sub31" href="#_subfunctions" class="code">function menuProcessingSettings_Callback(hObject, eventdata, handles)</a>
0949 <span class="comment">% Empty</span>
0950 
0951 <span class="comment">% --------------------------------------------------------------------</span>
0952 <a name="_sub32" href="#_subfunctions" class="code">function menuUnitDischargeCorrection_Callback(hObject, eventdata, handles)</a>
0953 <span class="comment">% Turn ON or OFF Unit Discharge Correction</span>
0954 
0955 <span class="comment">% Get the Application Data:</span>
0956 <span class="comment">% -------------------------</span>
0957 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0958 
0959 <span class="comment">% Update the GUI &amp; Application Data:</span>
0960 <span class="comment">% ----------------------------------</span>
0961 status = get(handles.menuUnitDischargeCorrection,<span class="string">'Checked'</span>);
0962 <span class="keyword">switch</span> status
0963     <span class="keyword">case</span> <span class="string">'on'</span> <span class="comment">% Turn it off</span>
0964         set(handles.menuUnitDischargeCorrection, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
0965         guiparams.unit_discharge_correction = false;
0966     <span class="keyword">case</span> <span class="string">'off'</span> <span class="comment">% Turn it on</span>
0967         set(handles.menuUnitDischargeCorrection, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
0968         guiparams.unit_discharge_correction = true;
0969 <span class="keyword">end</span>
0970 
0971 <span class="comment">% Re-store the Application data:</span>
0972 <span class="comment">% ------------------------------</span>
0973 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
0974 
0975 
0976 <span class="comment">%  [EOF] menuUnitDischargeCorrection_Callback</span>
0977 
0978 <span class="comment">% --------------------------------------------------------------------</span>
0979 <a name="_sub33" href="#_subfunctions" class="code">function menuPlottingParameters_Callback(hObject, eventdata, handles)</a>
0980 <span class="comment">% Empty</span>
0981 
0982 <span class="comment">% --------------------------------------------------------------------</span>
0983 <a name="_sub34" href="#_subfunctions" class="code">function menuUnits_Callback(hObject, eventdata, handles)</a>
0984 <span class="comment">% Empty</span>
0985 
0986 <span class="comment">% --------------------------------------------------------------------</span>
0987 <a name="_sub35" href="#_subfunctions" class="code">function menuMetric_Callback(hObject, eventdata, handles)</a>
0988 <span class="comment">% Set the Plotting Parameter Units to &quot;metric&quot;</span>
0989 
0990 <span class="comment">% Get the Application Data:</span>
0991 <span class="comment">% -------------------------</span>
0992 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
0993 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
0994 
0995 <span class="comment">% Update the Application Data:</span>
0996 <span class="comment">% ----------------------------</span>
0997 guiparams.english_units = false;
0998 guiprefs.units = <span class="string">'metric'</span>;
0999 
1000 <span class="comment">% Re-store the Application data:</span>
1001 <span class="comment">% ------------------------------</span>
1002 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1003 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1004 <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'units'</span>)
1005 
1006 <span class="comment">% Update the GUI:</span>
1007 <span class="comment">% ---------------</span>
1008 set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1009 set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1010 
1011 <span class="comment">% [EOF] menuMetric_Callback</span>
1012 
1013 
1014 <span class="comment">% --------------------------------------------------------------------</span>
1015 <a name="_sub36" href="#_subfunctions" class="code">function menuEnglish_Callback(hObject, eventdata, handles)</a>
1016 <span class="comment">% Set the Plotting Parameter Units to &quot;english&quot;</span>
1017 
1018 <span class="comment">% Get the Application Data:</span>
1019 <span class="comment">% -------------------------</span>
1020 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1021 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1022 
1023 <span class="comment">% Update the Application Data:</span>
1024 <span class="comment">% ----------------------------</span>
1025 guiparams.english_units = true;
1026 guiprefs.units = <span class="string">'english'</span>;
1027 
1028 <span class="comment">% Re-store the Application data:</span>
1029 <span class="comment">% ------------------------------</span>
1030 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1031 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1032 <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'units'</span>)
1033 
1034 <span class="comment">% Update the GUI:</span>
1035 <span class="comment">% ---------------</span>
1036 set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1037 set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1038 
1039 <span class="comment">% [EOF] menuEnglish_Callback</span>
1040 
1041 <span class="comment">% --------------------------------------------------------------------</span>
1042 <a name="_sub37" href="#_subfunctions" class="code">function menuVerticalReference_Callback(hObject, eventdata, handles)</a>
1043 <span class="comment">% Empty</span>
1044 
1045 <span class="comment">% --------------------------------------------------------------------</span>
1046 <a name="_sub38" href="#_subfunctions" class="code">function VerticalReference_Callback(hObject, eventdata, handles)</a>
1047 <span class="comment">% Set the Plotting Parameter Vertical Reference to &quot;dfs&quot; (depth from</span>
1048 <span class="comment">% surface)</span>
1049 
1050 <span class="comment">% Get the Application Data:</span>
1051 <span class="comment">% -------------------------</span>
1052 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1053 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1054 
1055 <span class="keyword">switch</span> guiparams.plotref
1056     <span class="keyword">case</span> <span class="string">'dfs'</span>  <span class="comment">% Depth from surface</span>
1057         <span class="comment">% Update the Application Data:</span>
1058         <span class="comment">% ----------------------------</span>
1059         guiparams.plotref = <span class="string">'dfs'</span>;
1060         guiprefs.plotref  = <span class="string">'dfs'</span>;
1061         
1062         <span class="comment">% Re-store the Application data:</span>
1063         <span class="comment">% ------------------------------</span>
1064         setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1065         setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1066         <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'plotref'</span>)
1067         
1068         <span class="comment">% Update the GUI:</span>
1069         <span class="comment">% ---------------</span>
1070         set(handles.verticalReference,    <span class="string">'String'</span>,<span class="string">'Depth From Surface'</span>)
1071     <span class="keyword">case</span> <span class="string">'hab'</span> <span class="comment">% Height above bed</span>
1072         <span class="comment">% Update the Application Data:</span>
1073         <span class="comment">% ----------------------------</span>
1074         guiparams.plotref = <span class="string">'hab'</span>;
1075         guiprefs.plotref  = <span class="string">'hab'</span>;
1076         
1077         <span class="comment">% Re-store the Application data:</span>
1078         <span class="comment">% ------------------------------</span>
1079         setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1080         setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1081         <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'plotref'</span>)
1082         
1083         <span class="comment">% Update the GUI:</span>
1084         <span class="comment">% ---------------</span>
1085         set(handles.verticalReference,    <span class="string">'String'</span>,<span class="string">'Height Above Bottom'</span>)
1086 <span class="keyword">end</span>
1087 <span class="comment">% [EOF] VerticalReference_Callback</span>
1088 
1089 
1090 <span class="comment">% --------------------------------------------------------------------</span>
1091 <a name="_sub39" href="#_subfunctions" class="code">function menuSetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a>
1092 <span class="comment">% Empty</span>
1093 
1094 <span class="comment">% --------------------------------------------------------------------</span>
1095 <a name="_sub40" href="#_subfunctions" class="code">function menuCrossSectionEndpointAutomatic_Callback(hObject, eventdata, handles)</a>
1096 <span class="comment">% Set cross-section endpoints automatically</span>
1097 
1098 <span class="comment">% Get the Application Data:</span>
1099 <span class="comment">% -------------------------</span>
1100 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1101 
1102 <span class="comment">% Update the Application Data:</span>
1103 <span class="comment">% ----------------------------</span>
1104 guiparams.set_cross_section_endpoints = false;
1105 
1106 <span class="comment">% Re-store the Application data:</span>
1107 <span class="comment">% ------------------------------</span>
1108 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1109 
1110 <span class="comment">% Update the GUI:</span>
1111 <span class="comment">% ---------------</span>
1112 set(handles.menuCrossSectionEndpointAutomatic, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1113 set(handles.menuCrossSectionEndpointManual,    <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1114 
1115 <span class="comment">% [EOF] menuCrossSectionEndpointAutomatic_Callback</span>
1116 
1117 
1118 <span class="comment">% --------------------------------------------------------------------</span>
1119 <a name="_sub41" href="#_subfunctions" class="code">function menuCrossSectionEndpointManual_Callback(hObject, eventdata, handles)</a>
1120 <span class="comment">% Set cross-section endpoints manually</span>
1121 
1122 <span class="comment">% Get the Application Data:</span>
1123 <span class="comment">% -------------------------</span>
1124 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1125 
1126 <span class="comment">% Update the Application Data:</span>
1127 <span class="comment">% ----------------------------</span>
1128 guiparams.set_cross_section_endpoints = true;
1129 
1130 <span class="comment">% Re-store the Application data:</span>
1131 <span class="comment">% ------------------------------</span>
1132 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1133 
1134 <span class="comment">% Update the GUI:</span>
1135 <span class="comment">% ---------------</span>
1136 set(handles.menuCrossSectionEndpointAutomatic, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1137 set(handles.menuCrossSectionEndpointManual,    <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1138 
1139 <span class="comment">% [EOF] menuCrossSectionEndpointManual_Callback</span>
1140 
1141 
1142 
1143 
1144 <span class="comment">% --------------------------------------------------------------------</span>
1145 <a name="_sub42" href="#_subfunctions" class="code">function menuPlotStyle_Callback(hObject, eventdata, handles)</a>
1146 <span class="comment">% Empty</span>
1147 
1148 <span class="comment">% --------------------------------------------------------------------</span>
1149 <a name="_sub43" href="#_subfunctions" class="code">function menuStylePrint_Callback(hObject, eventdata, handles)</a>
1150 
1151 <span class="comment">% Get the Application Data:</span>
1152 <span class="comment">% -------------------------</span>
1153 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1154 
1155 <span class="comment">% Update the Application Data:</span>
1156 <span class="comment">% ----------------------------</span>
1157 guiparams.print        = true;
1158 guiparams.presentation = false;
1159 
1160 <span class="comment">% Re-store the Application data:</span>
1161 <span class="comment">% ------------------------------</span>
1162 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1163 
1164 <span class="comment">% Update the GUI:</span>
1165 <span class="comment">% ---------------</span>
1166 set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1167 set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1168 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1169 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1170 
1171 <span class="comment">% Modify the existing figures</span>
1172 <span class="comment">% ---------------------------</span>
1173 <span class="comment">% Find what plots exist already</span>
1174 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
1175 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
1176 
1177 <span class="comment">% Defaults for Print Stlye Figure</span>
1178 BkgdColor   = <span class="string">'white'</span>;
1179 AxColor     = <span class="string">'black'</span>;
1180 FigColor    = <span class="string">'white'</span>; <span class="comment">% [0.3 0.3 0.3]</span>
1181 FntSize     = 14;
1182 
1183 <span class="comment">% Loop through valid figures and adjust</span>
1184 <span class="comment">% -------------------------------------</span>
1185 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
1186     
1187     <span class="keyword">for</span> i = 1:length(valid_names)
1188         <span class="keyword">switch</span> valid_names{i}
1189             <span class="keyword">case</span> <span class="string">'Plan View Map'</span>
1190                 <span class="comment">% Focus the figure</span>
1191                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
1192                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1193                     figure(hff)
1194                     
1195                     <span class="comment">% Make the changes to figure</span>
1196                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1197                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1198                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1199                     set(gca,<span class="string">'Color'</span>,FigColor)
1200                     set(gca,<span class="string">'XColor'</span>,AxColor)
1201                     set(gca,<span class="string">'YColor'</span>,AxColor)
1202                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1203                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="keyword">...</span>
1204                         <span class="string">'FontSize'</span>,FntSize,<span class="keyword">...</span>
1205                         <span class="string">'Color'</span>,AxColor,<span class="keyword">...</span>
1206                         <span class="string">'XColor'</span>,AxColor,<span class="keyword">...</span>
1207                         <span class="string">'YColor'</span>,AxColor);
1208                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1209                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1210                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1211                     
1212                     <span class="comment">% Add a text object at the bottom of the figure with</span>
1213                     <span class="comment">% the file(s) and path for the data</span>
1214                     ismultiplot = numel(guiparams.mat_file)&gt;1;
1215                     <span class="keyword">if</span> ~ismultiplot
1216                         filestr = guiparams.savefile;
1217                         wd = length(filestr);
1218                         hd = 1;
1219                     <span class="keyword">else</span>
1220                         <span class="comment">% Construct a filename</span>
1221                         filestr   = [{guiparams.mat_path};guiparams.mat_file'];
1222                         wd        = max(cellfun(@length,filestr));
1223                         hd        = numel(filestr);
1224                             
1225                     <span class="keyword">end</span>
1226                     
1227                     fileinfotxt = uicontrol(<span class="string">'style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>,<span class="string">'characters'</span>);
1228                     disableMenuBar(hff)
1229                     set(fileinfotxt,<span class="keyword">...</span>
1230                         <span class="string">'string'</span>,filestr)
1231                     set(fileinfotxt,<span class="keyword">...</span>
1232                         <span class="string">'position'</span>,[0,0,wd,hd],<span class="keyword">...</span>
1233                         <span class="string">'Fontsize'</span>,FntSize/2,<span class="keyword">...</span>
1234                         <span class="string">'ForegroundColor'</span>,AxColor,<span class="keyword">...</span>
1235                         <span class="string">'BackgroundColor'</span>,BkgdColor,<span class="keyword">...</span>
1236                         <span class="string">'HorizontalAlignment'</span>,<span class="string">'Left'</span>,<span class="keyword">...</span>
1237                         <span class="string">'Tag'</span>,<span class="string">'fileinfotxt'</span>,<span class="keyword">...</span>
1238                         <span class="string">'Visible'</span>,<span class="string">'off'</span>)  <span class="comment">% hide this by default, editFigureDialog handles it now)</span>
1239                     
1240                 <span class="keyword">end</span>
1241             <span class="keyword">case</span> <span class="string">'Mean Cross Section Contour'</span>
1242                 <span class="comment">% Focus the figure</span>
1243                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
1244                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1245                     figure(hff)
1246                     
1247                     <span class="comment">% Make the changes to figure</span>
1248                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1249                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1250                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1251                     set(gca,<span class="string">'Color'</span>,FigColor)
1252                     set(gca,<span class="string">'XColor'</span>,AxColor)
1253                     set(gca,<span class="string">'YColor'</span>,AxColor)
1254                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1255                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="keyword">...</span>
1256                         <span class="string">'FontSize'</span>,FntSize,<span class="keyword">...</span>
1257                         <span class="string">'Color'</span>,AxColor,<span class="keyword">...</span>
1258                         <span class="string">'XColor'</span>,AxColor,<span class="keyword">...</span>
1259                         <span class="string">'YColor'</span>,AxColor);
1260                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1261                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1262                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1263                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'PlotBedElevation'</span>)   ,<span class="string">'color'</span>    ,AxColor)
1264                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'ReferenceVectorText'</span>),<span class="string">'color'</span>    ,AxColor)
1265                     
1266                     <span class="comment">% Add a text object at the bottom of the figure with</span>
1267                     <span class="comment">% the file(s) and path for the data</span>
1268                     ismultiplot = numel(guiparams.mat_file)&gt;1;
1269                     <span class="keyword">if</span> ~ismultiplot
1270                         filestr = guiparams.savefile;
1271                         wd = length(filestr);
1272                         hd = 1;
1273                     <span class="keyword">else</span>
1274                         <span class="comment">% Construct a filename</span>
1275                         filestr   = [{guiparams.mat_path};guiparams.mat_file'];
1276                         wd        = max(cellfun(@length,filestr));
1277                         hd        = numel(filestr);
1278                             
1279                     <span class="keyword">end</span>
1280                     
1281                     fileinfotxt = uicontrol(<span class="string">'style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>,<span class="string">'characters'</span>);
1282                     disableMenuBar(hff)
1283                     set(fileinfotxt,<span class="keyword">...</span>
1284                         <span class="string">'string'</span>,filestr)
1285                     set(fileinfotxt,<span class="keyword">...</span>
1286                         <span class="string">'position'</span>,[0,0,wd,hd],<span class="keyword">...</span>
1287                         <span class="string">'Fontsize'</span>,FntSize/2,<span class="keyword">...</span>
1288                         <span class="string">'ForegroundColor'</span>,AxColor,<span class="keyword">...</span>
1289                         <span class="string">'BackgroundColor'</span>,BkgdColor,<span class="keyword">...</span>
1290                         <span class="string">'HorizontalAlignment'</span>,<span class="string">'Left'</span>,<span class="keyword">...</span>
1291                         <span class="string">'Tag'</span>,<span class="string">'fileinfotxt'</span>,<span class="keyword">...</span>
1292                         <span class="string">'Visible'</span>,<span class="string">'off'</span>)  <span class="comment">% hide this by default, editFigureDialog handles it now</span>
1293                 <span class="keyword">end</span>
1294             <span class="keyword">otherwise</span>
1295         <span class="keyword">end</span>
1296     <span class="keyword">end</span>
1297     
1298     
1299 <span class="keyword">end</span>
1300 
1301 
1302 <span class="comment">%[EOF] menuStylePrint_Callback</span>
1303 
1304 
1305 <span class="comment">% --------------------------------------------------------------------</span>
1306 <a name="_sub44" href="#_subfunctions" class="code">function menuStylePresentation_Callback(hObject, eventdata, handles)</a>
1307 <span class="comment">% Get the Application Data:</span>
1308 <span class="comment">% -------------------------</span>
1309 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1310 
1311 <span class="comment">% Update the Application Data:</span>
1312 <span class="comment">% ----------------------------</span>
1313 guiparams.print        = false;
1314 guiparams.presentation = true;
1315 
1316 <span class="comment">% Re-store the Application data:</span>
1317 <span class="comment">% ------------------------------</span>
1318 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1319 
1320 <span class="comment">% Update the GUI:</span>
1321 <span class="comment">% ---------------</span>
1322 set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1323 set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1324 set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1325 set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1326 
1327 <span class="comment">% Modify the existing figures</span>
1328 <span class="comment">% ---------------------------</span>
1329 <span class="comment">% Find what plots exist already</span>
1330 hf = findobj(<span class="string">'type'</span>,<span class="string">'figure'</span>);
1331 valid_names = {<span class="string">'Plan View Map'</span>; <span class="string">'Mean Cross Section Contour'</span>};
1332 
1333 <span class="comment">% Defaults for Presentation Style Figure</span>
1334 <span class="comment">% --------------------------------------</span>
1335 BkgdColor   = <span class="string">'black'</span>;
1336 AxColor     = <span class="string">'white'</span>;
1337 FigColor    = <span class="string">'black'</span>; <span class="comment">% [0.3 0.3 0.3]</span>
1338 FntSize     = 14;
1339 
1340 <span class="comment">% Loop through valid figures and adjust</span>
1341 <span class="comment">% -------------------------------------</span>
1342 <span class="keyword">if</span> ~isempty(hf) &amp;&amp;  any(ishandle(hf))
1343     
1344     <span class="keyword">for</span> i = 1:length(valid_names)
1345         <span class="keyword">switch</span> valid_names{i}
1346             <span class="keyword">case</span> <span class="string">'Plan View Map'</span>
1347                 <span class="comment">% Focus the figure</span>
1348                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
1349                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1350                     figure(hff)
1351                     
1352                     <span class="comment">% Make the changes to figure</span>
1353                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1354                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1355                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1356                     set(gca,<span class="string">'Color'</span>,FigColor)
1357                     set(gca,<span class="string">'XColor'</span>,AxColor)
1358                     set(gca,<span class="string">'YColor'</span>,AxColor)
1359                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1360                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="keyword">...</span>
1361                         <span class="string">'FontSize'</span>,FntSize,<span class="keyword">...</span>
1362                         <span class="string">'Color'</span>,AxColor,<span class="keyword">...</span>
1363                         <span class="string">'XColor'</span>,AxColor,<span class="keyword">...</span>
1364                         <span class="string">'YColor'</span>,AxColor);
1365                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1366                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1367                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1368                     
1369                     <span class="comment">% Add a text object at the bottom of the figure with</span>
1370                     <span class="comment">% the file(s) and path for the data</span>
1371                     ismultiplot = numel(guiparams.mat_file)&gt;1;
1372                     <span class="keyword">if</span> ~ismultiplot
1373                         filestr = guiparams.savefile;
1374                         wd = length(filestr);
1375                         hd = 1;
1376                     <span class="keyword">else</span>
1377                         <span class="comment">% Construct a filename</span>
1378                         filestr   = [{guiparams.mat_path};guiparams.mat_file'];
1379                         wd        = max(cellfun(@length,filestr));
1380                         hd        = numel(filestr);
1381                             
1382                     <span class="keyword">end</span>
1383                     
1384                     fileinfotxt = uicontrol(<span class="string">'style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>,<span class="string">'characters'</span>);
1385                     disableMenuBar(hff)
1386                     set(fileinfotxt,<span class="keyword">...</span>
1387                         <span class="string">'string'</span>,filestr)
1388                     set(fileinfotxt,<span class="keyword">...</span>
1389                         <span class="string">'position'</span>,[0,0,wd,hd],<span class="keyword">...</span>
1390                         <span class="string">'Fontsize'</span>,FntSize/2,<span class="keyword">...</span>
1391                         <span class="string">'ForegroundColor'</span>,AxColor,<span class="keyword">...</span>
1392                         <span class="string">'BackgroundColor'</span>,BkgdColor,<span class="keyword">...</span>
1393                         <span class="string">'HorizontalAlignment'</span>,<span class="string">'Left'</span>,<span class="keyword">...</span>
1394                         <span class="string">'Tag'</span>,<span class="string">'fileinfotxt'</span>,<span class="keyword">...</span>
1395                         <span class="string">'Visible'</span>,<span class="string">'off'</span>)  <span class="comment">% hide this by default, editFigureDialog handles it now)</span>
1396                     
1397                 <span class="keyword">end</span>
1398             <span class="keyword">case</span> <span class="string">'Mean Cross Section Contour'</span>
1399                 <span class="comment">% Focus the figure</span>
1400                 hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
1401                 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
1402                     figure(hff)
1403                     
1404                     <span class="comment">% Make the changes to figure</span>
1405                     set(gcf,<span class="string">'Color'</span>,BkgdColor);
1406                     set(gca,<span class="string">'FontSize'</span>,FntSize)
1407                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize)
1408                     set(gca,<span class="string">'Color'</span>,[0.3 0.3 0.3]) <span class="comment">%FigColor)</span>
1409                     set(gca,<span class="string">'XColor'</span>,AxColor)
1410                     set(gca,<span class="string">'YColor'</span>,AxColor)
1411                     set(gca,<span class="string">'ZColor'</span>,AxColor)
1412                     set(findobj(gcf,<span class="string">'tag'</span>,<span class="string">'Colorbar'</span>),<span class="keyword">...</span>
1413                         <span class="string">'FontSize'</span>,FntSize,<span class="keyword">...</span>
1414                         <span class="string">'Color'</span>,AxColor,<span class="keyword">...</span>
1415                         <span class="string">'XColor'</span>,AxColor,<span class="keyword">...</span>
1416                         <span class="string">'YColor'</span>,AxColor);
1417                     set(get(gca,<span class="string">'Title'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1418                     set(get(gca,<span class="string">'xLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1419                     set(get(gca,<span class="string">'yLabel'</span>),<span class="string">'FontSize'</span>,FntSize,<span class="string">'Color'</span>,AxColor)
1420                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'PlotBedElevation'</span>)   ,<span class="string">'color'</span>    ,AxColor)
1421                     set(findobj(gca,<span class="string">'tag'</span>,<span class="string">'ReferenceVectorText'</span>),<span class="string">'color'</span>    ,AxColor)
1422                     
1423                     <span class="comment">% Add a text object at the bottom of the figure with</span>
1424                     <span class="comment">% the file(s) and path for the data</span>
1425                     ismultiplot = numel(guiparams.mat_file)&gt;1;
1426                     <span class="keyword">if</span> ~ismultiplot
1427                         filestr = guiparams.savefile;
1428                         wd = length(filestr);
1429                         hd = 1;
1430                     <span class="keyword">else</span>
1431                         <span class="comment">% Construct a filename</span>
1432                         filestr   = [{guiparams.mat_path};guiparams.mat_file'];
1433                         wd        = max(cellfun(@length,filestr));
1434                         hd        = numel(filestr);
1435                             
1436                     <span class="keyword">end</span>
1437                     
1438                     fileinfotxt = uicontrol(<span class="string">'style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>,<span class="string">'characters'</span>);
1439                     disableMenuBar(hff)
1440                     set(fileinfotxt,<span class="keyword">...</span>
1441                         <span class="string">'string'</span>,filestr)
1442                     set(fileinfotxt,<span class="keyword">...</span>
1443                         <span class="string">'position'</span>,[0,0,wd,hd],<span class="keyword">...</span>
1444                         <span class="string">'Fontsize'</span>,FntSize/2,<span class="keyword">...</span>
1445                         <span class="string">'ForegroundColor'</span>,AxColor,<span class="keyword">...</span>
1446                         <span class="string">'BackgroundColor'</span>,BkgdColor,<span class="keyword">...</span>
1447                         <span class="string">'HorizontalAlignment'</span>,<span class="string">'Left'</span>,<span class="keyword">...</span>
1448                         <span class="string">'Tag'</span>,<span class="string">'fileinfotxt'</span>,<span class="keyword">...</span>
1449                         <span class="string">'Visible'</span>,<span class="string">'off'</span>)  <span class="comment">% hide this by default, editFigureDialog handles it now</span>
1450                 <span class="keyword">end</span>
1451             <span class="keyword">otherwise</span>
1452         <span class="keyword">end</span>
1453     <span class="keyword">end</span>
1454     
1455     
1456 <span class="keyword">end</span>
1457 
1458 <span class="comment">% [EOF] menuStylePresentation_Callback</span>
1459 
1460 <span class="comment">% --------------------------------------------------------------------</span>
1461 <span class="comment">% function menuKMZVerticalOffset_Callback(hObject, eventdata, handles)</span>
1462 <span class="comment">%</span>
1463 <span class="comment">% % Get the Application data:</span>
1464 <span class="comment">% % -------------------------</span>
1465 <span class="comment">% guiparams = getappdata(handles.figure1,'guiparams');</span>
1466 <span class="comment">%</span>
1467 <span class="comment">% % Initialize the answer:</span>
1468 <span class="comment">% % ----------------------</span>
1469 <span class="comment">% numstr = {num2str(guiparams.vertical_offset)};</span>
1470 <span class="comment">% answer = NaN;</span>
1471 <span class="comment">% while isnan(answer)</span>
1472 <span class="comment">%     answer = inputdlg('Vertical Offset (m)','KMZ Export',1,numstr);</span>
1473 <span class="comment">%</span>
1474 <span class="comment">%     if isempty(answer) % User hits &quot;Cancel&quot;</span>
1475 <span class="comment">%         return</span>
1476 <span class="comment">%     end</span>
1477 <span class="comment">%</span>
1478 <span class="comment">%     answer = str2double(answer); % A non-numeric char will be NaN</span>
1479 <span class="comment">%     % A numeric char will be a double</span>
1480 <span class="comment">% end</span>
1481 <span class="comment">%</span>
1482 <span class="comment">% % Re-store the Application data:</span>
1483 <span class="comment">% % ------------------------------</span>
1484 <span class="comment">% guiparams.vertical_offset = answer;</span>
1485 <span class="comment">% setappdata(handles.figure1,'guiparams',guiparams)</span>
1486 <span class="comment">%</span>
1487 <span class="comment">% % [EOF] menuKMZExport_Callback</span>
1488 
1489 <span class="comment">% --------------------------------------------------------------------</span>
1490 <a name="_sub45" href="#_subfunctions" class="code">function menuAdvancedSettings_Callback(hObject, eventdata, handles)</a>
1491 <span class="comment">% Get the Application Data:</span>
1492 <span class="comment">% -------------------------</span>
1493 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1494 
1495 <span class="comment">% Open the Advanced Settings SubGUI</span>
1496 <span class="comment">%----------------------------------</span>
1497 AdvancedSettings_subgui();
1498 uiwait(findobj(<span class="string">'Name'</span>,<span class="string">'Advanced Settings'</span>));
1499 
1500 <span class="comment">% Get the data back from the Advanced Settings SubGUI</span>
1501 <span class="comment">% and store them back in the VMT memory</span>
1502 <span class="comment">%----------------------------------------------------</span>
1503 guiparams = getpref(<span class="string">'VMTadvancedsettings'</span>,<span class="string">'guiparams'</span>);
1504 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1505 
1506 <span class="comment">% Process Vertical Reference Changes</span>
1507 <a href="#_sub38" class="code" title="subfunction VerticalReference_Callback(hObject, eventdata, handles)">VerticalReference_Callback</a>(hObject, eventdata, handles)
1508 
1509 
1510 
1511 <span class="comment">% --------------------------------------------------------------------</span>
1512 <a name="_sub46" href="#_subfunctions" class="code">function menuBathymetryParameters_Callback(hObject, eventdata, handles)</a>
1513 <span class="comment">% Not implemented</span>
1514 
1515 <span class="comment">% --------------------------------------------------------------------</span>
1516 <a name="_sub47" href="#_subfunctions" class="code">function menuTools_Callback(hObject, eventdata, handles)</a>
1517 <span class="comment">% Empty</span>
1518 
1519 <span class="comment">% --------------------------------------------------------------------</span>
1520 <a name="_sub48" href="#_subfunctions" class="code">function menuASCII2GIS_Callback(hObject, eventdata, handles)</a>
1521 ASCII2GIS_GUI
1522 <span class="comment">% [EOF] menuASCII2GIS_Callback</span>
1523 
1524 <span class="comment">% --------------------------------------------------------------------</span>
1525 <a name="_sub49" href="#_subfunctions" class="code">function menuASCII2KML_Callback(hObject, eventdata, handles)</a>
1526 
1527 <span class="comment">% Get the Application preferences:</span>
1528 <span class="comment">% --------------------------------</span>
1529 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1530 
1531 inpath = guiprefs.kmz_path;
1532 <span class="keyword">if</span> iscell(guiprefs.kmz_file)
1533     infile = guiprefs.kmz_file{1};
1534 <span class="keyword">else</span>
1535     infile = guiprefs.kmz_file;
1536 <span class="keyword">end</span>
1537 [log_text,outpath,outfile] = ASCII2KML(inpath,infile);
1538 
1539 guiprefs.kmz_path = outpath;
1540 guiprefs.kmz_file = outfile;
1541 
1542 <span class="comment">% Update persistent preferences</span>
1543 <span class="comment">% -----------------------------</span>
1544 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1545 
1546 <span class="comment">% [EOF] menuASCII2KML_Callback</span>
1547 
1548 <span class="comment">% --------------------------------------------------------------------</span>
1549 <a name="_sub50" href="#_subfunctions" class="code">function menuSonTekMAT2KML_Callback(hObject, eventdata, handles)</a>
1550 SontekMAT2KML;
1551 <span class="comment">% [EOF] menuSonTekMAT2KML_Callback</span>
1552 
1553 <span class="comment">% --------------------------------------------------------------------</span>
1554 <a name="_sub51" href="#_subfunctions" class="code">function menuOpenBatchMode_Callback(hObject, eventdata, handles)</a>
1555 <span class="comment">% Get the Application preferences:</span>
1556 <span class="comment">% --------------------------------</span>
1557 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1558 
1559 VMT_BatchMode;
1560 <span class="comment">% [EOF] menuOpenBatchMode_Callback</span>
1561 
1562 <span class="comment">% --------------------------------------------------------------------</span>
1563 <a name="_sub52" href="#_subfunctions" class="code">function menuHelp_Callback(hObject, eventdata, handles)</a>
1564 <span class="comment">% Empty</span>
1565 
1566 <span class="comment">% --------------------------------------------------------------------</span>
1567 <a name="_sub53" href="#_subfunctions" class="code">function menuUsersGuide_Callback(hObject, eventdata, handles)</a>
1568 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1569 <span class="keyword">try</span> <span class="comment">% to open the User Guide PDF</span>
1570     open([pwd filesep <span class="string">'doc'</span> filesep <span class="string">'VMT User Guide '</span> guiparams.vmt_version{1} <span class="string">'.pdf'</span>]);
1571     
1572 <span class="keyword">catch</span> err <span class="comment">%#ok&lt;NASGU&gt;</span>
1573     
1574     <span class="keyword">if</span> isdeployed
1575         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1576             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1577         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1578             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1579             errLogFileName},<span class="keyword">...</span>
1580             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1581             <span class="string">'error'</span>);
1582         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1583         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1584         fclose(fid);
1585         rethrow(err)
1586     <span class="keyword">else</span>
1587         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1588             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1589             <span class="string">'error'</span>);
1590         rethrow(err);
1591     <span class="keyword">end</span>
1592 <span class="keyword">end</span>
1593 <span class="comment">% [EOF] menuASCII2KML_Callback</span>
1594 
1595 <span class="comment">% --------------------------------------------------------------------</span>
1596 <a name="_sub54" href="#_subfunctions" class="code">function menuFunctionLibrary_Callback(hObject, eventdata, handles)</a>
1597 <span class="comment">% Get the Application data:</span>
1598 <span class="comment">% -------------------------</span>
1599 <span class="comment">% guiparams = getappdata(handles.figure1,'guiparams'); %#ok&lt;NASGU&gt;</span>
1600 
1601 <span class="keyword">try</span>
1602     open([pwd filesep <span class="string">'/doc/index.html'</span>])
1603 
1604 
1605 <span class="comment">% This catch is probably not necessary.</span>
1606 <span class="keyword">catch</span> err 
1607     <span class="keyword">if</span> isdeployed
1608         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1609             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1610         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1611             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1612             errLogFileName},<span class="keyword">...</span>
1613             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1614             <span class="string">'error'</span>);
1615         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1616         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1617         fclose(fid);
1618         rethrow(err)
1619     <span class="keyword">else</span>
1620         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1621             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1622             <span class="string">'error'</span>);
1623         rethrow(err);
1624     <span class="keyword">end</span>
1625 <span class="keyword">end</span>
1626 
1627 <span class="comment">% [EOF] menuFunctionLibrary_Callback</span>
1628 
1629 <span class="comment">% --------------------------------------------------------------------</span>
1630 <a name="_sub55" href="#_subfunctions" class="code">function menuCheckForUpdates_Callback(hObject, eventdata, handles)</a>
1631 
1632 <span class="comment">% Get the Application data:</span>
1633 <span class="comment">% -------------------------</span>
1634 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1635 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1636 
1637 <span class="comment">% Check version tag against the web, and display a message</span>
1638 <span class="keyword">try</span>
1639     <span class="comment">%webdata = urlread('file:///C:/Users/fengel/Downloads/VMT_version.txt');</span>
1640     webdata = urlread(<span class="string">'https://hydroacoustics.usgs.gov/movingboat/VMT/VMT_version.txt'</span>);
1641     <span class="keyword">if</span> length(webdata) &gt; 5
1642         current_vmt_version{1} = webdata(1:5);
1643         current_vmt_version{2} = webdata(8:16);
1644     <span class="keyword">else</span>
1645         current_vmt_version = webdata;
1646     <span class="keyword">end</span>
1647     <span class="comment">%     current_vmt_version = urlread('http://hydroacoustics.usgs.gov/movingboat/VMT/VMT_version.txt');</span>
1648 <span class="keyword">catch</span> err <span class="comment">%#ok&lt;NASGU&gt;</span>
1649     <span class="keyword">if</span> isdeployed
1650         errLogFileName = fullfile(pwd,<span class="keyword">...</span>
1651             [<span class="string">'errorLog'</span> datestr(now,<span class="string">'yyyymmddHHMMSS'</span>) <span class="string">'.txt'</span>]);
1652         msgbox({[<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier];<span class="keyword">...</span>
1653             [<span class="string">'Error details are being written to the following file: '</span>];<span class="keyword">...</span>
1654             errLogFileName},<span class="keyword">...</span>
1655             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1656             <span class="string">'error'</span>);
1657         fid = fopen(errLogFileName,<span class="string">'W'</span>);
1658         fwrite(fid,err.getReport(<span class="string">'extended'</span>,<span class="string">'hyperlinks'</span>,<span class="string">'off'</span>));
1659         fclose(fid);
1660         rethrow(err)
1661     <span class="keyword">else</span>
1662         msgbox([<span class="string">'An unexpected error occurred. Error code: '</span> err.identifier],<span class="keyword">...</span>
1663             <span class="string">'VMT Status: Unexpected Error'</span>,<span class="keyword">...</span>
1664             <span class="string">'error'</span>);
1665         rethrow(err);
1666     <span class="keyword">end</span>
1667 <span class="keyword">end</span>
1668 
1669 <span class="keyword">if</span> ischar(current_vmt_version)
1670     <span class="keyword">if</span> strcmpi(guiparams.vmt_version{1},current_vmt_version)
1671         h = msgbox(<span class="keyword">...</span>
1672             {<span class="string">'VMT is currently up to date, no updates available.'</span>;<span class="keyword">...</span>
1673             <span class="string">''</span>;<span class="keyword">...</span>
1674             [<span class="string">'Latest available version: '</span> current_vmt_version];<span class="keyword">...</span>
1675             [<span class="string">'Installed version: '</span> guiparams.vmt_version{1}]},<span class="string">'Check for updates'</span>,<span class="string">'modal'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1676     <span class="keyword">else</span>
1677         h = msgbox(<span class="keyword">...</span>
1678             {<span class="string">'VMT is out of date. Please visit the VMT homepage.'</span>;<span class="keyword">...</span>
1679             <span class="string">''</span>;<span class="keyword">...</span>
1680             [<span class="string">'Latest available version: '</span> current_vmt_version];<span class="keyword">...</span>
1681             [<span class="string">'Installed version: '</span> guiparams.vmt_version{1}]},<span class="string">'Check for updates'</span>,<span class="string">'modal'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1682     <span class="keyword">end</span>
1683 <span class="keyword">elseif</span> iscell(current_vmt_version)
1684     <span class="keyword">if</span> strcmpi(guiparams.vmt_version{1},current_vmt_version{1}) &amp;&amp; strcmpi(guiparams.vmt_version{2},current_vmt_version{2})
1685         h = msgbox(<span class="keyword">...</span>
1686             {<span class="string">'VMT is currently up to date, no updates available.'</span>;<span class="keyword">...</span>
1687             <span class="string">''</span>;<span class="keyword">...</span>
1688             [<span class="string">'Latest available version: '</span> current_vmt_version{1} <span class="string">'; Release: '</span> current_vmt_version{2}];<span class="keyword">...</span>
1689             [<span class="string">'Installed version: '</span> guiparams.vmt_version{1} <span class="string">'; Release: '</span> guiparams.vmt_version{2}]},<span class="string">'Check for updates'</span>,<span class="string">'modal'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1690     <span class="keyword">else</span>
1691         h = msgbox(<span class="keyword">...</span>
1692             {<span class="string">'VMT is out of date. Please visit the VMT homepage.'</span>;<span class="keyword">...</span>
1693             <span class="string">''</span>;<span class="keyword">...</span>
1694             [<span class="string">'Latest available version: '</span> current_vmt_version{1} <span class="string">'; Release: '</span> current_vmt_version{2}];<span class="keyword">...</span>
1695             [<span class="string">'Installed version: '</span> guiparams.vmt_version{1} <span class="string">'; Release: '</span> guiparams.vmt_version{2}]},<span class="string">'Check for updates'</span>,<span class="string">'modal'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1696     <span class="keyword">end</span>
1697 <span class="keyword">end</span>
1698 <span class="comment">% [EOF] menuCheckForUpdates_Callback</span>
1699 
1700 <span class="comment">% --------------------------------------------------------------------</span>
1701 <a name="_sub56" href="#_subfunctions" class="code">function menuAbout_Callback(hObject, eventdata, handles)</a>
1702 
1703 <span class="comment">% Get the Application data:</span>
1704 <span class="comment">% -------------------------</span>
1705 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1706 messagestr = <span class="keyword">...</span>
1707     {<span class="string">'The Velocity Mapping Toolbox'</span>;<span class="keyword">...</span>
1708     [<span class="string">'   Version: '</span> guiparams.vmt_version{1}];<span class="keyword">...</span>
1709     [<span class="string">'   Release: '</span> guiparams.vmt_version{2}];<span class="keyword">...</span>
1710     <span class="string">''</span>;<span class="keyword">...</span>
1711     <span class="string">''</span>;<span class="keyword">...</span>
1712     <span class="string">'With collaborations from:'</span>;<span class="keyword">...</span>
1713     <span class="string">'   U.S. Geological Survey'</span>;<span class="keyword">...</span>
1714     <span class="string">'   University of Illinois'</span>;<span class="keyword">...</span>
1715     <span class="string">'   University of Hull'</span>;<span class="keyword">...</span>
1716     <span class="string">''</span>;<span class="keyword">...</span>
1717     <span class="string">''</span>;<span class="keyword">...</span>
1718     <span class="string">'Citation: '</span>;<span class="keyword">...</span>
1719     <span class="string">'   Parsons, D. R., Jackson, P. R., Czuba, J. A., Engel, F. L.,'</span>;<span class="keyword">...</span>
1720     <span class="string">'   Rhoads, B. L., Oberg, K. A., Best, J. L., Mueller, D. S.,'</span>;<span class="keyword">...</span>
1721     <span class="string">'   Johnson, K. K. and Riley, J. D. (2013), Velocity Mapping'</span>;<span class="keyword">...</span>
1722     <span class="string">'   Toolbox (VMT): a processing and visualization suite for'</span>;<span class="keyword">...</span>
1723     <span class="string">'   moving-vessel ADCP measurements. Earth Surf. Process.'</span>;<span class="keyword">...</span>
1724     <span class="string">'   Landforms.doi: 10.1002/esp.3367'</span>};
1725 h = msgbox(messagestr,<span class="string">'About VMT'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
1726 <span class="comment">% [EOF] menuAbout_Callback</span>
1727 
1728 
1729 
1730 
1731 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
1732 <span class="comment">% TOOLBAR CALLBACKS %</span>
1733 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
1734 
1735 <span class="comment">% --------------------------------------------------------------------</span>
1736 <a name="_sub57" href="#_subfunctions" class="code">function loadDataCallback(hObject, eventdata, handles)</a>
1737 axes(findobj(handles.figure1,<span class="string">'Tag'</span>,<span class="string">'Plot1Shiptracks'</span>)); cla
1738 <a href="#_sub10" class="code" title="subfunction closeOpenFigures(hObject, eventdata, handles)">closeOpenFigures</a>(hObject, eventdata, handles)
1739 <span class="comment">% Read Files into Data Structure using tfile.</span>
1740 
1741 <span class="comment">% Get the Application data:</span>
1742 <span class="comment">% -------------------------</span>
1743 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1744 guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1745 
1746 <span class="comment">% Ask the user to select files:</span>
1747 <span class="comment">% -----------------------------</span>
1748 current_file = fullfile(guiprefs.ascii_path,guiprefs.ascii_file{1});
1749 [filename,pathname] = uigetfile({<span class="string">'*_ASC.TXT'</span>,<span class="string">'ASCII (*_ASC.TXT)'</span>}, <span class="keyword">...</span>
1750     <span class="string">'Select the ASCII Output Files'</span>, <span class="keyword">...</span>
1751     current_file, <span class="keyword">...</span>
1752     <span class="string">'MultiSelect'</span>,<span class="string">'on'</span>);
1753 
1754 <span class="keyword">if</span> ischar(pathname) <span class="comment">% The user did not hit &quot;Cancel&quot;</span>
1755     guiparams.data_folder = pathname;
1756     <span class="keyword">if</span> ischar(filename)
1757         filename = {filename};
1758     <span class="keyword">end</span>
1759     guiparams.data_files = filename;
1760     guiparams.mat_file = <span class="string">''</span>;
1761     
1762     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1763     
1764    
1765     
1766     <span class="comment">% Update the preferences:</span>
1767     <span class="comment">% -----------------------</span>
1768     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1769     guiprefs.ascii_path = pathname;
1770     guiprefs.ascii_file = filename;
1771     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1772     <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'ascii'</span>)
1773     
1774     <span class="comment">% Push messages to Log Window:</span>
1775     <span class="comment">% ----------------------------</span>
1776     log_text = {<span class="keyword">...</span>
1777         <span class="string">''</span>;<span class="keyword">...</span>
1778         [<span class="string">'%--- '</span> datestr(now) <span class="string">' ---%'</span>];<span class="keyword">...</span>
1779         <span class="string">'Current Project Directory:'</span>;<span class="keyword">...</span>
1780         guiparams.data_folder;
1781         <span class="string">'Loading the following files into memory:'</span>;<span class="keyword">...</span>
1782         char(filename)};
1783     statusLogging(handles.LogWindow, log_text)
1784     
1785     <span class="comment">% Read the file(s)</span>
1786     <span class="comment">% ----------------</span>
1787     [~,~,savefile,A,z] = <span class="keyword">...</span>
1788         <a href="VMT_ReadFiles.html" class="code" title="function [zPathName,zFileName,savefile,A,z] = VMT_ReadFiles(zPathName,zFileName)">VMT_ReadFiles</a>(guiparams.data_folder,guiparams.data_files);
1789     guiparams.savefile = savefile;
1790     guiparams.A        = A;
1791     guiparams.z        = z;
1792     
1793     
1794     <span class="comment">% Set the vertical grid node spacing</span>
1795     <span class="comment">% ----------------------------------</span>
1796     <span class="comment">% For RioGrande probes, use the bin size, else just use the default</span>
1797     <span class="comment">% Backwards compatible</span>
1798     <span class="keyword">if</span> A(1).Sup.wm ~= 3 <span class="comment">% RG</span>
1799         set(handles.VerticalGridNodeSpacing,<span class="string">'String'</span>,double(A(1).Sup.binSize_cm(1))/100)
1800         guiparams.vertical_grid_node_spacing = double(A(1).Sup.binSize_cm(1))/100;
1801     <span class="keyword">else</span> <span class="comment">% Older file, must be RR or M9</span>
1802         set(handles.VerticalGridNodeSpacing,<span class="string">'String'</span>,0.4)
1803         guiparams.vertical_grid_node_spacing = 0.4;
1804     <span class="keyword">end</span>
1805     
1806     <span class="comment">% Save application data</span>
1807     <span class="comment">% ---------------------</span>
1808     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1809    
1810     <span class="comment">% Process and display ShipTracks</span>
1811     <span class="comment">% ------------------------------</span>
1812     <a href="#_sub62" class="code" title="subfunction shiptracksPlotCallback(hObject, eventdata, handles)">shiptracksPlotCallback</a>(hObject, eventdata, handles)
1813     
1814 <span class="comment">%</span>
1815 <span class="comment">%     % Preprocess the data:</span>
1816 <span class="comment">%     % --------------------</span>
1817 <span class="comment">%     A = VMT_PreProcess(z,A);</span>
1818 <span class="comment">%</span>
1819 <span class="comment">%     % Push messages to Log Window:</span>
1820 <span class="comment">%     % ----------------------------</span>
1821 <span class="comment">%     log_text = {...</span>
1822 <span class="comment">%         '   Preprocessing complete.';...</span>
1823 <span class="comment">%         '   Begin Data Processing...'};</span>
1824 <span class="comment">%     statusLogging(handles.LogWindow, log_text)</span>
1825 <span class="comment">%</span>
1826 <span class="comment">%     A(1).hgns = guiparams.horizontal_grid_node_spacing;</span>
1827 <span class="comment">%     A(1).wse  = guiparams.wse;  %Set the WSE to entered value</span>
1828 <span class="comment">%     [A,V,processing_log_text] = VMT_ProcessTransects(z,A,...</span>
1829 <span class="comment">%         guiparams.set_cross_section_endpoints,...</span>
1830 <span class="comment">%         guiparams.unit_discharge_correction,guiparams.eta);</span>
1831 <span class="comment">%</span>
1832 <span class="comment">%     % Push messages to Log Window:</span>
1833 <span class="comment">%     % ----------------------------</span>
1834 <span class="comment">%     statusLogging(handles.LogWindow, processing_log_text)</span>
1835 <span class="comment">%</span>
1836 <span class="comment">%     % Store the data:</span>
1837 <span class="comment">%     % ---------------</span>
1838 <span class="comment">%     guiparams.z = z;</span>
1839 <span class="comment">%     guiparams.A = A;</span>
1840 <span class="comment">%     guiparams.V = V;</span>
1841 <span class="comment">%     setappdata(handles.figure1,'guiparams',guiparams)</span>
1842     
1843           
1844     <span class="comment">% Update the GUI:</span>
1845     <span class="comment">% ---------------</span>
1846     <a href="#_sub100" class="code" title="subfunction set_enable(handles,enable_state)">set_enable</a>(handles,<span class="string">'fileloaded'</span>)
1847     
1848     <span class="comment">% If data are RG or SP, set vertical grid node spacing to bin size</span>
1849     
1850 <span class="keyword">end</span>
1851 <span class="comment">% [EOF] loadDataCallback</span>
1852 
1853 
1854 
1855 <span class="comment">% --------------------------------------------------------------------</span>
1856 <a name="_sub58" href="#_subfunctions" class="code">function saveDataCallback(hObject, eventdata, handles)</a>
1857 <span class="comment">% SaveMATFile_Callback(handles.SaveMATFile,eventdata,handles)</span>
1858 
1859 <span class="comment">% Get the Application data:</span>
1860 <span class="comment">% -------------------------</span>
1861 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1862 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1863 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1864 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1865 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
1866 
1867 [the_file,the_path] = <span class="keyword">...</span>
1868     uiputfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-Files (*.mat)'</span>}, <span class="keyword">...</span>
1869     <span class="string">'Save MAT-File'</span>, <span class="keyword">...</span>
1870     fullfile(guiparams.mat_path,guiparams.savefile));
1871 
1872 <span class="comment">% Save the processed data to a MAT file:</span>
1873 <span class="comment">% --------------------------------------</span>
1874 <span class="keyword">if</span> ischar(the_file)
1875     guiparams.mat_path = the_path;
1876     guiparams.mat_file = the_file;
1877     guiparams.savefile = the_file;
1878     
1879     <span class="comment">% Re-store the Application data:</span>
1880     <span class="comment">% ------------------------------</span>
1881     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1882     
1883     <span class="comment">% Update the preferences:</span>
1884     <span class="comment">% -----------------------</span>
1885     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
1886     guiprefs.mat_path = the_path;
1887     guiprefs.mat_file = the_file;
1888     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
1889     <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
1890     
1891     [pathstr,filename,extension] = fileparts([guiparams.mat_path guiparams.savefile]);
1892     savefile = fullfile(pathstr,[filename extension]);
1893     <span class="comment">%h = msgbox(['Saving processed data in MAT File ''' filename extension ''''], ...</span>
1894     <span class="comment">%    'Saving Processed Data File...'); %#ok&lt;NASGU&gt;</span>
1895     log_text = {<span class="keyword">...</span>
1896         <span class="string">'Saving Processed Data File...'</span>;<span class="keyword">...</span>
1897         savefile};
1898     statusLogging(handles.LogWindow,log_text)
1899     save(savefile,<span class="string">'A'</span>,<span class="string">'V'</span>,<span class="string">'z'</span>,<span class="string">'Map'</span>)
1900 <span class="keyword">end</span>
1901 
1902 <span class="comment">% [EOF] saveDataCallback</span>
1903 
1904 
1905 <span class="comment">% --------------------------------------------------------------------</span>
1906 <a name="_sub59" href="#_subfunctions" class="code">function saveBathymetryCallback(hObject, eventdata, handles)</a>
1907 
1908 <span class="comment">% Get the Application data:</span>
1909 <span class="comment">% -------------------------</span>
1910 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1911 z   = guiparams.z;
1912 A   = guiparams.A;
1913 <span class="comment">% V   = guiparams.V;   %#ok&lt;NASGU&gt;</span>
1914 <span class="comment">% Map = guiparams.Map; %#ok&lt;NASGU&gt;</span>
1915 
1916 <span class="comment">% Compute multibeam bathymetry:</span>
1917 <span class="comment">% -----------------------------</span>
1918 msgbox(<span class="string">'Processing Bathymetry...Please Be Patient'</span>,<span class="string">'VMT Status'</span>,<span class="string">'help'</span>,<span class="string">'replace'</span>)
1919 <span class="comment">%A = VMT_MBBathy(z,A,savefile,handles.beam_angle,handles.MagneticVariation,handles.WSE);</span>
1920 <a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wseval,saveaux)">VMT_MBBathy</a>(z,A,savefile, <span class="keyword">...</span>
1921     guiparams.beam_angle, <span class="keyword">...</span>
1922     guiparams.magnetic_variation, <span class="keyword">...</span>
1923     guiparams.water_surface_elevation, <span class="keyword">...</span>
1924     guiparams.output_auxiliary_data);
1925 
1926 msgbox(<span class="string">'Bathymetry Output Complete'</span>,<span class="string">'VMT Status'</span>,<span class="string">'help'</span>,<span class="string">'replace'</span>)
1927 
1928 <span class="comment">% [EOF] saveBathymetryCallback</span>
1929 
1930 <span class="comment">% --------------------------------------------------------------------</span>
1931 <a name="_sub60" href="#_subfunctions" class="code">function plottingParametersCallback(hObject, eventdata, handles)</a>
1932 
1933 <span class="comment">% Get the Application data:</span>
1934 <span class="comment">% -------------------------</span>
1935 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1936 
1937 [guiparams.english_units,guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
1938     guiparams.presentation,guiparams.print] = <span class="keyword">...</span>
1939     plotParametersDialog(guiparams.english_units, <span class="keyword">...</span>
1940     guiparams.set_cross_section_endpoints,<span class="keyword">...</span>
1941     guiparams.presentation,guiparams.print,<span class="keyword">...</span>
1942     handles.figure1);
1943 
1944 <span class="comment">% Update the GUI:</span>
1945 <span class="comment">% ---------------</span>
1946 <span class="keyword">if</span> guiparams.english_units
1947     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1948     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1949 <span class="keyword">else</span>
1950     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1951     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1952 <span class="keyword">end</span>
1953 
1954 <span class="keyword">if</span> guiparams.set_cross_section_endpoints
1955     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
1956     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
1957 <span class="keyword">else</span>
1958     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
1959     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
1960 <span class="keyword">end</span>
1961 
1962 <span class="keyword">if</span> guiparams.presentation
1963     <a href="#_sub44" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
1964 <span class="comment">%     set(handles.menuStylePrint,           'Checked','off')</span>
1965 <span class="comment">%     set(handles.menuStylePresentation,    'Checked','on')</span>
1966 <span class="comment">%     set(handles.menuPrintFormat,          'Checked','off')</span>
1967 <span class="comment">%     set(handles.menuPresentationFormat,   'Checked','on')</span>
1968 <span class="keyword">else</span>
1969     <a href="#_sub43" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
1970 <span class="comment">%     set(handles.menuStylePrint,           'Checked','on')</span>
1971 <span class="comment">%     set(handles.menuStylePresentation,    'Checked','off')</span>
1972 <span class="comment">%     set(handles.menuPrintFormat,          'Checked','on')</span>
1973 <span class="comment">%     set(handles.menuPresentationFormat,   'Checked','off')</span>
1974 <span class="keyword">end</span>
1975 
1976 <span class="comment">% Re-store the Application data:</span>
1977 <span class="comment">% ------------------------------</span>
1978 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
1979 
1980 <span class="comment">% [EOF] plottingParametersCallback</span>
1981 
1982 
1983 <span class="comment">% --------------------------------------------------------------------</span>
1984 <a name="_sub61" href="#_subfunctions" class="code">function processingParametersCallback(hObject, eventdata, handles)</a>
1985 
1986 <span class="comment">% Get the Application data:</span>
1987 <span class="comment">% -------------------------</span>
1988 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
1989 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1990 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1991 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
1992 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
1993 
1994 <span class="comment">% [EOF] processingParametersCallback</span>
1995 
1996 
1997 <span class="comment">% --------------------------------------------------------------------</span>
1998 <a name="_sub62" href="#_subfunctions" class="code">function shiptracksPlotCallback(hObject, eventdata, handles)</a>
1999 <span class="comment">% Plot 1</span>
2000 
2001 <span class="comment">% Get the Application data:</span>
2002 <span class="comment">% -------------------------</span>
2003 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2004 z = guiparams.z;
2005 A = guiparams.A;
2006 V = guiparams.V; <span class="comment">%#ok&lt;NASGU&gt;</span>
2007 <span class="comment">% Map = guiparams.Map;</span>
2008 
2009 
2010 <span class="comment">% Preprocess the data:</span>
2011 <span class="comment">% --------------------</span>
2012 A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
2013 
2014 <span class="comment">% Push messages to Log Window:</span>
2015 <span class="comment">% ----------------------------</span>
2016 log_text = {<span class="keyword">...</span>
2017     <span class="string">'   Preprocessing complete.'</span>;<span class="keyword">...</span>
2018     <span class="string">'   Begin Data Processing...'</span>};
2019 statusLogging(handles.LogWindow, log_text)
2020 
2021 <span class="comment">% Process the transects:</span>
2022 <span class="comment">% ----------------------</span>
2023 A(1).hgns = guiparams.horizontal_grid_node_spacing;
2024 A(1).vgns = guiparams.vertical_grid_node_spacing;
2025 A(1).wse  = guiparams.water_surface_elevation;  <span class="comment">%Set the WSE to entered value</span>
2026 [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection,eta,start_bank)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2027     guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction,guiparams.bed_elevation,guiparams.start_bank);
2028 
2029 <span class="comment">% Compute the smoothed variables</span>
2030 <span class="comment">% ------------------------------</span>
2031 <span class="comment">% This is required so that the V struc is complete at any point during</span>
2032 <span class="comment">% runtime.</span>
2033 V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2034     <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
2035     guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2036     guiparams.vertical_smoothing_window);
2037 [V] = <a href="VMT_Vorticity.html" class="code" title="function [V] = VMT_Vorticity(V)">VMT_Vorticity</a>(V);
2038 
2039 <span class="comment">% Update V structure to include current plotting settings</span>
2040 V.version = guiparams.vmt_version{1}; V.release = guiparams.vmt_version{2};
2041 V.plotSettings.shiptracks.horizontal_grid_node_spacing = guiparams.horizontal_grid_node_spacing;
2042 V.plotSettings.shiptracks.vertical_grid_node_spacing = guiparams.vertical_grid_node_spacing;
2043 V.plotSettings.planview.depth_range_min = guiparams.depth_range_min;
2044 V.plotSettings.planview.depth_range_max = guiparams.depth_range_max;
2045 V.plotSettings.planview.vector_scale_plan_view = guiparams.vector_scale_plan_view;
2046 V.plotSettings.planview.vector_spacing_plan_view = guiparams.vector_spacing_plan_view;
2047 V.plotSettings.planview.smoothing_window_size = guiparams.smoothing_window_size;
2048 V.plotSettings.planview.plotref = guiparams.plotref;
2049 V.plotSettings.mcs.contour = guiparams.contour;
2050 V.plotSettings.mcs.vertical_exaggeration = guiparams.vertical_exaggeration;
2051 V.plotSettings.mcs.vector_scale_cross_section = guiparams.vector_scale_cross_section;
2052 V.plotSettings.mcs.horizontal_vector_spacing = guiparams.horizontal_vector_spacing;
2053 V.plotSettings.mcs.vertical_vector_spacing = guiparams.vertical_vector_spacing;
2054 V.plotSettings.mcs.horizontal_smoothing_window = guiparams.horizontal_smoothing_window;
2055 V.plotSettings.mcs.vertical_smoothing_window = guiparams.vertical_smoothing_window;
2056 V.plotSettings.mcs.plot_secondary_flow_vectors = guiparams.plot_secondary_flow_vectors;
2057 V.plotSettings.mcs.secondary_flow_vector_variable = guiparams.secondary_flow_vector_variable;
2058 V.plotSettings.mcs.include_vertical_velocity = guiparams.include_vertical_velocity;
2059 
2060 
2061 <span class="comment">% Push messages to Log Window:</span>
2062 <span class="comment">% ----------------------------</span>
2063 statusLogging(handles.LogWindow, processing_log_text)
2064 
2065 <span class="comment">% Store the data:</span>
2066 <span class="comment">% ---------------</span>
2067 guiparams.z = z;
2068 guiparams.A = A;
2069 guiparams.V = V;
2070 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2071 
2072 <span class="comment">% Push messages to Log Window:</span>
2073 <span class="comment">% ----------------------------</span>
2074 log_text = {<span class="string">'Plotting Shiptracks (reprocessing)'</span>};
2075 statusLogging(handles.LogWindow, log_text)
2076 
2077 <span class="comment">% Create or replot the Shiptracks</span>
2078 <span class="comment">% -------------------------------</span>
2079 <span class="comment">% Grab the axes to the plot</span>
2080 <span class="comment">% axes(handles.Plot1Shiptracks);</span>
2081 <a href="VMT_PlotShiptracks.html" class="code" title="function hf = VMT_PlotShiptracks(A,V,z,setends,hf)">VMT_PlotShiptracks</a>(A,V,z,guiparams.set_cross_section_endpoints,handles.Plot1Shiptracks); <span class="comment">% PLOT 1</span>
2082 
2083 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2084 <span class="comment">% New plot display window</span>
2085 <span class="comment">% h = VMT_CreatePlotDisplay('shiptracks');</span>
2086 <span class="comment">% h = figure(1); clf</span>
2087 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2088 
2089 <span class="comment">% [EOF] shiptracksPlotCallback</span>
2090 
2091 
2092 <span class="comment">% --------------------------------------------------------------------</span>
2093 <a name="_sub63" href="#_subfunctions" class="code">function planviewPlotCallback(hObject, eventdata, handles)</a>
2094 <span class="comment">% Plot 2</span>
2095 
2096 <span class="comment">% Get the Application data:</span>
2097 <span class="comment">% -------------------------</span>
2098 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2099 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2100 
2101 <span class="keyword">if</span> iscell(guiparams.mat_file) <span class="comment">% Multiple MAT files loaded</span>
2102     <span class="comment">% Push messages to Log Window:</span>
2103     <span class="comment">% ----------------------------</span>
2104     log_text = {<span class="string">'Plotting Multiple Transects (Planview)'</span>};
2105     statusLogging(handles.LogWindow, log_text)
2106     
2107        
2108     <span class="comment">% Push plotting parameters to log window:</span>
2109     <span class="comment">% ---------------------------------------</span>
2110     log_text = {<span class="keyword">...</span>
2111         <span class="string">'Plan View Plotting Parameters'</span>;<span class="keyword">...</span>
2112         sprintf(<span class="string">'   Depth range %3.1f to %3.1f m'</span>,guiparams.depth_range_min, guiparams.depth_range_max);<span class="keyword">...</span>
2113         sprintf(<span class="string">'   Vector scale: %d'</span>,guiparams.vector_scale_plan_view);<span class="keyword">...</span>
2114         sprintf(<span class="string">'   Vector spacing: %d'</span>,guiparams.vector_spacing_plan_view);<span class="keyword">...</span>
2115         sprintf(<span class="string">'   Vector spacing, in ground distance: %g m'</span>, (guiparams.vector_spacing_plan_view*guiparams.horizontal_grid_node_spacing));<span class="keyword">...</span>
2116         sprintf(<span class="string">'   Smoothing window size: %d'</span>,guiparams.smoothing_window_size);<span class="keyword">...</span>
2117         sprintf(<span class="string">'   Smoothing window size, in ground distance: %g m'</span>, (2*guiparams.smoothing_window_size*guiparams.horizontal_grid_node_spacing));<span class="keyword">...</span>
2118         };
2119     statusLogging(handles.LogWindow, log_text)
2120     
2121     <span class="comment">% Plot the data:</span>
2122     <span class="comment">% --------------</span>
2123     z = [];
2124     A = [];
2125     V = [];
2126     Map = [];
2127     depth_range = [guiparams.depth_range_min guiparams.depth_range_max];
2128     [PVdata,~,log_text] = <a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>(z,A,V,Map, <span class="keyword">...</span>
2129         depth_range, <span class="keyword">...</span>
2130         guiparams.vector_scale_plan_view, <span class="keyword">...</span>
2131         guiparams.vector_spacing_plan_view, <span class="keyword">...</span>
2132         guiparams.smoothing_window_size, <span class="keyword">...</span>
2133         guiparams.display_shoreline, <span class="keyword">...</span>
2134         guiparams.english_units, <span class="keyword">...</span>
2135         guiparams.mat_file, <span class="keyword">...</span>
2136         guiparams.mat_path, <span class="keyword">...</span>
2137         guiparams.plotref); <span class="comment">% PLOT2</span>
2138     statusLogging(handles.LogWindow, log_text)
2139     
2140     <span class="comment">% Plot a Shoreline Map:</span>
2141     <span class="comment">% ---------------------</span>
2142     <span class="keyword">if</span> guiparams.display_shoreline
2143         [guiprefs.shoreline_file,guiprefs.shoreline_path] = uigetfile(<span class="keyword">...</span>
2144             {<span class="string">'*.txt;*.csv'</span>,<span class="string">'All Text Files'</span>; <span class="string">'*.*'</span>,<span class="string">'All Files'</span>},<span class="keyword">...</span>
2145             <span class="string">'Select Map Text File'</span>,<span class="keyword">...</span>
2146             fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
2147         <span class="keyword">if</span> ischar(guiprefs.shoreline_file) <span class="comment">% User did not hit cancel</span>
2148             mapdata = dlmread(fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
2149             Map.UTMe   = mapdata(:,1);
2150             Map.UTMn   = mapdata(:,2);
2151             Map.infile = fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file);
2152             <span class="comment">%Map.UTMzone = zone;</span>
2153         <span class="keyword">else</span>
2154             Map = [];
2155         <span class="keyword">end</span>
2156         <a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>(Map)
2157         log_text = {<span class="keyword">...</span>
2158             <span class="string">'   Loading map file.'</span>;<span class="keyword">...</span>
2159             <span class="string">'   Plotting shoreline.'</span><span class="keyword">...</span>
2160             };
2161         statusLogging(handles.LogWindow, log_text)
2162     <span class="keyword">else</span>
2163         Map = [];
2164     <span class="keyword">end</span>
2165     
2166 <span class="keyword">else</span>
2167     z = guiparams.z;
2168     A = guiparams.A;
2169     <span class="comment">% V = guiparams.V;</span>
2170     Map = guiparams.Map;
2171     
2172     <span class="comment">% Push messages to Log Window:</span>
2173     <span class="comment">% ----------------------------</span>
2174     log_text = {<span class="string">'Plotting Depth Averaged Vectors (reprocessing)'</span>};
2175     statusLogging(handles.LogWindow, log_text)
2176     
2177         
2178     <span class="comment">% Preprocess the data:</span>
2179     <span class="comment">% --------------------</span>
2180     A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
2181     
2182     <span class="comment">% Process the transects:</span>
2183     <span class="comment">% ----------------------</span>
2184     A(1).hgns = guiparams.horizontal_grid_node_spacing;
2185     A(1).vgns = guiparams.vertical_grid_node_spacing;
2186     A(1).wse  = guiparams.water_surface_elevation;  <span class="comment">%Set the WSE to entered value</span>
2187     [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection,eta,start_bank)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2188     guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction,guiparams.bed_elevation,guiparams.start_bank);
2189     
2190     <span class="comment">% Compute the smoothed variables</span>
2191     <span class="comment">% ------------------------------</span>
2192     <span class="comment">% This is required so that the V struc is complete at any point during</span>
2193     <span class="comment">% runtime.</span>
2194     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2195         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
2196         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2197         guiparams.vertical_smoothing_window);
2198     [V] = <a href="VMT_Vorticity.html" class="code" title="function [V] = VMT_Vorticity(V)">VMT_Vorticity</a>(V);
2199     
2200     <span class="comment">% Push messages to Log Window:</span>
2201     <span class="comment">% ----------------------------</span>
2202     statusLogging(handles.LogWindow, processing_log_text)
2203     
2204     <span class="comment">% Plot the cross section:</span>
2205     <span class="comment">% -----------------------</span>
2206     log_text = {<span class="keyword">...</span>
2207         <span class="string">'Plan View Plotting Parameters'</span>;<span class="keyword">...</span>
2208         sprintf(<span class="string">'   Depth range %3.1f to %3.1f m'</span>,guiparams.depth_range_min, guiparams.depth_range_max);<span class="keyword">...</span>
2209         sprintf(<span class="string">'   Vector scale: %d'</span>,guiparams.vector_scale_plan_view);<span class="keyword">...</span>
2210         sprintf(<span class="string">'   Vector spacing: %d'</span>,guiparams.vector_spacing_plan_view);<span class="keyword">...</span>
2211         sprintf(<span class="string">'   Vector spacing, in ground distance: %g m'</span>, (guiparams.vector_spacing_plan_view*guiparams.horizontal_grid_node_spacing));<span class="keyword">...</span>
2212         sprintf(<span class="string">'   Smoothing window size: %d'</span>,guiparams.smoothing_window_size);<span class="keyword">...</span>
2213         sprintf(<span class="string">'   Smoothing window size, in ground distance: %g m'</span>, (2*guiparams.smoothing_window_size*guiparams.horizontal_grid_node_spacing));<span class="keyword">...</span>
2214         };
2215     statusLogging(handles.LogWindow, log_text)
2216     
2217     <span class="comment">% Plot the data:</span>
2218     <span class="comment">% --------------</span>
2219     <span class="comment">%msgbox('Plotting Plan View','VMT Status','help','replace');</span>
2220     depth_range = [guiparams.depth_range_min guiparams.depth_range_max];
2221     
2222     
2223     [PVdata,~,log_text] = <a href="VMT_PlotPlanViewQuivers.html" class="code" title="function [PVdata,fig_planview_handle,log_text] = VMT_PlotPlanViewQuivers(z,A,V,Map,drng,ascale,QuiverSpacing,pvsmwin,pshore,plot_english,varargin)">VMT_PlotPlanViewQuivers</a>(z,A,V,Map, <span class="keyword">...</span>
2224         depth_range, <span class="keyword">...</span>
2225         guiparams.vector_scale_plan_view, <span class="keyword">...</span>
2226         guiparams.vector_spacing_plan_view, <span class="keyword">...</span>
2227         guiparams.smoothing_window_size, <span class="keyword">...</span>
2228         guiparams.display_shoreline, <span class="keyword">...</span>
2229         guiparams.english_units, <span class="keyword">...</span>
2230         guiparams.mat_file, <span class="keyword">...</span>
2231         guiparams.mat_path, <span class="keyword">...</span>
2232         guiparams.plotref); <span class="comment">% PLOT2</span>
2233     statusLogging(handles.LogWindow, log_text)
2234     
2235     <span class="comment">% Plot User Set Endpoints</span>
2236     <span class="comment">% -----------------------</span>
2237     <span class="keyword">if</span> guiparams.set_cross_section_endpoints
2238         setendpoints = getpref(<span class="string">'VMT'</span>,<span class="string">'setendpoints'</span>);
2239         data = dlmread(fullfile(setendpoints.path,setendpoints.file));
2240         x = data(:,1);
2241         y = data(:,2);
2242         
2243         fh = findobj(0,<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
2244         figure(fh); hold on
2245         plot(x,y,<span class="string">'go'</span>,<span class="string">'MarkerSize'</span>,10);
2246         hold off
2247     <span class="keyword">end</span>
2248     
2249     <span class="comment">% Plot a Shoreline Map:</span>
2250     <span class="comment">% ---------------------</span>
2251     <span class="keyword">if</span> guiparams.display_shoreline
2252         [guiprefs.shoreline_file,guiprefs.shoreline_path] = uigetfile(<span class="keyword">...</span>
2253             {<span class="string">'*.txt;*.csv'</span>,<span class="string">'All Text Files'</span>; <span class="string">'*.*'</span>,<span class="string">'All Files'</span>},<span class="keyword">...</span>
2254             <span class="string">'Select Map Text File'</span>,<span class="keyword">...</span>
2255             fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
2256         <span class="keyword">if</span> ischar(guiprefs.shoreline_file) <span class="comment">% User did not hit cancel</span>
2257             mapdata = dlmread(fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file));
2258             Map.UTMe   = mapdata(:,1);
2259             Map.UTMn   = mapdata(:,2);
2260             Map.infile = fullfile(guiprefs.shoreline_path,guiprefs.shoreline_file);
2261             <span class="comment">%Map.UTMzone = zone;</span>
2262         <span class="keyword">else</span>
2263             Map = [];
2264         <span class="keyword">end</span>
2265         <a href="VMT_PlotShoreline.html" class="code" title="function VMT_PlotShoreline(Map)">VMT_PlotShoreline</a>(Map)
2266         log_text = {<span class="keyword">...</span>
2267             <span class="string">'   Loading map file.'</span>;<span class="keyword">...</span>
2268             <span class="string">'   Plotting shoreline.'</span><span class="keyword">...</span>
2269             };
2270         statusLogging(handles.LogWindow, log_text)
2271     <span class="keyword">else</span>
2272         Map = [];
2273     <span class="keyword">end</span>
2274     
2275 <span class="keyword">end</span>
2276 
2277 <span class="keyword">if</span> guiparams.add_background
2278     [guiprefs,log_text] = <a href="VMT_OverlayDOQQ.html" class="code" title="function [guiprefs,log_text] = VMT_OverlayDOQQ(guiprefs,varargin)">VMT_OverlayDOQQ</a>(guiprefs);
2279     statusLogging(handles.LogWindow, log_text)
2280 <span class="keyword">end</span>
2281 
2282 <span class="comment">% Update V structure to include current plotting settings</span>
2283 V.version = guiparams.vmt_version{1}; V.release = guiparams.vmt_version{2};
2284 V.plotSettings.shiptracks.horizontal_grid_node_spacing = guiparams.horizontal_grid_node_spacing;
2285 V.plotSettings.shiptracks.vertical_grid_node_spacing = guiparams.vertical_grid_node_spacing;
2286 V.plotSettings.planview.depth_range_min = guiparams.depth_range_min;
2287 V.plotSettings.planview.depth_range_max = guiparams.depth_range_max;
2288 V.plotSettings.planview.vector_scale_plan_view = guiparams.vector_scale_plan_view;
2289 V.plotSettings.planview.vector_spacing_plan_view = guiparams.vector_spacing_plan_view;
2290 V.plotSettings.planview.smoothing_window_size = guiparams.smoothing_window_size;
2291 V.plotSettings.planview.plotref = guiparams.plotref;
2292 V.plotSettings.mcs.contour = guiparams.contour;
2293 V.plotSettings.mcs.vertical_exaggeration = guiparams.vertical_exaggeration;
2294 V.plotSettings.mcs.vector_scale_cross_section = guiparams.vector_scale_cross_section;
2295 V.plotSettings.mcs.horizontal_vector_spacing = guiparams.horizontal_vector_spacing;
2296 V.plotSettings.mcs.vertical_vector_spacing = guiparams.vertical_vector_spacing;
2297 V.plotSettings.mcs.horizontal_smoothing_window = guiparams.horizontal_smoothing_window;
2298 V.plotSettings.mcs.vertical_smoothing_window = guiparams.vertical_smoothing_window;
2299 V.plotSettings.mcs.plot_secondary_flow_vectors = guiparams.plot_secondary_flow_vectors;
2300 V.plotSettings.mcs.secondary_flow_vector_variable = guiparams.secondary_flow_vector_variable;
2301 V.plotSettings.mcs.include_vertical_velocity = guiparams.include_vertical_velocity;
2302 
2303 <span class="comment">% Update guiparams</span>
2304 <span class="comment">% ----------------</span>
2305 guiparams.z   = z;
2306 guiparams.A   = A;
2307 guiparams.V   = V;
2308 guiparams.Map = Map;
2309 guiparams.iric_anv_planview_data = PVdata;
2310 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams);
2311 
2312 <span class="comment">% Update preferences</span>
2313 <span class="comment">% ------------------</span>
2314 setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2315 <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'shoreline'</span>)
2316 <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'aerial'</span>)
2317 
2318 <span class="comment">% Force plot to be formated properly</span>
2319 <span class="comment">% ----------------------------------</span>
2320 <span class="keyword">if</span> guiparams.presentation
2321     <a href="#_sub44" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
2322 <span class="keyword">else</span>
2323     <a href="#_sub43" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
2324 <span class="keyword">end</span>
2325 <span class="keyword">switch</span> guiparams.renderer
2326     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
2327         <a href="#_sub20" class="code" title="subfunction menuOpenGL_Callback(hObject, eventdata, handles)">menuOpenGL_Callback</a>(hObject, eventdata, handles)
2328     <span class="keyword">case</span> <span class="string">'painters'</span>
2329         <a href="#_sub21" class="code" title="subfunction menuPainters_Callback(hObject, eventdata, handles)">menuPainters_Callback</a>(hObject, eventdata, handles)
2330     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
2331         <a href="#_sub22" class="code" title="subfunction menuZbuffer_Callback(hObject, eventdata, handles)">menuZbuffer_Callback</a>(hObject, eventdata, handles)
2332 <span class="keyword">end</span>
2333 
2334 <span class="comment">% Focus the figure</span>
2335 <span class="comment">% ----------------</span>
2336 hff = findobj(<span class="string">'name'</span>,<span class="string">'Plan View Map'</span>);
2337 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
2338     figure(hff)
2339 <span class="keyword">end</span>
2340 
2341 <span class="comment">% Start the Graphics Control Gui</span>
2342 <span class="comment">% ------------------------------</span>
2343 VMT_GraphicsControl
2344 
2345 <span class="comment">% [EOF] planviewPlotCallback</span>
2346 
2347 
2348 <span class="comment">% --------------------------------------------------------------------</span>
2349 <a name="_sub64" href="#_subfunctions" class="code">function crosssectionPlotCallback(hObject, eventdata, handles)</a>
2350 <span class="comment">% Plot 3</span>
2351 
2352 <span class="comment">% Get the Application data:</span>
2353 <span class="comment">% -------------------------</span>
2354 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2355 z = guiparams.z;
2356 A = guiparams.A;
2357 <span class="comment">% V = guiparams.V;</span>
2358 <span class="comment">% Map = guiparams.Map;</span>
2359 
2360 <span class="comment">% Preprocess the data:</span>
2361 <span class="comment">% --------------------</span>
2362 A = <a href="VMT_PreProcess.html" class="code" title="function A = VMT_PreProcess(z,A)">VMT_PreProcess</a>(z,A);
2363 
2364 <span class="comment">% Push messages to Log Window:</span>
2365 <span class="comment">% ----------------------------</span>
2366 log_text = {<span class="string">'Plotting Cross Section (reprocessing)'</span>};
2367 statusLogging(handles.LogWindow, log_text)
2368 
2369 <span class="comment">% Process the transects:</span>
2370 <span class="comment">% ----------------------</span>
2371 A(1).hgns = guiparams.horizontal_grid_node_spacing;
2372 A(1).vgns = guiparams.vertical_grid_node_spacing;
2373 A(1).wse  = guiparams.water_surface_elevation;  <span class="comment">%Set the WSE to entered value</span>
2374 [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection,eta,start_bank)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2375     guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction,guiparams.bed_elevation,guiparams.start_bank);
2376 
2377 <span class="comment">% Push messages to Log Window:</span>
2378 <span class="comment">% ----------------------------</span>
2379 statusLogging(handles.LogWindow, processing_log_text)
2380 
2381 <span class="comment">% Plot the cross section:</span>
2382 <span class="comment">% -----------------------</span>
2383 log_text = {<span class="keyword">...</span>
2384     <span class="string">'Cross Section Plotting Parameters'</span>;<span class="keyword">...</span>
2385     sprintf(<span class="string">'   Contour variable: %s'</span>          ,guiparams.contours(guiparams.idx_contour).string);<span class="keyword">...</span>
2386     sprintf(<span class="string">'   Vertical exaggeration: %d'</span>     ,guiparams.vertical_exaggeration);<span class="keyword">...</span>
2387     sprintf(<span class="string">'   Vector scale: %3.1f'</span>           ,guiparams.vector_scale_cross_section);<span class="keyword">...</span>
2388     sprintf(<span class="string">'   Horizontal vector spacing: %d'</span> ,guiparams.horizontal_vector_spacing);<span class="keyword">...</span>
2389     sprintf(<span class="string">'   Horz. vector spacing, in ground distance: %g m'</span>, (guiparams.horizontal_vector_spacing*guiparams.horizontal_grid_node_spacing));<span class="keyword">...</span>
2390     sprintf(<span class="string">'   Vertical vector spacing: %d'</span>   ,guiparams.vertical_vector_spacing);<span class="keyword">...</span>
2391     sprintf(<span class="string">'   Vert. vector spacing, in ground distance: %g m'</span>, (guiparams.vertical_vector_spacing*guiparams.vertical_grid_node_spacing));<span class="keyword">...</span>
2392     sprintf(<span class="string">'   Horizontal smoothing window: %d'</span>,guiparams.horizontal_smoothing_window);<span class="keyword">...</span>
2393     sprintf(<span class="string">'   Horz. smoothing window, in ground distance: %g m'</span>, (2*guiparams.horizontal_smoothing_window*guiparams.horizontal_grid_node_spacing));<span class="keyword">...</span>
2394     sprintf(<span class="string">'   Vertical smoothing window: %d'</span> ,guiparams.vertical_smoothing_window);<span class="keyword">...</span>
2395     sprintf(<span class="string">'   Vert. smoothing window, in ground distance: %g m'</span>, (2*guiparams.vertical_smoothing_window*guiparams.vertical_grid_node_spacing));<span class="keyword">...</span>
2396     
2397     };
2398 <span class="keyword">if</span> guiparams.plot_secondary_flow_vectors
2399     log_text = vertcat(log_text, {<span class="keyword">...</span>
2400         sprintf(<span class="string">'   Vector variable: %s'</span>,guiparams.secondary_flows(guiparams.idx_secondary_flow_vector_variable).string);<span class="keyword">...</span>
2401         sprintf(<span class="string">'   Inc. vertical component?: %d'</span>,guiparams.include_vertical_velocity)<span class="keyword">...</span>
2402         });
2403 <span class="keyword">end</span>
2404 <span class="comment">% Push messages to Log Window:</span>
2405 <span class="comment">% ----------------------------</span>
2406 statusLogging(handles.LogWindow, log_text)
2407 
2408 <span class="keyword">if</span> guiparams.plot_secondary_flow_vectors
2409     <span class="comment">%msgbox('Plotting Cross Section','VMT Status','help','replace')</span>
2410 <span class="comment">%     V = VMT_SmoothVar(V, ...</span>
2411 <span class="comment">%         ...guiparams.contour, ...</span>
2412 <span class="comment">%         guiparams.horizontal_smoothing_window, ...</span>
2413 <span class="comment">%         guiparams.vertical_smoothing_window);</span>
2414     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2415         <span class="keyword">...</span><span class="comment">guiparams.secondary_flow_vector_variable, ...</span>
2416         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2417         guiparams.vertical_smoothing_window);
2418     [V] = <a href="VMT_Vorticity.html" class="code" title="function [V] = VMT_Vorticity(V)">VMT_Vorticity</a>(V);
2419     [~,A,V,guiparams.mcsQuivers,plot_cont_log_text] = <a href="VMT_PlotXSContQuiver.html" class="code" title="function [z,A,V,toquiv,log_text] = VMT_PlotXSContQuiver(z,A,V,var,sf,exag,qspchorz,qspcvert,secvecvar,vvelcomp,plot_english,allow_flux_flip,start_bank,varargin)">VMT_PlotXSContQuiver</a>(z,A,V, <span class="keyword">...</span>
2420         guiparams.contour, <span class="keyword">...</span>
2421         guiparams.vector_scale_cross_section, <span class="keyword">...</span>
2422         guiparams.vertical_exaggeration, <span class="keyword">...</span>
2423         guiparams.horizontal_vector_spacing, <span class="keyword">...</span>
2424         guiparams.vertical_vector_spacing, <span class="keyword">...</span>
2425         guiparams.secondary_flow_vector_variable, <span class="keyword">...</span>
2426         guiparams.include_vertical_velocity, <span class="keyword">...</span>
2427         guiparams.english_units,<span class="keyword">...</span>
2428         guiparams.allow_vmt_flip_flux,<span class="keyword">...</span>
2429         guiparams.start_bank); <span class="comment">%#ok&lt;ASGLU&gt; % PLOT3</span>
2430     
2431 <span class="keyword">elseif</span> ~guiparams.plot_secondary_flow_vectors
2432     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2433         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
2434         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2435         guiparams.vertical_smoothing_window);
2436     [V] = <a href="VMT_Vorticity.html" class="code" title="function [V] = VMT_Vorticity(V)">VMT_Vorticity</a>(V);
2437     [~,A,V,zmin,zmax,plot_cont_log_text] = <a href="VMT_PlotXSCont.html" class="code" title="function [z,A,V,zmin,zmax,log_text,fig_contour_handle] = VMT_PlotXSCont(z,A,V,var,exag,plot_english,allow_flux_flip,start_bank)">VMT_PlotXSCont</a>(z,A,V, <span class="keyword">...</span>
2438         guiparams.contour, <span class="keyword">...</span>
2439         guiparams.vertical_exaggeration, <span class="keyword">...</span>
2440         guiparams.english_units, <span class="keyword">...</span>
2441         guiparams.allow_vmt_flip_flux,<span class="keyword">...</span>
2442         guiparams.start_bank); <span class="comment">%#ok&lt;ASGLU&gt; % PLOT3</span>
2443     
2444     guiparams.zmin = zmin;
2445     guiparams.zmax = zmax;
2446     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2447 <span class="keyword">end</span>
2448 
2449 <span class="comment">% Force plot to be formated properly</span>
2450 <span class="comment">% ----------------------------------</span>
2451 <span class="keyword">if</span> guiparams.presentation
2452     <a href="#_sub44" class="code" title="subfunction menuStylePresentation_Callback(hObject, eventdata, handles)">menuStylePresentation_Callback</a>(hObject, eventdata, handles)
2453 <span class="keyword">else</span>
2454     <a href="#_sub43" class="code" title="subfunction menuStylePrint_Callback(hObject, eventdata, handles)">menuStylePrint_Callback</a>(hObject, eventdata, handles)
2455 <span class="keyword">end</span>
2456 <span class="keyword">switch</span> guiparams.renderer
2457     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
2458         <a href="#_sub20" class="code" title="subfunction menuOpenGL_Callback(hObject, eventdata, handles)">menuOpenGL_Callback</a>(hObject, eventdata, handles)
2459     <span class="keyword">case</span> <span class="string">'painters'</span>
2460         <a href="#_sub21" class="code" title="subfunction menuPainters_Callback(hObject, eventdata, handles)">menuPainters_Callback</a>(hObject, eventdata, handles)
2461     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
2462         <a href="#_sub22" class="code" title="subfunction menuZbuffer_Callback(hObject, eventdata, handles)">menuZbuffer_Callback</a>(hObject, eventdata, handles)
2463 <span class="keyword">end</span>
2464 
2465 <span class="comment">% Focus the figure</span>
2466 <span class="comment">% ----------------</span>
2467 hff = findobj(<span class="string">'name'</span>,<span class="string">'Mean Cross Section Contour'</span>);
2468 <span class="keyword">if</span> ~isempty(hff) &amp;&amp;  ishandle(hff)
2469     figure(hff)
2470 <span class="keyword">end</span>
2471 <span class="comment">% Update V structure to include current plotting settings</span>
2472 V.version = guiparams.vmt_version{1}; V.release = guiparams.vmt_version{2};
2473 V.plotSettings.shiptracks.horizontal_grid_node_spacing = guiparams.horizontal_grid_node_spacing;
2474 V.plotSettings.shiptracks.vertical_grid_node_spacing = guiparams.vertical_grid_node_spacing;
2475 V.plotSettings.planview.depth_range_min = guiparams.depth_range_min;
2476 V.plotSettings.planview.depth_range_max = guiparams.depth_range_max;
2477 V.plotSettings.planview.vector_scale_plan_view = guiparams.vector_scale_plan_view;
2478 V.plotSettings.planview.vector_spacing_plan_view = guiparams.vector_spacing_plan_view;
2479 V.plotSettings.planview.smoothing_window_size = guiparams.smoothing_window_size;
2480 V.plotSettings.planview.plotref = guiparams.plotref;
2481 V.plotSettings.mcs.contour = guiparams.contour;
2482 V.plotSettings.mcs.vertical_exaggeration = guiparams.vertical_exaggeration;
2483 V.plotSettings.mcs.vector_scale_cross_section = guiparams.vector_scale_cross_section;
2484 V.plotSettings.mcs.horizontal_vector_spacing = guiparams.horizontal_vector_spacing;
2485 V.plotSettings.mcs.vertical_vector_spacing = guiparams.vertical_vector_spacing;
2486 V.plotSettings.mcs.horizontal_smoothing_window = guiparams.horizontal_smoothing_window;
2487 V.plotSettings.mcs.vertical_smoothing_window = guiparams.vertical_smoothing_window;
2488 V.plotSettings.mcs.plot_secondary_flow_vectors = guiparams.plot_secondary_flow_vectors;
2489 V.plotSettings.mcs.secondary_flow_vector_variable = guiparams.secondary_flow_vector_variable;
2490 V.plotSettings.mcs.include_vertical_velocity = guiparams.include_vertical_velocity;
2491 V.plotSettings.mcs.mcsQuivers = guiparams.mcsQuivers;  <span class="comment">% Move this with the newer plotting routine update FLE 4/27/2017</span>
2492 
2493 <span class="comment">% Re-store the Application data:</span>
2494 <span class="comment">% ------------------------------</span>
2495 guiparams.V = V;
2496 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2497 
2498 <span class="comment">% Start the Graphics Control Gui</span>
2499 <span class="comment">% ------------------------------</span>
2500 VMT_GraphicsControl
2501 
2502 <span class="comment">% Push messages to Log Window:</span>
2503 <span class="comment">% ----------------------------</span>
2504 statusLogging(handles.LogWindow, plot_cont_log_text)
2505 <span class="comment">% msgbox('Plotting Complete','VMT Status','help','replace')</span>
2506 
2507 <span class="comment">% [EOF] crosssectionPlotCallback</span>
2508 
2509 
2510 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2511 <span class="comment">% DATA EXPORT CALLBACKS %</span>
2512 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2513 
2514 <span class="comment">% --------------------------------------------------------------------</span>
2515 <a name="_sub65" href="#_subfunctions" class="code">function SaveMATFile_Callback(hObject, eventdata, handles)</a>
2516 <span class="comment">% saveDataCallback(hObject, eventdata, handles)</span>
2517 
2518 <span class="comment">% Get the Application data:</span>
2519 <span class="comment">% -------------------------</span>
2520 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2521 z   = guiparams.z;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2522 A   = guiparams.A;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2523 V   = guiparams.V;   <span class="comment">%#ok&lt;NASGU&gt;</span>
2524 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
2525 
2526 [the_file,the_path] = <span class="keyword">...</span>
2527     uiputfile({<span class="string">'*.mat'</span>,<span class="string">'MAT-Files (*.mat)'</span>}, <span class="keyword">...</span>
2528     <span class="string">'Save MAT-File'</span>, <span class="keyword">...</span>
2529     fullfile(guiparams.mat_path,guiparams.savefile));
2530 
2531 <span class="comment">% Save the processed data to a MAT file:</span>
2532 <span class="comment">% --------------------------------------</span>
2533 <span class="keyword">if</span> ischar(the_file)
2534     guiparams.mat_path = the_path;
2535     guiparams.mat_file = the_file;
2536     guiparams.savefile = the_file;
2537     
2538     <span class="comment">% Re-store the Application data:</span>
2539     <span class="comment">% ------------------------------</span>
2540     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2541     
2542     <span class="comment">% Update the preferences:</span>
2543     <span class="comment">% -----------------------</span>
2544     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2545     guiprefs.mat_path = the_path;
2546     guiprefs.mat_file = the_file;
2547     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2548     <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'mat'</span>)
2549     
2550     [~,filename,extension] = fileparts(guiparams.savefile);
2551     savefile = [filename extension];
2552     h = msgbox([<span class="string">'Saving processed data in MAT File '''</span> savefile <span class="string">''''</span>], <span class="keyword">...</span>
2553         <span class="string">'Saving Processed Data File...'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
2554     disp(<span class="string">'Saving Processed Data File...'</span>)
2555     disp(savefile)
2556     save(savefile,<span class="string">'A'</span>,<span class="string">'V'</span>,<span class="string">'z'</span>,<span class="string">'Map'</span>)
2557 <span class="keyword">end</span>
2558 
2559 <span class="comment">% [EOF] SaveMATFile_Callback</span>
2560 
2561 
2562 <span class="comment">% --------------------------------------------------------------------</span>
2563 <a name="_sub66" href="#_subfunctions" class="code">function SaveTecplotFile_Callback(hObject, eventdata, handles)</a>
2564 
2565 <span class="comment">% Get the Application data:</span>
2566 <span class="comment">% -------------------------</span>
2567 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2568 <span class="comment">% z   = guiparams.z;</span>
2569 <span class="comment">% A   = guiparams.A;</span>
2570 V   = guiparams.V;
2571 <span class="comment">% Map = guiparams.Map;</span>
2572 
2573 [the_file,the_path] = <span class="keyword">...</span>
2574     uiputfile({<span class="string">'*.dat'</span>,<span class="string">'Tecplot Files (*.dat)'</span>}, <span class="keyword">...</span>
2575     <span class="string">'Save Tecplot File'</span>, <span class="keyword">...</span>
2576     fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2577 
2578 <span class="comment">% Output the data (no smoothing) to Tecplot:</span>
2579 <span class="comment">% ------------------------------------------</span>
2580 <span class="keyword">if</span> ischar(the_file)
2581     guiparams.tecplot_path = the_path;
2582     guiparams.tecplot_file = the_file;
2583     
2584     <span class="comment">% Re-store the Application data:</span>
2585     <span class="comment">% ------------------------------</span>
2586     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2587     
2588     <span class="comment">% Update the preferences:</span>
2589     <span class="comment">% -----------------------</span>
2590     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2591     guiprefs.tecplot_path = the_path;
2592     guiprefs.tecplot_file = the_file;
2593     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2594     <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'tecplot'</span>)
2595     
2596     <span class="comment">% Push to log window</span>
2597     <span class="comment">% ------------------</span>
2598     log_text = {<span class="keyword">...</span>
2599         <span class="string">'Exporting Data to Tecplot (*.dat) File...'</span>;<span class="keyword">...</span>
2600         <span class="string">'Directory:'</span>;<span class="keyword">...</span>
2601         the_path;<span class="keyword">...</span>
2602         [<span class="string">'Filename: '</span> the_file]};
2603     statusLogging(handles.LogWindow,log_text)
2604         
2605     <span class="keyword">if</span> isempty(V)
2606         A = guiparams.A;
2607         A(1).hgns = guiparams.horizontal_grid_node_spacing;
2608         A(1).vgns = guiparams.vertical_grid_node_spacing;
2609         A(1).wse  = guiparams.water_surface_elevation;  <span class="comment">%Set the WSE to entered value</span>
2610         [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection,eta,start_bank)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2611     guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction,guiparams.bed_elevation,guiparams.start_bank);
2612     <span class="keyword">end</span>
2613     <a href="VMT_BuildTecplotFile.html" class="code" title="function VMT_BuildTecplotFile(V,savefile)">VMT_BuildTecplotFile</a>(V,fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2614     
2615     <span class="comment">% Push to log window</span>
2616     <span class="comment">% ------------------</span>
2617     log_text = {<span class="string">'Exporting XS Bathy Data to Tecplot (*.dat) File...'</span>};
2618     statusLogging(handles.LogWindow,log_text)
2619     
2620     <a href="VMT_BuildTecplotFile_XSBathy.html" class="code" title="function VMT_BuildTecplot_XSBathy(V,savefile)">VMT_BuildTecplotFile_XSBathy</a>(V,fullfile(guiparams.tecplot_path,guiparams.tecplot_file));
2621     
2622     <span class="comment">% Push to log window</span>
2623     <span class="comment">% ------------------</span>
2624     log_text = {<span class="string">'Tecplot Export Complete'</span>};
2625     statusLogging(handles.LogWindow,log_text)
2626    
2627 <span class="keyword">end</span>
2628 
2629 <span class="comment">% [EOF] SaveTechplotFile_Callback</span>
2630 
2631 
2632 <span class="comment">% --------------------------------------------------------------------</span>
2633 <a name="_sub67" href="#_subfunctions" class="code">function SaveGoogleEarthFile_Callback(hObject, eventdata, handles)</a>
2634 
2635 <span class="comment">% Get the Application data:</span>
2636 <span class="comment">% -------------------------</span>
2637 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2638 <span class="comment">% z   = guiparams.z;</span>
2639 A   = guiparams.A;
2640 V   = guiparams.V;
2641 Map = guiparams.Map; <span class="comment">%#ok&lt;NASGU&gt;</span>
2642 
2643 [the_file,the_path] = <span class="keyword">...</span>
2644     uiputfile({<span class="string">'*.kmz'</span>,<span class="string">'Google Earth Files (*.kmz)'</span>}, <span class="keyword">...</span>
2645     <span class="string">'Save Google Earth File'</span>, <span class="keyword">...</span>
2646     fullfile(guiparams.kmz_path,guiparams.kmz_file));
2647 
2648 <span class="comment">% Save the processed data to a Google Earth (KMZ) file:</span>
2649 <span class="comment">% -----------------------------------------------------</span>
2650 <span class="keyword">if</span> ischar(the_file)
2651     guiparams.kmz_path = the_path;
2652     guiparams.kmz_file = the_file;
2653     
2654     <span class="comment">% Re-store the Application data:</span>
2655     <span class="comment">% ------------------------------</span>
2656     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2657     
2658     <span class="comment">% Update the preferences:</span>
2659     <span class="comment">% -----------------------</span>
2660     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2661     guiprefs.kmz_path = the_path;
2662     guiprefs.kmz_file = the_file;
2663     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2664     <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'kmz'</span>)
2665     
2666     <span class="comment">%     if guiparams.display_shoreline</span>
2667     <span class="comment">%         VMT_Shoreline2GE_3D(A,Map, ...</span>
2668     <span class="comment">%                             guiparams.vertical_exaggeration, ...</span>
2669     <span class="comment">%                             guiparams.vertical_offset);</span>
2670     <span class="comment">%     end</span>
2671     <span class="keyword">if</span> isempty(V)
2672         A = guiparams.A;
2673         A(1).hgns = guiparams.horizontal_grid_node_spacing;
2674         A(1).vgns = guiparams.vertical_grid_node_spacing;
2675         A(1).wse  = guiparams.water_surface_elevation;  <span class="comment">%Set the WSE to entered value</span>
2676         [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection,eta,start_bank)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2677     guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction,guiparams.bed_elevation,guiparams.start_bank);
2678     <span class="keyword">end</span>
2679     <a href="VMT_MeanXS2GE_3D.html" class="code" title="function VMT_MeanXS2GE_3D(A,V,pathstr,filestr,vscale,voffset)">VMT_MeanXS2GE_3D</a>(A,V,[], <span class="keyword">...</span>
2680         fullfile(guiparams.kmz_path,guiparams.kmz_file), <span class="keyword">...</span>
2681         guiparams.vertical_exaggeration, <span class="keyword">...</span>
2682         guiparams.KMZ_vertical_offset);
2683 <span class="keyword">end</span>
2684 
2685 <span class="comment">% [EOF] SaveGoogleEarthFile_Callback</span>
2686 
2687 
2688 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2689 <span class="comment">% DATA EXPORT/BATHYMETRY CALLBACKS %</span>
2690 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2691 
2692 <span class="comment">% --------------------------------------------------------------------</span>
2693 <a name="_sub68" href="#_subfunctions" class="code">function ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)</a>
2694 
2695 <span class="comment">% Get the Application data:</span>
2696 <span class="comment">% -------------------------</span>
2697 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2698 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2699 z = guiparams.z;
2700 A = guiparams.A;
2701 V = guiparams.V; <span class="comment">%#ok&lt;NASGU&gt;</span>
2702 <span class="comment">% Map = guiparams.Map;</span>
2703 setends = guiparams.set_cross_section_endpoints;
2704 
2705 [the_file,the_path] = <span class="keyword">...</span>
2706     uiputfile({<span class="string">'*.csv'</span>,<span class="string">'Multibeam Bathymetry Files (*.csv)'</span>}, <span class="keyword">...</span>
2707     <span class="string">'Export Multibeam Bathymetry'</span>, <span class="keyword">...</span>
2708     fullfile(guiprefs.multibeambathymetry_path, <span class="keyword">...</span>
2709     guiprefs.multibeambathymetry_file));
2710 
2711 <span class="keyword">if</span> ischar(the_file)
2712     guiparams.multibeambathymetry_path = the_path;
2713     guiparams.multibeambathymetry_file = the_file;
2714     
2715     <span class="comment">% Re-store the Application data:</span>
2716     <span class="comment">% ------------------------------</span>
2717     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2718     
2719     <span class="comment">% Update the preferences:</span>
2720     <span class="comment">% -----------------------</span>
2721     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
2722     guiprefs.multibeambathymetry_path = the_path;
2723     guiprefs.multibeambathymetry_file = the_file;
2724     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
2725     <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'multibeambathymetry'</span>)
2726     
2727     <span class="keyword">if</span> guiparams.output_auxiliary_data
2728     <span class="keyword">end</span>
2729     
2730     <span class="comment">%msgbox('Processing Bathymetry...Please Be Patient','VMT Status','help','replace')</span>
2731     
2732     savefile = fullfile(guiparams.multibeambathymetry_path, <span class="keyword">...</span>
2733         guiparams.multibeambathymetry_file);
2734     
2735     log_text = {<span class="string">'Multibeam bathymetry file saved to:'</span>;<span class="keyword">...</span>
2736         [<span class="string">'   '</span> savefile]};
2737     statusLogging(handles.LogWindow,log_text)
2738     
2739     <span class="comment">% Process the transects:</span>
2740     <span class="comment">% ----------------------</span>
2741     A(1).hgns = guiparams.horizontal_grid_node_spacing;
2742     A(1).vgns = guiparams.vertical_grid_node_spacing;
2743     A(1).wse  = guiparams.water_surface_elevation;  <span class="comment">%Set the WSE to entered value</span>
2744     [A,V,processing_log_text] = <a href="VMT_ProcessTransects.html" class="code" title="function [A,V,log_text] = VMT_ProcessTransects(z,A,setends,unitQcorrection,eta,start_bank)">VMT_ProcessTransects</a>(z,A,<span class="keyword">...</span>
2745     guiparams.set_cross_section_endpoints,guiparams.unit_discharge_correction,guiparams.bed_elevation,guiparams.start_bank);
2746     
2747     <span class="comment">% Compute the smoothed variables</span>
2748     <span class="comment">% ------------------------------</span>
2749     <span class="comment">% This is required so that the V struc is complete at any point during</span>
2750     <span class="comment">% runtime.</span>
2751     V = <a href="VMT_SmoothVar.html" class="code" title="function [V] = VMT_SmoothVar(V,hwin,vwin)">VMT_SmoothVar</a>(V, <span class="keyword">...</span>
2752         <span class="keyword">...</span><span class="comment">guiparams.contour, ...</span>
2753         guiparams.horizontal_smoothing_window, <span class="keyword">...</span>
2754         guiparams.vertical_smoothing_window);
2755     [V] = <a href="VMT_Vorticity.html" class="code" title="function [V] = VMT_Vorticity(V)">VMT_Vorticity</a>(V);
2756     <span class="comment">% Push messages to Log Window:</span>
2757     <span class="comment">% ----------------------------</span>
2758     statusLogging(handles.LogWindow, processing_log_text)
2759 
2760     
2761     <a href="VMT_MBBathy.html" class="code" title="function [A] = VMT_MBBathy(z,A,savefile,beamAng,magVar,wseval,saveaux)">VMT_MBBathy</a>(guiparams.z, <span class="keyword">...</span>
2762         guiparams.A, <span class="keyword">...</span>
2763         savefile, <span class="keyword">...</span>
2764         guiparams.beam_angle, <span class="keyword">...</span>
2765         guiparams.magnetic_variation, <span class="keyword">...</span>
2766         guiparams.water_surface_elevation, <span class="keyword">...</span>
2767         guiparams.output_auxiliary_data);
2768     
2769     <span class="comment">%msgbox('Bathymetry Output Complete','VMT Status','help','replace')</span>
2770     
2771 <span class="keyword">end</span>
2772 
2773 <span class="comment">% [EOF] ExportMultibeamBathymetry_Callback</span>
2774 
2775 
2776 <span class="comment">% --------------------------------------------------------------------</span>
2777 <a name="_sub69" href="#_subfunctions" class="code">function BeamAngle_Callback(hObject, eventdata, handles)</a>
2778 <span class="comment">% Get the beam angle</span>
2779 
2780 <span class="comment">% Get the Application data:</span>
2781 <span class="comment">% -------------------------</span>
2782 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2783 
2784 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2785 <span class="comment">% ----------------------------------------------------------------</span>
2786 new_beam_angle = str2double(get(hObject,<span class="string">'String'</span>));
2787 is_a_number = ~isnan(new_beam_angle);
2788 is_positive = new_beam_angle&gt;=0;
2789 
2790 <span class="comment">% Modify the Application data:</span>
2791 <span class="comment">% ----------------------------</span>
2792 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2793     guiparams.beam_angle = new_beam_angle;
2794     
2795     <span class="comment">% Re-store the Application data:</span>
2796     <span class="comment">% ------------------------------</span>
2797     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2798     
2799 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2800     set(hObject,<span class="string">'String'</span>,guiparams.beam_angle)
2801 <span class="keyword">end</span>
2802 
2803 <span class="comment">% [EOF] BeamAngle_Callback</span>
2804 
2805 
2806 <span class="comment">% --------------------------------------------------------------------</span>
2807 <a name="_sub70" href="#_subfunctions" class="code">function MagneticVariation_Callback(hObject, eventdata, handles)</a>
2808 <span class="comment">% Get the Magnetic Variation</span>
2809 
2810 <span class="comment">% Get the Application data:</span>
2811 <span class="comment">% -------------------------</span>
2812 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2813 
2814 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2815 <span class="comment">% ----------------------------------------------------------------</span>
2816 new_magnetic_variation = str2double(get(hObject,<span class="string">'String'</span>));
2817 is_a_number = ~isnan(new_magnetic_variation);
2818 is_positive = new_magnetic_variation&gt;=0;
2819 
2820 <span class="comment">% Modify the Application data:</span>
2821 <span class="comment">% ----------------------------</span>
2822 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2823     guiparams.magnetic_variation = new_magnetic_variation;
2824     
2825     <span class="comment">% Re-store the Application data:</span>
2826     <span class="comment">% ------------------------------</span>
2827     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2828     
2829 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2830     set(hObject,<span class="string">'String'</span>,guiparams.magnetic_variation)
2831 <span class="keyword">end</span>
2832 
2833 <span class="comment">% [EOF] MagneticVariation_Callback</span>
2834 
2835 
2836 <span class="comment">% % --------------------------------------------------------------------</span>
2837 <span class="comment">% function WSE_Callback(hObject, eventdata, handles)</span>
2838 <span class="comment">%</span>
2839 <span class="comment">% % Get the Application data:</span>
2840 <span class="comment">% % -------------------------</span>
2841 <span class="comment">% guiparams = getappdata(handles.figure1,'guiparams');</span>
2842 <span class="comment">%</span>
2843 <span class="comment">% % Get the new entry and make sure it is valid (numeric, positive):</span>
2844 <span class="comment">% % ----------------------------------------------------------------</span>
2845 <span class="comment">% new_wse = str2double(get(hObject,'String'));</span>
2846 <span class="comment">% is_a_number = ~isnan(new_wse);</span>
2847 <span class="comment">% is_positive = new_wse&gt;=0;</span>
2848 <span class="comment">%</span>
2849 <span class="comment">% % Modify the Application data:</span>
2850 <span class="comment">% % ----------------------------</span>
2851 <span class="comment">% if is_a_number &amp;&amp; is_positive</span>
2852 <span class="comment">%     guiparams.wse = new_wse;</span>
2853 <span class="comment">%</span>
2854 <span class="comment">%     % Re-store the Application data:</span>
2855 <span class="comment">%     % ------------------------------</span>
2856 <span class="comment">%     setappdata(handles.figure1,'guiparams',guiparams)</span>
2857 <span class="comment">%</span>
2858 <span class="comment">% else % Reject the (incorrect) input</span>
2859 <span class="comment">%     set(hObject,'String',guiparams.wse)</span>
2860 <span class="comment">% end</span>
2861 <span class="comment">%</span>
2862 <span class="comment">% % [EOF] WSE_Callback</span>
2863 
2864 
2865 <span class="comment">% --------------------------------------------------------------------</span>
2866 <a name="_sub71" href="#_subfunctions" class="code">function OutputAuxiliaryData_Callback(hObject, eventdata, handles)</a>
2867 <span class="comment">% Bathymetry Auxiliary Data</span>
2868 
2869 <span class="comment">% Get the Application data:</span>
2870 <span class="comment">% -------------------------</span>
2871 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2872 
2873 <span class="comment">% Modify the Application data:</span>
2874 <span class="comment">% ----------------------------</span>
2875 guiparams.output_auxiliary_data = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
2876 
2877 <span class="comment">% Re-store the Application data:</span>
2878 <span class="comment">% ------------------------------</span>
2879 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2880 
2881 <span class="comment">% [EOF] OutputAuxiliaryData_Callback</span>
2882 
2883 
2884 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2885 <span class="comment">% PLOTTING/PLAN VIEW PLOT CALLBACKS %</span>
2886 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
2887 
2888 <span class="comment">% --------------------------------------------------------------------</span>
2889 <a name="_sub72" href="#_subfunctions" class="code">function DepthRangeMin_Callback(hObject, eventdata, handles)</a>
2890 
2891 <span class="comment">% Get the Application data:</span>
2892 <span class="comment">% -------------------------</span>
2893 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2894 
2895 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2896 <span class="comment">% ----------------------------------------------------------------</span>
2897 new_depth_range_min = str2double(get(hObject,<span class="string">'String'</span>));
2898 is_a_number = ~isnan(new_depth_range_min);
2899 is_positive = new_depth_range_min&gt;=0;
2900 
2901 <span class="comment">% Modify the Application data:</span>
2902 <span class="comment">% ----------------------------</span>
2903 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2904     guiparams.depth_range_min = new_depth_range_min;
2905     
2906     <span class="comment">% Re-store the Application data:</span>
2907     <span class="comment">% ------------------------------</span>
2908     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2909     
2910 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2911     set(hObject,<span class="string">'String'</span>,guiparams.depth_range_min)
2912 <span class="keyword">end</span>
2913 
2914 <span class="comment">% [EOF] DepthRangeMin_Callback</span>
2915 
2916 
2917 <span class="comment">% --------------------------------------------------------------------</span>
2918 <a name="_sub73" href="#_subfunctions" class="code">function DepthRangeMax_Callback(hObject, eventdata, handles)</a>
2919 
2920 <span class="comment">% Get the Application data:</span>
2921 <span class="comment">% -------------------------</span>
2922 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2923 
2924 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2925 <span class="comment">% ----------------------------------------------------------------</span>
2926 new_depth_range_max = str2double(get(hObject,<span class="string">'String'</span>));
2927 is_a_number = ~isnan(new_depth_range_max);
2928 is_positive = new_depth_range_max&gt;=0;
2929 
2930 <span class="comment">% Modify the Application data:</span>
2931 <span class="comment">% ----------------------------</span>
2932 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2933     guiparams.depth_range_max = new_depth_range_max;
2934     
2935     <span class="comment">% Re-store the Application data:</span>
2936     <span class="comment">% ------------------------------</span>
2937     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2938     
2939 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2940     set(hObject,<span class="string">'String'</span>,guiparams.depth_range_max)
2941 <span class="keyword">end</span>
2942 
2943 <span class="comment">% [EOF] DepthMax_Callback</span>
2944 
2945 
2946 <span class="comment">% --------------------------------------------------------------------</span>
2947 <a name="_sub74" href="#_subfunctions" class="code">function VectorScalePlanView_Callback(hObject, eventdata, handles)</a>
2948 <span class="comment">% Set quiver scale (contour)</span>
2949 
2950 <span class="comment">% Get the Application data:</span>
2951 <span class="comment">% -------------------------</span>
2952 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2953 
2954 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2955 <span class="comment">% ----------------------------------------------------------------</span>
2956 new_vector_scale_plan_view = str2double(get(hObject,<span class="string">'String'</span>));
2957 is_a_number = ~isnan(new_vector_scale_plan_view);
2958 is_positive = new_vector_scale_plan_view&gt;=0;
2959 
2960 <span class="comment">% Modify the Application data:</span>
2961 <span class="comment">% ----------------------------</span>
2962 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2963     guiparams.vector_scale_plan_view = (new_vector_scale_plan_view);
2964     
2965     <span class="comment">% Re-store the Application data:</span>
2966     <span class="comment">% ------------------------------</span>
2967     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2968     
2969 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
2970     set(hObject,<span class="string">'String'</span>,guiparams.vector_scale_plan_view)
2971 <span class="keyword">end</span>
2972 
2973 <span class="comment">% [EOF] VectorScalePlanView_Callback</span>
2974 
2975 
2976 <span class="comment">% --------------------------------------------------------------------</span>
2977 <a name="_sub75" href="#_subfunctions" class="code">function VectorSpacingPlanview_Callback(hObject, eventdata, handles)</a>
2978 <span class="comment">% Set quiver spacing (contour, horizontal)</span>
2979 
2980 <span class="comment">% Get the Application data:</span>
2981 <span class="comment">% -------------------------</span>
2982 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
2983 
2984 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
2985 <span class="comment">% ----------------------------------------------------------------</span>
2986 new_vector_spacing_plan_view = str2double(get(hObject,<span class="string">'String'</span>));
2987 is_a_number = ~isnan(new_vector_spacing_plan_view);
2988 is_positive = new_vector_spacing_plan_view&gt;=0;
2989 
2990 <span class="comment">% Modify the Application data:</span>
2991 <span class="comment">% ----------------------------</span>
2992 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
2993     guiparams.vector_spacing_plan_view = round(new_vector_spacing_plan_view);
2994     
2995     <span class="comment">% Re-store the Application data:</span>
2996     <span class="comment">% ------------------------------</span>
2997     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
2998     
2999 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
3000     set(hObject,<span class="string">'String'</span>,guiparams.vector_spacing_plan_view)
3001 <span class="keyword">end</span>
3002 
3003 <span class="comment">% [EOF] VectorSpacingPlanview_Callback</span>
3004 
3005 
3006 <span class="comment">% --------------------------------------------------------------------</span>
3007 <a name="_sub76" href="#_subfunctions" class="code">function SmoothingWindowSize_Callback(hObject, eventdata, handles)</a>
3008 <span class="comment">% Plan View smoothing window size</span>
3009 
3010 <span class="comment">% Get the Application data:</span>
3011 <span class="comment">% -------------------------</span>
3012 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3013 
3014 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
3015 <span class="comment">% ----------------------------------------------------------------</span>
3016 new_smoothing_window_size = str2double(get(hObject,<span class="string">'String'</span>));
3017 is_a_number = ~isnan(new_smoothing_window_size);
3018 is_positive = new_smoothing_window_size&gt;=0;
3019 
3020 <span class="comment">% Modify the Application data:</span>
3021 <span class="comment">% ----------------------------</span>
3022 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
3023     guiparams.smoothing_window_size = round(new_smoothing_window_size);
3024     
3025     <span class="comment">% Re-store the Application data:</span>
3026     <span class="comment">% ------------------------------</span>
3027     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3028     
3029 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
3030     set(hObject,<span class="string">'String'</span>,guiparams.smoothing_window_size)
3031 <span class="keyword">end</span>
3032 
3033 <span class="comment">% [EOF] SmoothingWindowSize_Callback</span>
3034 
3035 
3036 <span class="comment">% --------------------------------------------------------------------</span>
3037 <a name="_sub77" href="#_subfunctions" class="code">function AddBackground_Callback(hObject, eventdata, handles)</a>
3038 
3039 <span class="comment">% Get the Application data:</span>
3040 <span class="comment">% -------------------------</span>
3041 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3042 
3043 <span class="comment">% Modify the Application data:</span>
3044 <span class="comment">% ----------------------------</span>
3045 guiparams.add_background = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
3046 
3047 <span class="comment">% Re-store the Application data:</span>
3048 <span class="comment">% ------------------------------</span>
3049 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3050 
3051 <span class="comment">% [EOF] AddBackground_Callback</span>
3052 
3053 
3054 <span class="comment">% --------------------------------------------------------------------</span>
3055 <a name="_sub78" href="#_subfunctions" class="code">function PlotPlanView_Callback(hObject, eventdata, handles)</a>
3056 <a href="#_sub63" class="code" title="subfunction planviewPlotCallback(hObject, eventdata, handles)">planviewPlotCallback</a>(hObject, eventdata, handles)
3057 <span class="comment">% [EOF] PlotPlanView_Callback</span>
3058 
3059 
3060 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
3061 <span class="comment">% PLOTTING/SHIP TRACKS PLOT CALLBACKS %</span>
3062 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
3063 
3064 <span class="comment">% --------------------------------------------------------------------</span>
3065 <a name="_sub79" href="#_subfunctions" class="code">function HorizontalGridNodeSpacing_Callback(hObject, eventdata, handles)</a>
3066 <span class="comment">% Set the horizontal grid node spacing</span>
3067 
3068 <span class="comment">% Get the Application data:</span>
3069 <span class="comment">% -------------------------</span>
3070 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3071 
3072 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
3073 <span class="comment">% ----------------------------------------------------------------</span>
3074 new_horizontal_grid_node_spacing = str2double(get(hObject,<span class="string">'String'</span>));
3075 is_a_number = ~isnan(new_horizontal_grid_node_spacing);
3076 is_positive = new_horizontal_grid_node_spacing&gt;=0;
3077 
3078 <span class="comment">% Modify the Application data:</span>
3079 <span class="comment">% ----------------------------</span>
3080 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
3081     guiparams.horizontal_grid_node_spacing = new_horizontal_grid_node_spacing;
3082     
3083     <span class="comment">% Re-store the Application data:</span>
3084     <span class="comment">% ------------------------------</span>
3085     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3086     
3087 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
3088     set(hObject,<span class="string">'String'</span>,guiparams.horizontal_grid_node_spacing)
3089 <span class="keyword">end</span>
3090 
3091 <span class="comment">% [EOF] HorizontalGridNodeSpacing_Callback</span>
3092 
3093 <span class="comment">% --------------------------------------------------------------------</span>
3094 <a name="_sub80" href="#_subfunctions" class="code">function VerticalGridNodeSpacing_Callback(hObject, eventdata, handles)</a>
3095 <span class="comment">% Set the horizontal grid node spacing</span>
3096 
3097 <span class="comment">% Get the Application data:</span>
3098 <span class="comment">% -------------------------</span>
3099 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3100 
3101 <span class="comment">% Get the new entry and make sure it is valid (numeric, positive):</span>
3102 <span class="comment">% ----------------------------------------------------------------</span>
3103 new_vertical_grid_node_spacing = str2double(get(hObject,<span class="string">'String'</span>));
3104 is_a_number = ~isnan(new_vertical_grid_node_spacing);
3105 is_positive = new_vertical_grid_node_spacing&gt;=0;
3106 
3107 <span class="comment">% Modify the Application data:</span>
3108 <span class="comment">% ----------------------------</span>
3109 <span class="keyword">if</span> is_a_number &amp;&amp; is_positive
3110     guiparams.vertical_grid_node_spacing = new_vertical_grid_node_spacing;
3111     
3112     <span class="comment">% Re-store the Application data:</span>
3113     <span class="comment">% ------------------------------</span>
3114     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3115     
3116 <span class="keyword">else</span> <span class="comment">% Reject the (incorrect) input</span>
3117     set(hObject,<span class="string">'String'</span>,guiparams.vertical_grid_node_spacing)
3118 <span class="keyword">end</span>
3119 
3120 <span class="comment">% [EOF] VerticalGridNodeSpacing_Callback</span>
3121 
3122 <span class="comment">% --------------------------------------------------------------------</span>
3123 <a name="_sub81" href="#_subfunctions" class="code">function SetCrossSectionEndpoints_Callback(hObject, eventdata, handles)</a>
3124 <span class="comment">% Set the cross section endpoints manually</span>
3125 
3126 <span class="comment">% Get the Application data:</span>
3127 <span class="comment">% -------------------------</span>
3128 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3129 
3130 <span class="comment">% Modify the Application data:</span>
3131 <span class="comment">% ----------------------------</span>
3132 guiparams.set_cross_section_endpoints = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
3133 
3134 <span class="comment">% Re-store the Application data:</span>
3135 <span class="comment">% ------------------------------</span>
3136 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3137 
3138 <span class="comment">% [EOF] SetCrossSectionEndpoints_Callback</span>
3139 
3140 
3141 <span class="comment">% --------------------------------------------------------------------</span>
3142 <a name="_sub82" href="#_subfunctions" class="code">function PlotShiptracks_Callback(hObject, eventdata, handles)</a>
3143 <a href="#_sub62" class="code" title="subfunction shiptracksPlotCallback(hObject, eventdata, handles)">shiptracksPlotCallback</a>(hObject, eventdata, handles)
3144 <span class="comment">% [EOF] PlotShiptracks_Callback</span>
3145 
3146 
3147 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
3148 <span class="comment">% PLOTTING/CROSS SECTION PLOT CALLBACKS %</span>
3149 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
3150 
3151 <span class="comment">% --------------------------------------------------------------------</span>
3152 <a name="_sub83" href="#_subfunctions" class="code">function Contour_Callback(hObject, eventdata, handles)</a>
3153 
3154 <span class="comment">% Get the Application data:</span>
3155 <span class="comment">% -------------------------</span>
3156 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3157 
3158 <span class="comment">% Modify the Application data:</span>
3159 <span class="comment">% ----------------------------</span>
3160 idx_variable = get(hObject,<span class="string">'Value'</span>);
3161 guiparams.idx_contour = idx_variable;
3162 guiparams.contour = guiparams.contours(idx_variable).variable;
3163 
3164 <span class="comment">% Re-store the Application data:</span>
3165 <span class="comment">% ------------------------------</span>
3166 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3167 
3168 <span class="comment">% [EOF] Contour_Callback</span>
3169 
3170 
3171 <span class="comment">% --------------------------------------------------------------------</span>
3172 <a name="_sub84" href="#_subfunctions" class="code">function VerticalExaggeration_Callback(hObject, eventdata, handles)</a>
3173 <span class="comment">% Set vertical exaggeration</span>
3174 
3175 <span class="comment">% Get the Application data:</span>
3176 <span class="comment">% -------------------------</span>
3177 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3178 
3179 <span class="comment">% Modify the Application data:</span>
3180 <span class="comment">% ----------------------------</span>
3181 guiparams.vertical_exaggeration = str2double(get(hObject,<span class="string">'String'</span>));
3182 
3183 <span class="comment">% Re-store the Application data:</span>
3184 <span class="comment">% ------------------------------</span>
3185 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3186 
3187 <span class="comment">% Update the GUI:</span>
3188 <span class="comment">% ---------------</span>
3189 <span class="comment">% updateGUI(handles,guiparams)</span>
3190 
3191 <span class="comment">% [EOF] VerticalExaggeration_Callback</span>
3192 
3193 
3194 <span class="comment">% --------------------------------------------------------------------</span>
3195 <a name="_sub85" href="#_subfunctions" class="code">function VectorScaleCrossSection_Callback(hObject, eventdata, handles)</a>
3196 
3197 <span class="comment">% Get the Application data:</span>
3198 <span class="comment">% -------------------------</span>
3199 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3200 
3201 <span class="comment">% Modify the Application data:</span>
3202 <span class="comment">% ----------------------------</span>
3203 guiparams.vector_scale_cross_section = str2double(get(hObject,<span class="string">'String'</span>));
3204 
3205 <span class="comment">% Re-store the Application data:</span>
3206 <span class="comment">% ------------------------------</span>
3207 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3208 
3209 <span class="comment">% Update the GUI:</span>
3210 <span class="comment">% ---------------</span>
3211 <span class="comment">% updateGUI(handles,guiparams)</span>
3212 
3213 <span class="comment">% [EOF] VectorScaleCrossSection_Callback</span>
3214 
3215 
3216 <span class="comment">% --------------------------------------------------------------------</span>
3217 <a name="_sub86" href="#_subfunctions" class="code">function HorizontalVectorSpacing_Callback(hObject, eventdata, handles)</a>
3218 
3219 <span class="comment">% Get the Application data:</span>
3220 <span class="comment">% -------------------------</span>
3221 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3222 
3223 <span class="comment">% Modify the Application data:</span>
3224 <span class="comment">% ----------------------------</span>
3225 guiparams.horizontal_vector_spacing = str2double(get(hObject,<span class="string">'String'</span>));
3226 
3227 <span class="comment">% Re-store the Application data:</span>
3228 <span class="comment">% ------------------------------</span>
3229 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3230 
3231 <span class="comment">% Update the GUI:</span>
3232 <span class="comment">% ---------------</span>
3233 <span class="comment">% updateGUI(handles,guiparams)</span>
3234 
3235 <span class="comment">% [EOF] HorizontalVectorSpacing_Callback</span>
3236 
3237 
3238 <span class="comment">% --------------------------------------------------------------------</span>
3239 <a name="_sub87" href="#_subfunctions" class="code">function VerticalVectorSpacing_Callback(hObject, eventdata, handles)</a>
3240 <span class="comment">% Get the vertical quiver spacing for contour plots</span>
3241 
3242 <span class="comment">% Get the Application data:</span>
3243 <span class="comment">% -------------------------</span>
3244 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3245 
3246 <span class="comment">% Modify the Application data:</span>
3247 <span class="comment">% ----------------------------</span>
3248 guiparams.vertical_vector_spacing = str2double(get(hObject,<span class="string">'String'</span>));
3249 
3250 <span class="comment">% Re-store the Application data:</span>
3251 <span class="comment">% ------------------------------</span>
3252 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3253 
3254 <span class="comment">% Update the GUI:</span>
3255 <span class="comment">% ---------------</span>
3256 <span class="comment">% updateGUI(handles,guiparams)</span>
3257 
3258 <span class="comment">% [EOF] VerticalVectorSpacing_Callback</span>
3259 
3260 
3261 <span class="comment">% --------------------------------------------------------------------</span>
3262 <a name="_sub88" href="#_subfunctions" class="code">function HorizontalSmoothingWindow_Callback(hObject, eventdata, handles)</a>
3263 <span class="comment">% Horizontal Smoothing</span>
3264 
3265 <span class="comment">% Get the Application data:</span>
3266 <span class="comment">% -------------------------</span>
3267 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3268 
3269 <span class="comment">% Modify the Application data:</span>
3270 <span class="comment">% ----------------------------</span>
3271 guiparams.horizontal_smoothing_window = str2double(get(hObject,<span class="string">'String'</span>));
3272 
3273 <span class="comment">% Re-store the Application data:</span>
3274 <span class="comment">% ------------------------------</span>
3275 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3276 
3277 <span class="comment">% Update the GUI:</span>
3278 <span class="comment">% ---------------</span>
3279 <span class="comment">% updateGUI(handles,guiparams)</span>
3280 
3281 <span class="comment">% [EOF] HorizontalSmoothingWindow_Callback</span>
3282 
3283 
3284 <span class="comment">% --------------------------------------------------------------------</span>
3285 <a name="_sub89" href="#_subfunctions" class="code">function VerticalSmoothingWindow_Callback(hObject, eventdata, handles)</a>
3286 <span class="comment">% Vertical Smoothing</span>
3287 
3288 <span class="comment">% Get the Application data:</span>
3289 <span class="comment">% -------------------------</span>
3290 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3291 
3292 <span class="comment">% Modify the Application data:</span>
3293 <span class="comment">% ----------------------------</span>
3294 guiparams.vertical_smoothing_window = str2double(get(hObject,<span class="string">'String'</span>));
3295 
3296 <span class="comment">% Re-store the Application data:</span>
3297 <span class="comment">% ------------------------------</span>
3298 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3299 
3300 <span class="comment">% Update the GUI:</span>
3301 <span class="comment">% ---------------</span>
3302 <span class="comment">% updateGUI(handles,guiparams)</span>
3303 
3304 <span class="comment">% [EOF] VerticalSmoothingWindow_Callback</span>
3305 
3306 
3307 <span class="comment">% --------------------------------------------------------------------</span>
3308 <a name="_sub90" href="#_subfunctions" class="code">function PlotSecondaryFlowVectors_Callback(hObject, eventdata, handles)</a>
3309 
3310 <span class="comment">% Get the Application data:</span>
3311 <span class="comment">% -------------------------</span>
3312 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3313 
3314 <span class="comment">% Modify the Application data:</span>
3315 <span class="comment">% ----------------------------</span>
3316 guiparams.plot_secondary_flow_vectors = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
3317 
3318 <span class="comment">% Re-store the Application data:</span>
3319 <span class="comment">% ------------------------------</span>
3320 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3321 
3322 <span class="comment">% [EOF] PlotSecondaryFlowVectors_Callback</span>
3323 
3324 
3325 <span class="comment">% --------------------------------------------------------------------</span>
3326 <a name="_sub91" href="#_subfunctions" class="code">function SecondaryFlowVectorVariable_Callback(hObject, eventdata, handles)</a>
3327 
3328 <span class="comment">% Get the Application data:</span>
3329 <span class="comment">% -------------------------</span>
3330 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3331 
3332 <span class="comment">% Modify the Application data:</span>
3333 <span class="comment">% ----------------------------</span>
3334 idx_variable = get(hObject,<span class="string">'Value'</span>);
3335 guiparams.idx_secondary_flow_vector_variable = idx_variable;
3336 guiparams.secondary_flow_vector_variable = guiparams.secondary_flows(idx_variable).variable;
3337 
3338 <span class="comment">% Re-store the Application data:</span>
3339 <span class="comment">% ------------------------------</span>
3340 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3341 
3342 <span class="comment">% [EOF] SecondaryFlowVectorVariable_Callback</span>
3343 
3344 
3345 <span class="comment">% --------------------------------------------------------------------</span>
3346 <a name="_sub92" href="#_subfunctions" class="code">function IncludeVerticalVelocity_Callback(hObject, eventdata, handles)</a>
3347 
3348 <span class="comment">% Get the Application data:</span>
3349 <span class="comment">% -------------------------</span>
3350 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3351 
3352 <span class="comment">% Modify the Application data:</span>
3353 <span class="comment">% ----------------------------</span>
3354 guiparams.include_vertical_velocity = logical(get(hObject,<span class="string">'Value'</span>)); <span class="comment">% boolean</span>
3355 
3356 <span class="comment">% Re-store the Application data:</span>
3357 <span class="comment">% ------------------------------</span>
3358 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3359 
3360 <span class="comment">% [EOF] IncludeVerticalVelocity_Callback</span>
3361 
3362 
3363 <span class="comment">% --------------------------------------------------------------------</span>
3364 <a name="_sub93" href="#_subfunctions" class="code">function PlotCrossSection_Callback(hObject, eventdata, handles)</a>
3365 <a href="#_sub64" class="code" title="subfunction crosssectionPlotCallback(hObject, eventdata, handles)">crosssectionPlotCallback</a>(hObject, eventdata, handles)
3366 <span class="comment">% [EOF] PlotCrossSection_Callback</span>
3367 
3368 
3369 <span class="comment">% --------------------------------------------------------------------</span>
3370 <a name="_sub94" href="#_subfunctions" class="code">function ClearLog_Callback(hObject, eventdata, handles)</a>
3371 set(handles.LogWindow,<span class="string">'string'</span>,<span class="string">''</span>)
3372 <span class="comment">% [EOF] ClearLog_Callback</span>
3373 
3374 <span class="comment">% --------------------------------------------------------------------</span>
3375 <a name="_sub95" href="#_subfunctions" class="code">function SaveLog_Callback(hObject, eventdata, handles)</a>
3376 
3377 <span class="comment">% Get the Application data:</span>
3378 <span class="comment">% -------------------------</span>
3379 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3380 guiprefs  = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
3381 <span class="comment">% z   = guiparams.z;   %#ok&lt;NASGU&gt;</span>
3382 <span class="comment">% A   = guiparams.A;   %#ok&lt;NASGU&gt;</span>
3383 <span class="comment">% V   = guiparams.V;   %#ok&lt;NASGU&gt;</span>
3384 <span class="comment">% Map = guiparams.Map; %#ok&lt;NASGU&gt;</span>
3385 
3386 [the_file,the_path] = <span class="keyword">...</span>
3387     uiputfile({<span class="string">'*.txt'</span>,<span class="string">'TXT-Files (*.txt)'</span>}, <span class="keyword">...</span>
3388     <span class="string">'Choose where to save the log file'</span>, <span class="keyword">...</span>
3389     fullfile(guiprefs.log_path,guiprefs.log_file));
3390 
3391 <span class="comment">% Save the log to a TXT file:</span>
3392 <span class="comment">% ---------------------------</span>
3393 <span class="keyword">if</span> ischar(the_file)
3394     guiparams.log_path = the_path;
3395     guiparams.log_file = the_file;
3396     <span class="comment">%guiparams.savefile = the_file;</span>
3397     
3398     <span class="comment">% Re-store the Application data:</span>
3399     <span class="comment">% ------------------------------</span>
3400     setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
3401     
3402     <span class="comment">% Update the preferences:</span>
3403     <span class="comment">% -----------------------</span>
3404     guiprefs = getappdata(handles.figure1,<span class="string">'guiprefs'</span>);
3405     guiprefs.log_path = the_path;
3406     guiprefs.log_file = the_file;
3407     setappdata(handles.figure1,<span class="string">'guiprefs'</span>,guiprefs)
3408     <a href="#_sub98" class="code" title="subfunction store_prefs(hfigure,pref)">store_prefs</a>(handles.figure1,<span class="string">'log'</span>)
3409     
3410     [~,filename,extension] = fileparts(the_file);
3411     savefile = [the_path filename extension];
3412     h = msgbox([<span class="string">'Saving log to: '''</span> savefile <span class="string">''''</span>], <span class="keyword">...</span>
3413         <span class="string">'Saving Log File...'</span>); <span class="comment">%#ok&lt;NASGU&gt;</span>
3414     
3415     logfile = get(handles.LogWindow,<span class="string">'string'</span>);
3416     [nrows,~]= size(logfile);
3417     fid = fopen(savefile, <span class="string">'w'</span>);
3418     <span class="keyword">for</span> row=1:nrows
3419         fprintf(fid, <span class="string">'%s \n'</span>, logfile{row,:});
3420     <span class="keyword">end</span>
3421     fclose(fid);
3422 <span class="keyword">end</span>
3423 <span class="comment">% [EOF] SaveLog_Callback</span>
3424 
3425 <span class="comment">%%%%%%%%%%%%%%%%</span>
3426 <span class="comment">% SUBFUNCTIONS %</span>
3427 <span class="comment">%%%%%%%%%%%%%%%%</span>
3428 
3429 <span class="comment">% --------------------------------------------------------------------</span>
3430 <a name="_sub96" href="#_subfunctions" class="code">function handles = buildToolbar(handles)</a>
3431 
3432 icons = <a href="#_sub112" class="code" title="subfunction icons = getIcons">getIcons</a>;
3433 ht = uitoolbar(<span class="string">'Parent'</span>,handles.figure1);
3434 
3435 <span class="comment">% Load data</span>
3436 <span class="comment">% icon = imread('C:\Users\pfricker\Desktop\icons\file_open.png');</span>
3437 <span class="comment">% icon = double(icon)/(2^16-1);</span>
3438 <span class="comment">% icon(icon==0) = NaN;</span>
3439 handles.toolbarLoadData = <span class="keyword">...</span>
3440     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3441     <span class="string">'CData'</span>,        icons(1).data, <span class="keyword">...</span>
3442     <span class="string">'TooltipString'</span>,<span class="string">'Open ASCII File'</span>);
3443 
3444 <span class="comment">% Save data</span>
3445 <span class="comment">% icon = imread('C:\Users\pfricker\Desktop\icons\file_save.png');</span>
3446 <span class="comment">% icon = double(icon)/(2^16-1);</span>
3447 <span class="comment">% icon(icon==0) = NaN;</span>
3448 handles.toolbarSaveMatFile = <span class="keyword">...</span>
3449     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3450     <span class="string">'CData'</span>,        icons(2).data, <span class="keyword">...</span>
3451     <span class="string">'TooltipString'</span>,<span class="string">'Save MAT File'</span>, <span class="keyword">...</span>
3452     <span class="string">'Separator'</span>,    <span class="string">'on'</span>);
3453 
3454 
3455 <span class="comment">% Save bathymetry</span>
3456 <span class="comment">%icon = ones(16,16,3);</span>
3457 handles.toolbarSaveBathymetry = <span class="keyword">...</span>
3458     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3459     <span class="string">'CData'</span>,        icons(5).data, <span class="keyword">...</span>
3460     <span class="string">'TooltipString'</span>,<span class="string">'Export Bathymetry'</span>);
3461 
3462 <span class="comment">% Save figures</span>
3463 <span class="comment">% icon = ones(16,16,3);</span>
3464 handles.toolbarSaveFigures = <span class="keyword">...</span>
3465     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3466     <span class="string">'CData'</span>,        icons(6).data, <span class="keyword">...</span>
3467     <span class="string">'TooltipString'</span>,<span class="string">'Export Figures'</span>);
3468 
3469 <span class="comment">% Save Excel File</span>
3470 <span class="comment">% icon = ones(16,16,3);</span>
3471 handles.toolbarSaveExcel = <span class="keyword">...</span>
3472     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3473     <span class="string">'CData'</span>,        icons(7).data, <span class="keyword">...</span>
3474     <span class="string">'TooltipString'</span>,<span class="string">'Export Excel File'</span>);
3475 
3476 
3477 <span class="comment">% Plotting parameters</span>
3478 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\PlotGeneralElement.gif');</span>
3479 <span class="comment">% icon = ind2rgb(icon,map);</span>
3480 handles.toolbarPlottingParameters = <span class="keyword">...</span>
3481     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3482     <span class="string">'CData'</span>,        icons(3).data, <span class="keyword">...</span>
3483     <span class="string">'TooltipString'</span>,<span class="string">'Plotting Parameters'</span>, <span class="keyword">...</span>
3484     <span class="string">'Separator'</span>,    <span class="string">'on'</span>);
3485 
3486 <span class="comment">% Processing parameters</span>
3487 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3488 <span class="comment">% icon = ind2rgb(icon,map);</span>
3489 handles.toolbarProcessingParameters = <span class="keyword">...</span>
3490     uipushtool(<span class="string">'Parent'</span>,       ht, <span class="keyword">...</span>
3491     <span class="string">'CData'</span>,        icons(4).data, <span class="keyword">...</span>
3492     <span class="string">'TooltipString'</span>,<span class="string">'Processing Parameters'</span>);
3493 
3494 <span class="comment">% Zoom In</span>
3495 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3496 <span class="comment">% icon = ind2rgb(icon,map);</span>
3497 <span class="comment">% handles.toolbarZoomIn = ...</span>
3498 <span class="comment">%     uitoggletool('Parent',       ht, ...</span>
3499 <span class="comment">%     'CData',        icons(8).data, ...</span>
3500 <span class="comment">%     'TooltipString','Zoom In (Shiptracks)', ...</span>
3501 <span class="comment">%     'Separator',     'on');</span>
3502 
3503 <span class="comment">% Zoom Out</span>
3504 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3505 <span class="comment">% icon = ind2rgb(icon,map);</span>
3506 <span class="comment">% handles.toolbarZoomOut = ...</span>
3507 <span class="comment">%     uitoggletool('Parent',       ht, ...</span>
3508 <span class="comment">%     'CData',        icons(9).data, ...</span>
3509 <span class="comment">%     'TooltipString','Zoom Out (Shiptracks)');</span>
3510 
3511 <span class="comment">% Pan</span>
3512 <span class="comment">% [icon,map] = imread('C:\Users\pfricker\Desktop\icons\ParameterIcon.gif');</span>
3513 <span class="comment">% icon = ind2rgb(icon,map);</span>
3514 <span class="comment">% handles.toolbarPan = ...</span>
3515 <span class="comment">%     uipushtool('Parent',       ht, ...</span>
3516 <span class="comment">%     'CData',        icons(10).data, ...</span>
3517 <span class="comment">%     'TooltipString','Pan (Shiptracks)');</span>
3518 
3519 
3520 
3521 set(handles.toolbarLoadData,            <span class="string">'ClickedCallback'</span>,{@<a href="#_sub57" class="code" title="subfunction loadDataCallback(hObject, eventdata, handles)">loadDataCallback</a>,handles})
3522 set(handles.toolbarSaveMatFile,         <span class="string">'ClickedCallback'</span>,{@<a href="#_sub58" class="code" title="subfunction saveDataCallback(hObject, eventdata, handles)">saveDataCallback</a>,handles})
3523 set(handles.toolbarSaveBathymetry,      <span class="string">'ClickedCallback'</span>,{@<a href="#_sub68" class="code" title="subfunction ExportMultibeamBathymetry_Callback(hObject, eventdata, handles)">ExportMultibeamBathymetry_Callback</a>,handles})
3524 set(handles.toolbarSaveFigures,         <span class="string">'ClickedCallback'</span>,{@<a href="#_sub23" class="code" title="subfunction menuExportFigures_Callback(hObject, eventdata, handles)">menuExportFigures_Callback</a>,handles})
3525 set(handles.toolbarSaveExcel,           <span class="string">'ClickedCallback'</span>,{@<a href="#_sub28" class="code" title="subfunction menuSaveExcel_Callback(hObject, eventdata, handles)">menuSaveExcel_Callback</a>,handles})
3526 set(handles.toolbarPlottingParameters,  <span class="string">'ClickedCallback'</span>,{@<a href="#_sub60" class="code" title="subfunction plottingParametersCallback(hObject, eventdata, handles)">plottingParametersCallback</a>,handles})
3527 set(handles.toolbarProcessingParameters,<span class="string">'ClickedCallback'</span>,{@<a href="#_sub61" class="code" title="subfunction processingParametersCallback(hObject, eventdata, handles)">processingParametersCallback</a>,handles})
3528 <span class="comment">% set(handles.toolbarZoomIn,              'ClickedCallback',{@ShiptracksZoom_Callback,handles})</span>
3529 <span class="comment">% set(handles.toolbarZoomOut,              'ClickedCallback',{@ShiptracksZoom_Callback,handles})</span>
3530 <span class="comment">% set(handles.toolbarPan,              'ClickedCallback',{@ShiptracksPan_Callback,handles})</span>
3531 <span class="comment">% set(handles.planviewPlot,        'ClickedCallback',{@planviewPlotCallback,handles})</span>
3532 <span class="comment">% set(handles.crosssectionPlot,    'ClickedCallback',{@crosssectionPlotCallback,handles})</span>
3533 
3534 <span class="comment">% [EOF] buildtoolbar</span>
3535 
3536 
3537 <span class="comment">% --------------------------------------------------------------------</span>
3538 <a name="_sub97" href="#_subfunctions" class="code">function load_prefs(hfigure)</a>
3539 <span class="comment">% Load the GUI preferences.  Also, initialize preferences if they don't</span>
3540 <span class="comment">% already exist.</span>
3541 
3542 <span class="comment">% Preferences:</span>
3543 <span class="comment">% 'ascii'                Path and filenames of current ASCII files</span>
3544 <span class="comment">% 'mat'                  Path and filename of current MAT file</span>
3545 <span class="comment">% 'tecplot'              Path and filename of last Tecplot file</span>
3546 <span class="comment">% 'kmz'                  Path and filename of last KMZ file</span>
3547 <span class="comment">% 'multibeambathymetry'  Path and filename of last Multibeam Bathymetry file</span>
3548 <span class="comment">% 'log'                  Path and filename of last Log file</span>
3549 <span class="comment">% 'iric'                 Path and filename of last iRic ANV file</span>
3550 <span class="comment">% 'excel'                Path and filename of last Excel file</span>
3551 <span class="comment">% 'aerial'               Path and filename of last Aerial file</span>
3552 <span class="comment">% 'shoreline'            Path and filename of last Shoreline file</span>
3553 <span class="comment">% 'renderer'             Default graphics renderer</span>
3554 <span class="comment">% 'units'                Default plotting units</span>
3555 <span class="comment">% 'plotref'              Default plotting vertical reference</span>
3556 <span class="comment">% 'runcounter'           Keeps a running tally of how many times VMT is</span>
3557 <span class="comment">%                        started</span>
3558 <span class="comment">% 'setendpoints'         Path and filename of user set endpoints</span>
3559 
3560 <span class="comment">% Originals</span>
3561 <span class="comment">% prefs = {'ascii2gispath' 'ascii2kmlpath' 'asciipath'   'doqqpath' ...</span>
3562 <span class="comment">%          'endspath'      'logpath'       'matpath'     'savedpath' ...</span>
3563 <span class="comment">%          'shorepath'     'stapath'       'ysidatapath' 'ysidatapath'};</span>
3564 
3565 <span class="comment">% ASCII</span>
3566 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>)
3567     ascii = getpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>);
3568     <span class="keyword">if</span> exist(ascii.path,<span class="string">'dir'</span>)
3569         guiprefs.ascii_path = ascii.path;
3570     <span class="keyword">else</span>
3571         guiprefs.ascii_path = pwd;
3572     <span class="keyword">end</span>
3573     does_exist = false(1,length(ascii.file));
3574     <span class="keyword">for</span> k = 1:length(ascii.file) <span class="comment">% Check each file one-by-one</span>
3575         does_exist(k) = exist(fullfile(ascii.path,ascii.file{k}),<span class="string">'file'</span>);
3576     <span class="keyword">end</span>
3577     <span class="keyword">if</span> any(does_exist)
3578         guiprefs.ascii_file = ascii.file(does_exist);
3579     <span class="keyword">else</span>
3580         guiprefs.ascii_file = {<span class="string">''</span>};
3581     <span class="keyword">end</span>
3582 <span class="keyword">else</span> <span class="comment">% Initialize ASCII</span>
3583     guiprefs.ascii_path = pwd;
3584     guiprefs.ascii_file = {<span class="string">''</span>};
3585     
3586     ascii.path = pwd;
3587     ascii.file = {<span class="string">''</span>};
3588     setpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>,ascii)
3589 <span class="keyword">end</span>
3590 
3591 <span class="comment">% MAT</span>
3592 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>)
3593     mat = getpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>);
3594     <span class="keyword">if</span> exist(mat.path,<span class="string">'dir'</span>)
3595         guiprefs.mat_path = mat.path;
3596     <span class="keyword">else</span>
3597         guiprefs.mat_path = pwd;
3598     <span class="keyword">end</span>
3599     
3600     <span class="keyword">if</span> iscell(mat.file)
3601         <span class="keyword">if</span> exist(fullfile(mat.path,mat.file{1}),<span class="string">'file'</span>)
3602             guiprefs.mat_file = mat.file;
3603         <span class="keyword">else</span>
3604             guiprefs.mat_file = <span class="string">''</span>;
3605         <span class="keyword">end</span>
3606     <span class="keyword">else</span>
3607         <span class="keyword">if</span> exist(fullfile(mat.path,mat.file),<span class="string">'file'</span>)
3608             guiprefs.mat_file = mat.file;
3609         <span class="keyword">else</span>
3610             guiprefs.mat_file = <span class="string">''</span>;
3611         <span class="keyword">end</span>
3612     <span class="keyword">end</span>
3613 <span class="keyword">else</span> <span class="comment">% Initialize MAT</span>
3614     guiprefs.mat_path = pwd;
3615     guiprefs.mat_file = <span class="string">''</span>;
3616     
3617     mat.path = pwd;
3618     mat.file = <span class="string">''</span>;
3619     setpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>,mat)
3620 <span class="keyword">end</span>
3621 
3622 <span class="comment">% TECPLOT</span>
3623 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>)
3624     tecplot = getpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>);
3625     <span class="keyword">if</span> exist(tecplot.path,<span class="string">'dir'</span>)
3626         guiprefs.tecplot_path = tecplot.path;
3627     <span class="keyword">else</span>
3628         guiprefs.tecplot_path = pwd;
3629     <span class="keyword">end</span>
3630     <span class="keyword">if</span> exist(fullfile(tecplot.path,tecplot.file),<span class="string">'file'</span>)
3631         guiprefs.tecplot_file = tecplot.file;
3632     <span class="keyword">else</span>
3633         guiprefs.tecplot_file = <span class="string">''</span>;
3634     <span class="keyword">end</span>
3635 <span class="keyword">else</span> <span class="comment">% Initialize TECPLOT</span>
3636     guiprefs.tecplot_path = pwd;
3637     guiprefs.tecplot_file = <span class="string">''</span>;
3638     
3639     tecplot.path = pwd;
3640     tecplot.file = <span class="string">''</span>;
3641     setpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>,tecplot)
3642 <span class="keyword">end</span>
3643 
3644 <span class="comment">% KMZ</span>
3645 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>)
3646     kmz = getpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>);
3647     <span class="keyword">if</span> exist(kmz.path,<span class="string">'dir'</span>)
3648         guiprefs.kmz_path = kmz.path;
3649     <span class="keyword">else</span>
3650         guiprefs.kmz_path = pwd;
3651     <span class="keyword">end</span>
3652     <span class="keyword">if</span> exist(fullfile(kmz.path,kmz.file),<span class="string">'file'</span>)
3653         guiprefs.kmz_file = kmz.file;
3654     <span class="keyword">else</span>
3655         guiprefs.kmz_file = <span class="string">''</span>;
3656     <span class="keyword">end</span>
3657 <span class="keyword">else</span> <span class="comment">% Initialize KMZ</span>
3658     guiprefs.kmz_path = pwd;
3659     guiprefs.kmz_file = <span class="string">''</span>;
3660     
3661     kmz.path = pwd;
3662     kmz.file = <span class="string">''</span>;
3663     setpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>,kmz)
3664 <span class="keyword">end</span>
3665 
3666 <span class="comment">% MULTIBEAM BATHYMETRY</span>
3667 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>)
3668     multibeambathymetry = getpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>);
3669     <span class="keyword">if</span> exist(multibeambathymetry.path,<span class="string">'dir'</span>)
3670         guiprefs.multibeambathymetry_path = multibeambathymetry.path;
3671     <span class="keyword">else</span>
3672         guiprefs.multibeambathymetry_path = pwd;
3673     <span class="keyword">end</span>
3674     <span class="keyword">if</span> exist(fullfile(multibeambathymetry.path,multibeambathymetry.file),<span class="string">'file'</span>)
3675         guiprefs.multibeambathymetry_file = multibeambathymetry.file;
3676     <span class="keyword">else</span>
3677         guiprefs.multibeambathymetry_file = <span class="string">''</span>;
3678     <span class="keyword">end</span>
3679 <span class="keyword">else</span> <span class="comment">% Initialize MULTIBEAM BATHYMETRY</span>
3680     guiprefs.multibeambathymetry_path = pwd;
3681     guiprefs.multibeambathymetry_file = <span class="string">''</span>;
3682     
3683     multibeambathymetry.path = pwd;
3684     multibeambathymetry.file = <span class="string">''</span>;
3685     setpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>,multibeambathymetry)
3686 <span class="keyword">end</span>
3687 
3688 <span class="comment">% Log</span>
3689 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'log'</span>)
3690     log = getpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>);
3691     <span class="keyword">if</span> exist(log.path,<span class="string">'dir'</span>)
3692         guiprefs.log_path = log.path;
3693     <span class="keyword">else</span>
3694         guiprefs.log_path = pwd;
3695     <span class="keyword">end</span>
3696     <span class="keyword">if</span> exist(fullfile(log.path,log.file),<span class="string">'file'</span>)
3697         guiprefs.log_file = log.file;
3698     <span class="keyword">else</span>
3699         guiprefs.log_file = <span class="string">''</span>;
3700     <span class="keyword">end</span>
3701 <span class="keyword">else</span> <span class="comment">% Initialize Log</span>
3702     guiprefs.log_path = pwd;
3703     guiprefs.log_file = <span class="string">''</span>;
3704     
3705     log.path = pwd;
3706     log.file = <span class="string">''</span>;
3707     setpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>,log)
3708 <span class="keyword">end</span>
3709 
3710 <span class="comment">% iRic</span>
3711 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>)
3712     iric = getpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>);
3713     <span class="keyword">if</span> exist(iric.path,<span class="string">'dir'</span>)
3714         guiprefs.iric_path = iric.path;
3715     <span class="keyword">else</span>
3716         guiprefs.iric_path = pwd;
3717     <span class="keyword">end</span>
3718     <span class="keyword">if</span> exist(fullfile(iric.path,iric.file),<span class="string">'file'</span>)
3719         guiprefs.iric_file = iric.file;
3720     <span class="keyword">else</span>
3721         guiprefs.iric_file = <span class="string">''</span>;
3722     <span class="keyword">end</span>
3723 <span class="keyword">else</span> <span class="comment">% Initialize Log</span>
3724     guiprefs.iric_path = pwd;
3725     guiprefs.iric_file = <span class="string">''</span>;
3726     
3727     iric.path = pwd;
3728     iric.file = <span class="string">''</span>;
3729     setpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>,iric)
3730 <span class="keyword">end</span>
3731 
3732 <span class="comment">% excel</span>
3733 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>)
3734     excel = getpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>);
3735     <span class="keyword">if</span> exist(excel.path,<span class="string">'dir'</span>)
3736         guiprefs.excel_path = excel.path;
3737     <span class="keyword">else</span>
3738         guiprefs.excel_path = pwd;
3739     <span class="keyword">end</span>
3740     <span class="keyword">if</span> exist(fullfile(excel.path,excel.file),<span class="string">'file'</span>)
3741         guiprefs.excel_file = excel.file;
3742     <span class="keyword">else</span>
3743         guiprefs.excel_file = <span class="string">''</span>;
3744     <span class="keyword">end</span>
3745 <span class="keyword">else</span> <span class="comment">% Initialize pref</span>
3746     guiprefs.excel_path = pwd;
3747     guiprefs.excel_file = <span class="string">''</span>;
3748     
3749     excel.path = pwd;
3750     excel.file = <span class="string">''</span>;
3751     setpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>,excel)
3752 <span class="keyword">end</span>
3753 
3754 <span class="comment">% aerial</span>
3755 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>)
3756     aerial = getpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>);
3757     <span class="keyword">if</span> exist(aerial.path,<span class="string">'dir'</span>)
3758         guiprefs.aerial_path = aerial.path;
3759     <span class="keyword">else</span>
3760         guiprefs.aerial_path = pwd;
3761     <span class="keyword">end</span>
3762     does_exist = false(1,length(aerial.file));
3763     <span class="keyword">if</span> iscell(aerial.file)
3764     <span class="keyword">for</span> k = 1:numel(aerial.file) <span class="comment">% Check each file one-by-one</span>
3765         does_exist(k) = exist(fullfile(aerial.path,aerial.file{k}),<span class="string">'file'</span>);
3766     <span class="keyword">end</span>
3767     <span class="keyword">else</span>
3768         does_exist = exist(fullfile(aerial.path,aerial.file),<span class="string">'file'</span>);
3769     <span class="keyword">end</span>
3770     <span class="keyword">if</span> any(does_exist)
3771         guiprefs.aerial_file = aerial.file;
3772     <span class="keyword">else</span>
3773         guiprefs.aerial_file = {<span class="string">''</span>};
3774     <span class="keyword">end</span>
3775 <span class="keyword">else</span> <span class="comment">% Initialize aerial</span>
3776     guiprefs.aerial_path = pwd;
3777     guiprefs.aerial_file = {<span class="string">''</span>};
3778     
3779     aerial.path = pwd;
3780     aerial.file = {<span class="string">''</span>};
3781     setpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>,aerial)
3782 <span class="keyword">end</span>
3783 
3784 <span class="comment">% shoreline</span>
3785 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>)
3786     shoreline = getpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>);
3787     <span class="keyword">if</span> exist(shoreline.path,<span class="string">'dir'</span>)
3788         guiprefs.shoreline_path = shoreline.path;
3789     <span class="keyword">else</span>
3790         guiprefs.shoreline_path = pwd;
3791     <span class="keyword">end</span>
3792     
3793     <span class="keyword">if</span> iscell(shoreline.file)
3794         <span class="keyword">if</span> exist(fullfile(shoreline.path,shoreline.file{1}),<span class="string">'file'</span>)
3795             guiprefs.shoreline_file = shoreline.file;
3796         <span class="keyword">else</span>
3797             guiprefs.shoreline_file = <span class="string">''</span>;
3798         <span class="keyword">end</span>
3799     <span class="keyword">else</span>
3800         <span class="keyword">if</span> exist(fullfile(shoreline.path,shoreline.file),<span class="string">'file'</span>)
3801             guiprefs.shoreline_file = shoreline.file;
3802         <span class="keyword">else</span>
3803             guiprefs.shoreline_file = <span class="string">''</span>;
3804         <span class="keyword">end</span>
3805     <span class="keyword">end</span>
3806 <span class="keyword">else</span> <span class="comment">% Initialize shoreline</span>
3807     guiprefs.shoreline_path = pwd;
3808     guiprefs.shoreline_file = <span class="string">''</span>;
3809     
3810     shoreline.path = pwd;
3811     shoreline.file = <span class="string">''</span>;
3812     setpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>,shoreline)
3813 <span class="keyword">end</span>
3814 <span class="comment">% guiprefs.presentation = true;</span>
3815 <span class="comment">% guiprefs.print        = false;</span>
3816 
3817 <span class="comment">% for k = 1:length(prefs)</span>
3818 <span class="comment">%     newpref = '';</span>
3819 <span class="comment">%     if ispref('VMT',prefs{k})</span>
3820 <span class="comment">%         stored_newpref = getpref('VMT',prefs{k});</span>
3821 <span class="comment">%         if exist(stored_newpref,'dir')</span>
3822 <span class="comment">%             newpref = stored_newpref;</span>
3823 <span class="comment">%         else</span>
3824 <span class="comment">%             setpref('VMT',prefs{k},newpref)</span>
3825 <span class="comment">%         end</span>
3826 <span class="comment">%     end</span>
3827 <span class="comment">%     guiprefs.(prefs{k}) = newpref;</span>
3828 <span class="comment">% end</span>
3829 
3830 <span class="comment">% RENDERER</span>
3831 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>)
3832     renderer = getpref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>);
3833     guiprefs.renderer = renderer;
3834 <span class="keyword">else</span> <span class="comment">% Initialize RENDERER</span>
3835     renderer           = <span class="string">'OpenGL'</span>;
3836     guiprefs.renderer  = renderer;
3837     setpref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>,renderer)
3838 <span class="keyword">end</span>
3839 
3840 <span class="comment">% UNITS</span>
3841 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'units'</span>)
3842     units = getpref(<span class="string">'VMT'</span>,<span class="string">'units'</span>);
3843     guiprefs.units = units;
3844 <span class="keyword">else</span> <span class="comment">% Initialize UNITS</span>
3845     units           = <span class="string">'metric'</span>;
3846     guiprefs.units  = units;
3847     setpref(<span class="string">'VMT'</span>,<span class="string">'units'</span>,units)
3848 <span class="keyword">end</span>
3849 
3850 <span class="comment">% PLOTREF</span>
3851 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'protref'</span>)
3852     plotref = getpref(<span class="string">'VMT'</span>,<span class="string">'plotref'</span>);
3853     guiprefs.plotref = plotref;
3854 <span class="keyword">else</span> <span class="comment">% Initialize PLOTREF</span>
3855     plotref           = <span class="string">'dfs'</span>;
3856     guiprefs.plotref  = plotref;
3857     setpref(<span class="string">'VMT'</span>,<span class="string">'plotref'</span>,plotref)
3858 <span class="keyword">end</span>
3859 
3860 <span class="comment">% RUNCOUNTER</span>
3861 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'runcounter'</span>)
3862     runcounter = getpref(<span class="string">'VMT'</span>,<span class="string">'runcounter'</span>)+1;
3863     guiprefs.runcounter = runcounter;
3864 <span class="keyword">else</span> <span class="comment">% Initialize RENDERER</span>
3865     runcounter           = 1;
3866     guiprefs.runcounter  = runcounter;
3867     setpref(<span class="string">'VMT'</span>,<span class="string">'runcounter'</span>,runcounter)
3868 <span class="keyword">end</span>
3869 setappdata(hfigure,<span class="string">'guiprefs'</span>,guiprefs)
3870 
3871 <span class="comment">% SETENDPOINTS</span>
3872 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'setendpoints'</span>)
3873     setendpoints = getpref(<span class="string">'VMT'</span>,<span class="string">'setendpoints'</span>);
3874     <span class="keyword">if</span> exist(setendpoints.path,<span class="string">'dir'</span>)
3875         guiprefs.setendpoints_path = setendpoints.path;
3876     <span class="keyword">else</span>
3877         guiprefs.setendpoints_path = pwd;
3878     <span class="keyword">end</span>
3879     <span class="keyword">if</span> exist(fullfile(setendpoints.path,setendpoints.file),<span class="string">'file'</span>)
3880         guiprefs.setendpoints_file = setendpoints.file;
3881     <span class="keyword">else</span>
3882         guiprefs.setendpoints_file = <span class="string">''</span>;
3883     <span class="keyword">end</span>
3884 <span class="keyword">else</span> <span class="comment">% Initialize TECPLOT</span>
3885     guiprefs.setendpoints_path = pwd;
3886     guiprefs.setendpoints_file = <span class="string">''</span>;
3887     
3888     setendpoints.path = pwd;
3889     setendpoints.file = <span class="string">''</span>;
3890     setpref(<span class="string">'VMT'</span>,<span class="string">'setendpoints'</span>,setendpoints)
3891 <span class="keyword">end</span>
3892 
3893 <span class="comment">% [EOF] load_prefs</span>
3894 
3895 
3896 <span class="comment">% --------------------------------------------------------------------</span>
3897 <a name="_sub98" href="#_subfunctions" class="code">function store_prefs(hfigure,pref)</a>
3898 <span class="comment">% Store preferences in the Application data and in the persistent</span>
3899 <span class="comment">% preferences data.</span>
3900 
3901 <span class="comment">% Preferences:</span>
3902 <span class="comment">% 'ascii'                Path and filenames of current ASCII files</span>
3903 <span class="comment">% 'mat'                  Path and filename of current MAT file</span>
3904 <span class="comment">% 'tecplot'              Path and filename of last Tecplot file</span>
3905 <span class="comment">% 'kmz'                  Path and filename of last KMZ file</span>
3906 <span class="comment">% 'multibeambathymetry'  Path and filename of last Multibeam Bathymetry file</span>
3907 <span class="comment">% 'log'                  Path and filename of last Log file</span>
3908 <span class="comment">% 'iric'                 Path and filename of last iRic ANV file</span>
3909 <span class="comment">% 'excel'                Path and filename of last Excel file</span>
3910 <span class="comment">% 'aerial'               Path and filename of last Aerial file</span>
3911 <span class="comment">% 'shoreline'            Path and filename of last Shoreline file</span>
3912 <span class="comment">% 'renderer'             Default graphics renderer</span>
3913 <span class="comment">% 'units'                Default plotting units</span>
3914 <span class="comment">% 'plotref'              Default plotting vertical reference</span>
3915 <span class="comment">% 'runcounter'           Keeps a running tally of how many times VMT is</span>
3916 <span class="comment">%                        started</span>
3917 <span class="comment">% 'setendpoints'         Path and filename of user endpoint file</span>
3918 
3919 guiprefs = getappdata(hfigure,<span class="string">'guiprefs'</span>);
3920 
3921 <span class="keyword">switch</span> pref
3922     <span class="keyword">case</span> <span class="string">'ascii'</span>
3923         ascii.path = guiprefs.ascii_path;
3924         ascii.file = guiprefs.ascii_file;
3925         setpref(<span class="string">'VMT'</span>,<span class="string">'ascii'</span>,ascii)
3926     <span class="keyword">case</span> <span class="string">'mat'</span>
3927         mat.path = guiprefs.mat_path;
3928         mat.file = guiprefs.mat_file;
3929         setpref(<span class="string">'VMT'</span>,<span class="string">'mat'</span>,mat)
3930     <span class="keyword">case</span> <span class="string">'tecplot'</span>
3931         tecplot.path = guiprefs.tecplot_path;
3932         tecplot.file = guiprefs.tecplot_file;
3933         setpref(<span class="string">'VMT'</span>,<span class="string">'tecplot'</span>,tecplot)
3934     <span class="keyword">case</span> <span class="string">'kmz'</span>
3935         kmz.path = guiprefs.kmz_path;
3936         kmz.file = guiprefs.kmz_file;
3937         setpref(<span class="string">'VMT'</span>,<span class="string">'kmz'</span>,kmz)
3938     <span class="keyword">case</span> <span class="string">'multibeambathymetry'</span>
3939         multibeambathymetry.path = guiprefs.multibeambathymetry_path;
3940         multibeambathymetry.file = guiprefs.multibeambathymetry_file;
3941         setpref(<span class="string">'VMT'</span>,<span class="string">'multibeambathymetry'</span>,multibeambathymetry)
3942     <span class="keyword">case</span> <span class="string">'log'</span>
3943         log.path = guiprefs.log_path;
3944         log.file = guiprefs.log_file;
3945         setpref(<span class="string">'VMT'</span>,<span class="string">'log'</span>,log)
3946     <span class="keyword">case</span> <span class="string">'iric'</span>
3947         iric.path = guiprefs.iric_path;
3948         iric.file = guiprefs.iric_file;
3949         setpref(<span class="string">'VMT'</span>,<span class="string">'iric'</span>,iric)
3950     <span class="keyword">case</span> <span class="string">'excel'</span>
3951         excel.path = guiprefs.excel_path;
3952         excel.file = guiprefs.excel_file;
3953         setpref(<span class="string">'VMT'</span>,<span class="string">'excel'</span>,excel)
3954     <span class="keyword">case</span> <span class="string">'aerial'</span>
3955         aerial.path = guiprefs.aerial_path;
3956         aerial.file = guiprefs.aerial_file;
3957         setpref(<span class="string">'VMT'</span>,<span class="string">'aerial'</span>,aerial)
3958     <span class="keyword">case</span> <span class="string">'shoreline'</span>
3959         shoreline.path = guiprefs.shoreline_path;
3960         shoreline.file = guiprefs.shoreline_file;
3961         setpref(<span class="string">'VMT'</span>,<span class="string">'shoreline'</span>,shoreline)
3962     <span class="keyword">case</span> <span class="string">'renderer'</span>
3963         renderer = guiprefs.renderer;
3964         setpref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>,renderer)
3965     <span class="keyword">case</span> <span class="string">'units'</span>
3966         units = guiprefs.units;
3967         setpref(<span class="string">'VMT'</span>,<span class="string">'units'</span>,units)
3968     <span class="keyword">case</span> <span class="string">'plotref'</span>
3969         plotref = guiprefs.plotref;
3970         setpref(<span class="string">'VMT'</span>,<span class="string">'plotref'</span>,plotref)
3971     <span class="keyword">case</span> <span class="string">'runcounter'</span>
3972         runcounter = guiprefs.runcounter;
3973         setpref(<span class="string">'VMT'</span>,<span class="string">'runcounter'</span>,runcounter)
3974     <span class="keyword">case</span> <span class="string">'setendpoints'</span>
3975         setendpoints.path = guiprefs.setendpoints_path;
3976         setendpoints.file = guiprefs.setendpoints_file;
3977         setpref(<span class="string">'VMT'</span>,<span class="string">'setendpoints'</span>,setendpoints)
3978     <span class="keyword">otherwise</span>
3979 <span class="keyword">end</span>
3980 
3981 <span class="comment">% if ismember(pref,prefs)</span>
3982 <span class="comment">%     setpref('VMT',pref,value)</span>
3983 <span class="comment">%</span>
3984 <span class="comment">%     guiprefs = getappdata(hfigure,'guiprefs');</span>
3985 <span class="comment">%     guiprefs.(pref) = value;</span>
3986 <span class="comment">%     setappdata(hfigure,'guiprefs',guiprefs)</span>
3987 <span class="comment">% end</span>
3988 
3989 <span class="comment">% [EOF] store_prefs</span>
3990 
3991 
3992 <span class="comment">% --------------------------------------------------------------------</span>
3993 <a name="_sub99" href="#_subfunctions" class="code">function initGUI(handles)</a>
3994 <span class="comment">% Initialize the UI controls in the GUI.</span>
3995 
3996 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
3997 
3998 <span class="comment">% Set the name and version</span>
3999 set(handles.figure1,<span class="string">'Name'</span>,[<span class="string">'Velocity Mapping Toolbox (VMT) '</span> guiparams.vmt_version{1}], <span class="keyword">...</span>
4000     <span class="string">'DockControls'</span>,<span class="string">'off'</span>)
4001 <span class="comment">%set(handles.VMTversion,             'String',guiparams.vmt_version)</span>
4002 
4003 <span class="comment">% Set the PLOT 1 axis labels</span>
4004 axes(handles.Plot1Shiptracks);
4005 set(handles.Plot1Shiptracks,<span class="string">'DataAspectRatio'</span>,[1 1 1],<span class="string">'PlotBoxAspectRatio'</span>,[1 1 1])
4006 xlabel(<span class="string">'UTM Easting (m)'</span>)
4007 ylabel(<span class="string">'UTM Northing (m)'</span>)
4008 box on
4009 grid on
4010 <span class="comment">% ticks_format('%6.0f','%8.0f'); %formats the ticks for UTM</span>
4011 
4012 <span class="comment">%%%%%%%%%%%%</span>
4013 <span class="comment">% MENU BAR %</span>
4014 <span class="comment">%%%%%%%%%%%%</span>
4015 <span class="keyword">if</span> guiparams.english_units
4016     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
4017     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
4018 <span class="keyword">else</span>
4019     set(handles.menuMetric, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
4020     set(handles.menuEnglish,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
4021 <span class="keyword">end</span>
4022 
4023 <span class="keyword">if</span> guiparams.set_cross_section_endpoints
4024     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
4025     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'on'</span>)
4026 <span class="keyword">else</span>
4027     set(handles.menuCrossSectionEndpointAutomatic,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
4028     set(handles.menuCrossSectionEndpointManual,   <span class="string">'Checked'</span>,<span class="string">'off'</span>)
4029 <span class="keyword">end</span>
4030 
4031 
4032 <span class="keyword">if</span> guiparams.print
4033     set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
4034     set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
4035     set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
4036     set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'off'</span>)
4037 <span class="keyword">elseif</span> guiparams.presentation
4038     set(handles.menuPrintFormat,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
4039     set(handles.menuPresentationFormat,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
4040     set(handles.menuStylePrint,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
4041     set(handles.menuStylePresentation, <span class="string">'Checked'</span>,<span class="string">'on'</span>)
4042 <span class="keyword">else</span>
4043 <span class="keyword">end</span>
4044 
4045 <span class="keyword">switch</span> guiparams.renderer
4046     <span class="keyword">case</span> <span class="string">'OpenGL'</span>
4047         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'on'</span>)
4048         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'off'</span>)
4049         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
4050     <span class="keyword">case</span> <span class="string">'painters'</span>
4051         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
4052         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'on'</span>)
4053         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'off'</span>)
4054     <span class="keyword">case</span> <span class="string">'zbuffer'</span>
4055         set(handles.menuOpenGL,        <span class="string">'Checked'</span>,<span class="string">'off'</span>)
4056         set(handles.menuPainters,      <span class="string">'Checked'</span>,<span class="string">'off'</span>)
4057         set(handles.menuZbuffer,       <span class="string">'Checked'</span>,<span class="string">'on'</span>)
4058 <span class="keyword">end</span>
4059 
4060 
4061 <span class="comment">%%%%%%%%%%%%%%%</span>
4062 <span class="comment">% DATA EXPORT %</span>
4063 <span class="comment">%%%%%%%%%%%%%%%</span>
4064 <span class="comment">% BathymetryPanel</span>
4065 <span class="comment">% set(handles.BeamAngle,                  'String',guiparams.beam_angle)</span>
4066 <span class="comment">% set(handles.MagneticVariation,          'String',guiparams.magnetic_variation)</span>
4067 <span class="comment">% set(handles.WSE,                        'String',guiparams.wse)</span>
4068 <span class="comment">% set(handles.OutputAuxiliaryData,        'Value', guiparams.output_auxiliary_data)</span>
4069 
4070 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
4071 <span class="comment">% PLOTTING/PLAN VIEW %</span>
4072 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
4073 <span class="comment">% PlanViewPanel</span>
4074 set(handles.DepthRangeMin,              <span class="string">'String'</span>,guiparams.depth_range_min)
4075 set(handles.DepthRangeMax,              <span class="string">'String'</span>,guiparams.depth_range_max)
4076 set(handles.VectorScalePlanView,        <span class="string">'String'</span>,guiparams.vector_scale_plan_view)
4077 set(handles.VectorSpacingPlanview,      <span class="string">'String'</span>,guiparams.vector_spacing_plan_view)
4078 set(handles.SmoothingWindowSize,        <span class="string">'String'</span>,guiparams.smoothing_window_size)
4079 set(handles.AddBackground,              <span class="string">'Value'</span>, guiparams.add_background)
4080 
4081 
4082 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%</span>
4083 <span class="comment">% PLOTTING/SHIP TRACKS %</span>
4084 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%</span>
4085 <span class="comment">% ShiptracksPanel</span>
4086 set(handles.HorizontalGridNodeSpacing,  <span class="string">'String'</span>,guiparams.horizontal_grid_node_spacing)
4087 set(handles.VerticalGridNodeSpacing,    <span class="string">'String'</span>,guiparams.vertical_grid_node_spacing)
4088 <span class="comment">%set(handles.SetCrossSectionEndpoints,   'Value', guiparams.set_cross_section_endpoints)</span>
4089 
4090 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4091 <span class="comment">% PLOTTING/CROSS SECTIONS %</span>
4092 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
4093 <span class="comment">% CrossSectionsPanel</span>
4094 set(handles.Contour,                    <span class="string">'String'</span>,{guiparams.contours.string}, <span class="keyword">...</span>
4095     <span class="string">'Value'</span>, guiparams.idx_contour)
4096 set(handles.VerticalExaggeration,       <span class="string">'String'</span>,guiparams.vertical_exaggeration)
4097 set(handles.VectorScaleCrossSection,    <span class="string">'String'</span>,guiparams.vector_scale_cross_section)
4098 set(handles.HorizontalVectorSpacing,    <span class="string">'String'</span>,guiparams.horizontal_vector_spacing)
4099 set(handles.VerticalVectorSpacing,      <span class="string">'String'</span>,guiparams.vertical_vector_spacing)
4100 set(handles.HorizontalSmoothingWindow,  <span class="string">'String'</span>,guiparams.horizontal_smoothing_window)
4101 set(handles.VerticalSmoothingWindow,    <span class="string">'String'</span>,guiparams.vertical_smoothing_window)
4102 set(handles.PlotSecondaryFlowVectors,   <span class="string">'Value'</span>, guiparams.plot_secondary_flow_vectors)
4103 set(handles.SecondaryFlowVectorVariable,<span class="string">'String'</span>,{guiparams.secondary_flows.string}, <span class="keyword">...</span>
4104     <span class="string">'Value'</span>, guiparams.idx_secondary_flow_vector_variable)
4105 set(handles.IncludeVerticalVelocity,    <span class="string">'Value'</span>, guiparams.include_vertical_velocity)
4106 
4107 <span class="comment">% set(handles.EnglishUnits,               'Value',guiparams.english_units)</span>
4108 
4109 <span class="comment">% [EOF] initGUI</span>
4110 
4111 
4112 <span class="comment">% --------------------------------------------------------------------</span>
4113 <a name="_sub100" href="#_subfunctions" class="code">function set_enable(handles,enable_state)</a>
4114 
4115 guiparams = getappdata(handles.figure1,<span class="string">'guiparams'</span>);
4116 
4117 <span class="keyword">switch</span> enable_state
4118     <span class="keyword">case</span> <span class="string">'init'</span>
4119         guiparams.gui_state = <span class="string">'init'</span>;
4120         set([handles.menuFile
4121             handles.menuOpen
4122             handles.menuOpenASCII
4123             handles.menuOpenMAT
4124             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
4125         
4126         set([handles.toolbarLoadData
4127             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
4128         set([handles.toolbarSaveMatFile
4129             handles.toolbarSaveBathymetry
4130             handles.toolbarSaveFigures
4131             handles.toolbarSaveExcel
4132             handles.toolbarPlottingParameters
4133             handles.toolbarProcessingParameters
4134             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
4135         
4136         set([handles.DepthRangeMin
4137             handles.DepthRangeMax
4138             handles.VectorScalePlanView
4139             handles.VectorSpacingPlanview
4140             handles.SmoothingWindowSize
4141             handles.AddBackground
4142             handles.PlotPlanView
4143             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
4144       
4145         set([handles.HorizontalGridNodeSpacing
4146             handles.VerticalGridNodeSpacing
4147             handles.PlotShiptracks
4148             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
4149         
4150         set([handles.Contour
4151             handles.VerticalExaggeration
4152             handles.VectorScaleCrossSection
4153             handles.HorizontalVectorSpacing
4154             handles.VerticalVectorSpacing
4155             handles.HorizontalSmoothingWindow
4156             handles.VerticalSmoothingWindow
4157             handles.PlotSecondaryFlowVectors
4158             handles.SecondaryFlowVectorVariable
4159             handles.IncludeVerticalVelocity
4160             handles.IncludeVerticalVelocityText
4161             handles.PlotCrossSection
4162             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
4163         
4164     <span class="keyword">case</span> <span class="string">'fileloaded'</span>
4165         guiparams.gui_state = <span class="string">'fileloaded'</span>;
4166         set([handles.menuFile
4167             handles.menuOpen
4168             handles.menuOpenASCII
4169             handles.menuOpenMAT
4170             handles.menuSaveMAT
4171             handles.menuSaveTecplot
4172             handles.menuSaveKMZFile
4173             handles.menuSettings
4174             handles.menuPlottingParameters
4175             handles.menuMetric
4176             handles.menuEnglish
4177             handles.menuBathymetryExportSettings
4178             handles.menuExportMultibeamBathymetry
4179             <span class="keyword">...</span><span class="comment">handles.menuKMZVerticalOffset</span>
4180             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
4181         
4182         set([handles.toolbarLoadData
4183             handles.toolbarSaveMatFile
4184             handles.toolbarSaveBathymetry
4185             handles.toolbarSaveExcel
4186             handles.toolbarSaveFigures
4187             handles.toolbarPlottingParameters
4188             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
4189         set([handles.toolbarProcessingParameters
4190             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
4191         
4192            
4193         set([handles.DepthRangeMin
4194             handles.DepthRangeMax
4195             handles.VectorScalePlanView
4196             handles.VectorSpacingPlanview
4197             handles.SmoothingWindowSize
4198             handles.PlotPlanView
4199             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
4200         <span class="keyword">if</span> guiparams.has_mapping_toolbox
4201             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'on'</span>)
4202         <span class="keyword">else</span>
4203             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'off'</span>)
4204         <span class="keyword">end</span>
4205         
4206         set([handles.HorizontalGridNodeSpacing
4207             handles.VerticalGridNodeSpacing
4208             handles.PlotShiptracks
4209             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
4210         
4211         set([handles.Contour
4212             handles.VerticalExaggeration
4213             handles.VectorScaleCrossSection
4214             handles.HorizontalVectorSpacing
4215             handles.VerticalVectorSpacing
4216             handles.HorizontalSmoothingWindow
4217             handles.VerticalSmoothingWindow
4218             handles.PlotSecondaryFlowVectors
4219             handles.SecondaryFlowVectorVariable
4220             handles.IncludeVerticalVelocity
4221             handles.IncludeVerticalVelocityText
4222             handles.PlotCrossSection
4223             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
4224     <span class="keyword">case</span> <span class="string">'multiplematfiles'</span>
4225         guiparams.gui_state = <span class="string">'multiplematfiles'</span>;
4226         set([handles.menuFile
4227             handles.menuOpen
4228             handles.menuOpenASCII
4229             handles.menuOpenMAT
4230             handles.menuSettings
4231             handles.menuPlottingParameters
4232             handles.menuMetric
4233             handles.menuEnglish
4234             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
4235         set([handles.menuSaveMAT
4236             handles.menuBathymetryExportSettings
4237             handles.menuExportMultibeamBathymetry
4238             <span class="keyword">...</span><span class="comment">handles.menuKMZVerticalOffset</span>
4239             handles.menuSaveKMZFile
4240             handles.menuSaveTecplot
4241             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
4242         
4243         set([handles.toolbarLoadData
4244             handles.toolbarSaveFigures
4245             handles.toolbarPlottingParameters
4246             handles.toolbarSaveExcel
4247             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
4248         set([handles.toolbarProcessingParameters
4249             handles.toolbarSaveMatFile
4250             handles.toolbarSaveBathymetry
4251             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
4252         
4253         set([handles.DepthRangeMin
4254             handles.DepthRangeMax
4255             handles.VectorScalePlanView
4256             handles.VectorSpacingPlanview
4257             handles.SmoothingWindowSize
4258             handles.PlotPlanView
4259             ],<span class="string">'Enable'</span>,<span class="string">'on'</span>)
4260         <span class="keyword">if</span> guiparams.has_mapping_toolbox
4261             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'on'</span>)
4262         <span class="keyword">else</span>
4263             set(handles.AddBackground,<span class="string">'Enable'</span>,<span class="string">'off'</span>)
4264         <span class="keyword">end</span>
4265         
4266         set([handles.HorizontalGridNodeSpacing
4267             handles.VerticalGridNodeSpacing
4268             handles.PlotShiptracks
4269             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
4270         
4271         set([handles.Contour
4272             handles.VerticalExaggeration
4273             handles.VectorScaleCrossSection
4274             handles.HorizontalVectorSpacing
4275             handles.VerticalVectorSpacing
4276             handles.HorizontalSmoothingWindow
4277             handles.VerticalSmoothingWindow
4278             handles.PlotSecondaryFlowVectors
4279             handles.SecondaryFlowVectorVariable
4280             handles.IncludeVerticalVelocity
4281             handles.IncludeVerticalVelocityText
4282             handles.PlotCrossSection
4283             ],<span class="string">'Enable'</span>,<span class="string">'off'</span>)
4284     <span class="keyword">otherwise</span>
4285 <span class="keyword">end</span>
4286 
4287 <span class="comment">% Save Application Data</span>
4288 setappdata(handles.figure1,<span class="string">'guiparams'</span>,guiparams)
4289 
4290 <span class="comment">% [EOF] set_enable</span>
4291 
4292 <span class="comment">%% Compute the longitudinal dispersion coefficient</span>
4293 
4294 <span class="comment">%% --- Executes on button press in zerosecq_chkbox.</span>
4295 <span class="comment">%function zerosecq_chkbox_Callback(hObject, eventdata, handles)</span>
4296 <span class="comment">% hObject    handle to zerosecq_chkbox (see GCBO)</span>
4297 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
4298 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
4299 
4300 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of zerosecq_chkbox</span>
4301 
4302 
4303 <span class="comment">% --------------------------------------------------------------------</span>
4304 <a name="_sub101" href="#_subfunctions" class="code">function [english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style] = </a><span class="keyword">...</span>
4305     plotParametersDialog(english_units,set_cross_section_endpoints,plot_presentation_style,plot_print_style,hf)
4306 
4307 w = 500;
4308 h = 110;
4309 dx = 10;
4310 dy = 35;
4311 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
4312 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Plotting Parameters'</span>, <span class="keyword">...</span>
4313     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
4314     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4315     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
4316     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
4317     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4318     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4319     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4320     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
4321     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4322     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
4323 dialog_params.english_units               = english_units;
4324 dialog_params.set_cross_section_endpoints = set_cross_section_endpoints;
4325 dialog_params.presentation                = plot_presentation_style; <span class="comment">%presentation;</span>
4326 dialog_params.print                       = plot_print_style; <span class="comment">%print;</span>
4327 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4328 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
4329 
4330 <span class="comment">% Build the graphics:</span>
4331 <span class="comment">% -------------------</span>
4332 handles.UnitsPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4333     <span class="string">'Title'</span>, <span class="string">'Units'</span>, <span class="keyword">...</span>
4334     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4335     <span class="string">'Position'</span>,[dx dy (w-3*dx)/3 h-dx-dy+10]);
4336 handles.UnitsMetric = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4337     <span class="string">'Parent'</span>,handles.UnitsPanel, <span class="keyword">...</span>
4338     <span class="string">'String'</span>,<span class="string">'Metric'</span>, <span class="keyword">...</span>
4339     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4340     <span class="string">'Position'</span>,[15 35 100 22]);
4341 handles.UnitsEnglish = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4342     <span class="string">'Parent'</span>,handles.UnitsPanel, <span class="keyword">...</span>
4343     <span class="string">'String'</span>,<span class="string">'English'</span>, <span class="keyword">...</span>
4344     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4345     <span class="string">'Position'</span>,[15 10 100 22]);
4346 
4347 handles.EndpointsPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4348     <span class="string">'Title'</span>, <span class="string">'Cross-Section Endpoints'</span>, <span class="keyword">...</span>
4349     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4350     <span class="string">'Position'</span>,[(w+dx)/3 dy (w-3*dx)/3 h-dx-dy+10]);
4351 handles.EndpointsAutomatic = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4352     <span class="string">'Parent'</span>,handles.EndpointsPanel, <span class="keyword">...</span>
4353     <span class="string">'String'</span>,<span class="string">'Automatic'</span>, <span class="keyword">...</span>
4354     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4355     <span class="string">'Position'</span>,[15 35 100 22]);
4356 handles.EndpointsManual = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4357     <span class="string">'Parent'</span>,handles.EndpointsPanel, <span class="keyword">...</span>
4358     <span class="string">'String'</span>,<span class="string">'Set Manually'</span>, <span class="keyword">...</span>
4359     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4360     <span class="string">'Position'</span>,[15 10 100 22]);
4361 
4362 handles.StylePanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4363     <span class="string">'Title'</span>, <span class="string">'Plot Style'</span>, <span class="keyword">...</span>
4364     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4365     <span class="string">'Position'</span>,[w-w/3 dy (w-3*dx)/3 h-dx-dy+10]);
4366 handles.StylePresentation = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4367     <span class="string">'Parent'</span>,handles.StylePanel, <span class="keyword">...</span>
4368     <span class="string">'String'</span>,<span class="string">'Presentation'</span>, <span class="keyword">...</span>
4369     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4370     <span class="string">'Position'</span>,[15 35 100 22]);
4371 handles.StylePrint = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4372     <span class="string">'Parent'</span>,handles.StylePanel, <span class="keyword">...</span>
4373     <span class="string">'String'</span>,<span class="string">'Print'</span>, <span class="keyword">...</span>
4374     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4375     <span class="string">'Position'</span>,[15 10 100 22]);
4376 
4377 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4378     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4379     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
4380     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4381     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
4382 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4383     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4384     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
4385     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4386     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
4387 
4388 <span class="comment">% Update the UI controls:</span>
4389 <span class="comment">% -----------------------</span>
4390 <span class="keyword">if</span> dialog_params.english_units
4391     set(handles.UnitsMetric, <span class="string">'Value'</span>,0)
4392     set(handles.UnitsEnglish,<span class="string">'Value'</span>,1)
4393 <span class="keyword">else</span>
4394     set(handles.UnitsMetric, <span class="string">'Value'</span>,1)
4395     set(handles.UnitsEnglish,<span class="string">'Value'</span>,0)
4396 <span class="keyword">end</span>
4397 <span class="keyword">if</span> dialog_params.set_cross_section_endpoints
4398     set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,0)
4399     set(handles.EndpointsManual,   <span class="string">'Value'</span>,1)
4400 <span class="keyword">else</span>
4401     set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,1)
4402     set(handles.EndpointsManual,   <span class="string">'Value'</span>,0)
4403 <span class="keyword">end</span>
4404 <span class="keyword">if</span> dialog_params.presentation
4405     set(handles.StylePresentation, <span class="string">'Value'</span>,1)
4406     set(handles.StylePrint,        <span class="string">'Value'</span>,0)
4407 <span class="keyword">else</span>
4408     set(handles.StylePresentation, <span class="string">'Value'</span>,0)
4409     set(handles.StylePrint,        <span class="string">'Value'</span>,1)
4410 <span class="keyword">end</span>
4411 
4412 <span class="comment">% Set the callbacks:</span>
4413 <span class="comment">% ------------------</span>
4414 set(handles.Figure,            <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub107" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>, handles.OK})
4415 set(handles.UnitsMetric,       <span class="string">'Callback'</span>,       {@<a href="#_sub102" class="code" title="subfunction dialogUnits(hObject,eventdata,handles,the_units)">dialogUnits</a>,    handles,<span class="string">'metric'</span>})
4416 set(handles.UnitsEnglish,      <span class="string">'Callback'</span>,       {@<a href="#_sub102" class="code" title="subfunction dialogUnits(hObject,eventdata,handles,the_units)">dialogUnits</a>,    handles,<span class="string">'english'</span>})
4417 set(handles.EndpointsAutomatic,<span class="string">'Callback'</span>,       {@<a href="#_sub103" class="code" title="subfunction dialogEnpoints(hObject,eventdata,handles,the_endpoints)">dialogEnpoints</a>, handles,<span class="string">'auto'</span>})
4418 set(handles.EndpointsManual,   <span class="string">'Callback'</span>,       {@<a href="#_sub103" class="code" title="subfunction dialogEnpoints(hObject,eventdata,handles,the_endpoints)">dialogEnpoints</a>, handles,<span class="string">'manual'</span>})
4419 set(handles.StylePresentation, <span class="string">'Callback'</span>,       {@<a href="#_sub104" class="code" title="subfunction dialogPlotStyle(hObject,eventdata,handles,the_style)">dialogPlotStyle</a>,handles,<span class="string">'presentation'</span>})
4420 set(handles.StylePrint,        <span class="string">'Callback'</span>,       {@<a href="#_sub104" class="code" title="subfunction dialogPlotStyle(hObject,eventdata,handles,the_style)">dialogPlotStyle</a>,handles,<span class="string">'print'</span>})
4421 set(handles.OK,                <span class="string">'Callback'</span>,       {@<a href="#_sub105" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,       handles.OK})
4422 set(handles.Cancel,            <span class="string">'Callback'</span>,       {@<a href="#_sub106" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,   handles})
4423 
4424 <span class="comment">% Position the dialog and make it visible:</span>
4425 <span class="comment">% ----------------------------------------</span>
4426 fpos = get(hf,<span class="string">'Position'</span>);
4427 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
4428 movegui(handles.Figure,dpos)
4429 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
4430 
4431 <span class="comment">% Hold the dialog open:</span>
4432 <span class="comment">% ---------------------</span>
4433 waitfor(handles.OK)
4434 
4435 <span class="comment">% Return the outputs and close the dialog:</span>
4436 <span class="comment">% ----------------------------------------</span>
4437 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4438 english_units = dialog_params.english_units;
4439 set_cross_section_endpoints = dialog_params.set_cross_section_endpoints;
4440 plot_presentation_style =  dialog_params.presentation;
4441 plot_print_style =  dialog_params.print;
4442 
4443 delete(handles.Figure)
4444 
4445 <span class="comment">% [EOF] plotParametersDialog</span>
4446 
4447 
4448 <span class="comment">% --------------------------------------------------------------------</span>
4449 <a name="_sub102" href="#_subfunctions" class="code">function dialogUnits(hObject,eventdata,handles,the_units)</a>
4450 
4451 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4452 <span class="keyword">switch</span> the_units
4453     <span class="keyword">case</span> <span class="string">'metric'</span>
4454         dialog_params.english_units = false;
4455         
4456         set(handles.UnitsMetric, <span class="string">'Value'</span>,1)
4457         set(handles.UnitsEnglish,<span class="string">'Value'</span>,0)
4458     <span class="keyword">case</span> <span class="string">'english'</span>
4459         dialog_params.english_units = true;
4460         
4461         set(handles.UnitsMetric, <span class="string">'Value'</span>,0)
4462         set(handles.UnitsEnglish,<span class="string">'Value'</span>,1)
4463     <span class="keyword">otherwise</span>
4464 <span class="keyword">end</span>
4465 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4466 
4467 <span class="comment">% [EOF] dialogUnits</span>
4468 
4469 <span class="comment">% --------------------------------------------------------------------</span>
4470 <a name="_sub103" href="#_subfunctions" class="code">function dialogEnpoints(hObject,eventdata,handles,the_endpoints)</a>
4471 
4472 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4473 <span class="keyword">switch</span> the_endpoints
4474     <span class="keyword">case</span> <span class="string">'auto'</span>
4475         dialog_params.set_cross_section_endpoints = false;
4476         
4477         set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,1)
4478         set(handles.EndpointsManual,   <span class="string">'Value'</span>,0)
4479     <span class="keyword">case</span> <span class="string">'manual'</span>
4480         dialog_params.set_cross_section_endpoints = true;
4481         
4482         set(handles.EndpointsAutomatic,<span class="string">'Value'</span>,0)
4483         set(handles.EndpointsManual,   <span class="string">'Value'</span>,1)
4484     <span class="keyword">otherwise</span>
4485 <span class="keyword">end</span>
4486 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4487 
4488 <span class="comment">% [EOF] dialogEnpoints</span>
4489 
4490 <a name="_sub104" href="#_subfunctions" class="code">function dialogPlotStyle(hObject,eventdata,handles,the_style)</a>
4491 
4492 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4493 <span class="keyword">switch</span> the_style
4494     <span class="keyword">case</span> <span class="string">'presentation'</span>
4495         dialog_params.presentation  = true;
4496         dialog_params.print         = false;
4497         
4498         set(handles.StylePresentation,<span class="string">'Value'</span>,1)
4499         set(handles.StylePrint,       <span class="string">'Value'</span>,0)
4500     <span class="keyword">case</span> <span class="string">'print'</span>
4501         dialog_params.presentation  = false;
4502         dialog_params.print         = true;
4503         
4504         set(handles.StylePresentation,<span class="string">'Value'</span>,0)
4505         set(handles.StylePrint,       <span class="string">'Value'</span>,1)
4506     <span class="keyword">otherwise</span>
4507 <span class="keyword">end</span>
4508 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4509 
4510 <span class="comment">% [EOF] dialogEnpoints</span>
4511 
4512 <span class="comment">% --------------------------------------------------------------------</span>
4513 <a name="_sub105" href="#_subfunctions" class="code">function dialogOK(hObject,eventdata,h_OK)</a>
4514 
4515 delete(h_OK)
4516 
4517 <span class="comment">% [EOF] dialogOK</span>
4518 
4519 <span class="comment">% --------------------------------------------------------------------</span>
4520 <a name="_sub106" href="#_subfunctions" class="code">function dialogCancel(hObject,eventdata,handles)</a>
4521 <span class="comment">% Return the original inputs</span>
4522 dialog_params = getappdata(handles.Figure,<span class="string">'original_dialog_params'</span>);
4523 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4524 delete(handles.OK)
4525 
4526 <span class="comment">% [EOF] dialogCancel</span>
4527 
4528 <span class="comment">% --------------------------------------------------------------------</span>
4529 <a name="_sub107" href="#_subfunctions" class="code">function dialogCloseReq(hObject,eventdata,h_OK)</a>
4530 
4531 delete(h_OK)
4532 
4533 <span class="comment">% [EOF] dialogCloseReq</span>
4534 
4535 <a name="_sub108" href="#_subfunctions" class="code">function [beam_angle,magnetic_variation,wse,output_auxiliary_data,load_wse_tide_file] = </a><span class="keyword">...</span>
4536     exportSettingsDialog(beam_angle,magnetic_variation,wse,output_auxiliary_data,load_wse_tide_file,hf)
4537 w = 230;
4538 h = 245;
4539 dx = 10;
4540 dy = 35;
4541 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
4542 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Export Settings'</span>, <span class="keyword">...</span>
4543     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
4544     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4545     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
4546     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
4547     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4548     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4549     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4550     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
4551     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4552     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
4553 dialog_params.beam_angle             = beam_angle;
4554 dialog_params.magnetic_variation     = magnetic_variation;
4555 <span class="keyword">if</span> isstruct(wse) <span class="comment">% tidefile loaded already</span>
4556     dialog_params.wse                = <span class="string">'tide'</span>;
4557     wse_string                       = <span class="string">'tide'</span>;
4558 <span class="keyword">elseif</span> load_wse_tide_file <span class="comment">% tidefile is requested, but not loaded</span>
4559     dialog_params.wse                = <span class="string">'tide'</span>;
4560     wse_string                       = <span class="string">'tide'</span>;
4561 <span class="keyword">else</span>
4562     dialog_params.wse                = wse;
4563     wse_string                       = num2str(wse);
4564 <span class="keyword">end</span>
4565 dialog_params.load_wse_tide_file     = load_wse_tide_file;
4566 dialog_params.output_auxiliary_data  = output_auxiliary_data;
4567 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4568 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
4569 
4570 <span class="comment">% Build the graphics:</span>
4571 <span class="comment">% -------------------</span>
4572 ph = 150;
4573 handles.BathymetryPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4574     <span class="string">'Title'</span>, <span class="string">'Bathymetry'</span>, <span class="keyword">...</span>
4575     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4576     <span class="string">'Position'</span>,[dx dy (w-2*dx) h-dx-dy+10]);
4577 handles.BeamAngleText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
4578     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4579     <span class="string">'String'</span>,<span class="string">'Beam Angle (deg)'</span>, <span class="keyword">...</span>
4580     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
4581     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
4582     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4583     <span class="string">'Position'</span>,[dx+5 h-ph+60-4 100 22]);
4584 handles.BeamAngle = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
4585     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4586     <span class="keyword">...</span><span class="comment">'String','Beam Angle (deg)', ...</span>
4587     <span class="string">'String'</span>,beam_angle,<span class="keyword">...</span>
4588     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
4589     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4590     <span class="string">'Position'</span>,[w-dx-80 h-ph+60 50 22]);
4591 handles.MagneticVariationText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
4592     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4593     <span class="string">'String'</span>,<span class="string">'Magnetic Variation'</span>, <span class="keyword">...</span>
4594     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
4595     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
4596     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4597     <span class="string">'Position'</span>,[dx+5 h-ph+30-4 100 22]);
4598 handles.MagneticVariation = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
4599     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4600     <span class="keyword">...</span><span class="comment">'String','Magnetic Variation', ...</span>
4601     <span class="string">'String'</span>,magnetic_variation,<span class="keyword">...</span>
4602     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
4603     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4604     <span class="string">'Position'</span>,[w-dx-80 h-ph+30 50 22]);
4605 handles.WSEText = uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>, <span class="keyword">...</span>
4606     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4607     <span class="string">'String'</span>,<span class="string">'WSE (m)'</span>, <span class="keyword">...</span>
4608     <span class="keyword">...</span><span class="comment">'Value',beam_angle,...</span>
4609     <span class="string">'HorizontalAlignment'</span>,<span class="string">'right'</span>,<span class="keyword">...</span>
4610     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4611     <span class="string">'Position'</span>,[dx+5 h-ph-4 100 22]);
4612 handles.WSE = uicontrol(<span class="string">'Style'</span>,<span class="string">'edit'</span>, <span class="keyword">...</span>
4613     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4614     <span class="keyword">...</span><span class="comment">'String','Magnetic Variation', ...</span>
4615     <span class="string">'String'</span>,wse_string,<span class="keyword">...</span>
4616     <span class="string">'BackgroundColor'</span>,<span class="string">'w'</span>,<span class="keyword">...</span>
4617     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4618     <span class="string">'Position'</span>,[w-dx-80 h-ph 50 22]);
4619 handles.LoadWSETideFile = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4620     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4621     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4622     <span class="string">'String'</span>,<span class="string">'Read WSE as tide file?'</span>,<span class="keyword">...</span>
4623     <span class="string">'Position'</span>,[dx+5 45 w-2*dx-30 22]);
4624 handles.OutputauxiliaryData = uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>, <span class="keyword">...</span>
4625     <span class="string">'Parent'</span>,handles.BathymetryPanel, <span class="keyword">...</span>
4626     <span class="string">'String'</span>,<span class="string">'Output auxiliary Data'</span>, <span class="keyword">...</span>
4627     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4628     <span class="string">'Position'</span>,[dx+5 20 w-2*dx-30 22]);
4629 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4630     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4631     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
4632     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4633     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
4634 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4635     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4636     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
4637     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4638     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
4639 
4640 <span class="comment">% Update the UI controls:</span>
4641 <span class="comment">% -----------------------</span>
4642 set(handles.BeamAngle,                <span class="string">'String'</span>,dialog_params.beam_angle)
4643 set(handles.MagneticVariation,        <span class="string">'String'</span>,dialog_params.magnetic_variation)
4644 set(handles.WSE,                      <span class="string">'String'</span>,dialog_params.wse)
4645 set(handles.LoadWSETideFile,          <span class="string">'Value'</span>, double(dialog_params.load_wse_tide_file))
4646 set(handles.OutputauxiliaryData,      <span class="string">'Value'</span>, double(dialog_params.output_auxiliary_data))
4647 
4648 <span class="comment">% Set the callbacks:</span>
4649 <span class="comment">% ------------------</span>
4650 set(handles.Figure,                      <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub107" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>,handles.OK})
4651 set(handles.BeamAngle,                   <span class="string">'Callback'</span>,       {@<a href="#_sub109" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4652 set(handles.MagneticVariation,           <span class="string">'Callback'</span>,       {@<a href="#_sub109" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4653 set(handles.WSE,                         <span class="string">'Callback'</span>,       {@<a href="#_sub109" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4654 set(handles.LoadWSETideFile,             <span class="string">'Callback'</span>,       {@<a href="#_sub109" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4655 set(handles.OutputauxiliaryData,         <span class="string">'Callback'</span>,       {@<a href="#_sub109" class="code" title="subfunction dialogExportSettings(hObject,eventdata,handles)">dialogExportSettings</a>,handles})
4656 set(handles.OK,                          <span class="string">'Callback'</span>,       {@<a href="#_sub105" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,      handles.OK})
4657 set(handles.Cancel,                      <span class="string">'Callback'</span>,       {@<a href="#_sub106" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,  handles})
4658 
4659 <span class="comment">% Position the dialog and make it visible:</span>
4660 <span class="comment">% ----------------------------------------</span>
4661 fpos = get(hf,<span class="string">'Position'</span>);
4662 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
4663 movegui(handles.Figure,dpos)
4664 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
4665 
4666 <span class="comment">% Hold the dialog open:</span>
4667 <span class="comment">% ---------------------</span>
4668 waitfor(handles.OK)
4669 
4670 <span class="comment">% Return the outputs and close the dialog:</span>
4671 <span class="comment">% ----------------------------------------</span>
4672 dialog_params           = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4673 beam_angle              = dialog_params.beam_angle;
4674 magnetic_variation      = dialog_params.magnetic_variation;
4675 wse                     = dialog_params.wse;
4676 load_wse_tide_file      = logical(dialog_params.load_wse_tide_file);
4677 output_auxiliary_data   = logical(dialog_params.output_auxiliary_data);
4678 
4679 delete(handles.Figure)
4680 
4681 <span class="comment">% [EOF] exportSettingsDialog</span>
4682 
4683 <span class="comment">% --------------------------------------------------------------------</span>
4684 <a name="_sub109" href="#_subfunctions" class="code">function dialogExportSettings(hObject,eventdata,handles)</a>
4685 
4686 <span class="comment">% Grab the current data</span>
4687 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4688 
4689 <span class="comment">% Set it according to the dialog box values</span>
4690 dialog_params.beam_angle                = get(handles.BeamAngle,<span class="string">'String'</span>);
4691 dialog_params.magnetic_variation        = get(handles.MagneticVariation,<span class="string">'String'</span>);
4692 dialog_params.wse                       = get(handles.WSE,<span class="string">'String'</span>);
4693 dialog_params.load_wse_tide_file        = get(handles.LoadWSETideFile,<span class="string">'Value'</span>);
4694 dialog_params.output_auxiliary_data     = get(handles.OutputauxiliaryData,<span class="string">'Value'</span>);
4695 
4696 <span class="comment">% Re-store the application data</span>
4697 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4698 
4699 <span class="comment">% [EOF] dialogExportSettings</span>
4700 
4701 <a name="_sub110" href="#_subfunctions" class="code">function [selected_figures] = openFiguresDialog(figure_names,hf)</a>
4702 
4703 w = 230;
4704 h = 200;
4705 dx = 10;
4706 dy = 35;
4707 the_color = get(0,<span class="string">'factoryUipanelBackgroundColor'</span>);
4708 handles.Figure = figure(<span class="string">'Name'</span>, <span class="string">'Select open figures to export'</span>, <span class="keyword">...</span>
4709     <span class="string">'Color'</span>,the_color, <span class="keyword">...</span>
4710     <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4711     <span class="string">'HandleVisibility'</span>,<span class="string">'callback'</span>, <span class="keyword">...</span>
4712     <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>, <span class="keyword">...</span>
4713     <span class="string">'MenuBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4714     <span class="string">'ToolBar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
4715     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4716     <span class="string">'Position'</span>,[0 0 w h], <span class="keyword">...</span>
4717     <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
4718     <span class="string">'Visible'</span>,<span class="string">'off'</span>);
4719 dialog_params.figure_names               = figure_names;
4720 dialog_params.selected_figures           = <span class="string">''</span>;
4721 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4722 setappdata(handles.Figure,<span class="string">'original_dialog_params'</span>,dialog_params)
4723 
4724 <span class="comment">% Build the graphics:</span>
4725 <span class="comment">% -------------------</span>
4726 handles.ListboxPanel = uipanel(<span class="string">'Parent'</span>,handles.Figure, <span class="keyword">...</span>
4727     <span class="string">'Title'</span>, <span class="string">'Figures'</span>, <span class="keyword">...</span>
4728     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4729     <span class="string">'Position'</span>,[dx dy (w-2*dx) h-dx-dy+10]);
4730 handles.Figures = uicontrol(<span class="string">'Style'</span>,<span class="string">'listbox'</span>, <span class="keyword">...</span>
4731     <span class="string">'Parent'</span>,handles.ListboxPanel, <span class="keyword">...</span>
4732     <span class="string">'BackGroundColor'</span>,<span class="string">'white'</span>,<span class="keyword">...</span>
4733     <span class="string">'String'</span>,figure_names, <span class="keyword">...</span>
4734     <span class="string">'Min'</span>, 0,<span class="keyword">...</span>
4735     <span class="string">'Max'</span>, 2,<span class="keyword">...</span>
4736     <span class="string">'Units'</span>,<span class="string">'pixels'</span>, <span class="keyword">...</span>
4737     <span class="string">'Position'</span>,[15 35 (w-5*dx) 100]);
4738 
4739 
4740 handles.OK = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4741     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4742     <span class="string">'String'</span>,  <span class="string">'OK'</span>, <span class="keyword">...</span>
4743     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4744     <span class="string">'Position'</span>,[w/2-80-dx/4 6 80 22]);
4745 handles.Cancel = uicontrol(<span class="string">'Style'</span>,   <span class="string">'pushbutton'</span>, <span class="keyword">...</span>
4746     <span class="string">'Parent'</span>,  handles.Figure, <span class="keyword">...</span>
4747     <span class="string">'String'</span>,  <span class="string">'Cancel'</span>, <span class="keyword">...</span>
4748     <span class="string">'Units'</span>,   <span class="string">'pixels'</span>, <span class="keyword">...</span>
4749     <span class="string">'Position'</span>,[w/2+dx/4 6 80 22]);
4750 
4751 <span class="comment">% Update the UI controls:</span>
4752 <span class="comment">% -----------------------</span>
4753 
4754 
4755 <span class="comment">% Set the callbacks:</span>
4756 <span class="comment">% ------------------</span>
4757 set(handles.Figure,            <span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub107" class="code" title="subfunction dialogCloseReq(hObject,eventdata,h_OK)">dialogCloseReq</a>,handles.OK})
4758 set(handles.Figures,           <span class="string">'Callback'</span>,       {@<a href="#_sub111" class="code" title="subfunction dialogSelectFigures(hObject,eventdata,handles)">dialogSelectFigures</a>    handles})
4759 set(handles.OK,                <span class="string">'Callback'</span>,       {@<a href="#_sub105" class="code" title="subfunction dialogOK(hObject,eventdata,h_OK)">dialogOK</a>,       handles.OK})
4760 set(handles.Cancel,            <span class="string">'Callback'</span>,       {@<a href="#_sub106" class="code" title="subfunction dialogCancel(hObject,eventdata,handles)">dialogCancel</a>,   handles})
4761 
4762 <span class="comment">% Position the dialog and make it visible:</span>
4763 <span class="comment">% ----------------------------------------</span>
4764 fpos = get(hf,<span class="string">'Position'</span>);
4765 dpos = [(fpos(1) + fpos(3)/2 -w/2) (fpos(2) + fpos(4)/2)];
4766 movegui(handles.Figure,dpos)
4767 set(handles.Figure,<span class="string">'Visible'</span>,<span class="string">'on'</span>)
4768 
4769 <span class="comment">% Hold the dialog open:</span>
4770 <span class="comment">% ---------------------</span>
4771 waitfor(handles.OK)
4772 
4773 <span class="comment">% Return the outputs and close the dialog:</span>
4774 <span class="comment">% ----------------------------------------</span>
4775 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4776 selected_figures = dialog_params.selected_figures;
4777 
4778 delete(handles.Figure)
4779 
4780 <span class="comment">% [EOF] openFiguresDialog</span>
4781 
4782 <span class="comment">% --------------------------------------------------------------------</span>
4783 <a name="_sub111" href="#_subfunctions" class="code">function dialogSelectFigures(hObject,eventdata,handles)</a>
4784 
4785 dialog_params = getappdata(handles.Figure,<span class="string">'dialog_params'</span>);
4786 
4787 idx_selected = get(handles.Figures,<span class="string">'Value'</span>);
4788 fig_names    = get(handles.Figures,<span class="string">'String'</span>);
4789 selected     = fig_names(idx_selected);
4790 dialog_params.selected_figures = selected;
4791 
4792 setappdata(handles.Figure,<span class="string">'dialog_params'</span>,dialog_params)
4793 
4794 
4795 
4796 <span class="comment">% --------------------------------------------------------------------</span>
4797 <a name="_sub112" href="#_subfunctions" class="code">function icons = getIcons</a>
4798 
4799 <span class="comment">% Load data</span>
4800 idx = 1;
4801 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4802     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4803     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   129   120   135   188   NaN   NaN   NaN
4804     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN    96   189   NaN   NaN   130   NaN    95   NaN
4805     NaN   NaN   206   206   206   206   NaN   NaN   NaN   NaN   NaN   NaN   NaN    84    79   NaN
4806     NaN   206   255   255   255   255   198   197   NaN   NaN   NaN   NaN    83    79    76   NaN
4807     198   255   255   255   255   255   255   198   198   198   198   198   198   212   212   NaN
4808     198   255   255   255   255   255   255   255   255   255   255   255   198   157   197   NaN
4809     198   255   226   198   198   198   198   198   198   198   198   198   198   198   177   NaN
4810     198   255   198   218   255   255   255   255   255   255   255   255   255   255   161   NaN
4811     198   253   198   247   255   255   255   255   255   255   255   255   255   251   155   NaN
4812     198   226   201   255   255   255   255   255   255   255   255   255   231   206   165   NaN
4813     198   207   215   255   255   255   255   255   255   255   255   255   239   198   159   NaN
4814     198   198   240   255   255   255   255   255   255   255   255   255   222   157   159   NaN
4815     198   199   255   255   255   255   255   255   255   255   255   255   191   165   159   NaN
4816     NaN   165   165   165   165   165   165   165   165   165   165   165   165   159   159   NaN
4817     NaN   NaN   159   159   159   159   159   159   159   159   159   159   159   159   NaN   NaN]/255;
4818 
4819 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4820     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4821     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   145   137   149   195   NaN   NaN   NaN
4822     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   116   196   NaN   NaN   145   NaN   116   NaN
4823     NaN   NaN   162   162   162   162   NaN   NaN   NaN   NaN   NaN   NaN   NaN   107   105   NaN
4824     NaN   162   255   255   255   255   154   197   NaN   NaN   NaN   NaN   106   104   103   NaN
4825     154   255   255   255   255   255   255   154   154   154   154   154   154   208   208   NaN
4826     154   243   243   243   243   243   243   255   255   255   255   255   154   123   197   NaN
4827     154   235   193   154   154   154   154   154   154   154   154   154   154   154   137   NaN
4828     154   215   154   191   255   255   251   255   255   255   255   255   231   255   126   NaN
4829     154   213   154   240   255   255   255   255   255   255   255   255   199   249   123   NaN
4830     154   179   160   255   247   247   247   247   247   247   247   247   190   188   115   NaN
4831     154   162   184   255   235   235   235   235   235   235   235   231   186   154   169   NaN
4832     154   154   228   255   227   227   227   227   227   227   227   223   178   123   169   NaN
4833     154   156   255   215   215   215   215   215   215   215   215   215   153   115   169   NaN
4834     NaN   115   115   115   115   115   115   115   115   115   115   115   115   169   169   NaN
4835     NaN   NaN   169   169   169   169   169   169   169   169   169   169   169   169   NaN   NaN]/255;
4836 
4837 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4838     [NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN
4839     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   166   161   170   202   NaN   NaN   NaN
4840     NaN   NaN   NaN   NaN   NaN   NaN   NaN   NaN   149   205   NaN   NaN   166   NaN   148   NaN
4841     NaN   NaN    34    34    34    34   NaN   NaN   NaN   NaN   NaN   NaN   NaN   141   144   NaN
4842     NaN    34   255   255   255   255    25   197   NaN   NaN   NaN   NaN   142   145   147   NaN
4843     25   255   156   156   156   156   255    25    25    25    25    25    25   200   200   NaN
4844     25   156   140   140   140   140   140   255   255   255   255   255    25    26   197   NaN
4845     25   132    80    25    25    25    25    25    25    25    25    25    25    25    25   NaN
4846     25   132    25   108   255   255   247   255   255   255   255   255   132   255    25   NaN
4847     25   112    25   137   156   156   156   156   156   156   156   156    91   150    25   NaN
4848     25    67    33   165   148   148   148   148   148   148   148   148    83    92    13   NaN
4849     25    38    64   156   132   132   132   132   132   132   132   132    67    25   176   NaN
4850     25    26   122   156   124   124   124   124   124   124   124   124    67    26   176   NaN
4851     25    28   156   108   108   108   108   108   108   108   108   108    41    13   176   NaN
4852     NaN    13    13    13    13    13    13    13    13    13    13    13    13   176   176   NaN
4853     NaN   NaN   176   176   176   176   176   176   176   176   176   176   176   176   NaN   NaN]/255;
4854 
4855 <span class="comment">% Save data</span>
4856 idx = idx+1;
4857 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4858     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4859     NaN    0.6902    0.6902    0.6902    0.6902    0.6902    0.6274    0.6274    0.5647    0.5647    0.5647    0.5019    0.5019    0.4392    0.2510       NaN
4860     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.3137    0.3765    0.2510    0.4670
4861     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.2510    0.1882    0.2510    0.4670
4862     NaN    0.6274    0.7529    0.5019    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.1882    0.5019    0.2510    0.4670
4863     NaN    0.6274    0.7529    0.4392    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.1882    0.4392    0.2510    0.4670
4864     NaN    0.6274    0.7529    0.4392    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.7529    0.1255    0.3765    0.2510    0.4670
4865     NaN    0.5647    0.7529    0.3765    1.0000    1.0000    0.9412    0.9412    0.8784    0.8157    0.7529    0.7529    0.0627    0.3765    0.2510    0.4670
4866     NaN    0.5647    0.7529    0.6902    0.3765    0.3137    0.3137    0.2510    0.1882    0.1882    0.1255    0.0627    0.3765    0.3137    0.2510    0.4670
4867     NaN    0.5019    0.6902    0.6902    0.6274    0.5647    0.5019    0.5019    0.5019    0.4392    0.4392    0.3765    0.3137    0.3137    0.2510    0.4670
4868     NaN    0.5019    0.6902    0.6274    0.5647    0.3137    0.3137    0.3137    0.3137    0.3137    0.3765    0.3137    0.3137    0.2510    0.2510    0.4670
4869     NaN    0.4392    0.6274    0.5647    0.5019    0.3137       NaN    0.1882    0.8157    0.8157    0.3765    0.2510    0.2510    0.2510    0.2510    0.4670
4870     NaN    0.4392    0.6274    0.5019    0.5019    0.3137    0.1882    0.4392    0.8784    0.8784    0.4392    0.1882    0.2510    0.1882    0.2510    0.4670
4871     NaN    0.4392    0.5647    0.5019    0.1255    0.1255    0.6902    0.6902    0.7529    0.7529    0.3137    0.1882    0.1882    0.1882    0.2510    0.4670
4872     NaN    0.7333    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.2510    0.4670
4873     NaN       NaN    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670    0.4670];
4874 
4875 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4876     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4877     NaN    0.7216    0.7216    0.6902    0.6902    0.6588    0.6274    0.5961    0.5647    0.5647    0.5333    0.5019    0.4706    0.4706    0.2196       NaN
4878     NaN    0.6902    0.7529    0.5647    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.3451    0.3451    0.2196    0.5378
4879     NaN    0.6902    0.7529    0.5333    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.3137    0.1882    0.2196    0.5378
4880     NaN    0.6588    0.7529    0.5019    1.0000    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.3137    0.4706    0.2196    0.5378
4881     NaN    0.6274    0.7529    0.4706    1.0000    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.2824    0.4392    0.2196    0.5378
4882     NaN    0.5961    0.7529    0.4392    1.0000    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.8157    0.2510    0.4078    0.2196    0.5378
4883     NaN    0.5647    0.7529    0.4078    1.0000    1.0000    0.9725    0.9412    0.9098    0.8470    0.8157    0.7843    0.2196    0.3765    0.2196    0.5378
4884     NaN    0.5333    0.7216    0.7216    0.3765    0.3765    0.3451    0.3137    0.3137    0.2824    0.2510    0.2196    0.3765    0.3451    0.2196    0.5378
4885     NaN    0.5019    0.6902    0.6902    0.6274    0.5647    0.5333    0.5019    0.4706    0.4392    0.4078    0.3765    0.3451    0.3137    0.2196    0.5378
4886     NaN    0.4706    0.6588    0.6274    0.5647    0.3451    0.3451    0.3451    0.3451    0.3765    0.4078    0.3451    0.3137    0.2824    0.2196    0.5378
4887     NaN    0.4706    0.6274    0.5647    0.5333    0.3451       NaN    0.2510    0.8470    0.8784    0.4706    0.2824    0.2824    0.2510    0.2196    0.5378
4888     NaN    0.4392    0.5961    0.5333    0.5019    0.3451    0.2510    0.4706    0.8784    0.9098    0.5019    0.2510    0.2510    0.2510    0.2196    0.5378
4889     NaN    0.4078    0.5647    0.5019    0.2824    0.1882    0.7216    0.7216    0.7529    0.7843    0.3137    0.2510    0.2510    0.2196    0.2196    0.5378
4890     NaN    0.7176    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.2196    0.5378
4891     NaN       NaN    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378    0.5378];
4892 
4893 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4894     [NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN       NaN
4895     NaN    0.9412    0.9412    0.9412    0.9412    0.9412    0.9412    0.8784    0.8784    0.8784    0.8784    0.8784    0.8157    0.8157    0.4392       NaN
4896     NaN    0.9412    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.7529    0.6902    0.4392    0.5997
4897     NaN    0.9412    1.0000    0.9412    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.7529    0.3765    0.4392    0.5997
4898     NaN    0.9412    1.0000    0.8784    1.0000    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.6902    0.8784    0.4392    0.5997
4899     NaN    0.9412    1.0000    0.8784    1.0000    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.6902    0.8157    0.4392    0.5997
4900     NaN    0.8784    1.0000    0.8157    1.0000    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.8784    0.6274    0.8157    0.4392    0.5997
4901     NaN    0.8784    1.0000    0.8157    1.0000    1.0000    1.0000    0.9412    0.9412    0.9412    0.8784    0.8784    0.6274    0.7529    0.4392    0.5997
4902     NaN    0.8784    1.0000    1.0000    0.8157    0.7529    0.7529    0.7529    0.6902    0.6902    0.6274    0.6274    0.7529    0.7529    0.4392    0.5997
4903     NaN    0.8784    1.0000    1.0000    1.0000    0.9412    0.9412    0.8784    0.8784    0.8157    0.8157    0.7529    0.7529    0.6902    0.4392    0.5997
4904     NaN    0.8157    1.0000    1.0000    0.9412    0.4392    0.4392    0.4392    0.4392    0.4392    0.5019    0.7529    0.6902    0.6902    0.4392    0.5997
4905     NaN    0.8157    1.0000    0.9412    0.9412    0.4392       NaN    0.2510    0.9412    0.9412    0.5019    0.6902    0.6902    0.6274    0.4392    0.5997
4906     NaN    0.8157    1.0000    0.9412    0.8784    0.4392    0.2510    0.5647    0.9412    0.9412    0.5647    0.6274    0.6274    0.6274    0.4392    0.5997
4907     NaN    0.8157    0.9412    0.8784    0.6902    0.2510    0.7529    0.7529    0.8157    0.8157    0.3137    0.6274    0.6274    0.6274    0.4392    0.5997
4908     NaN    0.8275    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.4392    0.5997
4909     NaN       NaN    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997    0.5997];
4910 
4911 <span class="comment">% Plotting parameters</span>
4912 idx = idx+1;
4913 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4914     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   255
4915     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4916     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4917     0   255   203    79   213   255   255   255   255   255   254   160   109   247     0   165
4918     0   254    71   224    79   255   255   255   255   255   211   101   165   123     0   165
4919     0   191   123   255   123   203   255   255   255   255   101   224   254    79     0   165
4920     0   101   239   255   224   109   255   255   255   247    79   254   254   123    36   165
4921     0   123   254   255   255    79   247   255   255   165   165   255   255   224     0   165
4922     0   255   255   255   254   160   173   255   255    87   239   255   255   255     0   165
4923     0   255   255   255   255   224   101   255   239    87   255   255   255   255     0   165
4924     0   255   255   255   255   255   101   224   123   191   255   255   255   255     0   165
4925     0   255   255   255   255   254   224    54   101   255   255   255   255   255     0   165
4926     0   255   255   255   255   255   255   247   255   255   255   255   255   255     0   165
4927     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4928     0     0     0     1     0     0     0     0     0     0     0     0     0     0     0   165
4929     255   165   165   165   172   165   165   165   165   165   165   165   165   165   165   165]/255;
4930 
4931 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4932     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
4933     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0     0
4934     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4935     0   255   203    79   213   255   255   255   255   255   254   160   109   247     0   165
4936     0   254    71   224    79   255   255   255   255   255   211   101   165   123     0   165
4937     0   191   123   255   123   203   255   255   255   255   101   224   254    79     0   165
4938     0   101   239   255   224   109   255   255   255   247    79   254   254   123     0   165
4939     0   123   254   255   255    79   247   255   255   165   165   255   255   224     0   165
4940     0   255   255   255   254   160   173   255   255    87   239   255   255   255     0   165
4941     0   255   255   255   255   224   101   255   239    87   255   255   255   255     0   165
4942     0   255   255   255   255   255   101   224   123   191   255   255   255   255     0   165
4943     0   255   255   255   255   254   224    54   101   255   255   255   255   255     0   165
4944     0   255   255   255   255   255   255   247   255   255   255   255   255   255     0   165
4945     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   165
4946     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   165
4947     0   165   165   165   153   165   165   165   165   165   165   165   165   165   165   165]/255;
4948 
4949 icons(idx).data(:,:,3) = <span class="keyword">...</span>
4950     [  0     0     0     0     0     0     0     0     0     0     0     0     0     0     0   255
4951     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4952     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4953     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4954     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4955     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4956     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4957     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4958     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4959     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4960     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4961     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4962     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4963     0   255   255   255   255   255   255   255   255   255   255   255   255   255     0   145
4964     0    24    39     0     0     0     0     0     0     0     0     0     0     0     0   145
4965     255   145   145   145   134   145   145   145   145   145   145   145   145   145   145   145]/255;
4966 
4967 <span class="comment">% Processing parameters</span>
4968 idx = idx+1;
4969 icons(idx).data(:,:,1) = <span class="keyword">...</span>
4970     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4971     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4972     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4973     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4974     255     0   255   255   107   255   255   107   255   255   107   255   107   255     0   255
4975     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4976     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4977     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4978     255     0   255   255   107   255   107   255   107   255   255   107   255   255     0   255
4979     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4980     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4981     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4982     255     0   255   107   255   107   255   107   255   255   107   255   107   255     0   255
4983     255     0   255   255   107   255   255   107   255   255   255   107   255   255     0   255
4984     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4985     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
4986 
4987 icons(idx).data(:,:,2) = <span class="keyword">...</span>
4988     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
4989     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
4990     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4991     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4992     255     0   255   255    99   255   255    99   255   255    99   255    99   255     0   255
4993     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4994     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4995     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4996     255     0   255   255    99   255    99   255    99   255   255    99   255   255     0   255
4997     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
4998     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
4999     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
5000     255     0   255    99   255    99   255    99   255   255    99   255    99   255     0   255
5001     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
5002     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
5003     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
5004 
5005 icons(idx).data(:,:,3) = <span class="keyword">...</span>
5006     [255   255   255   255   255   255   255   255   255   255   255   255   255   255   255   255
5007     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255
5008     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
5009     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
5010     255     0   255   255    99   255   255    99   255   255    99   255    99   255     0   255
5011     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
5012     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
5013     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
5014     255     0   255   255    99   255    99   255    99   255   255    99   255   255     0   255
5015     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
5016     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
5017     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
5018     255     0   255    99   255    99   255    99   255   255    99   255    99   255     0   255
5019     255     0   255   255    99   255   255    99   255   255   255    99   255   255     0   255
5020     255     0   255   255   255   255   255   255   255   255   255   255   255   255     0   255
5021     255     0     0     0   255   255   255   255   255   255   255   255     0     0     0   255]/255;
5022 
5023 <span class="comment">% Export bathymetry dialog</span>
5024 idx = idx+1;
5025 icons(idx).data(:,:,1) = <span class="keyword">...</span>
5026     [226    226    226    226    226    226    226    197    220    226    226    226    226    226    226    226
5027     226    226    226    226    226    227    241    144    158    241    228    228    229    228    229    226
5028     226    243    243    243    237    237    246    164    119    242    232    225    226    218    243    206
5029     179    152    153    166    148    148    177    179    63    185    141    146    154    151    179    189
5030     167    4    134    175    151    164    161    198    122    255    212    233    215    199    140    185
5031     134    50    209    241    255    255    133    118    15    20    28    94    4    0    0    89
5032     136    0    0    0    0    0    0    0    0    0    0    0    0    21    56    140
5033     208    255    226    233    255    242    215    232    251    237    226    233    207    222    156    139
5034     172    159    152    153    166    145    178    147    169    164    161    163    154    153    128    135
5035     160    164    148    139    171    150    165    154    165    185    166    173    190    190    148    162
5036     214    233    211    203    217    212    217    238    202    236    213    222    230    224    184    184
5037     219    206    174    190    219    204    201    218    183    224    219    222    217    202    176    182
5038     210    182    183    214    225    220    203    229    175    217    220    220    222    212    184    185
5039     197    175    207    224    223    220    205    231    170    221    220    220    222    217    191    187
5040     186    193    223    224    220    201    203    228    171    224    218    220    222    215    190    187
5041     189    211    220    216    204    201    214    213    187    213    216    220    220    212    193    189
5042     ]/255;
5043 icons(idx).data(:,:,2) = <span class="keyword">...</span>
5044     [233    233    233    233    233    233    233    204    227    233    233    233    233    233    233    233
5045     233    233    233    233    233    234    247    152    167    247    235    234    235    234    236    233
5046     233    242    242    240    236    237    247    170    131    243    234    231    234    224    245    212
5047     208    193    199    209    196    196    211    197    100    211    194    196    200    199    202    196
5048     205    19    179    199    183    197    182    179    162    255    217    246    234    231    191    199
5049     167    47    229    240    255    252    139    154    87    86    99    139    79    46    23    121
5050     175    30    47    29    28    19    5    41    33    39    54    55    65    83    81    185
5051     236    255    249    253    255    251    240    255    235    255    247    252    233    245    204    190
5052     208    200    195    196    204    192    214    202    144    215    201    201    195    195    177    186
5053     200    201    189    183    206    192    204    210    111    231    209    214    222    223    199    209
5054     245    255    251    247    254    254    252    255    156    255    254    255    255    254    235    232
5055     249    244    227    237    247    244    242    255    132    239    254    250    247    244    228    231
5056     245    231    231    246    253    249    243    255    119    223    255    251    250    245    229    232
5057     239    227    244    251    251    248    244    255    110    217    255    250    251    246    233    233
5058     233    237    250    252    249    242    246    255    115    209    255    250    251    246    232    232
5059     234    245    249    247    242    242    246    231    154    192    246    249    249    245    234    233
5060     ]/255;
5061 icons(idx).data(:,:,3) = <span class="keyword">...</span>
5062     [233    233    233    233    233    233    233    204    227    233    233    233    233    233    233    233
5063     233    233    233    233    233    234    247    152    167    247    235    234    235    234    236    233
5064     233    242    242    240    236    237    247    170    131    243    234    231    234    224    245    212
5065     208    193    199    209    196    196    211    197    100    211    194    196    200    199    202    196
5066     205    19    179    199    183    197    182    179    162    255    217    246    234    231    191    199
5067     167    47    229    240    255    252    139    154    87    86    99    139    79    46    23    121
5068     175    30    47    29    28    19    5    41    33    39    54    55    65    83    81    185
5069     236    255    249    253    255    251    240    255    235    255    247    252    233    245    204    190
5070     208    200    195    196    204    192    214    202    144    215    201    201    195    195    177    186
5071     200    201    189    183    206    192    204    210    111    231    209    214    222    223    199    209
5072     245    255    251    247    254    254    252    255    156    255    254    255    255    254    235    232
5073     249    244    227    237    247    244    242    255    132    239    254    250    247    244    228    231
5074     245    231    231    246    253    249    243    255    119    223    255    251    250    245    229    232
5075     239    227    244    251    251    248    244    255    110    217    255    250    251    246    233    233
5076     233    237    250    252    249    242    246    255    115    209    255    250    251    246    232    232
5077     234    245    249    247    242    242    246    231    154    192    246    249    249    245    234    233
5078     ]/255;
5079 
5080 <span class="comment">% Export Figures Dialog</span>
5081 idx = idx + 1;
5082 icons(idx).data(:,:,1) = <span class="keyword">...</span>
5083     [NaN    NaN    10    23    23    23    23    23    23    23    21    3    NaN    NaN    NaN    NaN
5084     NaN    NaN    67    255    255    255    255    255    255    255    201    141    NaN    NaN    NaN    NaN
5085     NaN    NaN    43    255    241    240    241    246    252    255    186    220    151    NaN    NaN    NaN
5086     NaN    NaN    42    255    238    237    237    236    238    254    210    178    214    38    NaN    NaN
5087     NaN    NaN    43    255    241    241    241    241    240    244    252    255    255    79    NaN    NaN
5088     NaN    NaN    47    255    232    232    225    224    224    223    220    238    255    69    NaN    NaN
5089     NaN    NaN    55    233    114    225    230    223    221    221    215    237    255    67    NaN    NaN
5090     4    NaN    37    181    168    126    193    214    205    200    203    242    255    67    NaN    NaN
5091     41    164    134    153    144    139    131    209    238    223    242    240    255    67    NaN    NaN
5092     41    118    91    91    122    125    120    106    170    241    245    241    255    67    NaN    NaN
5093     41    113    91    89    97    108    99    89    117    205    190    230    255    67    NaN    NaN
5094     41    124    94    88    78    74    81    179    255    252    244    241    255    67    NaN    NaN
5095     13    34    76    187    88    92    222    255    255    250    250    250    255    73    NaN    NaN
5096     NaN    NaN    69    236    121    227    255    243    238    238    238    238    255    82    NaN    NaN
5097     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
5098 
5099 
5100 icons(idx).data(:,:,2) = <span class="keyword">...</span>
5101     [NaN    NaN    10    24    24    24    24    24    24    24    22    4    NaN    NaN    NaN    NaN
5102     NaN    NaN    69    255    255    255    255    255    255    255    204    144    NaN    NaN    NaN    NaN
5103     NaN    NaN    45    255    241    240    241    246    252    255    189    222    155    NaN    NaN    NaN
5104     NaN    NaN    43    255    238    237    237    236    238    254    210    179    215    39    NaN    NaN
5105     NaN    NaN    44    255    241    241    241    241    240    244    252    255    255    80    NaN    NaN
5106     NaN    NaN    49    255    231    230    225    224    224    223    220    238    255    70    NaN    NaN
5107     NaN    NaN    56    227    136    214    227    223    221    221    215    237    255    68    NaN    NaN
5108     4    NaN    19    157    243    154    181    210    204    200    203    242    255    67    NaN    NaN
5109     51    255    231    225    219    217    172    197    232    222    242    240    255    67    NaN    NaN
5110     52    227    184    183    195    201    204    172    169    239    245    241    255    67    NaN    NaN
5111     51    218    177    177    180    187    187    177    130    202    190    230    255    67    NaN    NaN
5112     51    237    195    183    172    170    152    175    255    251    244    241    255    67    NaN    NaN
5113     15    38    72    173    183    149    211    255    255    250    250    250    255    73    NaN    NaN
5114     NaN    NaN    65    226    174    214    252    242    238    238    238    238    255    84    NaN    NaN
5115     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
5116 
5117 
5118 icons(idx).data(:,:,3) = <span class="keyword">...</span>
5119     [NaN    NaN    9    23    23    23    23    23    23    23    21    3    NaN    NaN    NaN    NaN
5120     NaN    NaN    66    255    255    255    255    255    255    255    196    139    NaN    NaN    NaN    NaN
5121     NaN    NaN    42    255    239    238    238    244    252    255    186    216    148    NaN    NaN    NaN
5122     NaN    NaN    41    255    236    235    235    234    237    251    210    176    212    36    NaN    NaN
5123     NaN    NaN    42    255    239    239    239    239    238    241    252    255    255    78    NaN    NaN
5124     NaN    NaN    46    255    233    232    224    223    223    223    219    235    255    67    NaN    NaN
5125     NaN    NaN    53    240    101    232    230    221    219    218    213    235    255    65    NaN    NaN
5126     5    NaN    60    212    94    107    205    215    203    198    201    240    255    66    NaN    NaN
5127     34    56    40    80    70    62    94    222    241    221    240    238    255    66    NaN    NaN
5128     35    10    2    0    51    55    36    46    176    240    243    239    255    66    NaN    NaN
5129     35    11    9    7    16    34    12    6    110    204    188    228    255    66    NaN    NaN
5130     35    14    0    0    0    0    14    187    255    251    242    239    255    66    NaN    NaN
5131     12    37    84    206    0    41    234    255    255    248    248    248    255    72    NaN    NaN
5132     NaN    NaN    69    249    79    239    255    240    236    236    236    236    255    80    NaN    NaN
5133     NaN    NaN    NaN    0    0    0    0    0    0    0    0    0    0    0    NaN    NaN]/255;
5134 
5135 <span class="comment">% Export Excel File</span>
5136 idx = idx + 1;
5137 icons(idx).data(:,:,1) = <span class="keyword">...</span>
5138     [NaN    NaN    NaN    NaN    NaN    NaN  106  252  255  255  255  255  255  255  255  255
5139    38  136  109  101   96   77   95  134  106   99   93   87   90   66  255  255
5140    52  197  232  217  210  202  191  178  170  164  160  159  155   15  255  255
5141    51  181  255  255  255  255  255  255  255  255  255  255  253    9  255  255
5142    49  174  245  153  156  175  255  255  181  153  149  205  245    0  255  255
5143    47  168  199  122  149  100  155  183   99   99   15  117  245    0  255  241
5144    45  158  255  146  146  141   87   68  120   34   86  255  238    0  252  232
5145    42  144  255  255  158  158  143   74   68  117  255  255  230    0  255  255
5146    40  134  255  255  169   15  150  111   68   81  105  167  236    0  230  217
5147    37  131  255  158   99  106   10  143  117   50   51  165  252    0  255  254
5148    35  122  208    0   22   32    8   17  110   20    0   13  212    0  255  245
5149    33  115  255  255  255  255  255  250  146  113  119  106  217    0  236  217
5150    31  109  255  254  252  251  250  255  255  255  255  255  241    0  255  251
5151    29  116  190  168  164  157  145  133  126  121  117  118  112    0  215  205
5152    20   63   47   38   36   20   38   83   64   51   52   55   64   20  255  241
5153     NaN    NaN    NaN    NaN    NaN    NaN   96  249  252  228  237  251  249  203  241  246]/255;
5154 
5155 icons(idx).data(:,:,2) = <span class="keyword">...</span>
5156     [NaN    NaN    NaN    NaN    NaN    NaN  114  252  255  255  255  255  255  255  255  255
5157    49  180  152  145  140  118  140  173  150  139  132  126  126  106  255  255
5158    67  249  252  242  237  231  221  207  201  196  194  193  193   75  255  255
5159    66  232  255  255  255  255  255  255  255  255  255  255  255   68  255  255
5160    64  226  251  197  191  200  255  255  194  170  168  214  253   61  255  255
5161    62  220  224  183  207  173  189  202  167  175  116  172  253   58  255  246
5162    60  211  255  190  196  203  166  131  187  134  148  255  249   54  254  240
5163    57  199  255  255  198  203  202  158  132  168  255  255  245   47  255  255
5164    54  190  255  255  200  110  199  185  155  147  160  203  251   44  240  230
5165    52  187  255  204  187  194  121  204  189  139   99  179  255   39  255  254
5166    49  180  230   42   49   53   36   64  182   98   65   70  228   36  255  248
5167    47  171  255  255  255  255  255  255  186  115  124  114  235   34  243  229
5168    45  166  255  255  254  254  255  255  255  255  255  255  255   33  255  252
5169    43  176  222  206  204  200  190  180  174  171  169  169  169   32  229  220
5170    30  101   81   74   69   54   72  116   96   84   84   84   94   55  255  245
5171     NaN    NaN    NaN    NaN    NaN    NaN  105  251  253  237  242  252  251  218  246  249]/255;
5172 
5173 icons(idx).data(:,:,3) = <span class="keyword">...</span>
5174     [ NaN    NaN    NaN    NaN    NaN    NaN  125  253  255  255  255  255  255  255  255  255
5175    34  118   92   84   79   56   83  111   88   79   73   69   74   45  255  255
5176    46  180  228  207  203  195  182  169  159  155  149  149  145    0  255  255
5177    45  163  255  255  255  255  255  255  255  255  255  255  254    0  255  255
5178    42  156  248  152  155  176  255  255  181  154  147  206  245    0  255  255
5179    40  150  202  117  136   87  154  181   90   84    8  120  243    0  255  252
5180    38  138  255  145  137  131   81   65  106   27   86  255  238    0  255  250
5181    35  122  255  255  159  152  137   75   62  121  255  255  229    0  255  255
5182    33  113  255  255  171   13  145  111   67   76   84  159  234    0  255  247
5183    30  109  255  160   89   97   10  136  111   36   33  159  251    0  255  255
5184    28   99  211    0   12   23    2   11  101    0    0   13  209    0  255  253
5185    26   92  255  255  255  255  255  250  146  111  117  104  213    0  255  245
5186    23   89  255  255  255  255  255  255  255  255  255  255  241    0  255  254
5187    22   93  180  156  151  141  129  114  105   98   93   93   83    0  255  239
5188    15   43   26   17   15    0   25   63   45   39   38   39   44    9  255  252
5189     NaN    NaN    NaN    NaN    NaN    NaN  117  253  255  249  251  255  254  239  252  254]/255;
5190 
5191 <span class="comment">% Zoom In</span>
5192 idx = idx + 1;
5193 icons(idx).data(:,:,1) = <span class="keyword">...</span>
5194     [NaN,NaN,0.745082780193790,0.603906309605554,0.603906309605554,0.603906309605554,0.603906309605554,0.568627450980392,0.764705882352941,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,0.698023956664378,0.568627450980392,0.780392156862745,0.823514152742809,0.854886701762417,0.925474937056535,0.827450980392157,0.596063172350652,0.749019607843137,NaN,NaN,NaN,NaN,NaN,NaN;0.752925917448692,0.501945525291829,0.737239642938888,0.643121995880064,0.584313725490196,0.690180819409476,0.760769054703594,1,0.894102388036927,0.596063172350652,NaN,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.639215686274510,0.650965133134966,0.600000000000000,0.596063172350652,0.196078431372549,0.596063172350652,0.764705882352941,0.941161211566339,0.721553368429084,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.686274509803922,0.678431372549020,0.682337682154574,0.662745098039216,0.196078431372549,0.650965133134966,0.639215686274510,0.788235294117647,0.811764705882353,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.764705882352941,0.815671015487907,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.682337682154574,0.815671015487907,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.866666666666667,0.952941176470588,0.803921568627451,0.803921568627451,0.196078431372549,0.619592584115358,0.607843137254902,0.737239642938888,0.741176470588235,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.721553368429084,1,1,0.968627450980392,0.196078431372549,0.709803921568628,0.670588235294118,0.807827878233005,0.564690623331045,0.772549019607843,NaN,NaN,NaN,NaN,NaN;NaN,0.592156862745098,0.839200427252613,1,1,0.901945525291829,0.788235294117647,0.792141603723201,0.549004348821241,0.654901960784314,NaN,1,NaN,NaN,NaN,NaN;NaN,NaN,0.639215686274510,0.698023956664378,0.827450980392157,0.784298466468299,0.650965133134966,0.498054474708171,0.623529411764706,0.627435721370260,0.890196078431373,0.937254901960784,0.996063172350652,NaN,NaN,NaN;NaN,NaN,NaN,0.772549019607843,0.698023956664378,0.678431372549020,0.690180819409476,0.784298466468299,0.666651407644770,0.615686274509804,0.745082780193790,1,0.933318074311437,0.996063172350652,NaN,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.517631799801633,0.745082780193790,1,0.929411764705882,1,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.513725490196078,0.741176470588235,1,0.925474937056535,0.749019607843137;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.513725490196078,0.741176470588235,0.988220035095750,0.745082780193790;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.533318074311437,0.549004348821241,0.654901960784314;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.694117647058824,0.635278858625162,NaN;];
5195 icons(idx).data(:,:,2) = <span class="keyword">...</span>
5196     [1,1,0.745082780193790,0.670588235294118,0.670588235294118,0.670588235294118,0.670588235294118,0.576470588235294,0.760769054703594,1,1,1,1,1,1,1;1,0.701960784313725,0.650965133134966,0.917631799801633,0.968627450980392,0.992156862745098,1,0.898039215686275,0.603906309605554,0.741176470588235,1,1,1,1,1,1;0.756862745098039,0.588220035095750,0.929411764705882,0.858823529411765,0.807827878233005,0.854886701762417,0.894102388036927,1,0.976470588235294,0.596063172350652,1,1,1,1,1,1;0.721553368429084,0.823514152742809,0.878416113527123,0.835294117647059,0.831357289997711,0.274509803921569,0.815671015487907,0.894102388036927,1,0.807827878233005,0.670588235294118,1,1,1,1,1;0.670588235294118,0.901945525291829,0.890196078431373,0.890196078431373,0.878416113527123,0.274509803921569,0.854886701762417,0.831357289997711,0.937254901960784,0.933318074311437,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.937254901960784,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.878416113527123,0.937254901960784,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.988220035095750,0.862729839017319,0.862729839017319,0.274509803921569,0.815671015487907,0.803921568627451,0.921568627450980,0.854886701762417,0.670588235294118,1,1,1,1,1;0.721553368429084,0.737239642938888,1,1,0.988220035095750,0.274509803921569,0.898039215686275,0.882352941176471,0.980376897840848,0.627435721370260,0.768612191958496,1,1,1,1,1;1,0.603906309605554,0.847043564507515,1,1,0.984313725490196,0.960784313725490,0.976470588235294,0.662745098039216,0.658808270389868,1,0.615686274509804,1,1,1,1;1,1,0.650965133134966,0.701960784313725,0.854886701762417,0.874509803921569,0.780392156862745,0.564690623331045,0.615686274509804,0.627435721370260,0.733333333333333,0.713710231174182,0.600000000000000,1,1,1;1,1,1,0.772549019607843,0.705867093919280,0.686274509803922,0.694117647058824,0.784298466468299,0.674494544899672,0.572533760585946,0.498054474708171,0.741176470588235,0.709803921568628,0.600000000000000,1,1;1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.509788662546731,0.741176470588235,0.709803921568628,0.600000000000000,1;1,1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.505882352941176,0.741176470588235,0.721553368429084,0.501945525291829;1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.443152513923857,0.505882352941176,0.733333333333333,0.670588235294118;1,1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.454901960784314,0.435309376668956,0.658808270389868;1,1,1,1,1,1,1,1,1,1,1,1,1,0.694117647058824,0.647058823529412,1;];
5197 icons(idx).data(:,:,3) = <span class="keyword">...</span>
5198     [1,1,0.796078431372549,0.854886701762417,0.854886701762417,0.854886701762417,0.854886701762417,0.713710231174182,0.792141603723201,1,1,1,1,1,1,1;1,0.768612191958496,0.827450980392157,0.956847486076143,0.976470588235294,0.992156862745098,1,0.945098039215686,0.803921568627451,0.796078431372549,1,1,1,1,1,1;0.776455329213397,0.749019607843137,0.952941176470588,0.901945525291829,0.882352941176471,0.909788662546731,0.937254901960784,1,0.988220035095750,0.819607843137255,1,1,1,1,1,1;0.858823529411765,0.882352941176471,0.909788662546731,0.882352941176471,0.886259250782025,0.470588235294118,0.882352941176471,0.933318074311437,1,0.921568627450980,0.854886701762417,1,1,1,1,1;0.854886701762417,0.925474937056535,0.909788662546731,0.913725490196078,0.905882352941177,0.470588235294118,0.901945525291829,0.894102388036927,0.960784313725490,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.945098039215686,0.949004348821241,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.921568627450980,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.952941176470588,0.992156862745098,0.917631799801633,0.917631799801633,0.470588235294118,0.945098039215686,0.949004348821241,0.941161211566339,0.937254901960784,0.854886701762417,1,1,1,1,1;0.858823529411765,0.827450980392157,1,1,0.992156862745098,0.470588235294118,0.921568627450980,0.909788662546731,0.980376897840848,0.823514152742809,0.792141603723201,1,1,1,1,1;1,0.717647058823529,0.925474937056535,1,1,0.980376897840848,0.960784313725490,0.976470588235294,0.815671015487907,0.776455329213397,1,0.180392156862745,1,1,1,1;1,1,0.776455329213397,0.870572976272221,0.941161211566339,0.937254901960784,0.866666666666667,0.717647058823529,0.682337682154574,0.607843137254902,0.490211337453269,0.435309376668956,0.203921568627451,1,1,1;1,1,1,0.799984740978103,0.796078431372549,0.792141603723201,0.764705882352941,0.792141603723201,0.780392156862745,0.545098039215686,0.125490196078431,0.325505455100328,0.450995651178759,0.203921568627451,1,1;1,1,1,1,1,1,1,1,1,0.784298466468299,0.384313725490196,0.149019607843137,0.325505455100328,0.458838788433661,0.180392156862745,1;1,1,1,1,1,1,1,1,1,1,0.796078431372549,0.396093690394446,0.149019607843137,0.329411764705882,0.458838788433661,0.254917219806210;1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.407843137254902,0.149019607843137,0.298039215686275,0.580376897840848;1,1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.403936827649348,0.258823529411765,0.674494544899672;1,1,1,1,1,1,1,1,1,1,1,1,1,0.749019607843137,0.654901960784314,1;];
5199 
5200 <span class="comment">% Zoom Out</span>
5201 idx = idx + 1;
5202 icons(idx).data(:,:,1) = <span class="keyword">...</span>
5203     [NaN,NaN,0.745082780193790,0.603906309605554,0.603906309605554,0.603906309605554,0.603906309605554,0.568627450980392,0.764705882352941,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,0.698023956664378,0.568627450980392,0.780392156862745,0.823514152742809,0.854886701762417,0.925474937056535,0.827450980392157,0.596063172350652,0.749019607843137,NaN,NaN,NaN,NaN,NaN,NaN;0.752925917448692,0.501945525291829,0.737239642938888,0.643121995880064,0.584313725490196,0.690180819409476,0.760769054703594,1,0.894102388036927,0.596063172350652,NaN,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.639215686274510,0.650965133134966,0.600000000000000,0.596063172350652,0.643121995880064,0.596063172350652,0.764705882352941,0.941161211566339,0.721553368429084,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.686274509803922,0.678431372549020,0.682337682154574,0.662745098039216,0.650965133134966,0.650965133134966,0.639215686274510,0.788235294117647,0.811764705882353,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.764705882352941,0.815671015487907,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.196078431372549,0.682337682154574,0.815671015487907,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.603906309605554,0.866666666666667,0.952941176470588,0.760769054703594,0.760769054703594,0.760769054703594,0.760769054703594,0.760769054703594,0.737239642938888,0.741176470588235,0.603906309605554,NaN,NaN,NaN,NaN,NaN;0.682337682154574,0.721553368429084,1,1,0.968627450980392,0.870572976272221,0.709803921568628,0.670588235294118,0.807827878233005,0.564690623331045,0.772549019607843,NaN,NaN,NaN,NaN,NaN;NaN,0.592156862745098,0.839200427252613,1,1,0.901945525291829,0.788235294117647,0.792141603723201,0.549004348821241,0.654901960784314,NaN,NaN,NaN,NaN,NaN,NaN;NaN,NaN,0.639215686274510,0.698023956664378,0.827450980392157,0.784298466468299,0.650965133134966,0.498054474708171,0.623529411764706,0.627435721370260,0.890196078431373,0.937254901960784,0.996063172350652,NaN,NaN,NaN;NaN,NaN,NaN,0.772549019607843,0.698023956664378,0.678431372549020,0.690180819409476,0.784298466468299,NaN,0.615686274509804,0.745082780193790,1,0.933318074311437,0.996063172350652,NaN,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.517631799801633,0.745082780193790,1,0.929411764705882,1,NaN;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.513725490196078,0.741176470588235,1,0.925474937056535,0.749019607843137;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.705867093919280,0.513725490196078,0.741176470588235,0.988220035095750,0.745082780193790;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.701960784313725,0.533318074311437,0.549004348821241,0.654901960784314;NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.694117647058824,0.635278858625162,NaN;];
5204 icons(idx).data(:,:,2) = <span class="keyword">...</span>
5205     [1,1,0.745082780193790,0.670588235294118,0.670588235294118,0.670588235294118,0.670588235294118,0.576470588235294,0.760769054703594,1,1,1,1,1,1,1;1,0.701960784313725,0.650965133134966,0.917631799801633,0.968627450980392,0.992156862745098,1,0.898039215686275,0.603906309605554,0.741176470588235,1,1,1,1,1,1;0.756862745098039,0.588220035095750,0.929411764705882,0.858823529411765,0.807827878233005,0.854886701762417,0.894102388036927,1,0.976470588235294,0.596063172350652,1,1,1,1,1,1;0.721553368429084,0.823514152742809,0.878416113527123,0.835294117647059,0.831357289997711,0.843137254901961,0.815671015487907,0.894102388036927,1,0.807827878233005,0.670588235294118,1,1,1,1,1;0.670588235294118,0.901945525291829,0.890196078431373,0.890196078431373,0.878416113527123,0.870572976272221,0.854886701762417,0.831357289997711,0.937254901960784,0.933318074311437,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.937254901960784,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.274509803921569,0.878416113527123,0.937254901960784,0.670588235294118,1,1,1,1,1;0.670588235294118,0.937254901960784,0.988220035095750,0.819607843137255,0.819607843137255,0.819607843137255,0.819607843137255,0.819607843137255,0.921568627450980,0.854886701762417,0.670588235294118,1,1,1,1,1;0.721553368429084,0.737239642938888,1,1,0.988220035095750,0.952941176470588,0.898039215686275,0.882352941176471,0.980376897840848,0.627435721370260,0.768612191958496,1,1,1,1,1;1,0.603906309605554,0.847043564507515,1,1,0.984313725490196,0.960784313725490,0.976470588235294,0.662745098039216,0.658808270389868,1,1,1,1,1,1;1,1,0.650965133134966,0.701960784313725,0.854886701762417,0.874509803921569,0.780392156862745,0.564690623331045,0.615686274509804,0.627435721370260,0.733333333333333,0.713710231174182,0.600000000000000,1,1,1;1,1,1,0.772549019607843,0.705867093919280,0.686274509803922,0.694117647058824,0.784298466468299,1,0.572533760585946,0.498054474708171,0.741176470588235,0.709803921568628,0.600000000000000,1,1;1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.509788662546731,0.741176470588235,0.709803921568628,0.600000000000000,1;1,1,1,1,1,1,1,1,1,1,0.701960784313725,0.439215686274510,0.505882352941176,0.741176470588235,0.721553368429084,0.501945525291829;1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.443152513923857,0.505882352941176,0.733333333333333,0.670588235294118;1,1,1,1,1,1,1,1,1,1,1,1,0.705867093919280,0.454901960784314,0.435309376668956,0.658808270389868;1,1,1,1,1,1,1,1,1,1,1,1,1,0.694117647058824,0.647058823529412,1;];
5206 icons(idx).data(:,:,3) = <span class="keyword">...</span>
5207     [1,1,0.796078431372549,0.854886701762417,0.854886701762417,0.854886701762417,0.854886701762417,0.713710231174182,0.792141603723201,1,1,1,1,1,1,1;1,0.768612191958496,0.827450980392157,0.956847486076143,0.976470588235294,0.992156862745098,1,0.945098039215686,0.803921568627451,0.796078431372549,1,1,1,1,1,1;0.776455329213397,0.749019607843137,0.952941176470588,0.901945525291829,0.882352941176471,0.909788662546731,0.937254901960784,1,0.988220035095750,0.819607843137255,1,1,1,1,1,1;0.858823529411765,0.882352941176471,0.909788662546731,0.882352941176471,0.886259250782025,0.894102388036927,0.882352941176471,0.933318074311437,1,0.921568627450980,0.854886701762417,1,1,1,1,1;0.854886701762417,0.925474937056535,0.909788662546731,0.913725490196078,0.905882352941177,0.901945525291829,0.901945525291829,0.894102388036927,0.960784313725490,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.945098039215686,0.949004348821241,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.470588235294118,0.921568627450980,0.968627450980392,0.854886701762417,1,1,1,1,1;0.854886701762417,0.952941176470588,0.992156862745098,0.890196078431373,0.890196078431373,0.890196078431373,0.890196078431373,0.890196078431373,0.941161211566339,0.937254901960784,0.854886701762417,1,1,1,1,1;0.858823529411765,0.827450980392157,1,1,0.992156862745098,0.964690623331045,0.921568627450980,0.909788662546731,0.980376897840848,0.823514152742809,0.792141603723201,1,1,1,1,1;1,0.717647058823529,0.925474937056535,1,1,0.980376897840848,0.960784313725490,0.976470588235294,0.815671015487907,0.776455329213397,1,1,1,1,1,1;1,1,0.776455329213397,0.870572976272221,0.941161211566339,0.937254901960784,0.866666666666667,0.717647058823529,0.682337682154574,0.607843137254902,0.490211337453269,0.435309376668956,0.203921568627451,1,1,1;1,1,1,0.799984740978103,0.796078431372549,0.792141603723201,0.764705882352941,0.792141603723201,1,0.545098039215686,0.125490196078431,0.325505455100328,0.450995651178759,0.203921568627451,1,1;1,1,1,1,1,1,1,1,1,0.784298466468299,0.384313725490196,0.149019607843137,0.325505455100328,0.458838788433661,0.180392156862745,1;1,1,1,1,1,1,1,1,1,1,0.796078431372549,0.396093690394446,0.149019607843137,0.329411764705882,0.458838788433661,0.254917219806210;1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.407843137254902,0.149019607843137,0.298039215686275,0.580376897840848;1,1,1,1,1,1,1,1,1,1,1,1,0.803921568627451,0.403936827649348,0.258823529411765,0.674494544899672;1,1,1,1,1,1,1,1,1,1,1,1,1,0.749019607843137,0.654901960784314,1;];
5208 
5209 <span class="comment">% Pan</span>
5210 idx = idx + 1;
5211 icons(idx).data(:,:,1) = <span class="keyword">...</span>
5212     [NaN,NaN,NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.290196078431373,NaN,NaN,NaN,NaN,NaN,NaN,NaN;NaN,NaN,NaN,0.290196078431373,0.290196078431373,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,0.290196078431373,NaN,NaN,NaN,NaN;NaN,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,NaN,NaN,NaN;NaN,NaN,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,NaN,0.290196078431373,NaN;NaN,NaN,NaN,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,0.290196078431373;NaN,NaN,NaN,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373,1,1,0.290196078431373;NaN,0.290196078431373,0.290196078431373,0.290196078431373,0.290196078431373,1,1,1,1,1,1,1,0.290196078431373,1,0.991546501869230,0.290196078431373;0.290196078431373,1,1,0.290196078431373,0.290196078431373,1,1,1,1,1,1,1,0.996032654306859,0.986602578774701,0.975188830395972,0.290196078431373;0.290196078431373,1,1,1,0.290196078431373,1,1,1,1,1,1,0.991546501869230,0.981109330891890,0.968841077286946,0.290196078431373,NaN;NaN,0.290196078431373,1,1,1,1,1,1,1,0.996032654306859,0.986602578774701,0.975188830395972,0.962127107652400,0.947631036850538,0.290196078431373,NaN;NaN,NaN,0.290196078431373,1,1,1,1,1,0.991546501869230,0.981109330891890,0.968871595330739,0.955046921492332,0.939909971770810,0.923643854428931,0.290196078431373,NaN;NaN,NaN,0.290196078431373,1,1,1,0.996063172350652,0.986572060730907,0.975188830395972,0.962127107652400,0.947631036850538,0.931914244296941,0.915190356298161,0.290196078431373,NaN,NaN;NaN,NaN,NaN,0.290196078431373,1,0.991546501869230,0.981109330891890,0.968841077286946,0.955016403448539,0.939909971770810,0.923643854428931,0.906553749904631,0.888761730373083,0.290196078431373,NaN,NaN;NaN,NaN,NaN,NaN,0.290196078431373,0.975188830395972,0.962127107652400,0.947631036850538,0.931914244296941,0.915220874341955,0.897734035248341,0.879728389410239,0.290196078431373,NaN,NaN,NaN;NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.939909971770810,0.923643854428931,0.906553749904631,0.888761730373083,0.870634012359808,0.852231631952392,0.290196078431373,NaN,NaN,NaN;NaN,NaN,NaN,NaN,NaN,0.290196078431373,0.915190356298161,0.897734035248341,0.879758907454032,0.861478599221790,0.843076218814374,0.824887464713512,0.290196078431373,NaN,NaN,NaN;];
5213 icons(idx).data(:,:,2) = <span class="keyword">...</span>
5214     [0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894071869993134,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894071869993134,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.882536049439231,0.407843137254902;0.407843137254902,0.894102388036927,0.894102388036927,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860105287251087,0.407843137254902;0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.882566567483024,0.868223086900130,0.851468680857557,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860105287251087,0.842221713588159,0.822354467078660,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.894102388036927,0.882566567483024,0.868223086900130,0.851468680857557,0.832516975661860,0.811795223926146,0.789547570000763,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.894102388036927,0.894102388036927,0.888700694285496,0.875730525673304,0.860135805294881,0.842221713588159,0.822354467078660,0.800839246204318,0.777950713359274,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.894102388036927,0.882536049439231,0.868223086900130,0.851438162813764,0.832516975661860,0.811764705882353,0.789547570000763,0.766079194323644,0.741756313420310,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.860135805294881,0.842252231631952,0.822384985122454,0.800808728160525,0.777920195315480,0.754024567025254,0.729396505683986,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.811764705882353,0.789547570000763,0.766079194323644,0.741786831464103,0.716914625772488,0.691676203555352,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902,0.777920195315480,0.754024567025254,0.729396505683986,0.704371709773404,0.679133287556268,0.654261081864653,0.407843137254902,0.407843137254902,0.407843137254902,0.407843137254902;];
5215 icons(idx).data(:,:,3) = <span class="keyword">...</span>
5216     [0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799954222934310,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.709803921568628,0.799954222934310,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799954222934310,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.709803921568628,0.799984740978103,0.785091935606928,0.709803921568628;0.709803921568628,0.799954222934310,0.799984740978103,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776272220950637,0.756130312046998,0.709803921568628;0.709803921568628,0.799984740978103,0.799954222934310,0.799984740978103,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.785091935606928,0.766628519111925,0.744960708018616,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799954222934310,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776272220950637,0.756160830090791,0.733089188982986,0.707423514152743,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.799984740978103,0.785091935606928,0.766598001068132,0.744960708018616,0.720546272983902,0.693781948577096,0.665094987411307,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.799984740978103,0.799984740978103,0.792996108949416,0.776241702906844,0.756160830090791,0.733089188982986,0.707423514152743,0.679682612344549,0.650141145952545,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.799984740978103,0.785061417563134,0.766598001068132,0.744960708018616,0.720546272983902,0.693812466620890,0.665094987411307,0.634882124055848,0.603479056992447,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.756160830090791,0.733089188982986,0.707423514152743,0.679652094300755,0.650141145952545,0.619287403677424,0.587518120088502,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.693781948577096,0.665094987411307,0.634882124055848,0.603509575036240,0.571404592965591,0.538872358281834,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628,0.650141145952545,0.619256885633631,0.587518120088502,0.555230029755093,0.522697795071336,0.490638590066377,0.709803921568628,0.709803921568628,0.709803921568628,0.709803921568628;];
5217 <span class="comment">% [EOF] getIcons</span>
5218 
5219 <a name="_sub113" href="#_subfunctions" class="code">function guiparams = createGUIparams</a>
5220 <span class="comment">% Creates the guiparams structure with specified defaults.</span>
5221 
5222 <span class="comment">% Check for any stored prefs</span>
5223 <span class="comment">% --------------------------</span>
5224 <span class="comment">% Units and the graphics renderer are stored as persistent prefs</span>
5225 guiprefs = getpref(<span class="string">'VMT'</span>);
5226 
5227 <span class="comment">% Organized by GUI panels</span>
5228 <span class="comment">%%%%%%%%%%%%%%%%%%%</span>
5229 <span class="comment">% SHIPTRACKS PLOT %</span>
5230 <span class="comment">%%%%%%%%%%%%%%%%%%%</span>
5231 guiparams.horizontal_grid_node_spacing       = 1.0;
5232 guiparams.vertical_grid_node_spacing         = 0.4;
5233 
5234 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
5235 <span class="comment">% CROSS SECTION PLOT %</span>
5236 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%</span>
5237 guiparams.contours                           = <span class="string">''</span>; <span class="comment">% Set below</span>
5238 guiparams.contour                            = <span class="string">''</span>; <span class="comment">% Set below</span>
5239 guiparams.idx_contour                        = 1;
5240 guiparams.vertical_exaggeration              = 10;
5241 guiparams.vector_scale_cross_section         = 0.2;
5242 guiparams.horizontal_vector_spacing          = 1;
5243 guiparams.vertical_vector_spacing            = 1;
5244 guiparams.horizontal_smoothing_window        = 1;
5245 guiparams.vertical_smoothing_window          = 1;
5246 guiparams.plot_secondary_flow_vectors        = true;
5247 guiparams.allow_vmt_flip_flux                = true;
5248 guiparams.secondary_flows                    = <span class="string">''</span>; <span class="comment">% Set below</span>
5249 guiparams.secondary_flow_vector_variable     = <span class="string">''</span>; <span class="comment">% Set below</span>
5250 guiparams.idx_secondary_flow_vector_variable = 1;
5251 guiparams.include_vertical_velocity          = true;
5252 
5253 <span class="comment">%%%%%%%%%%%%%%%%%%</span>
5254 <span class="comment">% PLAN VIEW PLOT %</span>
5255 <span class="comment">%%%%%%%%%%%%%%%%%%</span>
5256 guiparams.depth_range_min                    = 0;
5257 guiparams.depth_range_max                    = inf;
5258 guiparams.vector_scale_plan_view             = 1;
5259 guiparams.vector_spacing_plan_view           = 1;
5260 guiparams.smoothing_window_size              = 1;
5261 guiparams.display_shoreline                  = false;
5262 guiparams.add_background                     = false;
5263 
5264 <span class="comment">%%%%%%%%%%%</span>
5265 <span class="comment">% OFFSETS %</span>
5266 <span class="comment">%%%%%%%%%%%</span>
5267 guiparams.water_surface_elevation            = 0.0;
5268 guiparams.bed_elevation                      = 0.0;
5269 guiparams.KMZ_vertical_offset                = 0.0;
5270 
5271 <span class="comment">%%%%%%%%%%%%%%%</span>
5272 <span class="comment">% DATA EXPORT %</span>
5273 <span class="comment">%%%%%%%%%%%%%%%</span>
5274 guiparams.beam_angle                         = 20.0;
5275 guiparams.magnetic_variation                 = 0.0;
5276 <span class="comment">% guiparams.wse                                = guiparams.water_surface_elevation;</span>
5277 guiparams.load_wse_tide_file                 = false;
5278 guiparams.output_auxiliary_data              = false;
5279 
5280 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
5281 <span class="comment">% Contour variables %</span>
5282 <span class="comment">%%%%%%%%%%%%%%%%%%%%%</span>
5283 idx = 1;
5284 guiparams.contours(idx).string   = <span class="string">'Streamwise Velocity (u)'</span>;
5285 guiparams.contours(idx).variable = <span class="string">'streamwise'</span>;
5286 idx = idx + 1;
5287 guiparams.contours(idx).string   = <span class="string">'Transverse Velocity (v)'</span>;
5288 guiparams.contours(idx).variable = <span class="string">'transverse'</span>;
5289 idx = idx + 1;
5290 guiparams.contours(idx).string   = <span class="string">'Vertical Velocity (w)'</span>;
5291 guiparams.contours(idx).variable = <span class="string">'vertical'</span>;
5292 idx = idx + 1;
5293 guiparams.contours(idx).string   = <span class="string">'Velocity Magnitude'</span>;
5294 guiparams.contours(idx).variable = <span class="string">'mag'</span>;
5295 idx = idx + 1;
5296 guiparams.contours(idx).string   = <span class="string">'East Velocity (E)'</span>;
5297 guiparams.contours(idx).variable = <span class="string">'east'</span>;
5298 idx = idx + 1;
5299 guiparams.contours(idx).string   = <span class="string">'North Velocity (N)'</span>;
5300 guiparams.contours(idx).variable = <span class="string">'north'</span>;
5301 idx = idx + 1;
5302 guiparams.contours(idx).string   = <span class="string">'Error Velocity'</span>;
5303 guiparams.contours(idx).variable = <span class="string">'error'</span>;
5304 idx = idx + 1;
5305 guiparams.contours(idx).string   = <span class="string">'Primary Velocity (zsd)'</span>;
5306 guiparams.contours(idx).variable = <span class="string">'primary_zsd'</span>;
5307 idx = idx + 1;
5308 guiparams.contours(idx).string   = <span class="string">'Secondary Velocity (zsd)'</span>;
5309 guiparams.contours(idx).variable = <span class="string">'secondary_zsd'</span>;
5310 idx = idx + 1;
5311 guiparams.contours(idx).string   = <span class="string">'Primary Velocity (Roz)'</span>;
5312 guiparams.contours(idx).variable = <span class="string">'primary_roz'</span>;
5313 idx = idx + 1;
5314 guiparams.contours(idx).string   = <span class="string">'Secondary Velocity (Roz)'</span>;
5315 guiparams.contours(idx).variable = <span class="string">'secondary_roz'</span>;
5316 idx = idx + 1;
5317 guiparams.contours(idx).string   = <span class="string">'Prim. Vel. (Roz, Downstream Comp.)'</span>;
5318 guiparams.contours(idx).variable = <span class="string">'primary_roz_x'</span>;
5319 idx = idx + 1;
5320 guiparams.contours(idx).string   = <span class="string">'Prim. Vel. (Roz, Cross-Stream Comp.)'</span>;
5321 guiparams.contours(idx).variable = <span class="string">'primary_roz_y'</span>;
5322 idx = idx + 1;
5323 guiparams.contours(idx).string   = <span class="string">'Sec. Vel. (Roz, Downstream Comp.)'</span>;
5324 guiparams.contours(idx).variable = <span class="string">'secondary_roz_x'</span>;
5325 idx = idx + 1;
5326 guiparams.contours(idx).string   = <span class="string">'Sec. Vel. (Roz, Cross-Stream Comp.)'</span>;
5327 guiparams.contours(idx).variable = <span class="string">'secondary_roz_y'</span>;
5328 idx = idx + 1;
5329 guiparams.contours(idx).string   = <span class="string">'Backscatter'</span>;
5330 guiparams.contours(idx).variable = <span class="string">'backscatter'</span>;
5331 idx = idx + 1;
5332 guiparams.contours(idx).string   = <span class="string">'Flow Direction (deg.)'</span>;
5333 guiparams.contours(idx).variable = <span class="string">'flowangle'</span>;
5334 idx = idx + 1;
5335 guiparams.contours(idx).string   = <span class="string">'Flow Vorticity (v,w)'</span>;
5336 guiparams.contours(idx).variable = <span class="string">'vorticity_vw'</span>;
5337 idx = idx + 1;
5338 guiparams.contours(idx).string   = <span class="string">'Flow Vorticity (zsd)'</span>;
5339 guiparams.contours(idx).variable = <span class="string">'vorticity_zsd'</span>;
5340 idx = idx + 1;
5341 guiparams.contours(idx).string   = <span class="string">'Flow Vorticity (roz)'</span>;
5342 guiparams.contours(idx).variable = <span class="string">'vorticity_roz'</span>;
5343 
5344 guiparams.contour = guiparams.contours(guiparams.idx_contour).variable;
5345 
5346 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5347 <span class="comment">% Secondary Flow Vector Variables %</span>
5348 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5349 idx = 1;
5350 guiparams.secondary_flows(idx).string   = <span class="string">'Transverse'</span>;
5351 guiparams.secondary_flows(idx).variable = <span class="string">'transverse'</span>;
5352 idx = idx + 1;
5353 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (zsd)'</span>;
5354 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_zsd'</span>;
5355 idx = idx + 1;
5356 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (Roz)'</span>;
5357 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_roz'</span>;
5358 idx = idx + 1;
5359 guiparams.secondary_flows(idx).string   = <span class="string">'Secondary (Roz, Cross-Stream Comp)'</span>;
5360 guiparams.secondary_flows(idx).variable = <span class="string">'secondary_roz_y'</span>;
5361 idx = idx + 1;
5362 guiparams.secondary_flows(idx).string   = <span class="string">'Primary (Roz, Cross-Stream Comp)'</span>;
5363 guiparams.secondary_flows(idx).variable  = <span class="string">'primary_roz_y'</span>;
5364 
5365 guiparams.secondary_flow_vector_variable = <span class="keyword">...</span>
5366     guiparams.secondary_flows(guiparams.idx_secondary_flow_vector_variable).variable;
5367 
5368 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5369 <span class="comment">% INTERNAL SETTINGS &amp; DEFAULTS %</span>
5370 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5371 <span class="comment">% Menu bar options</span>
5372 guiparams.presentation                       = true;
5373 guiparams.print                              = false;
5374 guiparams.set_cross_section_endpoints        = false;
5375 guiparams.unit_discharge_correction          = false;
5376 guiparams.start_bank                         = <span class="string">'auto'</span>;
5377 
5378 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'units'</span>)
5379     <span class="keyword">switch</span> guiprefs.units
5380         <span class="keyword">case</span> <span class="string">'metric'</span>
5381             guiparams.english_units          = false;
5382         <span class="keyword">case</span> <span class="string">'english'</span>
5383             guiparams.english_units          = true;
5384     <span class="keyword">end</span>
5385 <span class="keyword">else</span>
5386     guiparams.english_units                  = false;
5387 <span class="keyword">end</span>
5388 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'plotref'</span>)
5389     <span class="keyword">switch</span> guiprefs.plotref
5390         <span class="keyword">case</span> <span class="string">'dfs'</span>
5391             guiparams.plotref                 = <span class="string">'dfs'</span>;
5392         <span class="keyword">case</span> <span class="string">'hab'</span>
5393             guiparams.plotref                 = <span class="string">'hab'</span>;
5394     <span class="keyword">end</span>
5395 <span class="keyword">else</span>
5396     guiparams.plotref                         = <span class="string">'dfs'</span>;
5397 <span class="keyword">end</span>
5398 <span class="comment">% guiparams.eta                                 = guiparams.bed_elevation; % Used in HAB reference</span>
5399 <span class="comment">% guiparams.vertical_offset                     = guiparams.KMZ_vertical_offset;</span>
5400 
5401 <span class="keyword">if</span> ispref(<span class="string">'VMT'</span>,<span class="string">'renderer'</span>)
5402     guiparams.renderer                       = guiprefs.renderer;
5403 <span class="keyword">else</span>
5404     guiparams.renderer                       = <span class="string">'OpenGL'</span>;
5405 <span class="keyword">end</span>
5406 <span class="comment">% guiparams.plot_ship_tracks                   = false;</span>
5407 <span class="comment">% guiparams.plot_planview                      = false;</span>
5408 <span class="comment">% guiparams.plot_cross_section                 = false;</span>
5409 
5410 <span class="comment">% File location defaults</span>
5411 guiparams.ascii_path                        = pwd;
5412 guiparams.ascii_file                        = <span class="string">''</span>;
5413 guiparams.mat_path                          = pwd;
5414 guiparams.mat_file                          = <span class="string">''</span>;
5415 guiparams.tecplot_path                      = pwd;
5416 guiparams.tecplot_file                      = <span class="string">''</span>;
5417 guiparams.kmz_path                          = pwd;
5418 guiparams.kmz_file                          = <span class="string">''</span>;
5419 guiparams.multibeambathymetry_path          = pwd;
5420 guiparams.multibeambathymetry_file          = <span class="string">''</span>;
5421 guiparams.log_path                          = pwd;
5422 guiparams.log_file                          = <span class="string">''</span>;
5423 <span class="comment">% Avoids problems of not finding the MCR root when running as a standalone</span>
5424 <span class="comment">% application</span>
5425 <span class="keyword">if</span> isdeployed 
5426     guiparams.has_mapping_toolbox           = true;
5427 <span class="keyword">else</span>
5428     guiparams.has_mapping_toolbox               = <span class="keyword">...</span>
5429         ~isempty(dir(fullfile(matlabroot,<span class="string">'toolbox'</span>,<span class="string">'map'</span>)));
5430 <span class="keyword">end</span>
5431 
5432 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5433 <span class="comment">% IN MEMORY DATA STORAGE %</span>
5434 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
5435 guiparams.z                      = [];
5436 guiparams.A                      = [];
5437 guiparams.V                      = [];
5438 guiparams.Map                    = [];
5439 guiparams.savefile               = [];
5440 guiparams.iric_anv_planview_data = [];
5441 <span class="comment">% guiparams.zmin = []; % Don't need to store these?</span>
5442 <span class="comment">% guiparams.zmax = [];</span>
5443 <span class="comment">% guiprefs = getappdata(handles.figure1,'guiprefs');</span>
5444 guiparams.data_folder = <span class="string">''</span>;
5445 guiparams.data_files  = {<span class="string">''</span>};
5446 guiparams.gui_state   = <span class="string">'init'</span>;
5447 
5448 <span class="comment">% [EOF] createGUIparams</span>
5449 
5450 <a name="_sub114" href="#_subfunctions" class="code">function ShiptracksZoom_Callback(obj,evd,handles)</a>
5451 ticks_format(<span class="string">'%6.0f'</span>,<span class="string">'%8.0f'</span>); <span class="comment">%formats the ticks for UTM (when zooming)</span>
5452 
5453 <a name="_sub115" href="#_subfunctions" class="code">function ShiptracksPan_Callback(obj,evd,handles)</a>
5454 ticks_format(<span class="string">'%6.0f'</span>,<span class="string">'%8.0f'</span>); <span class="comment">%formats the ticks for UTM (when panning)</span>
5455 
5456 <span class="comment">% [EOF] VMT</span>
5457 
5458 
5459 
5460 <span class="comment">% --- Hidden keyboard commands</span>
5461 <a name="_sub116" href="#_subfunctions" class="code">function figure1_WindowKeyPressFcn(hObject, eventdata, handles)</a>
5462 <span class="comment">% Used to pass specific hidden keyboard commands to VMT. Currently, the</span>
5463 <span class="comment">% only use for this function is to open Beta support for SonTek M9 data.</span>
5464 <span class="comment">%</span>
5465 <span class="comment">% hObject    handle to figure1 (see GCBO)</span>
5466 <span class="comment">% eventdata  structure with the following fields (see FIGURE)</span>
5467 <span class="comment">%    Key: name of the key that was pressed, in lower case</span>
5468 <span class="comment">%    Character: character interpretation of the key(s) that was pressed</span>
5469 <span class="comment">%    Modifier: name(s) of the modifier key(s) (i.e., control, shift) pressed</span>
5470 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
5471 
5472 in1 = eventdata.Modifier; 
5473 in2 = eventdata.Key;
5474 
5475 <span class="keyword">if</span> ~isempty(in1) <span class="comment">% User pressed at least one modifier key</span>
5476     input = [in1{:} in2];
5477 <span class="keyword">else</span>
5478     input = in2;
5479 <span class="keyword">end</span>
5480 
5481 <span class="keyword">switch</span> input
5482     <span class="keyword">case</span> <span class="string">'f1'</span> <span class="comment">% Call the VMT UsersGuide</span>
5483         <a href="#_sub53" class="code" title="subfunction menuUsersGuide_Callback(hObject, eventdata, handles)">menuUsersGuide_Callback</a>(hObject, eventdata, handles)
5484         
5485     <span class="keyword">case</span> <span class="string">'controlalte'</span>
5486         VMT_BuildCustomFlatFile;
5487     <span class="keyword">otherwise</span>
5488         <span class="comment">%disp(input)</span>
5489 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Thu 30-Nov-2017 14:40:54 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>